(function(h){var n=window.AmazonUIPageJS||window.P,m=n._namespace||n.attributeErrors,l=m?m("MarsContentGridAssets",""):n;l.guardFatal?l.guardFatal(h)(l,window):l.execute(function(){h(l,window)})})(function(h,n,m){function l(c,k,b){b||(b=k,k=c,c=[]);var f=n.AmazonUIPageJS||n.P||h;f.now(k).execute("Registrant",function(a){a||f.when.apply(f,c).register(k,b)})}h.when("ContentGridModuleRegistration").execute("content-grid-controller.js",function(h){h.safeRegister(["A","videojs","MarsContentGridAccessibilityProcessor"],
"MarsContentGridController",function(k,b,f){return k.createClass({init:function(a,e){this._model=a;this._view=e;this._model.setVideoInstance(this._initVideoPlayer());this._model.getHidePlayButton()&&this._hidePlayButton();this._model.isAutoplay()&&this._bindEvents();var d=this;this._model.getVideoInstance().on("ready",function(){f.getInstance().requestProcessVideoJsMarkup(d._view.getParentContainer())})},_bindEvents:function(){this._bindAutoplayPause();this._bindAutoplayFullscreen();this._bindOnClick();
this._bindAutoplayStart()},_initVideoPlayer:function(){var a=this._model.getVideoURL(),e=/\.[0-9a-z]+$/i;"string"!==typeof a||e.test(a)||(a+=".mp4");var e=this._model.getParentID(),d=this._model.getVideoID(),g=document.createElement("video");g.type="video/mp4";g.id=d;g.setAttribute("webkit-playsinline","webkit-playsinline");g.setAttribute("playsinline","playsinline");document.getElementById(e).appendChild(g);e=b(g);e.src(a);e.controls(!0);e.addClass("video-js");e.addClass("content-grid-video");e.addClass("vjs-big-play-button");
e.addClass("vjs-big-play-centered");e.addClass("mako-cg-poster");e.poster(this._model.getPosterURL());return e},_bindAutoplayPause:function(){var a=this;this._model.getVideoInstance().onpause=function(){a._view.isVideoInViewport()&&a._model.setCustomerClickedVideo(!0)}},_bindAutoplayStart:function(){var a=this._model.getVideoInstance(),e=k.$;a.muted(!0);this._playPauseVideoInViewport();k.on.scroll(e.proxy(this._playPauseVideoInViewport,this))},_bindAutoplayFullscreen:function(){var a=this;this._model.getVideoInstance().onfullscreenchange=
function(){a._model.setCustomerClickedVideo(!0)}},_playPauseVideoInViewport:function(){var a=this._model.getVideoInstance();this._model.getCustomerClickedVideo()||(this._view.isVideoInViewport()?a.paused()&&a.play():a.paused()||a.pause())},_bindOnClick:function(){var a=this;this._model.getVideoInstance().on("click",function(){a._model.setCustomerClickedVideo(!0)})},_hidePlayButton:function(){var a=this._model.getVideoInstance();a.addClass("hide-big-play-button");a.addClass("mako-cg-play-button")},
destroy:function(){this._view=this._model=null}})})});"use strict";h.when("ContentGridModuleRegistration").execute("content-grid-factory.js",function(c){c.safeRegister(["A","MarsContentGridModel","MarsContentGridView","ready"],"MarsContentGridFactory",function(k,b,f){var a=[];return{getVideo:function(e){h.when("MarsContentGridController").execute("content-grid-video-factory",function(d){d=new d(new b(e),new f(e));a.push(d)});h.declare("mako-videojs-registered")},destroyAll:function(){a.forEach(function(a){a.destroy()});
a=[]}}})});"use strict";h.when("ContentGridModuleRegistration").execute("content-grid-interstitial.js",function(c){c.safeRegister("A MakoCommonCartHelper a-modal ContentGridConstants marsRefTagUtils ExtraDataHelper".split(" "),"MarsContentGridInterstitial",function(k,b,f,a,e,d){var g=k.$,c,l=k.createClass({create:function(a,d,b,e){this.interstitialName=a;this.clientName=d;this.isMobile=e;this.header=b;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){g('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",
g.proxy(this._handleAtcEvent,this,"form#addToCart",'input#add-to-cart-button[name\x3d"submit.add-to-cart"]'));g('input#installments-button[name\x3d"submit.installments"]').bind("click",g.proxy(this._handleAtcEvent,this,"form#addToCart",'input#installments-button[name\x3d"submit.installments"]'));g('input#buy-now-button[name\x3d"submit.buy-now"]').bind("click",g.proxy(this._handleAtcEvent,this,"form#addToCart",'input#buy-now-button[name\x3d"submit.buy-now"]'));g('input#buy-now-button[type\x3d"submit"]').bind("click",
g.proxy(this._handleAtcEvent,this,"form#buyNow",'input#buy-now-button[type\x3d"submit"]'))},_handleAtcEvent:function(d,e,f){try{var k=this;f.preventDefault();var c=g(d),q=g('#buybox select[name\x3d"quantity"]').val(),l,p,m;"form#buyNow"===d?(g("form#buyNowCheckout").length&&(c=g("form#buyNowCheckout")),l=c.find('input[type\x3d"hidden"][name\x3d"asin"]').val(),p=c.find('input[type\x3d"hidden"][name\x3d"offeringID"]').val(),m=c.find('input[type\x3d"hidden"][name\x3d"sessionID"]').val()):this.isMobile?
('input#installments-button[name\x3d"submit.installments"]'===e&&(c=g("form#mobile-installments")),m=c.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val(),l=c.find('input[type\x3d"hidden"][name\x3d"a"]').val(),p=c.find('input[type\x3d"hidden"][name\x3d"oid"]').val()):(l=c.find(e).val(),p=c.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),m=c.find('input[type\x3d"hidden"][name\x3d"session-id"]').val());var t=g(e).closest('.a-declarative[data-action\x3d"aw-mash"]');
if(t&&t.length){var r=t.data("awMash");m=r.inputs.verificationSessionID;l=r.inputs.a;p=r.inputs.oid;q=r.inputs.quantity}var u=b.createRequest(m,this.clientName),v=k._handleInstallmentandGifting(0,!1),v=k._handlePreRegistration(c,t,0,v);u.setAdditionalData(v);u.addAsinData(l,p,q).setReftag(this.baseReftag+"_ATC");u.sendRequest().done(function(a){k._showInterstitial()}).fail(function(d){h.log("An error has occurred with common cart handler with: "+d+" for asin: "+l+", offerListingId: "+p+", quantity: "+
q,a.FATAL_LOG_LEVEL,a.ATTRIBUTION);n.ue&&n.ue.count("MarsContentGrid_Interstitial_CartRequestError",1)})}catch(w){n.ue&&n.ue.count("MarsContentGrid_Interstitial_HandleATCError",1)}},_showInterstitial:function(){var a={dataStrategy:"preload",name:this.interstitialName,header:this.header},d="#"+this._getCamelCaseFromSnakeCase(this.interstitialName),b=this.baseReftag+"_InterstitialOpened";if(this.isMobile)h.when("a-secondary-view").execute(function(c){var k=c.get(this.interstitialName);k||(k=c.create(g(d),
a));k.show();e.send(b)});else{var c=f.get(this.interstitialName);c||(c=f.create(g(d),a));c.show();e.send(b)}},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},_handlePreRegistration:function(a,b,e,c){try{var k;if(b.length){var g=b.data("action");if(g){var f=b.data(g);f&&f.inputs&&(k=d.getObjectExtraData(f.inputs))}}else a.length&&(k=d.getFormExtraData(a[0]));k&&d.setObjectExtraData(c,k,e)}catch(q){h.log("Pre Registration UATC custom param inclusion failed: "+
q)}return c},_handleInstallmentandGifting:function(a,d){var b={};d&&(d=g("#installments-programId"))&&d.val()&&(b["isInstallmentsSelected."+a]=1,b["installments-programId."+a]=d.val(),b["installmentsProgram."+a]=d.val());if(g("#gift-wrap").is(":checked"))for(d=0;d<=a;d++)b["isToBeGiftWrapped."+d]="true";return b}});return{getInstance:function(){c||(c=new l);return c}}})});"use strict";h.when("ContentGridModuleRegistration").execute("content-grid-model.js",function(c){c.safeRegister(["A"],"MarsContentGridModel",
function(c){return c.createClass({init:function(b){this._videoURL=b.URL;this._videoID=b.ID;this._autoplay="string"===typeof b.autoplay?"true"===b.autoplay:b.autoplay;this._hidePlayButton="string"===typeof b.hidePlayButton?"true"===b.hidePlayButton:b.hidePlayButton;this._customerClickedVideo=!1;this._posterURL=b.posterURL;this._parentID=b.parentID},getVideoInstance:function(){return this._videoInstance},getSWFURL:function(){return SWF_URL},getVideoURL:function(){return this._videoURL},getVideoID:function(){return this._videoID},
getHidePlayButton:function(){return this._hidePlayButton},getCustomerClickedVideo:function(){return this._customerClickedVideo},getPosterURL:function(){return this._posterURL},getParentID:function(){return this._parentID},isAutoplay:function(){return this._autoplay},setVideoInstance:function(b){this._videoInstance=b},setCustomerClickedVideo:function(b){this._customerClickedVideo=b}})})});"use strict";h.when("ContentGridModuleRegistration").execute("content-grid-view.js",function(c){c.safeRegister(["A"],
"MarsContentGridView",function(c,b){var f=c.$;return c.createClass({init:function(a){this._parentContainer=document.getElementById(a.parentID)},getParentContainer:function(){return this._parentContainer},isVideoInViewport:function(){try{var a=this.getParentContainer();if(a&&a.getBoundingClientRect){var b=f(n),d=this.getParentContainer().getBoundingClientRect();return 0<d.bottom&&0<d.right&&d.top<b.height()&&d.left<b.width()}}catch(c){}return!1}})})});h.when("ContentGridModuleRegistration").execute("content-grid-modal.js",
function(c){c.safeRegister(["A","marsRefTagUtils"],"MarsContentGridModal",function(c,b){var f,a=c.createClass({create:function(a,d,g,f){var l=c.$,l=l("#"+d.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})),n=l.parent(),m={name:d};f?c.capabilities.isAmazonApp&&(m.hideHeader=!0,h.when("a-secondary-view").execute(function(a){n.attr("data-a-secondary-view",JSON.stringify(m))})):h.when("a-modal").execute(function(a){m.header=g;m.width="750";n.attr("data-a-modal",JSON.stringify(m))});l.one("click",
function(){b.send("mars_content_grid_"+d+"_"+a)})}});return{getInstance:function(){f||(f=new a);return f}}})});"use strict";h.when("ContentGridModuleRegistration").execute("content-grid-accessibility-processor.js",function(c){c.safeRegister(["A"],"MarsContentGridAccessibilityProcessor",function(c,b){var f=c.$,a,e=c.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=[];this.hasPageLoaded||this._bindPageReadyEvents()},
requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(a){!a||!a instanceof f||!a instanceof HTMLElement||(a instanceof HTMLElement&&(a=f(a)),this.hasPageLoaded?this._processVideoJsMarkup(a):this.videoJsContainers.push(a))},_bindPageReadyEvents:function(){var a=this;h.when("ready").execute(function(){a.hasPageLoaded=!0;a.doProcessMarkup&&a._processLinksForAriaLabel();if(a.videoJsContainers.length){for(var b=
0;b<a.videoJsContainers.length;b++)a._processVideoJsMarkup(a.videoJsContainers[b]);a.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){f(".content-grid-row-wrapper").find("a[title]").each(function(a,b){a=f(b);a.attr("aria-label")||a.attr("aria-label",a.attr("title"))})},_processVideoJsMarkup:function(a){f(a).find("button.vjs-menu-button[title]").each(function(a,b){b=f(b);a=b.attr("title");b.attr("aria-label")||b.attr("aria-label",a);b=b.parent().find(".vjs-menu-content");b.attr("aria-label")||
b.attr("aria-label",a)})}});return{getInstance:function(){a||(a=new e);return a}}})});"use strict";h.when("ContentGridModuleRegistration").execute(function(c){c.safeRegister([],"ContentGridConstants",{ATTRIBUTION:"MarsContentGridAssets",FATAL_LOG_LEVEL:"FATAL"})});"use strict";h.when("ContentGridModuleRegistration").execute("marsRefTagUtils.js",function(c){c.safeRegister(["A"],"marsRefTagUtils",function(c){var b=c.$;return{send:function(c,a){if(!c)throw Error("refTag is not defined");b.get((a||"/gp/product/ajax-handlers/reftag.html")+
"/ref\x3d"+c)}}})});"use strict";h.execute("mako-vse-light-player.js",function(){function c(c,b,f){f===m&&(f=b,b=c,c=[]);h.now(b).execute("Registrant",function(a){a===m&&h.when.apply(h,c).register(b,f)})}c(["A","Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(c,b,f){var a=["videoUrl"];return{render:function(e,d){if("undefined"===typeof d)throw"Argument required: playerParentId";for(var g=0;g<a.length;g++){var h=a[g];if(!c.$.trim(e[h]))throw"Argument required: options."+
h;}e={video:{videoURL:e.videoUrl,imageURL:e.imageUrl},locale:e.locale||b.getLocale(),marketplaceID:e.marketplaceID||b.getMarketplaceId(),page:e.pageType||b.getPageType(),placement:e.placement||"placement_"+d,requester:"Mako",clientPrefix:"mako"+d};f.render(e,d,b.getVideoComponentEndpointHost())}}});c(["A"],"VSEPlayerIntegrationWithMako",function(c){return{render:function(b,f,a){c.ajax(a+"/vap/ew/subcomponent/vseplayer",{params:b,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",
withCredential:!0,timeout:4E3,success:function(a){var b=c.$("#"+f);if(1===b.length)b.html(a);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+b.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");},error:function(a){throw"Error calling VSE player endpoint. "+("string"===typeof a)?a:"";}})}}});c(["A"],"Mako.VSEHelper",
function(c){var b=n.opt||{};return{getMarketplaceId:function(){return b.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return b.language||"en_US"},getPageType:function(){return b.pageType||"Unknown"},getVideoComponentEndpointHost:function(){var b=n.location.host,a="https://www.amazon.com";0<=b.indexOf(".amazon.")&&(a="https://"+b);return a}}})});l([],"ContentGridModuleRegistration",function(){return{safeRegister:l}})});