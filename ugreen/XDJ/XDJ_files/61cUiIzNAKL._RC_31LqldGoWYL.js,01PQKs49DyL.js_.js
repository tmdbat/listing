(function(v){var q=window.AmazonUIPageJS||window.P,da=q._namespace||q.attributeErrors,g=da?da("DetailPageImageBlockAssets",""):q;g.guardFatal?g.guardFatal(v)(g,window):g.execute(function(){v(g,window)})})(function(v,q,da){v.register("postMetric",function(){return{postCountMetric:function(g){if("undefined"!==typeof g){var b=q.ue;if(b){var a=b.count(g)||0;b.count(g,a+1)}}},postTimeMetric:function(g,b){if("undefined"!==typeof g&&"undefined"!==typeof b){var a=q.ue;a&&a.count(g,b)}},emitNexusMetric:function(g){q.ue&&
ue.event&&ue.event(g,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(g,b,a,f,l,d,n,c){return{eventSource:"IBCarousel",placementContext:c,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:g,intPayload:b,videoAsin:a,videoAsinList:"",groupType:f,pageUrl:l,pageAsin:d,weblabIds:n}}}});"use strict";v.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});v.register("postEarlyMetric",function(){return null});"use strict";
v.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(g,b,a,f){g=g.extend(!0,{},a,f);var l=new b(g);v.register("ImageBlockAPI",function(){return l.api});return l});"use strict";v.when("A","jQuery").execute(function(g,b){g.on("a:image:load:landingImage",function(){q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});g.loadDynamicImage(b("#landingImage"))});"use strict";v.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(g){function b(a){a&&(v.load.js(a),q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",q.parseInt(performance.now())))}function a(a){a&&v.load.css(a)}var f=g.airyConfig;f===da?v.when("ImageBlockBTF").execute(function(l){f=l.airyConfig;b(f.jsUrl);a(f.cssUrl)}):(b(f.jsUrl),a(f.cssUrl))});"use strict";v.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(g,
b,a,f,l){var d={};return function(n){var c=this;c.dispatch=function(a,b){var c=d[a];f.isDefined(c)&&g.each(c,function(a,d){d.call(q,b)})};c.register=function(a,b){f.isDefined(d[a])||(d[a]=[]);"function"===typeof b&&d[a].push(b)};c.model=new b(n,c);c.view=new a(n,c,c.model);c.api=new l(n,c,c.model);c.init=function(){c.model.init();c.view.init()};c.init()}});"use strict";v.when("A","imageBlockUtils").register("ImageBlockModel",function(g,b){function a(a,d,c,l,g,k){b.isDefined(a)&&(m.type=a);b.isDefined(d)&&
(m.index=d);b.isDefined(c)&&(m.thumbnailIndex=c);b.isDefined(l)&&(m.variant=l);b.isDefined(g)&&(m.color=g);m.shoppableScene=k||null}function f(b){a("image",0,0,"MAIN",b||c.landingAsinColor||c.defaultColor,null)}function l(b){b=b.data;K=g.copy(m);a(b.type,b.index,b.thumbnailIndex,b.variant,b.color,b.shoppableScene)}function d(a){l(a);a=g.copy(a);a.data=g.copy(m);G.dispatch("updateView",a)}function n(){K=g.copy(m);f(m.color)}var c,G,m={},K={},A,q;return function(a,b){G=b;c=a;G.register("updateSelection",
d);G.register("updateModel",l);G.register("resetModel",n);this.init=function(){f()};this.getCurrentItem=function(){return g.copy(m)};this.getPreviousItem=function(){return g.copy(K)};this.setCurrentEvent=function(a){A=a};this.getCurrentEvent=function(){return A};this.setImmersiveViewModalInstance=function(a){q=a};this.getImmersiveViewModalInstance=function(){return q};this.updateTitle=function(a){c.title=a}}});"use strict";v.when("ImageBlockBTF","postMetric").execute(function(g,b){function a(a,b,
f,c,G){function m(a){"click"===a.type&&c.postCountMetric("thumbClick");"click"===a.type&&r.overrideAltImageClickAction?p.dispatch("thumbActionClick",a):p.dispatch("updateSelection",a)}function K(a){r.useClickZoom||p.dispatch("imageClick",a)}function A(a){r.useClickZoom||p.dispatch("imageHover",a)}function J(a){p.dispatch("button360Click",a)}function z(b){!f.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(E.update(b),"swatchHover"!==b.type&&w.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&
c.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):(E.render(b.data.color,!1,b.onload),b={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",b))}function C(a){p.dispatch("resize",a)}function O(a){f.selectThumbnail(a,F)}function P(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"],alwaysInteractive:!0}]})}function L(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===g.useIV?v.when("a-modal").execute(function(){P()}):P();r.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],m);a.declarative("thumb-action",["click"],m);a.declarative("main-image-click",
["click"],K);a.declarative("main-image-click",["mouseenter","mouseleave"],A);a.declarative("button-360-click",["click"],J);a.on("resize",C)}function k(a){var b=a.data,d;b&&"ingress"!==b.type&&"click"===a.type&&(d=a);return d}function y(a){var b=w.getCurrentItem(),d={type:"click"};d.$declarativeParent=a;d.data=b;return d}var E,r,p,w,F;return function(a,c,g){E=this;r=a;p=c;w=g;F=b("#imageBlock #altImages ul");var f=b("#imageBlock .canvas"),h=b("#main-image-container"),e;E.subViews=[];for(c=0;c<G.length;c++)E.subViews.push(new G[c](a,
g,E,p));E.render=function(a,c,k){var g=0;F.find(".item").remove();a=a||w.getCurrentItem().color;b.each(E.subViews,function(b,e){g=e.render(a,g,f,F,h,c,k)||g});var l=F.find(".a-button-selected").closest(".a-declarative");e=y(l)};E.init=function(){F=b("#imageBlock #altImages ul");var a=F.find(".a-button-selected").closest(".a-declarative"),e=a.data("action"),a=a.data(e)||{};a.color=r.landingAsinColor||r.defaultColor;p.dispatch("updateModel",{data:a});E.render(a.color,!0);r.isDebug&&q.console&&console.log(r);
p.register("updateView",z);p.register("selectThumbnail",O);L()};E.update=function(a){b.each(E.subViews,function(b,e){e.update(a)});r.usePeekHover&&("mouseleave"===a.type?p.dispatch("updateSelection",e):"click"===a.type&&(e=k(a)||e))}}}var f=["A","jQuery","imageBlockUtils","postMetric"].concat(g.views);v.when.apply(v,f).register("ImageBlockView",function(){for(var b=arguments[0],d=arguments[1],g=arguments[2],c=arguments[3],f=[],m=4,K=arguments.length;m<K;m++)f.push(arguments[m]);return a(b,d,g,c,f)})});
"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(g,b,a,f,l,d,n){function c(e,d,h,c){if(!a.isjQueryObjDefined(e.find(".a-button-selected"))){var k=w.getCurrentItem();if(!c||"chromeless-video"!==k.type||!p.autoplayVideo){c=0;"image"===k.type&&(c=Math.max(K(k.color,k.variant),0));var g=d+c;g>=h&&(c=0,g=d);d=a.getImageHash(k.color,c,p);-1!==d&&(F.dispatch("updateModel",{data:{index:c,
thumbnailIndex:g,variant:d.variant,type:"image",shoppableScene:d.shoppableScene}}),d=e.find(".item").get(g),a.selectGivenThumbnail(b(d),e))}}}function G(e,h,k){h=p.colorImages&&p.colorImages[h];var g=e;a.isDefined(h)&&(b.each(h,function(b,d){e<p.maxAlts&&(a.createThumbnail({type:"image",index:b,thumbnailIndex:e,variant:d.variant,shoppableScene:d.shoppableScene},d.thumb,M,"imageThumbnail"),e++)}),d.isEnabled&&n.logAltImgRequestPlacedOnThumbnails(b,d,w),c(M,g,e,k));return e}function m(e,d){if("image"===
e.type){var h=b("#image-canvas-caption #canvasCaption"),c,k=p.staticStrings,g=p.colorImages,f=e.color,l=e.index;a.isShoppableScenesEnabled()&&e.shoppableScene?c=k.clickSceneTagsToShopProducts:d&&p.useIV?c=k.clickToExpand:g[f]&&g[f][l].hiRes&&p.useHoverZoom?(c=p.useHoverZoomIpad?k.touchToZoom:p.useClickZoom?k.clickToZoom:k.rollOverToZoom,p.hoverZoomIndicator&&(c="\x3cimg src\x3d'"+p.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+c)):p.useIV&&(c=k.clickToExpand);h.html(c)}}function K(b,e){return a.getIndexForVariant(b,
e,p)}function A(e,d){var h="a-dynamic-image";if(!p.acEnabled){var c;b.each(e.main,function(b,e){a.isDefined(c)||(c=parseFloat(e[1]/e[0])<=parseFloat(p.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});h+=c}var k=a.getMaxDimensionsOfMainImage(e.main,S,p),g=k[0],f=k[1],k=b("\x3cdiv\x3e\x3c/div\x3e"),g={"max-height":g,"max-width":f};k.addClass(h).css(g).attr({"data-old-hires":e.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",e.main);return k}function q(a){var b=
t.find(".swatchHoverExp");a=A(a);b.find(".imgTagWrapper").html(a);g.loadImageManually(a);return b}function z(a){var b=S.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");p.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(p.imgTagWrapperClasses)}function C(b,e){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){a.isDefined(e)&&l.postCountMetric("mainImageUpdateOnTwisterVariationClick");var h=a.getImageHash(b.color,b.index,p);if(-1===h)return h=
{data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},a.lazyLoadingRequired(b,w,p)?L(b,!1,e):(F.dispatch("updateModel",h),a.showUnavailable(b.color)),-1;var c=t.find(".item.itemNo"+b.thumbnailIndex);if(!a.isjQueryObjDefined(c)){var c=b.thumbnailIndex,k=A(h,e),f;if(a.isShoppableScenesEnabled()&&h.shoppableScene){f="desktop-dp-atf-ib-shoppablescenes-tags-"+c;"function"==typeof uet&&uet("bb",f,{wb:1});k.attr("data-a-image-name","shoppable-scene");var r=t.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
r.addClass("celwidget").attr("cel_widget_id",f);r.children("span").css("display","inline-block");F.dispatch("initialize-shoppable-scene",{index:c,shoppableScene:h.shoppableScene,imageSource:h.hiRes,$tagPlaceholder:r.find(".mirai-scene-tag-placeholder"),$viewProductsButton:r.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",f,{wb:1});f=r}else f=t.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");f.addClass("image item itemNo"+c+" maintain-height");
f.find(".placeHolder").replaceWith(k);t.find(".list").append(f);g.loadImageManually(k);c=f}z(c);F.dispatch("loadMagnifier");m(b);p.useIV&&a.isDefined(h.hiRes)&&c.css("cursor","pointer");b.isUserGenerated&&(c=w.getPreviousItem(),k=b.variant,a.isDefined(k)&&c.thumbnailIndex!==b.thumbnailIndex&&(d.isEnabled&&n.logAltImgRequestServed(d),l.postCountMetric("ImageThumbnailSelectedVariant:"+k),0===k.indexOf("IG")&&(l.postCountMetric("IGImageSelectedVariant:"+k),l.postCountMetric("IGImageSelectedEvent:"+b.interaction))));
g.trigger("dp:image-block:update",h)}}function O(b){var e=Math.max(K(b.color,w.getCurrentItem().variant),0),e=a.getImageHash(b.color,e,p);if(-1===e)return a.lazyLoadingRequired(b,w,p)?a.lazyLoadOnHoverEnabled(p)&&(P(".3",!0),a.spinner(t,!0),g.delay(function(){w.getCurrentEvent().data===b&&L(b,!0)},500)):a.showUnavailable(b.color),-1;var h=q(e);l.postCountMetric("mainImageUpdateOnTwisterVariationHover");z(h);g.trigger("dp:image-block:update",e)}function P(a,e){e?t.css("opacity",a):b("#imageBlock").css("opacity",
a)}function L(b,e,d){N=e;h=d;var c=b.color,g=p.colorToAsin[c];if(g&&g.asin){var n={};n.params={asin:g.asin,productGroupID:p.productGroupID,color:c};n.success=function(f){f?(l.postCountMetric("lazyloadImageBlockOnTwisterUpdateSuccess"),a.ajaxState(g.asin,"success"),p.colorImages[c]=f.colorImage,a.isDefined(p.spin360ColorEnabled)&&(p.spin360ColorEnabled[c]=f.enable360),c===b.color&&(e&&N?(l.postCountMetric("lazyloadImageBlockOnTwisterHoverSuccess"),b===w.getCurrentEvent().data&&(k(b),O(b))):(l.postCountMetric("lazyloadImageBlockOnTwisterClickSuccess"),
f={type:"updatedData",data:w.getCurrentItem(),onload:d||h},F.dispatch("updateView",f))),v.register(a.rankedImagesReadyEvent(g.asin))):(l.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail"),a.ajaxState(g.asin,"fail"))};n.error=function(){l.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail");a.ajaxState(g.asin,"fail")};n.indicator=a.spinner(t);a.ajaxState(g.asin,void 0)&&"fail"!==a.ajaxState(g.asin,void 0)||(e?l.postCountMetric("lazyloadImageBlockOnTwisterHover"):l.postCountMetric("lazyloadImageBlockOnTwisterClick"),
P(".3",e),f.load("/gp/product/features/apparel-main-image/ranked-images.html",n),a.ajaxState(g.asin,"sent"));return p.colorImages&&p.colorImages[c]}}function k(e,h){a.lazyLoadingRequired(e,w,p)||(b("#imageBlock").css("opacity","1"),t.css("opacity","1"),a.spinner(t,!1),t.find("li").removeClass("selected"),b("#image-canvas-caption #canvasCaption").empty(),a.hideUnavailable(),h&&t.find(".list .item").remove())}function y(){var e=t.find(".item .imgTagWrapper"),h=a.getContainerHeight(S,p.holderRatio,p.holderMaxHeight);
0<h&&(S.height(h),e.height(h));t.find("img.a-dynamic-image").each(function(){var e=b(this);e.data("a-manual-replacement")&&g.loadDynamicImage(this);var h=e.data("a-dynamic-image"),h=a.getMaxDimensionsOfMainImage(h,S,p);e.css({"max-height":h[0]+"px","max-width":h[1]+"px"})})}function E(a){m(w.getCurrentItem(),"mouseenter"===a.type)}var r,p,w,F,M,t,S,N,h,e;return function(b,h,d,c){r=this;p=b;w=h;F=c;p.colorImages[p.landingAsinColor]=p.colorImages[p.defaultColor];r.render=function(b,h,d,c,g,f,l){t=d;
M=c;S=g;e=G(h,b,f);f||(b=w.getCurrentItem(),a.lazyLoadingRequired(b,w,p)&&F.dispatch("updateModel",{data:{type:"lazy-loaded"}}));k(w.getCurrentItem(),!f);C(w.getCurrentItem(),l);return e};r.update=function(b){var h=b.data;w.setCurrentEvent(b);"ingress"!==h.type&&k(b.data,!1);"swatchHover"===b.type?h.color===w.getCurrentItem().color?C(w.getCurrentItem()):b.captured||-1===O(h)||(b.captured=!0):"image"===h.type&&(h.interaction=b.type,h.isUserGenerated=!0,"mouseenter"===b.type&&l.postCountMetric("dpcc_imageThumbHovered_"+
(h.thumbnailIndex+1)+"_"+e),C(h),p.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,M),"click"===b.type&&(l.postCountMetric("dpcc_imageThumbClicked_total"),l.postCountMetric("dpcc_imageThumbClicked_"+(h.thumbnailIndex+1)+"_"+e))))};p.overrideAltImageClickAction&&a.addTag("clickEnabledOnAltImages");F.register("imageHover",E);F.register("resize",y)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(g,b,a,f,l,d){function n(a){P?a.css("cursor","url('"+A.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function c(b){var d=b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(a.isDefined(d))for(var d=d[1].split("_"),c=0;c<d.length;c++){var g=d[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);a.isDefined(g)&&(b[g[1]]=parseInt(g[2],10))}return b}function G(m,k){function y(){var a;k.useClickZoom?(a=k.offsetInClickZoom,a=[Math.min(1,
Math.max(0,D[0]-(B[0]+a))/(B[2]-2*a)),Math.min(1,Math.max(0,D[1]-(B[1]+a))/(B[3]-2*a))]):a=e&&e.updatePosition();if(a&&h&&h.detailSize){var b=[h.detailSize[0]-h.rect.width,h.detailSize[1]-h.rect.height];g.capabilities.rtl?h.detailImage.get(0).style.right=-(a[0]*b[0])+"px":h.detailImage.get(0).style.left=-(a[0]*b[0])+"px";h.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function E(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function r(a){var e=R?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:
"";D=R?[e.pageX,e.pageY]:[a.pageX,a.pageY];if(g.capabilities.rtl){var h=b(q).width();D=R?[h-e.pageX,e.pageY]:[h-a.pageX,a.pageY]}}function p(a){R&&a.preventDefault();r(a);k.useClickZoom?a=[B[0],B[1],B[0]+B[2],B[1]+B[3]]:(a=e?e.offset:m.offsetParent().offset(),a=A.acEnabled?[a.left,a.top,C.width()+a.left,C.height()+a.top]:[I[0]+a.left,I[1]+a.top,I[0]+I[2]+a.left,I[1]+I[3]+a.top]);D[0]<a[0]||D[1]<a[1]||D[0]>=a[2]||D[1]>=a[3]||A.acEnabled&&!E(m)?(k.fadeMagnifier?W||(W=!0,O=setTimeout(function(){w(!0)},
500)):k.useClickZoom||w(),x&&(x=!1,clearTimeout(X))):(x||(x=!0,X=setTimeout(function(){f.postCountMetric("dppc_hoverZoomOpened");l.isEnabled&&d.logHoverZoomRequestServed(l)},1E3)),k.fadeMagnifier&&W&&(W=!1,clearTimeout(O)),y())}function w(a){a&&t.suppressMagnifier(!0);if(v&&(h&&h.hide(),e&&(e.destroy(),e=null),v=!1,R?(m.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),b(document).trigger("disengaged.magnifier")):b(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
K(),a))m.one("click.magnifier touchstart.magnifier",function(a){G(a,!0)})}function G(a,d){d&&t.suppressMagnifier(!1);if(!v&&!aa&&(0===fa&&(f.postCountMetric("dppc_hoverTime",new Date-(q.ue&&q.ue.t0||0)),fa=1),ea[U]||(f.postCountMetric("dppc_hoverMain"),ea[U]=1),I=[m.position().left,m.position().top,m.width(),m.height()],U&&(r(a),h?h.refit().show():h=new J,k.useClickZoom||(e=e||new ga),B=h.getWindowSize(),y()),v=!0,R?(m.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",
p).bind("touchend.magnifier",w),b(document).trigger("engaged.magnifier")):(A.acEnabled?C.unbind("mousemove.magnifier"):m.unbind("mousemove.magnifier"),b(document).trigger("engaged.magnifier").bind("mousemove.magnifier",p)),d)){var c=b("#zoomWindow");if(0<c.length)c.one("click.magnifier touchend.magnifier",function(a){w(!0)})}}function K(){k.useHoverZoom&&(R?m.bind("touchstart.magnifier touchmove.magnifier",G):A.acEnabled?E(m)&&C.bind("mousemove.magnifier",G):m.bind("mousemove.magnifier",G))}var t=
this,C=m.offsetParent(),z={detailImageUrl:m.attr("data-old-hires"),location:"over",locationElement:m,prelaod:"ready",zIndex:50,offsetInClickZoom:50};k=b.extend(z,k);k.adjustment=[10,0,-10,0];var h=null,e=null,D=null,I=null,B=null,H={"null":1,"":1,undefined:1},v=!1,aa=!1,U=k.detailImageUrl,R=k.useHoverZoomIpad||0,fa=0,ea={},ga=function(){function a(b){var e=Math.round(Math.min(m.width(),h.rect.width/b));b=Math.round(Math.min(m.height(),h.rect.height/b));f.css({width:e,height:b});d=[e,b]}var e=this,
d=[0,0],c=(h.detailSize&&h.detailSize[0]||5E8)/I[2],g=(h.detailSize&&h.detailSize[1]||5E8)/I[3],c=g>c?g:c;b("#magnifierLens").remove();var f=b("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});k.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+k.generalImageUrls.zoomLensBackground+")"});A.showMagnifierOnHover?n(f):f.css("cursor","pointer");e.updatePosition=function(){var a=[I[2]-d[0],I[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(D[0]-d[0]/2-I[0]-e.offset.left)/a[0])),
h=0>=a[1]?.5:Math.max(0,Math.min(1,(D[1]-d[1]/2-I[1]-e.offset.top)/a[1])),c=I[0]+Math.round(b*a[0]),a=I[1]+Math.round(h*a[1]);f.get(0).style.left=c+"px";f.get(0).style.top=a+"px";return[b,h]};e.destroy=function(){f.remove()};e.offset=m.offsetParent().offset();a(c);e.updatePosition();f.appendTo(m.parent());h.detailImage[0].complete||h.detailImage.load(function(){var b=h.detailImage.width()/I[2];a(b);e.updatePosition()})};ga.preload=function(){t.preload(k.generalImageUrls.lensBackgroundUrl)};var J=
function(){function e(){var h={};if("over"===k.location){var h=k.useClickZoom,c={},f=b("#leftCol"),n=b("#centerCol"),p=b("#rightCol"),r=b("#hover-zoom-end"),D=b("#actionPanelContainer"),E=a.isjQueryObjDefined(f)?f.outerHeight():n.outerHeight();c.top=a.isjQueryObjDefined(f)?f.offset().top:n.offset().top;c.bottom=E+c.top;c.right=a.isjQueryObjDefined(p)?p.offset().left:D.offset().left;c.left=h?0:f.offset().left+f.outerWidth();a.isjQueryObjDefined(r)&&r.offset().top>c.bottom&&(c.bottom=r.offset().top);
h=c}else"right"===k.location&&(h=m.offset(),h={left:h.left+m.outerWidth(),top:h.top,right:h.left+m.outerWidth()+400,bottom:h.top+400});k.minHeightElement&&(h.bottom=Math.max(h.bottom,h.top+b(k.minHeightElement).outerHeight()));h.bottom=Math.min(h.bottom,b(q).scrollTop()+b(q).height());h.left+=g[0];h.top+=g[1];h.right+=g[2];h.bottom+=g[3];h.width=h.right-h.left;h.height=h.bottom-h.top;k.enhancedHoverOverlay&&a.isDefined(q.pageXOffset)&&(c=b(q).width(),h.width=c-h.left+q.pageXOffset-18,h.height-=14);
l.css({left:h.left,top:h.top,width:h.width,height:h.height});d.rect=h;return d}function h(a){var b=new Image;d.detailSize=[0,0];b.onload=function(){d.detailSize=[b.width,b.height];y()};b.src=a.attr("src");if(0<b.width&&0<b.height)d.detailSize=[b.width,b.height];else if(k.detailImageSize)d.detailSize=k.detailImageSize;else{a=c(b.src);var e=I[2]/I[3];a.SS||a.AA?(a=a.SS||a.AA,d.detailSize=[a,a]):a.SX?d.detailSize=[a.SX,Math.round(a.SX/e)]:a.SY?d.detailSize=[Math.round(a.SY*e),a.SY]:a.SL&&(d.detailSize=
1<=e?[a.SL,Math.round(a.SL/e)]:[Math.round(a.SL*e),a.SL])}}var d=this,g=k.adjustment;b("#zoomWindow").remove();var f={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:k.zIndex};k.enhancedHoverOverlay&&(f.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",f.border="1px solid #949494",f.borderColor="rgb(148,148,148)");var l=b("\x3cdiv id\x3d'zoomWindow' /\x3e").css(f);k.fadeMagnifier&&l.fadeIn(200);k.useClickZoom&&(P?l.css("cursor",'url("'+k.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),
l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));d.updateImage=function(a){a=b("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");d.detailImage&&d.detailImage.remove();l.append(a);b(document).trigger("updated.magnifier");d.detailImage=a;h(d.detailImage)};d.refit=function(){e();h(d.detailImage);return d};k.fadeMagnifier?(d.show=function(){l.fadeIn(200);return d},d.hide=function(){l.fadeOut(200);return d}):(d.show=function(){l.show();return d},d.hide=function(){l.hide();
return d});d.destroy=function(){l.remove();return d};d.getWindowSize=function(){return[d.rect.left,d.rect.top,d.rect.width,d.rect.height]};d.updateImage(U);e();l.appendTo(document.body)},W=!1,O,x=!1,X;t.preload=function(a){a=b.makeArray(a);for(var e=a.length,h=0;h<e;h++)a[h]instanceof Array?t.preload(a[h]):"string"===typeof a[h]&&a[h]&&!H[a[h]]&&(H[a[h]]=new Image,H[a[h]].src=a[h])};t.changeImage=function(a,e){v&&w();U=e;m.attr("src",a);t.preload(a);I=[m.position().left,m.position().top,m.width(),
m.height()];e&&("immediately"===k.preload?t.preload(e,!0):b(q).ready(function(){t.preload(e)}),h?h.updateImage(e):m.attr("data-old-hires",e))};t.destroy=function(){A.acEnabled?C.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):m.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");b(document).unbind("mousemove.magnifier");e&&e.destroy();e=null;h&&h.destroy();h=null};t.detailImage=function(){return h.detailImage};t.suppressMagnifier=function(a){aa=
a};t.isEngaged=function(){return v};t.engageMagnifier=G;t.disengageMagnifier=w;m[0].complete?K():m.one("load",K);t.preload(m.attr("src"));q.performance&&performance.now&&q.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(k.preload){var la=k.detailImageUrl,z=function(){t.preload(la,!0);k.useClickZoom||ga.preload()},Z=k.preload;Z.constructor!==Array&&(Z=[Z]);for(var u=0;u<Z.length;u++)if("immediately"===Z[u])z();else if(b(q)[Z[u]])b(q)[Z[u]](z);else b(q).bind(Z[u],z)}return t}function m(){if(A.useHoverZoom){var c=
{adjustment:[0,0,1,1],generalImageUrls:A.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:A.useHoverZoomIpad,useHoverZoom:A.useHoverZoom,useClickZoom:A.useClickZoom,fadeMagnifier:A.fadeMagnifier,zoomOutIcon:A.staticImages.zoomOutCur,enhancedHoverOverlay:A.enhancedHoverOverlay||A.atfEnhancedHoverOverlay};C&&(C.destroy(),C=da);var f=v.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");a.isjQueryObjDefined(f)?
A.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){C=new G(f,c);C.engageMagnifier(a,!0)}),P?f.css("cursor",'url("'+A.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor","zoom-in"))):C=new G(f,c):l.isEnabled&&d.logHoverZoomApplicability(b,l)}}var K,A,J,z,C,v,P=navigator.userAgent.match(/msie|trident/i);return function(a,b,d,c){K=this;A=a;J=b;l.refToModel=J;z=c;K.render=function(a,b,d,c,f,g){v=d;C&&(C.destroy(),
C=da)};K.update=function(a){};z.register("loadMagnifier",m);z.register("resize",m)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(g,b,a,f){function l(b,d,g){b=(b=g?g:a.getColorFromState(d.getState().hovered_variations,c))&&""!==b?b:c.defaultColor;m.dispatch("updateView",{type:"swatchHover",data:{color:b}});f.postCountMetric("swatchHover")}function d(b,d,g,l){b=(b=l?l:a.getColorFromState(d.getState().selected_variations,c))&&""!==b?b:c.defaultColor;
b===G.getCurrentItem().color?"function"===typeof g&&g():(m.dispatch("updateSelection",{type:"swatchClick",data:{color:b},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",a);g()}}),f.postCountMetric("swatchClick"))}var n,c,G,m;return function(a,b,f,q){n=this;c=a;G=b;m=q;g.on("image-block-twister-swatch-hover",l);g.on("image-block-twister-swatch-click",d);n.render=function(a,b,d,c,f){};n.update=function(a){}}});
"use strict";v.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(g,b,a,f,l,d,n){function c(a,e,h,d){!k.autoplayVideo||U||k.useChromelessVideoPlayer?!f.isjQueryObjDefined(a.find(".a-button-selected"))&&(h=y.getCurrentItem(),!d||k.prioritizeVideos||"chromeless-video"===h.type&&k.autoplayVideo)&&(d=f.getVideoHash(h.color,0,k),-1!==d&&(e+=0,E.dispatch("updateModel",{data:{index:0,thumbnailIndex:e,variant:d.variant,
type:k.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=a.find(".item").get(e),f.selectGivenThumbnail(b(e),a))):(f.selectGivenThumbnail(a.find("img:last"),a),f.fadeToThumbnail(a.find("img").length-1,F,a))}function G(a){var b=y.getCurrentItem().color;if(k.useChildVideos&&!k.colorToVideo[b]){var e=function(){if(a){k.colorToVideo[b]=a;var e={type:"updatedData",data:y.getCurrentItem()};E.dispatch("updateView",e)}};k.lazyLoadExperienceDisabled?e():v.when(f.rankedImagesReadyEvent(k.colorToAsin[b].asin)).execute(function(){e()})}}
function m(a){if(!k.useChildVideos)return f.lazyLoadingRequired(y.getCurrentItem(),y,k)?void 0:k.videos;if(k.colorToVideo[a])return k.colorToVideo[a];var b=k.colorToAsin[a];if(b&&b.asin){var e={};e.params={asin:b.asin,productGroupID:k.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:k.useChromelessVideoPlayer,isUDP:k.isUDP};k.isDPXFeatureEnabled||(e.success=function(a){G(a)},l.load("/gp/product/features/apparel-main-image/videos.html",e));return k.colorToVideo&&k.colorToVideo[a]}}function K(){E.dispatch("selectThumbnail",
f.useTabbedImmersiveView(k)?1:0)}function A(e,h,c,g){return a.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:e[0],streamingUrls:h.url,swfUrl:c.swfUrl,foresterMetadataParams:c.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=f.isjQueryObjDefined(e.find("video"))?"HTML5":"FLASH";d.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){e.parent().css("z-index",8)},videounsupported:function(){K();
d.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){K();d.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){t.seek(0)}},cuePoints:[{values:h.durationSeconds-1,type:"position",callback:function(a,h,d){a=d.durationSeconds-d.playheadTimeSeconds;e.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){e.parent().css({"background-color":"transparent","z-index":-1});K();b(this).show().css("opacity",1)})}}]})}function J(a){if("chromeful-video"===
a.type||"chromeless-video"===a.type){var h=f.getVideoHash(a.color,a.index,k);if(-1===h)return-1;if("chromeful-video"===a.type){a=a.thumbnailIndex+1;var d=F.width()/F.height(),c=parseInt(h.videoWidth,10),l=parseInt(h.videoHeight,10);f.updateAspectRatio(d,c,l,p);t?(t.show(),f.loadMediaIntoAiry(t,h,S,k.tabletWeb)):t=k.tabletWeb?e:f.createAiryInstanceForChromefulNotUseTabbedImmersiveView(p,h,S,null,k.autoplayVideo,F,w,r,a,k.useTabbedImmersiveView,I,D,B);b:if(f.useTabbedImmersiveView(k)){if(1<f.getVideosCount(y.getCurrentItem().color,
k)){if(f.isDefined(M)){w.show();break b}M=b('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(k.staticStrings.watchMoreVideos);w.find("#videoCaption").append(M);g.declarative.create(M,"videoIngressClick",N)}f.playVideoInImmersiveView(k,y.getCurrentItem().color)&&(g.declarative.create(p,"videoIngressClick",N),p.attr&&p.attr("data-ux-click",""),p.children().css("z-index","-1"),p.css("display","inline-block"))}else w.find("#videoCaption").text(k.staticStrings.playVideo),w.show();h=
t;k.autoplayVideo&&h&&!U&&(f.toggleVideoCaption(w),h.setVolume(0),h.show(),h.play(),U=!0)}else t?(t.show(),f.loadMediaIntoAiry(t,h,S,k.tabletWeb),t.play(),w.show()):(t=A(p,h,S))&&t.play()}}function z(a,e,h){var l=m(e);e=a;var n=f.isDefined(l)&&0<l.length&&k.alwaysIncludeVideo?1:0;f.isDefined(l)&&0<l.length&&!k.alwaysIncludeVideo&&a===k.maxAlts&&d.postCountMetric("IBVideoDrop");n&&a===k.maxAlts&&(r.find(".item:last").remove(),a--);f.isDefined(l)&&(b.each(l,function(e,h){if(a<k.maxAlts){var c=k.useChromelessVideoPlayer?
"chromeless-video":"chromeful-video",g={type:c,index:e,thumbnailIndex:a,variant:h.variant};N={type:"video-ingress",index:e,thumbnailIndex:a,variant:h.variant};f.useTabbedImmersiveView(k)&&("chromeful-video"===c&&(R+=" videoBlockIngress  videoBlockDarkIngress",h.thumb=h.thumb.replace("_PKmb-play-button-overlay-thumb","")),k.altsOnLeft||(R+=" a-align-top"));f.createThumbnail(g,h.thumb,r,R);if(2===k.dp60VideoPosition){var n=r,g=k.dp60VideoPosition;if(0!==g){var p=n.children(".imageThumbnail"),n=n.children(".videoBlockIngress");
p&&n&&p[g-1]&&b(p[g-1]).before(n[0])}}f.useTabbedImmersiveView(k)&&(C(r.find(".videoBlockIngress img"),k.videoIngressATFSlateThumbURL),g=1<l.length?"multiple-videos":"one-video",(p=1<l.length?l.length+" "+k.staticStrings.multipleVideos:k.staticStrings.singleVideo)&&r.find(".videoBlockIngress").append(r.find("#videoCount_template").clone().text(p).attr("id","videoCount")).addClass(g));g=d.buildNexusMetric("ib.thumbnailImpression",a+1,h.mediaObjectId,h.groupType,I,D,B,H);d.emitNexusMetric(g);g=d.buildNexusMetric("ib.thumbnailRender",
a+1,h.mediaObjectId,h.groupType,I,D,B,H);d.emitNexusMetric(g);aa||(aa=!0,d.postCountMetric("chromeless-video"===c?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));a++}if(f.useTabbedImmersiveView(k))return!1}),c(r,e,a,h),k.imageBlockRenderingStartTime&&d.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",g.now()-k.imageBlockRenderingStartTime));return a}function C(a,b){var e=a.attr("src");if(e&&b){a.attr("src",b);var h=new Image;h.onload=function(b){a.attr("src",e)};h.src=
e}}function O(a){t&&t.pause();a.data=N;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";E.dispatch("imageClick",a);d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=d.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,k.videos[0].mediaObjectId,k.videos[0].groupType,I,D,B,H);d.emitNexusMetric(a);d.postCountMetric(b)}function P(a){e=a.player;e.hide=function(){e.pause();g.$("#main-video-container").find(".vse-player-container").hide()};
e.show=function(){g.$("#main-video-container").find(".vse-player-container").show();e.play()};e.getMediaSourceInfo=function(){return f.getMediaSourceInfo()}}var L,k,y,E,r,p,w,F,M,t,S,N,h,e,D,I,B,H,T,aa=!1,U=!1,R="videoThumbnail";return function(a,e,c,l){L=this;k=a;y=e;E=l;S=k.airyConfig;B=k.contentWeblab&&k.contentWeblab+":"+k.contentWeblabTreatment;k.colorToVideo={};k.colorToVideo[k.landingAsinColor]=k.colorToVideo[k.defaultColor]=k.videos;k.tabletWeb?(T="tablet",H="applicationType.ImageBlock.vse_ib_tablet_web"):
g.capabilities.tablet?(T="tablet",g.capabilities.isAmazonApp&&(H="applicationType.ImageBlock.vse_ib_tablet_app")):(T="desktop",H="desktop_web.ImageBlock.vse_ib_iv");L.render=function(a,e,d,c,l,m){r=c;p=l.find("#main-video-container");w=p.parent().find("#video-canvas-caption");F=b("#main-image-container");I=q.location.href;d=y.getCurrentItem().color;!0===m?D=k.mediaAsin:(D=k.colorToAsin[d]&&k.colorToAsin[d].asin,D=f.isDefined(D)?D:k.mediaAsin);k.useChromelessVideoPlayer||p.addClass("chromeful-container");
h=z(e,a,m);J(y.getCurrentItem());f.useTabbedImmersiveView(k)&&g.declarative("videoIngressClick",["click"],O);d=y.getCurrentItem().color;a=f.getVideoHash(d,0,k);-1!==a&&k.tabletWeb&&(a=f.getNilgiriServiceAjaxRequest(k,d,a),n.get(g,"#main-video-container",a,function(){g.$("#main-video-container").find(".vse-player-container").hide()},function(){g.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return h};L.update=function(a){var b=a.data;"ingress"!==b.type&&t&&(t.hide(),p.parent().css("z-index",
-1),w.hide());if("swatchHover"===a.type)b.color===y.getCurrentItem().color?J(y.getCurrentItem()):a.captured||f.lazyLoadingRequired(b,y,k)&&!f.lazyLoadOnHoverEnabled(k)&&J(y.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var e=f.getVideoHash(b.color,b.index,k);if("mouseenter"===a.type&&(d.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+h),"chromeless-video"===b.type)){var c=d.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,e.mediaObjectId,
e.groupType,I,D,B,H);d.emitNexusMetric(c)}J(b);k.usePeekHover&&"click"!==a.type||(f.selectGivenThumbnail(a.$declarativeParent,r),"click"===a.type&&(e=d.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,e.mediaObjectId,e.groupType,I,D,B,H),(!f.useTabbedImmersiveView(k)&&"chromeless-video"===b.type||"tablet"==T)&&d.emitNexusMetric(e),f.useTabbedImmersiveView(k)&&(d.emitNexusMetric(e),d.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+h),N.action="videoIngressClick",N.clickTimeStamp=
a.$event.timeStamp,N.$event=a.$event,N.$currentTarget=a.$currentTarget,E.dispatch("videoIngressClick",N),d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(k.isDPXFeatureEnabled)g.on("triggerVideoAjax",G);g.on("vsePlayer-imageblock_tablet",P)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(g,b,a,f,l,d,n,c){function G(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function m(){u.find("#ivTitle").click(function(){Z.hide()})}function K(){Q=Pa?{type:"360-spin"}:X.getCurrentItem()}function A(){var a=u.find("#ivStage"),b=Z.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-c.getDimension(e,"padding-top")-c.getDimension(e,"padding-bottom");u.css("height",b);var e=u.find("#ivTitle").outerHeight(!0),h=u.find("#ivVariationSelection").outerHeight(!0),d=u.find("#ivMediaSelection").outerHeight(!0),g=u.find("#ivThumbs"),
f=c.getDimension(g,"margin-top")+c.getDimension(g,"margin-bottom");g.css("height",b-e-h-d-f);u.find("#ivLargeImage").css("height",b);a.css("width",u.width()-c.getDimension(u,"padding-left")-c.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-c.getDimension(a,"margin-left")-c.getDimension(a,"margin-right"))}function J(){u.find("#ivMediaSelect").change(function(){var a=b(this).val();"all"===a?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===
Q.type&&u.find("#ivVideo_"+Q.index).click()):"images"===a?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===Q.type&&(0===ba&&0===Y?u.find("#iv360").click():0===ba?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===a&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==Q.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+Q.index).click())})}function z(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),e=a.height(),h=a.find(".fullscreen");h.removeAttr("style");var d=h.width(),c=h.height();0<h.length&&(h[0].naturalWidth&&(d=h[0].naturalWidth),h[0].naturalHeight&&(c=h[0].naturalHeight));a.css("cursor","auto");var d=0===d?1:d,c=0===c?1:c,g=Math.min(b/d,e/c),f=c*g,l=d*g;1>g?(Qa?a.css("cursor","url('"+x.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(l,d);c=Math.min(f-20,c);h.css({"margin-top":(e-
c)/2,"margin-left":(b-d)/2,height:c,width:d});a.css("visibility","visible");Aa=!1}function C(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();c.animateStageIn(b);b.append(a);z()}function O(){ca&&ca.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display","none");p()}function P(e){O();u.find("#ivLargeImage").css("display","block");var h;"hero-image"===e?a.isDefined(ja)&&(h=G(ja[Q.index])):a.isDefined(ka)&&
(h=G(ka[Q.index]));if(a.isDefined(h)){u.find(".fullscreen").remove();var d=b("\x3cimg\x3e").attr("src",h).addClass("fullscreen"),g=u.find("#ivLargeImage");c.animateStageOut(g,function(){d.load(function(){C(d)});if(d[0].complete)C(d);else{g.empty();var a=(g.height()-104)/2,e=(g.width()-80)/2;b("\x3cimg\x3e").attr("src",x.staticImages.spinner).css({position:"relative",top:a+"px",left:e+"px"}).appendTo(g)}})}}function L(){var a=parseInt(Q.index,10)+1;a>=ha.length||u.find("#ivVideo_"+a).click()}function k(){var b;
a.isDefined(ha)&&(b=ha[Q.index]);if(a.isDefined(b)){O();var e=u.find("#ivLargeVideo").css("display","block");ca?(ca.isDetached()&&ca.attach(e[0]),a.loadMediaIntoAiry(ca,b,wa,x.tabletWeb),ca.show()):(ca=a.createAiryInstanceForChromeful(e,b,wa,"ImmersiveView"),wa.enableContinuousPlay&&ca.bind("ended",L));ca.play({isAsync:!0})}}function y(){K();var b;b="hero-image"===Q.type?u.find("#ivHeroImage_"+Q.index):"image"===Q.type?u.find("#ivImage_"+Q.index):"chromeful-video"===Q.type||"chromeless-video"===Q.type?
u.find("#ivVideo_"+Q.index):"360-spin"===Q.type?u.find("#iv360"):a.isDefined(ja)?u.find("#ivHeroImage_"+Q.index):u.find("#ivImage_"+Q.index);a.isjQueryObjDefined(b)||(b=u.find("#ivImage_0"));E(b)}function E(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Q.type="chromeful-video",Q.index=a.attr("id").split("_")[1],k()):a.hasClass("ivHeroImage")?(Q.type="hero-image",Q.index=a.attr("id").split("_")[1],P(Q.type)):a.hasClass("iv360Image")?(Q.type="360-spin",
Q.index=0,r()):(Q.type="image",Q.index=a.attr("id").split("_")[1],P(Q.type))}function r(){O();u.find("#ivLarge360").css("display","block");S();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});c.animateStageIn(a)},200);F();l.postCountMetric("dppc_click360");sa=Date.now()}function p(){0<sa&&(w("dppc_duration360",Date.now()-sa),sa=0)}function w(a,b){q.ue&&q.ue.count(a,b)}function F(){if(0<pa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function M(a,e){if(pa<a.length){var h=b("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});h.hide();e.append(h);h.get(0).onload=function(){e.closest(document.documentElement).length&&(pa++,1===pa&&(F(),0<sa&&w("dppc_loadTime360",Date.now()-sa)),0<Ga&&w("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),h.show(),xa=5*V.imageLocations[Math.floor(ya/V.imageLocations[0].length)][ya%V.imageLocations[0].length],M(a,e))};h.attr("src",a[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ta+"$2"+ua));Ga=Date.now()}}function t(b){if(a.isDefined(V.spriteWidthSizes)&&0<V.spriteWidthSizes.length){var e=V.spriteWidthSizes,h=e.length,d=e[0],c=e[h-1];if(b<=d)return d;if(b>c)return c;for(d=0;d<h;d++)if(b>e[d]&&b<=e[d+1])return e[d+1]}else return b}function S(){var a=u.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",x.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ha=!0,N())}function N(){if(a.isDefined(V.spriteURLs)&&a.isDefined(u)&&Ha&&!Ia){var d=u.find("#ivLarge360"),c=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});a.isDefined(V.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",V.staticImages.hint360).appendTo(c);b("\x3cdiv\x3e").css({"text-align":"center"}).text(x.staticStrings.dragToSpin).appendTo(c);c.appendTo(d);var c=V.imageWidth,g=V.imageHeight,f=d.parent().width(),l=d.parent().height(),k=0,n=0;c/g>f/l?(ta=t(f),ua=Math.round(g/c*ta),na=Math.ceil(f),ra=Math.ceil(ua/ta*f),n=(l-ra)/2):(ua=t(l),ta=Math.round(c/g*ua),ra=Math.ceil(l),
na=Math.ceil(ta/ua*l),k=(f-na)/2);d.css({"margin-left":k,"margin-top":n,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});d.children("#image-360-sprites").css("width",6*na+"px");M(V.spriteURLs,u.find("#image-360-sprites"),0);c=u.find("#ivLarge360");c.bind("mousedown",I);c.bind("touchstart",h);c.bind("touchmove",e);c.bind("touchend",D);b(document).bind("mousemove",B);b(document).bind("mouseup",H);a.isDefined(x.staticImages.grab)&&d.css("cursor","url('"+x.staticImages.grab+"'), auto");
Ia=!0}}function h(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function e(a){Ba&&(T(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function D(a){Ba&&(Ba=!1)}function I(b){Ca=!0;Ka=b.originalEvent.clientX;a.isDefined(x.staticImages.grabbing)&&(b=u.find("#ivLarge360"),b.css("cursor","url('"+x.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+x.staticImages.grabbing+"'), auto"));return!1}function B(a){Ca&&(T(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function H(b){Ca&&(Ca=!1,a.isDefined(x.staticImages.grab)&&(b=u.find("#ivLarge360"),b.css("cursor","url('"+x.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function T(b){for(b=xa-=b/na*180;0>b;)b+=360;for(;360<b;)b-=360;xa=b;var e;b=360;for(var h=0;h<pa;h++)for(var d=0;d<V.imageLocations[h].length;d++){var c=Math.abs(xa-5*V.imageLocations[h][d]);c<b&&(b=c,e=h*V.imageLocations[0].length+d)}e!==ya&&(b=Math.floor(e/V.imageLocations[0].length),
b!==Math.floor(ya/V.imageLocations[0].length)&&(a.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),h=u.find("#image-360-sprites").children(),La.drawImage(h[b],0,0)),b=u.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ya=e;b=e%V.imageLocations[0].length*-1*na;e=-1*Math.floor(e/V.imageLocations[0].length)*ra;h=u.find("#ivLarge360").children("#image-360-sprites");h.css("-webkit-transform","translate3d("+b+"px, "+
e+"px, 0)");h.css("transform","translate3d("+b+"px, "+e+"px, 0)")}function aa(){u.delegate(".ivThumb","click",function(){var a=b(this);E(a)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var a=b(this);a.addClass("selected");Q.type="chromeful-video";Q.index=a.attr("id").split("_")[1];k()})}function U(){ca&&!ca.isDetached()&&(wa.volume=ca.getVolume(),ca.detach(),!document.all||q.atob||document.addEventListener||(ca=null));u.find("#ivLargeImage").empty();
p()}function R(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function fa(a){var e=qa.left-(a.pageX-Da[0])*Ea;g.capabilities.rtl&&(e=qa.left-(b(q).width()-a.pageX-Da[0])*Ea);a=qa.top-(a.pageY-Da[1])*Ea;e=R(e,Fa.left);a=R(a,Fa.top);u.find(".fullscreen").css({left:e,top:a})}function ea(){u.delegate("#ivLargeImage","click",function(a){if(Aa)z();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var b=u.find("#ivLargeImage"),e=b.find(".fullscreen");Qa?b.css("cursor","url('"+x.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var h=u.find("#ivLargeImage");Fa.left=h.width()-e.width();Fa.top=h.height()-e.height();var h=b.height()/2,d=b.width()/2;Da=[b.offset().left+d,b.offset().top+h];qa.top=h-e.height()/2;qa.left=d-e.width()/2;e.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(e.height()/b.height(),e.width()/b.width())}fa(a)}});u.delegate("#ivLargeImage","mousemove",function(a){Aa&&fa(a)})}function ga(e){if(a.isImmersiveViewEnabled(x,
X.getCurrentItem().color))if(Ma){var h=e.$event.originalEvent;h.acknowledge&&h.acknowledge(e.$currentTarget[0]);Pa=a.isDefined(e)&&"button-360-click"===e.action;d.isEnabled&&n.logImmersiveViewRequestServed(d);l.postCountMetric("dppc_immersiveViewOpened");if(a.isDefined(Z))Z.show();else{e=b("#auiImmersiveViewDiv");var h=b(q).height()-150,f=b(q).width()-75;Z=Ma.create(e,{name:"immersiveView",activate:"onclick",width:f,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){u=b("#ivMain");
e=X.getCurrentItem().color;ka=x.colorImages[e];ja=x.heroImage[e];ha=x.useChildVideos?x.colorToVideo[e]:x.videos;Oa=W()&&x.spin360ColorEnabled[e];V=W()?x.spin360ColorData[e]:da;K();ma=Y=oa=ba=0;a.isDefined(ja)&&(Y=ja.length);a.isDefined(ka)&&(ba=ka.length);a.isDefined(ha)&&(oa=ha.length);Oa&&(ma=1);c.populateTitle(u.find("#ivTitle"),45,x);c.populateVariationSelection(u.find("#ivVariationSelection"));e=u.find("#ivMediaSelect");0===ba+ma||0===oa?(e.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):
(e.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(x.staticStrings.allMedia+" ("+(Y+ba+ma+oa)+")").appendTo(e),b("\x3coption/\x3e").attr("value","images").text(x.staticStrings.images+" ("+(Y+ba+ma)+")").appendTo(e),b("\x3coption/\x3e").attr("value","videos").text(x.staticStrings.videos+" ("+oa+")").appendTo(e),e.parent().show(),e.val("all"));e=u.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var h=Y+ba+oa+ma,k=f=0;f<h;)for(var p=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),
m=0;3>m&&f<h;m++,f++,k++)if(k<Y){var r=ja[f].thumb,D=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+f).appendTo(p);D.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(r)+'") center no-repeat')}else if(k>=Y&&k<ba+Y)r=ka[f-Y].thumb,D=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-Y)).appendTo(p),D.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(r)+
'") center no-repeat');else if(k>=Y+ba&&k<ba+Y+ma)D=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(p),D.find(".ivThumbImage").css("background",'url("'+(a.isDefined(x.staticImages.icon360)?c.getResizedThumbnailURL(x.staticImages.icon360,!0):"")+'") center no-repeat');else if(r=ha[f-ba-Y-ma],D=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(f-ba-Y-ma)).appendTo(p),D.find(".ivThumbImage").css("background",
'url("'+r.thumbUrl+'") center no-repeat'),a.isDefined(r)){var E={position:"triggerTop"},y=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");y.find(".ivVideoPopoverTitle").text(r.title);y.find(".ivVideoPopoverDuration").text(r.durationTimestamp);E.inlineContent=y[0];g.declarative.create(D,"a-tooltip",E)}e=u.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();h=e.find(".placeholder");for(f=0;f<oa;f++)k=ha[f],p=h.clone().removeClass("placeholder").appendTo(e),
p.attr("id","ivVideoList_"+f),p.find(".ivThumbImage").css("background",'url("'+k.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(k.title),p.find(".ivThumbDuration").text(k.durationTimestamp);u.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=x.airyConfig;Na=!1;Ra()}}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else l.postCountMetric("immersiveViewNotExistsClickCount")}function va(b){var e=
x.colorToAsin[b],h={},d=500;if(e&&e.asin){h.params={asin:e.asin};var c="360"+e.asin,g=Date.now();h.success=function(e){w("dppc_asyncRequestTime360",Date.now()-g);e&&a.isDefined(e.spin360.spin360Model)?(a.ajaxState(c,"success"),x.spin360ColorData[b]=e.spin360.spin360Model,b===X.getCurrentItem().color&&(V=x.spin360ColorData[b],N())):h.error()};h.error=function(){l.postCountMetric("dppc_asyncFailed360");w("dppc_asyncRequestTime360",Date.now()-g);d*=2;16E3>=d?setTimeout(function(){g=Date.now();f.load("/gp/product/features/apparel-main-image/360.html",
h)},d):a.ajaxState(c,"fail")};a.ajaxState(c)&&"fail"!==a.ajaxState(c)||(f.load("/gp/product/features/apparel-main-image/360.html",h),a.ajaxState(c,"sent"))}}function W(){return a.isDefined(x.spin360ConfigEnabled)&&x.spin360ConfigEnabled}var ia,x,X,la,Z,u,ja,ka,ha,Y,ba,oa,ma,Q,ca,wa,V,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;v.when("a-modal").execute(function(a){Ma=a});var Ra=
g.once(function(){J();aa();ea();g.on("a:popover:afterUpdatePosition:immersiveView",A);g.on("a:popover:afterShow:immersiveView",y);g.on("a:popover:afterHide:immersiveView",U);m()});return function(e,h,f,k){ia=this;x=e;X=h;d.refToModel=X;la=k;W()&&(x.spin360ColorData[x.landingAsinColor]=x.spin360ColorData[x.defaultColor],x.spin360ColorEnabled[x.landingAsinColor]=x.spin360ColorEnabled[x.defaultColor]);a.isDefined(x.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
c.addStyleCodeToURL(x.staticImages.icon360,"_FMpng_RI_"));ia.render=function(b,e,h,d,c,f){Na=!0;W()&&x.spin360ColorEnabled[b]&&!a.isDefined(x.spin360ColorData[b])&&(x.spin360ColorData[b]={},va(b));a.isImmersiveViewEnabled(x,X.getCurrentItem().color)&&W()&&x.spin360ColorEnabled[b]&&(e===x.maxAlts&&(b=d.find(".item.imageThumbnail"),h=d.find(".item.videoThumbnail"),a.isDefined(h)&&1<h.length?h.last().remove():b.last().remove(),e--),b=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
g.declarative.create(b,"button-360-click"),d.append(b),e++,l.postCountMetric("dppc_display360"));return e};ia.update=function(a){};a.isImmersiveViewEnabled(x,X.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");la.register("imageClick",ga);la.register("button360Click",ga)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(g,b,a,f,l,d,n){function c(){var a=
J.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),d=a.find(".a-popover-inner"),a=a.height()-n.getDimension(d,"padding-top")-n.getDimension(d,"padding-bottom");b("#iv-tab-view-container").css("height",a);O=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==b(this).css("display")}).length;1<O?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),d=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=d):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
b("#iv-tab-view-container .iv-tab-content").css("height",a);g.trigger("dp:image-block:immersive-view:resize")}function G(){g.trigger("dp:image-block:immersive-view:reset")}function m(c){if(a.isImmersiveViewEnabled(A,J.getCurrentItem().color))if(L){var n=c.$event.originalEvent;n.acknowledge&&n.acknowledge(c.$currentTarget[0]);l.isEnabled&&d.logImmersiveViewRequestServed(l);f.postCountMetric("dppc_immersiveViewOpened");a.isDefined(c)&&("button-360-click"===c.action?b("#iv360TabHeading").click():"videoIngressClick"===
c.action?(P=c.clickTimeStamp,b("#ivVideosTabHeading").click()):"showroomIngressClick"===c.action?(P=c.clickTimeStamp,b("#ivShowroomTabHeading").click()):b("#ivImagesTabHeading").click());n=J.getImmersiveViewModalInstance();if(a.isDefined(n))n.show();else{c=b("#auiImmersiveViewDiv");var n=Math.min(Math.max(b(q).height()-150,540),1080),p=Math.min(Math.max(b(q).width()-75,990),1980),n=L.create(c,{name:"immersiveView",activate:"onclick",width:p,height:n,popoverLabel:"ImmersiveView",hideHeader:!0});J.setImmersiveViewModalInstance(n);
c.click()}C&&(C=!1,k(),g.trigger("dp:image-block:immersive-view:init"))}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else f.postCountMetric("immersiveViewNotExistsClickCount")}var K,A,J,z,C=!0,O=0,P,L;v.when("a-modal").execute(function(a){L=a});var k=g.once(function(){g.on("a:popover:afterUpdatePosition:immersiveView",c);g.on("a:popover:afterShow:immersiveView",c);g.on("a:popover:afterHide:immersiveView",
G)}),y=g.once(function(){var a=b("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(d){var c=a.filter(".iv-active");c.attr("id")!==b(this).attr("id")&&g.trigger("dp:ivTabs:"+c.find("a").attr("data-iv-tab-view")+":deselect",d);a.removeClass("iv-active");b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();c=b(this).find("a").attr("data-iv-tab-view");b("#"+c).show();"ivVideosTab"===c&&(d.clickTimeStamp=P||d.timeStamp);g.trigger("dp:ivTabs:"+c+":select",
d);f.postCountMetric("dppc_"+c);return!1})});return function(b,d,c,g){K=this;A=b;J=d;l.refToModel=J;z=g;K.render=function(a,b,d,c,g,h){f.postCountMetric("dpcc_altThumbs_"+b);C=!0};K.update=function(a){};K.getTitle=function(){};K.getVariationSelectionInfo=function(){};y();a.isImmersiveViewEnabled(A,J.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");z.register("imageClick",m);z.register("button360Click",m);a.useTabbedImmersiveView(A)&&(z.register("videoIngressClick",m),z.register("showroomIngressClick",
m))}});"use strict";v.when("A").register("ImageBlockLoader",function(g){return{load:function(b,a){a=a||{};a.timeout=a.timeout||4E3;g.ajax(b,a)}}});"use strict";v.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(g,b,a,f,l,d,n,c,G){function m(a){return null!==a&&"undefined"!==typeof a}function K(a){var e=0;b.each(a,function(a,b){var h=parseInt(b[1],10);h>e&&(e=h)});
return e}function A(a){var e=0;b.each(a,function(a,b){var h=parseInt(b[0],10);h>e&&(e=h)});return e}function v(a,b,d){b=b.width();if(d.naturalMainImageSize)return b;a=K(a);0<a&&(b=Math.min(b,a));return b}function z(a,b,d){b=b.height();if(d.naturalMainImageSize)return b;a=A(a);0<a&&(b=Math.min(b,a));return b}function C(a){var e;b.each(a,function(a,b){m(e)||(e=b[1]/b[0])});return e||1}function O(h,e,d,c,g,k,l,n,p,m,r,y,w){var G=b.extend({},d.foresterMetadataParams);null!==c&&(G.method+="."+c);var t=
[];e.disabledViewIds&&(t=e.disabledViewIds);return a.embed({parentElement:h[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:d.swfUrl,foresterMetadataParams:G,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:d.videoAds,bindings:{play:function(){if("ImmersiveView"===c)F||(F=!0,f.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(M||(M=!0,f.postCountMetric("dppc_chromefulVideoPlayedPV")),
!m){var a=f.buildNexusMetric("ib.thumbnailClick",p,e.mediaObjectId,e.groupType,r,y,w);f.emitNexusMetric(a)}}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,e){g&&(P(0,k,n),L(l))}}],disabledViewIds:t})}function P(a,b,d){b.fadeTo(500,0,function(){k(a,d);b.fadeTo(500,1)})}function L(a){a&&a.toggle()}function k(a,e){var d=e.find("img");m(d[a])&&b(d[a]).click()}function y(a,b){N[a]=b?b:N[a];return N[a]}function E(a,e,d){d=d||S;d=d.colorImages;if(1>d.length||!m(d[a])||!m(e))return-1;
var c=-1;b.each(d[a],function(a,b){b.variant===e&&(c=a)});return c}function r(a,e,d){d=d||S;d=d.colorImages;return!(m(d)&&m(d[a])&&m(d[a][e])&&m(d[a][e].main))||1>b.map(d[a][e].main,function(a,b){return b}).length?-1:d[a][e]}function p(a,b,d,c){c.parent().css("z-index",2);0!==d&&0!==b&&(b/=d,a>b?c.css("width",b/a*100+"%"):c.css("height",a/b*100+"%"))}function w(a,e){var d;if(d=a.useIV)d=a.colorImages&&a.colorImages[e]&&0<a.colorImages[e].length?!0:!1;n.isEnabled&&(n.IVApplicaple=d,c.logImmersiveViewApplicability(b,
n));return d}var F,M,t,S=b.extend(!0,{},l,d),N={};return{isDefined:m,isDefinedAndEmpty:function(a){return m(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return m(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return m(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:z,getMaxWidthOfMainImage:v,getMaxDimensionsOfMainImage:function(a,
b,d){if(d.acEnabled)return[b.height(),b.width()];var c=z(a,b,d);b=v(a,b,d);a=C(a);d=b/a;b=Math.min(b,c*a);c=Math.min(c,d);return[c,b]},getContainerHeight:function(a,b,d){var c=a.get(0);a=0;if(m(c)){a=c.offsetWidth/b;a=Math.min(a,d);var g;b=S.mainImageHeightPartitions;d=S.mainImageMaxSizes;if(m(d)&&m(b)){for(var f=0,k=q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<b.length;c++)k>b[c]&&(f=c+1);d.length>=f&&(g=d[f])}m(g)&&(a=Math.min(g[1],a))}return a},getColorFromState:function(a,
d){if(a){d=d||S;var c="";b.each(d.visualDimensions,function(b,d){a[d]&&(c+=" "+a[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,d,c){var f=d.find(".template").clone().removeClass("template").addClass("item"),k=document.createElement("img");k.src=b;f.find(".placeHolder").replaceWith(k);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&f.addClass("heroImageThumbnail");m(c)&&f.addClass(c);g.declarative.create(f,"thumb-action",a);f.attr&&f.attr("data-ux-click","");d.append(f)},
selectGivenThumbnail:function(a,b){var d=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");d.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,d,c,f,g,k,l){O(a,b,d,c,f,g,k,l,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:O,loadMediaIntoAiry:function(a,b,d,c){a&&a.getMediaSourceInfo()!==b.url&&(c?(t={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},
a.loadMedia(t)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(a){a&&(b("#imageBlock .unvailableVariation").html(a),b("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){b("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:P,toggleVideoCaption:L,selectThumbnail:k,spinner:function(a,d){var c=b("#imageBlock .a-spinner").parent();
0===c.length&&(c=b("\x3cdiv\x3e\x3c/div\x3e").append(b("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));d?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:y,getIndexForVariant:E,getImageHash:r,lazyLoadingRequired:function(a,b,d){b=Math.max(E(a.color,b.getCurrentItem().variant,d),0);b=-1!==r(a.color,b,d);a=d.colorToAsin[a.color]&&d.colorToAsin[a.color].asin;a=!a||"success"!==y(a);return!d.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:p,repositionVideoBanner:function(a,b,d,c){setTimeout(function(){var d=a.width()/a.height();p(d,16,9,b)},c||0)},getVideosCount:function(a,
b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,d){if(d.useChildVideos){if(!m(d.colorToVideo))return-1;a=d.colorToVideo[a]}else a=d.videos;return m(a)&&m(a[b])&&m(a[b].url)?a[b]:-1},isImmersiveViewEnabled:w,playVideoInImmersiveView:function(a,b){return w(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return m(t)?t.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,
b,d){return{requester:"DetailPageTablet",marketplaceID:d.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:d.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:d.url,imageURL:d.slateUrl}}},addTag:function(a){q.ue&&q.ue.tag&&q.ue.tag(a)},isShoppableScenesEnabled:function(){return G.isEnabled&&0<b(".mirai-scene-image-block-template").length}}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(g,b,a,f){function l(d,
c,g,k){if(!a.isjQueryObjDefined(d.find(".a-button-selected"))){var l=C.getCurrentItem();if(!k||"chromeless-video"!==l.type||!z.autoplayVideo){k=0;if("hero-image"===l.type){k=n(l.color,l.variant);if(-1===k)return;k=-1!==k?k:0}var m=c+k;m>=g&&(k=0,m=c);c=f.getHeroImageHash(z,l.color,k);-1!==c&&(O.dispatch("updateModel",{data:{index:k,thumbnailIndex:m,variant:c.variant,type:"hero-image"}}),c=d.find(".item").get(m),a.selectGivenThumbnail(b(c),d))}}}function d(d,c,f){if("hero-video"===C.getCurrentItem().type)return d;
c=z.heroImage&&z.heroImage[c];var g=d;a.isDefined(c)&&(b.each(c,function(b,c){d<z.maxAlts&&(a.createThumbnail({type:"hero-image",index:b,thumbnailIndex:d,variant:c.variant},c.thumb,P,"imageThumbnail"),d++)}),l(P,g,d,f));return d}function n(d,c){var f=z.heroImage;if(1>f.length||!a.isDefined(f[d])||!a.isDefined(c))return-1;var g=-1;b.each(f[d],function(a,b){b.variant===c&&(g=a)});return g}function c(){if(L.length&&z.repositionHeroImage){var b=f.getHeroDimParams(z,C.getCurrentItem()),d;a.isDefined(b)&&
(d=a.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px ",L.css({"background-position":d,"background-size":b.width+"px "+b.height+"px ","max-width":b.width+"px ","min-height":b.height+"px ",filter:"","-ms-filter":""}))}}function G(b,d,c,g){if(L.length&&b&&d){if("function"===typeof c||g){var k=new Image;k.onload=g?function(){L.css("background-image",'url("'+b+'")')}:c;k.src=b}c=d[1];var k=d[0],l;g||L.css({"background-image":'url("'+b+'")'});z.repositionHeroImage&&(d=f.getHeroDimParams(z,
C.getCurrentItem(),d),a.isDefined(d)&&(c=d.width,k=d.height,l=a.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px "));L.css({"background-position":l,"background-size":c+"px "+k+"px ","max-width":c+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function m(a,d,c,g){a=f.getHeroImageHash(z,a,d);if(-1===a)return-1;d=b.map(a.main,function(a,b){return b})[0];G(d,a.main[d],c,g)}function q(a,b,d){if("hero-image"!==a.type)return-1;var c=n(a.color,C.getCurrentItem().variant),c=-1!==c?
c:0;if(-1===f.getHeroImageHash(z,a.color,c))return-1;var g=C.getCurrentItem();a.thumbnailIndex=g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=c;A(a,b,d)}function A(a,b,d){var c=f.getHeroImageHash(z,a.color,a.index),l;l=a&&k&&g.equals(a,k)?!0:!1;k||(k=a);if(!l&&a||b)m(a.color,a.index,b,d),k=a;L.removeClass("hide-background");g.trigger("dp:image-block:update",c)}var v,z,C,O,P,L,k={};return function(g,f,k,l){v=this;z=g;C=f;O=l;z.heroImage[z.landingAsinColor]=z.heroImage[z.defaultColor];v.render=
function(a,c,g,f,k,l,h){P=f;L=b("#heroImage");a=d(c,a,l);q(C.getCurrentItem(),h,l);return a};v.update=function(b){var d=b.data;"ingress"!==d.type&&L.addClass("hide-background");"swatchHover"===b.type?b.captured||(d.type=C.getCurrentItem().type,-1!==q(d)&&(b.captured=!0)):"hero-image"===d.type&&(A(d),"click"!==b.type&&z.usePeekHover||a.selectGivenThumbnail(b.$declarativeParent,P))};O.register("resize",c)}});"use strict";v.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",
function(g,b,a){var f,l,d,n;return function(b,G,m,q){f=this;l=b;d=q;f.render=function(b,d,c,m,G,q,v){n=m;f=this;c=l.maxAlts;m=d;G=l.colorImages[b]?l.colorImages[b].length:0;G+=a.getVideosCount(b,l);b=l.heroImage[b];q=0;b&&(q=b.length);b=G+q;b>c&&(c=b-c,b=n.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),c+="+",m={type:"ingress",index:0,thumbnailIndex:d,variant:""},b.find("#altIngressText").append(c),g.declarative.create(b,"thumb-action",
m),n.append(b),m=d++);return m};f.update=function(a){"ingress"===a.data.type&&"click"===a.type&&d.dispatch("imageClick",a)}}});"use strict";v.when("imageBlockUtils").register("ImageBlockState",function(g){return function(b,a,f){this.getImageHash=function(a){var d=f.getCurrentItem();a=g.getIndexForVariant(d.color,a||"MAIN",b);return g.getImageHash(d.color,a,b)};this.onImageUpdateForTwister=function(b){a.register("updateSelection",function(a){"swatchClick"===a.type&&"function"===typeof b&&b()})}}});
"use strict";v.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(g,b){function a(a,b){var c;if(b.repositionHeroImage){c=a[1];var g=a[0];if(768>=(q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,g*=.7;else{var f=((q.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,f=Math.max(Math.min(f,1),0);c*=.7+.3*f;g*=.7+.3*f}c=[c,g]}return c}function f(a,g,c){var f;if(c.repositionHeroImage){var l=q.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;c=c.heroFocalPoint;if(b.isDefined(c)){f=Math.max((l-Math.min(1500,a))/2,0);var v=Math.max((l-a)/2,0);f-=v;l=Math.max(Math.min(l,1500),1024);f=f+(l-420-23)/2-a/g[1]*c}}return f}function l(a,f,c){a=a.heroImage;return!(b.isDefined(a)&&b.isDefined(a[f])&&b.isDefined(a[f][c])&&b.isDefined(a[f][c].main))||1>g.map(a[f][c].main,function(a,b){return b}).length?-1:a[f][c]}return{getHeroImageHash:l,getHeroDimParams:function(d,n,c){if(d.repositionHeroImage){if(!b.isDefined(c)){c=
l(d,n.color,n.index);if(-1===c)return;n=g.map(c.main,function(a,b){return b})[0];c=c.main[n]}n=a(c,d);d=f(n[0],c,d);return{height:n[1],width:n[0],xPos:d,yPos:75}}}}});"use strict";v.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(g){function b(){this.render=function(){};this.update=function(){}}return function(a,f,l,d){var n=!1,c=new b;v.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(b){b!==da&&(n=!0,c=new b(a,f,l,d))});a&&!0===a.showroomEnabled&&
!1===n&&g.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");return c}});"use strict";v.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(g,b,a){function f(b,f){var c=g.copy(b);if(a.isDefined(b)&&b.length>f){try{for(var l=-1,m=0;m<b.length;m++){var q=b.charAt(m);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)l=m;if(m===f-4){c=b.substring(0,-1===l?m:l);break}}}catch(v){c=b.substring(0,f-3)}c+="..."}return c}function l(a,b){var c=
a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,b){g.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){g.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){g.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){g.off("dp:image-block:immersive-view:resize",
a)},attachImmersiveViewResetHandler:function(a){g.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(a){b("#"+a).hide()},unhideTabHeading:function(a){b("#"+a).show()},addStyleCodeToURL:l,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return l(a,c)},populateVariationSelection:function(d){if(a.isDefined(q.DetailPage)&&
a.isDefined(q.DetailPage.StateController)){d.empty();var f=q.DetailPage.StateController.getState(),c=f.variation_label_order,g;for(g in c)if(c.hasOwnProperty(g)){var l=c[g],v=f.selected_variations[l],l=f.variation_display_labels[l];v&&b("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+v).appendTo(d)}}},populateTitle:function(a,b,c){a.html(c.title);a.attr("title",a.text());a.html(f(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},
100,b)},logError:function(a,b,c,f){q.ueLogError&&q.ueLogError(f,{logLevel:a,attribution:b,message:c})}}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(g,b,a,f,l){function d(){l.populateTitle(r.find("#ivTitle"),160,y)}function n(){var b=E.getCurrentItem().color;w=y.colorImages[b];p=y.heroImage[b];F=M=0;a.isDefined(p)&&(F=p.length);a.isDefined(w)&&(M=w.length)}function c(a){return a.hiRes||a.large||
a.main[a.main.length-1]}function q(){var a=r.find("#ivStage").find("#ivLargeImage"),b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var f=c.width(),g=c.height();0<c.length&&(c[0].naturalWidth&&(f=c[0].naturalWidth),c[0].naturalHeight&&(g=c[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,g=0===g?1:g,k=Math.min(b/f,d/g),l=g*k,n=f*k;1>k?(S?a.css("cursor","url('"+y.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),e=!0):e=!1;f=Math.min(n,f);g=Math.min(l-20,g);c.css({"margin-top":(d-g)/2,"margin-left":(b-f)/2,height:g,width:f});a.css("visibility","visible");h=!1}function m(a){var b=r.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);b.append(a);q()}function v(d){r.find("#ivLargeImage").css("display","none");r.find("#ivLargeImage").css("display","block");var e;"hero-image"===d?a.isDefined(p)&&(e=c(p[t.index])):a.isDefined(w)&&(e=c(w[t.index]));if(a.isDefined(e)){r.find(".fullscreen").remove();
var f=b("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),g=r.find("#ivLargeImage");l.animateStageOut(g,function(){f.load(function(){m(f)});if(f[0].complete)m(f);else{g.empty();var a=(g.height()-104)/2,d=(g.width()-80)/2;b("\x3cimg\x3e").attr("src",y.staticImages.spinner).css({position:"relative",top:a+"px",left:d+"px"}).appendTo(g)}})}}function A(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?t.type="hero-image":t.type="image";t.index=a.attr("id").split("_")[1];
v(t.type);f.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(t.index,10)+1)+"_"+(F+M))}function J(){r.delegate(".ivThumb","click",function(){var a=b(this);A(a)})}function z(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function C(a){var b=I.top-(a.pageY-H[1])*B;a=z(I.left-(a.pageX-H[0])*B,D.left);b=z(b,D.top);r.find(".fullscreen").css({left:a,top:b})}function O(){r.delegate("#ivLargeImage","click",function(a){if(h)q();else if(e){r.find(".fullscreen").removeAttr("style");if(e){var b=r.find("#ivLargeImage"),
d=b.find(".fullscreen");S?b.css("cursor","url('"+y.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));h=!0;var c=r.find("#ivLargeImage");D.left=c.width()-d.width();D.top=c.height()-d.height();var c=b.height()/2,g=b.width()/2;H=[b.offset().left+g,b.offset().top+c];I.top=c-d.height()/2;I.left=g-d.width()/2;d.css({position:"relative",left:I.left,top:I.top});B=Math.max(d.height()/b.height(),d.width()/b.width())}C(a);f.postCountMetric("dpcc_iv_largeImageCLick")}});
r.delegate("#ivLargeImage","mousemove",function(a){h&&C(a)})}function P(){r.find("#ivLargeImage").empty()}function L(c){if(N){r=b("#ivMain");n();t=E.getCurrentItem();d();l.populateVariationSelection(r.find("#ivVariationSelection"));c=r.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=F+M,f=0,g=0;f<e;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),k=0;4>k&&f<e;k++,f++,g++)if(g<F){var m=p[f].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(h);q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(m)+'") center no-repeat')}else g>=F&&g<M+F&&(m=w[f-F].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-F)).appendTo(h),q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(m)+'") center no-repeat'));T();N=!1}else d();c=b("#ivImagesTab").height();r.css("height",c);e=r.find("#ivTitle").outerHeight(!0);f=r.find("#ivVariationSelection").outerHeight(!0);
g=r.find("#ivThumbs");h=l.getDimension(g,"margin-top")+l.getDimension(g,"margin-bottom");g.css("height",c-e-f-h);r.find("#ivLargeImage").css("height",c);c=r.find("#ivStage");e=r[0]&&r[0].getBoundingClientRect&&Math.floor(r[0].getBoundingClientRect().width)||r.width();c.css("width",e-l.getDimension(r,"padding-left")-l.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-l.getDimension(c,"margin-left")-l.getDimension(c,"margin-right"));t=E.getCurrentItem();c="hero-image"===t.type?r.find("#ivHeroImage_"+
t.index):"image"===t.type?r.find("#ivImage_"+t.index):a.isDefined(p)?r.find("#ivHeroImage_"+t.index):r.find("#ivImage_"+t.index);a.isjQueryObjDefined(c)||(c=r.find("#ivImage_0"));A(c)}var k,y,E,r,p,w,F,M,t,S=navigator.userAgent.match(/msie|trident/i),N=!0,h=!1,e=!1,D={},I={},B,H,N=!0,T=g.once(function(){J();O();l.attachImmersiveViewResizeHandler(L);l.attachTabDeselectHandler("ivImagesTab",P)});return function(a,c,d,e){k=this;y=a;E=c;k.render=function(a,c,d,e,f,g){N=!0;n();0===F+M?l.hideTabHeading("ivImagesTabHeading"):
l.unhideTabHeading("ivImagesTabHeading");1===F+M?b("#ivThumbs").hide():b("#ivThumbs").show()};k.update=function(a){};l.attachTabSelectHandler("ivImagesTab",L)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(g,b,a,f,l,d,n){function c(){w.delegate(".ivThumb","click",function(){var a=b(this);w.find(".ivThumb").removeClass("selected");a.addClass("selected");
a.hasClass("ivThumbVideo")&&(F.type="chromeful-video",F.index=a.attr("id").split("_")[1])})}function v(){if(ea){var a=b("#ivVideosTab").height();w.css("height",a);var c=w.find(".vse-lb-container");M=a-l.getDimension(c,"padding-top")-l.getDimension(c,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(aa){w.css({"max-width":Math.floor(1.77*M)});return}var a=w.find(".vse-player-container"),c=w.find(".vse-video-action-strip"),d=w.find(".vse-lb-video-metadata"),e=Math.floor(M-l.getDimension(d,
"height")-l.getDimension(c,"height")),f=Math.floor(1.77*e);a.css({"max-height":e,"max-width":f,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}U&&(a=w.find(".vse-vertical-scroll"),c=l.getDimension(a,"margin-top")+l.getDimension(a,"margin-bottom"),a.css("max-height",M-c))}function m(){K();t&&t.pause();R=!1;H=!0;e=null;fa=!0;ea=!1}function K(){R=!1;t&&t.pause()}function A(c){e=c.clickTimeStamp?
c.clickTimeStamp:g.now();a.isDefined(p)&&(p.eventTimestamp=e);T&&(n.get(g,"#ivVideoBlock",r,x,X),w=b("#ivVideoBlock"),E.getCurrentItem(),F=E.getCurrentItem(),da());v();R=!0;T=!1;C()}function J(a){T&&(w=b("#ivVideoBlock"),E.getCurrentItem(),F=E.getCurrentItem(),da());R&&C();v()}function z(a){t=a.player;f.postTimeMetric("vse_ib_desktop_player_initialisation_duration",g.now()-ga);y.imageBlockRenderingStartTime&&f.postTimeMetric("vse_ib_desktop_time_to_player_interactive",g.now()-y.imageBlockRenderingStartTime);
ea&&(L(),C())}function C(){if(t&&R&&(w.find(".vse-lb-container").animate({opacity:1},200),t.play(p),f.postCountMetric("dpcc_vse_videoBlock_video_played"),H)){var a=q.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,f.postTimeMetric("dpcc_vse_vitff",a),H=!1)}}function O(){g.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function P(a){S=a.popover.$popover;ea=!0;L()}function L(){ea&&fa&&R&&t&&(S.addClass(g.$(S).find(".vse-lb-container").data("cssClass")),g.trigger("vse:detailpage-imageblock:page:lightBoxOpened",
{lightBoxId:"ivVideoBlock",assetSpec:p}),v(),fa=!1)}var k,y,E,r,p,w,F,M,t,S,N,h,e,D,I,B,H=!0,T=!0,aa=!1,U=!1,R=!1,fa=!0,ea=!1,ga=0,da=g.once(function(){c();l.attachImmersiveViewResizeHandler(J);l.attachTabDeselectHandler("ivVideosTab",K);l.attachImmersiveViewResetHandler(m)}),W=function(c,d,e){b("#ivVideoBlockSpinner").addClass("aok-hidden");f.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=E.getCurrentItem().color;c=a.getVideoHash(c,0,y);t||(t=a.createAiryInstanceForChromeful(b("#ivVideoBlock"),
c,y.airyConfig,"ImmersiveView"));aa=!0;b("#ivVideoBlock").css({"max-width":1.77*M,margin:"0 auto"});R&&aa&&t.play({isAsync:!0})},ia=function(a,c,d){T||n.get(a,"#ivVideoBlock",r,x,X);b("#ivVideoBlockSpinner").addClass("aok-hidden")},x=function(a,b,c){U=!0;v()},X=function(a,b,c){f.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,c,f,n){k=this;y=b;E=c;k.render=function(b,c,f,k,n,m){b=E.getCurrentItem().color;c=a.getVideoHash(b,
0,y);!0===m?N=y.mediaAsin:(N=y.colorToAsin[b]&&y.colorToAsin[b].asin,N=a.isDefined(N)?N:y.mediaAsin);h=null!==y.vseVideoDataSourceTreatment&&"T1"===y.vseVideoDataSourceTreatment?"ASIN":"physicalID";D=y.contentWeblab;I=y.contentWeblabTreatment;B=y.parentAsin||"";T=!0;-1===c?l.hideTabHeading("ivVideosTabHeading"):(l.unhideTabHeading("ivVideosTabHeading"),r={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:N,contentIDType:"ASIN",
parentContentID:B,parentContentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:h,videoURL:c.url,imageURL:c.slateUrl},requestId:y.dpRequestId,weblabContext:[{name:D,assignment:I,ignoreForG2S2Key:!0}],metadata:{ProductTitle:y.title}},p={videoUrl:r.video.videoURL,contentId:r.video.contentID,duration:0,vendorCode:"",eventTimestamp:a.isDefined(e)?e:g.now(),imageUrl:r.video.imageURL,productAsin:r.product.contentID,index:0},a.isDefinedAndNotEmpty(t)&&(t.destroy(),t=null),ga=g.now(),d.get(g,
"#ivVideoBlock",r,ia,W))};k.update=function(a){};l.attachTabSelectHandler("ivVideosTab",A);g.on("vsePlayer-detailpage-imageblock",z);g.on("a:popover:afterShow:immersiveView",P);g.on("a:popover:beforeHide:immersiveView",O)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(g,b,a,f,l,d,n,c,q){function m(){var a=b("#iv360Tab").height();
B.css("height",a);var c=B.find("#ivTitle360").outerHeight(!0),d=B.find("#ivVariationSelection360").outerHeight(!0),e=B.find("#ivThumbs360"),f=n.getDimension(e,"margin-top")+n.getDimension(e,"margin-bottom");e.css("height",a-c-d-f);a=B.find("#ivStage360");c=B[0]&&B[0].getBoundingClientRect&&Math.floor(B[0].getBoundingClientRect().width)||B.width();a.css("width",c-n.getDimension(B,"padding-left")-n.getDimension(B,"padding-right")-B.find("#ivThumbColumn360").width()-n.getDimension(a,"margin-left")-n.getDimension(a,
"margin-right"))}function v(){C();var a=B.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});n.animateStageIn(a)},200);A()}function A(){if(0<u){var a=B.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(a,c){if(u<a.length){var f=b("\x3cimg /\x3e").css({display:"block",width:6*T+"px",height:aa+"px"});f.hide();c.append(f);f.get(0).onload=function(){c.closest(document.documentElement).length&&(u++,1===u&&(A(),0<x&&(l.time("dppc_loadTime360",
Date.now()-x,e.mediaAsin),d.postTimeMetric("dppc_loadTime360",Date.now()-x))),0<X&&(l.time("dppc_perSpriteloadTime360",Date.now()-X,e.mediaAsin),d.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-X)),B.find("#iv360Spinner").hide(),f.show(),W=5*H.imageLocations[Math.floor(ia/H.imageLocations[0].length)][ia%H.imageLocations[0].length],J(a,c))};f.attr("src",a[u].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+U));X=Date.now()}}function z(b){if(a.isDefined(H.spriteWidthSizes)&&0<H.spriteWidthSizes.length){var c=
H.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(b<=e)return e;if(b>f)return f;for(e=0;e<d;e++)if(b>c[e]&&b<=c[e+1])return c[e+1]}else return b}function C(){var a=B.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",
e.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ga=!0,O())}function O(){if(a.isDefined(H.spriteURLs)&&a.isDefined(B)&&ga&&!va){var c=B.find("#ivLarge360"),d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(H.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
H.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(e.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=H.imageWidth,f=H.imageHeight,g=c.parent().width(),h=c.parent().height(),l=0,n=0;d/f>g/h?(R=z(g),U=Math.round(f/d*R),T=Math.ceil(g),aa=Math.ceil(U/R*g),n=(h-aa)/2):(U=z(h),R=Math.round(d/f*U),aa=Math.ceil(h),T=Math.ceil(R/U*h),l=(g-T)/2);c.css({"margin-left":l,"margin-top":n,width:T+"px",height:aa+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",
6*T+"px");J(H.spriteURLs,B.find("#image-360-sprites"),0);d=B.find("#ivLarge360");d.bind("mousedown",y);d.bind("touchstart",P);d.bind("touchmove",L);d.bind("touchend",k);b(document).bind("mousemove",E);b(document).bind("mouseup",r);a.isDefined(e.staticImages.grab)&&c.css("cursor","url('"+e.staticImages.grab+"'), auto");va=!0}}function P(a){Z=!0;ea=a.originalEvent.targetTouches[0].clientX}function L(a){Z&&(p(a.originalEvent.targetTouches[0].clientX-ea),ea=a.originalEvent.targetTouches[0].clientX)}function k(a){Z&&
(Z=!1)}function y(b){la=!0;fa=b.originalEvent.clientX;a.isDefined(e.staticImages.grabbing)&&(b=B.find("#ivLarge360"),b.css("cursor","url('"+e.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+e.staticImages.grabbing+"'), auto"));return!1}function E(a){la&&(p(a.originalEvent.clientX-fa),fa=a.originalEvent.clientX)}function r(b){la&&(la=!1,a.isDefined(e.staticImages.grab)&&(b=B.find("#ivLarge360"),b.css("cursor","url('"+e.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor",
"auto")))}function p(b){W-=b/T*180;ka&&(l.count("dppc_360dragToSpin",e.mediaAsin),d.postCountMetric("dppc_360dragToSpin"));ka=!1;for(b=W;0>b;)b+=360;for(;360<b;)b-=360;W=b;var c;b=360;for(var f=0;f<u;f++)for(var g=0;g<H.imageLocations[f].length;g++){var h=Math.abs(W-5*H.imageLocations[f][g]);h<b&&(b=h,c=f*H.imageLocations[0].length+g)}c!==ia&&(b=Math.floor(c/H.imageLocations[0].length),b!==Math.floor(ia/H.imageLocations[0].length)&&(a.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),
f=B.find("#image-360-sprites").children(),ja.drawImage(f[b],0,0)),b=B.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ia=c;b=c%H.imageLocations[0].length*-1*T;c=-1*Math.floor(c/H.imageLocations[0].length)*aa;f=B.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+b+"px, "+c+"px, 0)");f.css("transform","translate3d("+b+"px, "+c+"px, 0)")}function w(){if(Y){B=b("#ivMain360");var a=D.getCurrentItem().color;
M()&&t(a);H=M()?e.spin360ColorData[a]:da;n.populateTitle(B.find("#ivTitle360"),160,e);n.populateVariationSelection(B.find("#ivVariationSelection360"));B.find("#ivLarge360").empty();u=0;va=ga=!1;ia=W=0;ba();Y=!1}0!==b("#iv360Tab").height()&&(n.detachImmersiveViewResizeHandler(w),m(),v(),x=Date.now(),ha=ka=!0,l.count("dppc_click360",e.mediaAsin),d.postCountMetric("dppc_click360"))}function F(b,g,h){b=e.colorToAsin[h];var k={},n=500;if(!b||!b.asin)if(h===e.defaultColor)b={asin:e.winningAsin};else return;
k.params={asin:b.asin};var m="360"+b.asin,p=Date.now();k.success=function(b){l.time("dppc_asyncRequestTime360",Date.now()-p,e.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);b&&a.isDefined(b.spin360)?((b=b.spin360.spin360Model)&&c.setData(b),a.ajaxState(m,"success")):k.error()};k.error=function(){l.count("dppc_asyncFailedTransient360",e.mediaAsin);d.postCountMetric("dppc_asyncFailedTransient360");l.time("dppc_asyncRequestTime360",Date.now()-p,e.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-p);n*=2;16E3>=n?setTimeout(function(){p=Date.now();f.load("/gp/product/features/apparel-main-image/360.html",k)},n):(l.count("dppc_asyncFailed360",e.mediaAsin),d.postCountMetric("dppc_asyncFailed360"),a.ajaxState(m,"fail"))};a.ajaxState(m)&&"fail"!==a.ajaxState(m)||(f.load("/gp/product/features/apparel-main-image/360.html",k),a.ajaxState(m,"sent"))}function M(){return e&&a.isDefined(e.spin360ConfigEnabled)&&e.spin360ConfigEnabled}function t(b){return a.isDefinedAndNotEmpty(e.spin360ColorData[b])?
!0:a.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled}function S(){ha&&(l.time("dppc_duration360",Date.now()-x,e.mediaAsin),d.postTimeMetric("dppc_duration360",Date.now()-x),ha=!1)}function N(a){a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;a||(a=e.mediaAsin);return a}var h,e,D,I,B,H,T,aa,U,R,fa,ea,ga=!1,va=!1,W=0,ia=0,x=0,X=0,la=!1,Z=!1,u=0,ja,ka=!0,ha=!1,Y=!0,ba=g.once(function(){n.attachImmersiveViewResizeHandler(w);n.attachImmersiveViewResizeHandler(m);n.attachImmersiveViewResetHandler(S);
n.attachTabDeselectHandler("iv360Tab",S)});return function(f,k,m,p){h=this;e=f;D=k;I=p;f=e.landingAsinColor;k=e.defaultColor;a.isDefined(e.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",n.addStyleCodeToURL(e.staticImages.icon360,"_FMpng_RI_"));M()&&(e.spin360ColorData||(e.spin360ColorData={}),f===k&&a.isDefinedAndEmpty(e.spin360ColorData[k])&&delete e.spin360ColorData[k]);g.on(q.TWISTER_DATA_EVENT,function(a){N(D.getCurrentItem())===a&&(H=
c.getData(a),O(),a={type:"updatedData",data:D.getCurrentItem()},I.dispatch("updateView",a))});h.render=function(f,h,k,m,p,r){Y=!0;!M()||a.isDefinedAndEmpty(e.spin360ColorData[f])&&!c.getData(N(D.getCurrentItem()))?n.hideTabHeading("iv360TabHeading"):(e.spin360ColorData[f]=c.getData(N(D.getCurrentItem())),a.isDefinedAndNotEmpty(e.spin360ColorData[f])?(b("#ivThumbs360").hide(),n.unhideTabHeading("iv360TabHeading"),a.isImmersiveViewEnabled(e,D.getCurrentItem().color)&&M()&&t(f)&&(h===e.maxAlts&&(f=m.find(".item.imageThumbnail"),
h=m.find(".item.videoThumbnail"),a.isDefined(h)&&1<h.length?h.last().remove():f.last().remove()),f=m.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),g.declarative.create(f,"button-360-click"),m.append(f),l.count("dppc_display360",e.mediaAsin),d.postCountMetric("dppc_display360"))):a.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled?(e.spin360ColorData[f]={},n.hideTabHeading("iv360TabHeading"),F(m,h,f)):n.hideTabHeading("iv360TabHeading"))};
h.update=function(a){};n.attachTabSelectHandler("iv360Tab",w)}});v.register("nexusLogger360",function(){return{count:function(g,b){q.ue&&q.ue.event({asin:b,metricName:g,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(g,b,a){q.ue&&q.ue.event({asin:a,metricName:g,metricValue:b},"hit-360","hit360.clientEvent.3")}}});v.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});v.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(g,
b){var a={};return{setData:function(f){var l=f.asin;a[l]||(a[l]=f,g.trigger(b.TWISTER_DATA_EVENT,l))},getData:function(b){return a[b]}}});"use strict";v.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(g,b){v.register("vse_ns_preLoaderHook",function(){function a(f,l){try{var d=f.A,n=f.block,c=f.request,q=f.handleFailure,m=f.handleSuccess,v=d.$;l--;var A=3-l-1,J=d.now();d.ajax("/vap/ew/componentbuilder",{params:c,paramsFormat:"json",crossDomain:!0,method:"post",
contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=d.now()-J;g.postTimeMetric("vse_preLoaderHook:success:",b);g.postCountMetric("vse_preLoaderHook:success:"+c.page+":"+c.placement+":"+A);v(n).html(a);m(d,c,a)},error:function(b){g.postCountMetric("vse_preLoaderHook:error:"+c.page+":"+c.placement+":"+A);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<l?a(f,l):(g.postCountMetric("vse_preLoaderHook:error:",1),q(d,c,b))}})}catch(z){b.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",z)}}return{get:function(b,g,d,n,c){a({A:b,block:g,request:d,handleFailure:c,handleSuccess:n},3)}}});v.register("vse_ns_lazyLoaderHook",function(){function a(f,l,d){try{var n=f.A,c=f.context,q=f.handleFailure,m=f.handleSuccess;l.attr("data-configuration");var v=atob(l.attr("data-configuration")),A=JSON.parse(v),J={pageContext:c,configuration:A},z=n.now();d--;var C=3-d-1;n.ajax("/vap/ew/subcomponent/"+A.type,{params:J,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=n.now()-z;g.postTimeMetric("vse_lazyLoaderHook:success:",b);g.postCountMetric("vse_lazyLoaderHook:success:"+c.page+":"+c.placement+":"+A.type+":"+C);l.html(a);m(n,J,a)},error:function(b){g.postCountMetric("vse_lazyLoaderHook:error:"+c.page+":"+c.placement+":"+A.type+":"+C);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(f,l,d):(g.postCountMetric("vse_lazyLoaderHook:error:",1),q(n,J,b))}})}catch(O){b.logError("FATAL",
"vse_ns_desktop","[vse_ns_lazyLoaderHook] ",O)}}return{get:function(b,g,d,n,c){var q=b.$;q(g+" div[data-configuration]").each(function(){a({A:b,context:d,handleFailure:c,handleSuccess:n},q(this),3)})}}});v.register("vse_ns_videoPlayer",function(){function a(f,l,d){try{var n=f.A,c=f.block,q=f.request,m=f.handleFailure,v=f.handleSuccess,A=n.$;d--;var J=3-d-1,z=n.now();n.ajax("/vap/ew/subcomponent/vseplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||
5E3,withCredentials:!0,success:function(a){var b=n.now()-z;g.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);g.postCountMetric("vse_lightPlayerLoaderHook:success:"+q.page+":"+q.placement+":"+J);A(c).html(a);v(n,q,a)},error:function(b){g.postCountMetric("vse_lightPlayerLoaderHook:error:"+q.page+":"+q.placement+":"+J);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(f,d):(g.postCountMetric("vse_lightPlayerLoaderHook:error:",1),m(n,q,b))}})}catch(C){b.logError("FATAL","vse_ns_lightPlayer",
"[vse_ns_lightPlayerLoaderHook] ",C)}}return{get:function(b,g,d,n,c){a({A:b,block:g,request:d,handleFailure:c,handleSuccess:n},3)}}})});"use strict";v.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(g,b,a,f,l){var d=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var b=a.colorImages,c=0,g;for(g in b)b[g]&&b[g].length&&(c+=b[g].length);b="image_size_bucket:gt"+d[d.length-1];for(g=1;g<d.length;g++)if(c<=d[g]){b="image_size_bucket:"+d[g-1]+"-"+d[g];break}l.postCountMetric(b);
f.addTag(b)})();(function(){var a=b.colorImages;a&&a.initial&&a.initial.length&&(a=a.initial.length,q.ue&&ue.count&&ue.count("altImageCount",a))})();(function(){var b=a.lazyLoadExperienceDisabled;f.isDefined(a.lazyLoadExperienceDisabled)&&!b&&(l.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),f.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});v.when("A","get-resource-time","postMetric","afterLoad").execute(function(g,b,a){var f=g.state("desktop-landing-image-data");f&&(f=
g.values(f),b=b.getResourceTimeByName("img",f),g.each(b,function(b){b&&(b.responseEnd!=da&&a.postCountMetric("ibDesktopLandingImageDownloadTime",q.parseInt(b.responseEnd)),b.transferSize!=da&&(0===b.transferSize?a.postCountMetric("ibDesktopLandingImageCached",1):(a.postCountMetric("ibDesktopLandingImageSizeInBytes",q.parseInt(b.transferSize)),a.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});v.now().register("ImageBlockShoppableSceneView",function(){function g(){}return function(){this.update=
this.render=g}});v.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,c=h?h("DetailPageShowroomImageBlockAssets",""):e;c.guardFatal?c.guardFatal(f)(c,window):c.execute(function(){f(c,window)})})(function(f,e,h){f.when("A","imageBlockUtils","imageBlockImmersiveViewUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(c,l,d,n,g,b,a){function e(a){a=
q.colorToAsin[a.color].asin;a||(a=q.mediaAsin);return a}var f=void 0,q=void 0,m=void 0,p=void 0,w=void 0,k=void 0,r=void 0;return function(d,h,u,v){u=new Date;f=this;q=d;m=h;p=v;c.on(b.TWISTER_DATA_EVENT,function(a){e(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},p.dispatch("updateView",a))});f.render=function(b,l,d,f,q,u){b=new Date;w=f;k=q.find("#main-showroom-container");k.parent().find("#showroom-canvas-caption");c.$("#main-image-container");try{var t=e(m.getCurrentItem());
if(n.isDataValidForAsin(t)){var z=new Date,h=n.getDataForAsin(t);g.refresh(p,h.asin,h.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-z);if(!u){var v=new Date;g.updateMainImage(k,h.imageData,p);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-v)}var x=new Date;l=g.createThumbnail(f,l,h.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-x);var y=new Date;c.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-y);if(t!==r){var A=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var B=a.createShowroomAtfEvent(h.defaultStageId,t,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(B);r=t;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-A)}}else c.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(D){c.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return l};f.update=function(c){var r=new Date;try{var d=c.data;m.setCurrentEvent(c);if(d.type===b.SHOWROOM_THUMBNAIL_TYPE){var f=new Date;d.interaction=c.type;d.isUserGenerated=!0;if(n.isDataValidForAsin(e(d))){"mouseenter"===d.interaction&&d.type===b.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var h=n.getDataForAsin(e(d)).imageData;g.updateMainImage(k,h,p);g.showShowroomMainImage(k)}q.usePeekHover&&"click"!==c.type||
(l.selectGivenThumbnail(c.$declarativeParent,w),"click"===c.type&&l.useTabbedImmersiveView(q)&&g.handleShowroomThumbnailClick(c));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-f)}else d.type!==b.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===c.type?d.color===m.getCurrentItem().color&&m.getCurrentItem().type===b.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(k):g.hideShowroomMainImage(k):g.hideShowroomMainImage(k))}catch(C){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-r)};document.getElementById("ivShowroomTabHeading").addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=n.getDataForAsin(r).defaultStageId;b=a.createShowroomAtfEvent(b,r,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-u)}});"use strict";f.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";f.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-atf-metrics").register("showroom-image-block-detail-page-rendering",function(c,l,d,f,g,b){function a(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);
var k=b.createShowroomAtfEvent(m,h,b.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(k);e(a)}function e(a){a.action="showroomIngressClick";a.data=p;n.dispatch("showroomIngressClick",a)}var h,n,m,p;return{createThumbnail:function(a,b,c){p={type:"showroomIngress",index:0,thumbnailIndex:b,variant:c.variant};d.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:b,variant:c.variant},c.thumb,a,"showroom-imageblock-thumbnail");b=l(".pos-360.item");
c=a.children(".showroom-imageblock-thumbnail");var k=a.children(":visible").length;1===b.length?(c.insertBefore(b),b=k-1):(c.appendTo(a),b=k);return b},updateMainImage:function(b,d){var e=b.find("#showroom-main-image");e.length?e.attr("src",d.hiRes):(e=l("\x3cimg/\x3e").attr("src",d.hiRes).attr("id","showroom-main-image"),e.appendTo(b),c.declarative.create(b,"showroom-image-action",p),c.declarative("showroom-image-action",["click"],a),d=b.find("#showroom-main-image-overlay-container"),d.length||(d=
f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),e=f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),d=l('                \x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+(e?e:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+d+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),d.appendTo(b)))},
hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return l("#showroom-outer-container").hasClass("aok-hidden")},handleShowroomIngressClick:e,handleShowroomThumbnailClick:function(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var c=b.createShowroomAtfEvent(m,h,b.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,
b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)},handleShowroomMainImageClick:a,refresh:function(a,b,c){n=a;h=b;m=c}}});"use strict";f.when("A").register("showroom-image-block-metrics",function(c){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",
SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select"},STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(c){try{if(e.ue&&c){var d=(e.ue.count(c)||0)+1;e.ue.count(c,d)}}catch(n){}},logValue:function(c,d){try{e.ue&&c&&"number"===typeof d&&e.ue.count(c,d)}catch(n){}},createShowroomAtfEvent:function(e,
d,f,g){var b={};b.showroomId=e;b.asin=d;b.eventType=f;b.status=g;b.device=c.capabilities?c.capabilities.isAmazonApp?"AmazonApp":c.capabilities.mobile?"mobile":c.capabilities.tablet?"tablet":"desktop":"";b.userAgent=navigator?navigator.userAgent:"";b.producerId="showroom_atf";b.schemaId="com.amazon.showroom.ingress.clientEvent.3";return b},logShowroomAtfEvent:function(c){try{e.ue&&e.ue.event&&c&&e.ue.event(c,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(d){}}}});"use strict";f.when("A",
"showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,e){function d(){return g[b]}function f(a){return a in g}var g={},b;return{setData:function(a){a&&a.asin&&a.imageDomain&&a.defaultCollageUrl&&a.defaultStageId&&Array.isArray(a.itemMainImagePhysicalIds)&&(b=a.asin,f(a.asin)||(g[a.asin]=a,c.trigger(e.TWISTER_DATA_EVENT,a.asin)))},getDataForCurrentAsin:d,getDataForAsin:function(a){return g[a]},getStringValue:function(a){return d().displayStrings?d().displayStrings[a]:
""},isDataValidForAsin:f}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPagePaymentOptionsJavascript",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
