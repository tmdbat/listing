(function(e){var f=window.AmazonUIPageJS||window.P,g=f._namespace||f.attributeErrors,c=g?g("GuidedNavigationWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,g){"use strict";e.when("A","s-url-parameters").register("inscx-guided-navigation-controller",function(c,h){function e(){var a=[],b;for(b in d)d.hasOwnProperty(b)&&d[b]&&a.push(d[b]);return a}function g(){var a=document.getElementById("guided-apply");0<e().length?c.show(a):c.hide(a)}function p(a,
b,c){var e,d="",d=c.map(function(a){return a.key}).join("|");return a.split(",").map(function(a){return(e=a.split(":")[0])&&e===b?e+":"+d:a}).join(",")}function k(a){var b=l(document.getElementById(a.key));d[a.key]=a;b.addClass("inscx-guided-search-recommendation-pill-clicked")}function m(a){var b=l(document.getElementById(a.key));d[a.key]=null;b.removeClass("inscx-guided-search-recommendation-pill-clicked")}function q(a){d[a.key]?m(a):k(a)}function n(){var a;var b,c=e(),d=c[c.length-1];d?(b=h.parseQueryString(d.searchUrl),
!0===d.isMultiSelect&&(a=h.getParamValue(b,"rh"),a=p(a,d.shortId,c),h.setParamValue(b,"rh",a))):b=h.parseQueryString(f.location.search);a=h.paramsToString(b,!0);document.getElementById("guided-apply").setAttribute("t_href",encodeURI(a));f.location.search=a}var l=c.$,d={};c.declarative("guided-recommendation-apply","click",n);c.declarative("guided-recommendation-click","click",function(a){a=a.data;var b;a&&(!1===a.isMultiSelect?(b=e(),b.forEach(function(a){m(a)}),k(a),n()):(q(a),g()))})})});
/* ******** */
(function(e){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,c=f?f("SearchFollowButtonAssets",""):d;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,d,f){e.when("jQuery","rush-framework","af").register("rdx-follow-button",function(c,e){function k(a){d.ue&&d.ue.tag&&d.ue.count&&(d.ue.tag(a,"searchEntityFollow"),d.ue.count(a+"Count",1))}function l(a){a.removeClass("aok-hidden")}e.registerComponent("rdx-follow-button","rdx-follow-button",
function(a){function e(a){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find(".rdx-follow-button-button").attr("aria-label",t);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){p(a)});l(b)}function m(a){b.addClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(n);b.find(".rdx-follow-button-button").attr("aria-label",
u);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-follow-icon").addClass("rdx-follow-button-following-icon");b.unbind().click(function(){v(a)});l(b)}function w(){b.removeClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(g);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){"undefined"!==typeof sessionStorage&&(sessionStorage.followKey=
h);d.location.href=x});l(b)}function p(a){c.ajax({type:"POST",contentType:"application/json; charset\x3dutf-8",url:y,data:JSON.stringify({authenticity_token:a,entity_id:h,category:q,ref:z}),success:function(){m(a)},error:function(){e();r.removeClass("aok-hidden");k("EntityFollowError")}})}function v(a){c.ajax({type:"DELETE",url:A+"\x26"+c.param({authenticity_token:a}),data:{},success:function(){e(a)},error:function(){m(a);r.removeClass("aok-hidden");k("EntityUnfollowError")}})}function B(){c.ajax({type:"GET",
url:C,data:{},success:function(a){if(a.isFollowable)if(a.signedIn)if(a.isFollowing)m(a.csrf);else{var b;b=h;var c;c=/rdx-entity-follow=([^#&]+)/.exec(d.location.search);(c&&2===c.length?c[1]:f)!==b||"undefined"===typeof sessionStorage?b=!1:(c=sessionStorage.followKey,sessionStorage.removeItem("followKey"),b=c===b);b?p(a.csrf):e(a.csrf)}else w()},error:function(){k("EntityFollowStatusError")}})}var b=c(a.elem()).find(".rdx-follow-button"),r=c(a.elem()).find(".rdx-follow-button-alert"),h=a.prop("entityID"),
q=a.prop("entityType"),C=a.prop("followStatusUrl"),y=a.prop("followUrl"),A=a.prop("unfollowUrl"),x=a.prop("flexSignInUrl"),g=a.prop("followText"),n=a.prop("followingText"),t=a.prop("followARIALabel"),u=a.prop("followingARIALabel"),z=a.prop("followReftag");"undefined"!==typeof h&&"undefined"!==typeof q&&("undefined"===typeof g&&(g="Follow"),"undefined"===typeof n&&(n="Following"),B())})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("SearchEntityWidgetAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("jQuery","a-truncate").register("rdx-entity-paragraph-common",function(c,b){return{rdxEntityLineHeightOverride:function(a){c(a.elem()).find(".rdx-entity-paragraph").each(function(a,b){a=c(b);b=a.attr("data-a-max-rows");a.css({"line-height":"1.5em","max-height":1.5*b+"em"})})},rdxEntityParagraphARIATruncate:function(a){a=
c(a.elem());a.find(".a-truncate-full").attr("aria-hidden","true");a.find(".a-truncate-cut").attr("aria-hidden","false")},rdxEntityUpdateParagraphTruncate:function(a){a=c(a.elem()).find(".a-truncate");b.get(a).update()}}});"use strict";b.when("rush-framework","rdx-entity-paragraph-common").register("rdx-entity-paragraph-truncate",function(c,b){c.registerComponent("rdx-entity-paragraph-truncate","rdx-entity-paragraph-truncate",function(a){b.rdxEntityLineHeightOverride(a);b.rdxEntityParagraphARIATruncate(a);
b.rdxEntityUpdateParagraphTruncate(a)})})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,p=m._namespace||m.attributeErrors,g=p?p("SearchWebAskAndAssistWidgetAssets",""):m;g.guardFatal?g.guardFatal(l)(g,window):g.execute(function(){l(g,window)})})(function(l,m,p){l.when("A","rush-framework","s-ana-widget-tracking-utils","s-ana-url-utils","ready").register("s-ana-widget",function(g,l,d,a){function b(a,c){var b=t.extend({},a);c&&c.forEach(function(a){delete b[a]});return b}function v(b,c,u){u=t.extend({},u);var e;u.n="n:"+b.join(",n:");
for(e in c)c.hasOwnProperty(e)&&(u[e]=c[e].join("|"));return a.buildSearchQueryString(u)}function f(a,c,b){var e={};e.ref=c.refMaker;e.rh=b;e.k=a.k;e.dm="true";e.dc="true";return e}function y(x,c,d,e){var g=a.getQueryParameters(m.location.href),h=a.getSearchParametersMap(g);e=b(h,e);x=v(c,x,e);return location.origin+"/s"+d.percolateParameters+"\x26"+t.param(f(g,d,x))}function r(a,c,b){for(var e=0,d={},h,n,k,g=[],e=0;e<c.length;e++)for(k in n=b[e],h=c[e],h=a[h],h=h.answersList,n=h[n],n=n.refinements,
n)d.hasOwnProperty(k)?(g=d[k].concat(n[k]),d[k]=g.filter(function(a,c){return g.indexOf(a)===c})):d[k]=n[k];return d}function q(b,c,g,e,v){return function(h){h=t(h.currentTarget);var n=c.currentQuestionId,k;k=h.data("answer-index");var f=e[n].answersList[k].nextQuestionId;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswer");c.questionPath.push(n);c.answerIndexList.push(k);k=d.incrementAndFetchQuestionIndex(c);d.updateSelectedAnswer(b,h);if(!f){h=c.questions;n=c.metadata;d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess");
d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefresh");d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectedAnswerCount",k);k=r(h,c.questionPath,c.answerIndexList);var f=c.questionPath,m=c.answerIndexList,l=n.scopedNodeList,p,q,w;for(p=0;p<f.length;p++)w=f[p],q=m[p],w=h[w],q=w.answersList[q].additionalScope,l=l.concat(q);h=y(k,l,n,v);c.questionPath.pop();c.answerIndexList.pop();d.decrementAndFetchQuestionIndex(c);a.navigateTo(h);return h}c.currentQuestionId=f;d.renderNextQuestion(b,
k,g,e,n,f);d.updateClientSideMetricCounter("HCXEffortlessShoppingANASelectAnswerSuccess")}}function p(a,c,b,e){return function(){var g=c.currentQuestionId,h=c.questionPath.pop(),f=a.find(".s-ana-answer-button-list[data-question-id\x3d"+h+"]"),k=c.answerIndexList.pop(),f=f.children(".s-ana-answer[data-answer-index\x3d"+k+"]");d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBack");k=d.decrementAndFetchQuestionIndex(c);d.renderNextQuestion(a,k,b,e,g,h);c.currentQuestionId=h;d.updateSelectedAnswer(a,
f);d.updateClientSideMetricCounter("HCXEffortlessShoppingANAClickBackSuccess")}}var t=g.$;l.registerComponent("s-ana-widget","s-ana-widget",function(a){a=t(a.elem());var c=a.data("widget-data")||{},b=c.metadata,e=c.questions;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoad");c.currentIndex=c.currentIndex?c.currentIndex:0;c.currentQuestionId=b.firstQuestionId;c.questionPath=c.questionPath?c.questionPath:[];c.answerIndexList=c.answerIndexList?c.answerIndexList:[];b&&0<a.find(".s-ana-answer").length&&
(a.find(".s-ana-answer").click(q(a,c,b,e,b.refinementBinList)),a.find(".s-ana-back-button").click(p(a,c,b,e)));d.updateClientSideMetricCounter("HCXEffortlessShoppingANAWidgetLoadSuccess")});return{cleanUpSearchParameterMap:b,buildSearchQueryString:v,buildQueryParameters:f,createAnswerClickHandler:q,createBackButtonHandler:p,buildUrl:y}});l.when("R","rush-router-pattern-parser","s-ana-widget-tracking-utils").register("s-ana-url-utils",function(g,l,d){return{getQueryParameters:function(a){a=(a||"").split("?");
a=1<a.length?a.slice(1).join("?"):a[0];return l.parseQueryString(a)},getSearchParametersMap:function(a){var b={},d,f;if(a&&a.rh)for(a=a.rh.split(","),f=0;f<a.length;f++)d=a[f].split(":"),b[d[0]]=d[1];return b},buildSearchQueryString:function(a){var b,d=[];for(b in a)"n"===b?d.push(a[b]):d.push(b+":"+a[b]);return d.join(",")},navigateTo:function(a){var b={};b.url=a;d.updateClientSideMetricCounter("HCXEffortlessShoppingANAPageRefreshSuccess");g.to(b)}}});l.when("A","ready").register("s-ana-widget-tracking-utils",
function(g){function l(a,b){0===b?a.find(".s-ana-back-button").addClass("aok-hidden"):a.find(".s-ana-back-button").removeClass("aok-hidden")}function d(a,b,d,f){a.find(".s-ana-question").addClass("s-ana-hidden-element");a.find(".s-ana-question-index").text(b.indexList[d]);a.find(".s-ana-question-text").text(f.questionString);a.find(".s-ana-question").removeClass("s-ana-hidden-element")}return{updateSelectedAnswer:function(a,b){a.find(".s-ana-answer").removeClass("s-ana-answer-button-selected");b.addClass("s-ana-answer-button-selected")},
renderNextQuestion:function(a,b,p,f,m,r){m=a.find(".s-ana-answer-button-list[data-question-id\x3d"+m+"]");f=f[r];r=a.find(".s-ana-answer-button-list[data-question-id\x3d"+r+"]");var q=a.find(".s-ana-footer");m.addClass("s-ana-hidden-element");d(a,p,b,f);l(a,b);r.removeClass("s-ana-hidden-element");g.fadeOut(q,"0","ease-in",function(){g.fadeIn(q,"500","ease-in",function(){})})},updateClientSideMetricCounter:function(a,b){b=b?b:1;m.ue&&m.ue.count&&m.ue.count(a,(m.ue.count(a)||0)+b)},incrementAndFetchQuestionIndex:function(a){var b=
a.currentIndex;b++;return a.currentIndex=b},decrementAndFetchQuestionIndex:function(a){var b=a.currentIndex;b--;return a.currentIndex=b}}})});
/* ******** */
(function(e){var n=window.AmazonUIPageJS||window.P,r=n._namespace||n.attributeErrors,c=r?r("SearchWebKnowledgeWidgetAssets",""):n;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,n,r){e.when("A","s-web-application-controller","rush-util","tab-nav-util").register("tab-nav-ajax",function(c,d,e,h){return{ajaxTabClick:function(c){var b=c.selectedTab.$tab;c=b.attr("id");var a=b.attr("data-ajaxUrl"),l=b.closest("[data-widgetId]").attr("data-widgetId"),b=b.closest("[data-uuid]").attr("data-uuid"),
m="",g=!1;e.isNullOrUndefined(l)||2!==l.split(":").length||(m=l.split(":")[0]);l={uuid:b,ajaxUrl:a};(g=h.checkCriticalDataMissing(l))?h.logMissingCriticalData(l,m):(h.logMetric("tab_navigation:"+m),d.requestPartialContent(a,{suffix:":"+b+":"+c})["catch"](function(){h.logMetric("tab_navigation:"+m+":ajax_call_failure")}))}}});e.when("A","jQuery","rush-framework","s-actions","rush-util","tab-nav-util","tab-nav-ajax","a-carousel-framework").register("know-tab-nav",function(c,d,e,h,k,b,a,l){e.registerComponent("s-tab-navigation-component",
"s-tab-navigation-component",function(m){var g=m.elem(),e=d(g),g=e.closest("[data-uuid]").attr("data-uuid"),t=e.closest("[data-widgetId]").attr("data-widgetId"),f=b.getMatchingElement(e,".a-carousel-container"),p=e.closest(".a-tab-content"),n=b.getActiveTabHeight(e),u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]"),r="",x=!1,v=p.attr("id"),w=p.closest(".a-tab-container").find(".know-tab-nav-tabs-set").find("li.know-tab-nav-tab-header#"+b.escapeSpecialHashCharacter(v)),q=b.getMatchingElement(f,
"[id*\x3dtab-navigation-asin-header]");k.isNullOrUndefined(t)||2!==t.split(":").length||(r=t.split(":")[0]);t={uuid:g,carousel:f,tabContent:p,initialActiveTabHeight:n};(x=b.checkCriticalComponentDataInvalid(t))?b.logMissingCriticalData(t,r):(m.on(h.LOAD_SEARCH_PAGE+":"+g+":"+v,function(){u=b.getMatchingElement(e,"[id*\x3dtab-navigation-tab-spinner]");!p.is(".a-hidden")&&0<u.length&&(f.addClass("aok-hidden"),u.height(n),u.html('\x3cdiv class\x3d"a-spinner-wrapper know-tab-nav-spinner"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium"\x3e\x3c/span\x3e\x3c/div\x3e'))}),
m.on(h.RESULT_ITEM_READY+":"+g+":"+v,function(a){var c=p.attr("id"),d=document.createElement("div");k.isNullOrUndefined(a)||k.isBlank(c)?b.logMetric("tab_navigation:"+r+":ajax_asin_invalid"):(a=a.item.html,d.innerHTML=a,d=d.firstElementChild.getAttribute("data-asin"),k.isNotBlank(d)&&!p.is(".a-hidden")&&(d="#tab-navigation-replace-"+b.escapeSpecialHashCharacter(c)+"-"+d,d=e.find(d)[0],k.isNullOrUndefined(d)||(a=b.getAsinContent(a),0<a.length&&(m.replace(d,a[0].innerHTML),k.isNullOrUndefined(u)||0!==
p.find("[id*\x3dtab-navigation-replace]").length||(u.remove(),f.removeClass("aok-hidden"),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+b.escapeSpecialHashCharacter(c)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(c)),0<q.length?f.height()-q.outerHeight(!0):f.height()),l.createAll(),l.initializeAll())))))}),0<q.length&&b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-top-space-"+
b.escapeSpecialHashCharacter(v)),q.outerHeight(!0)),b.setElementHeight(b.getMatchingElement(f,"#tab-navigation-tab-link-"+b.escapeSpecialHashCharacter(v)),0<q.length?f.height()-q.outerHeight(!0):f.height()),b.setLineClampClass(b.getMatchingElement(f,"#tab-navigation-tab-link-line-clamp-"+b.escapeSpecialHashCharacter(v))),c.on("a:tabs:"+g+":"+p.data("a-name")+":select",a.ajaxTabClick),w.removeClass("know-tab-nav-disable-tab"),w.addClass("know-tab-nav-enable-tab"))})});e.when("jQuery","rush-util").register("tab-nav-util",
function(c,d){function e(a,b){var d=c(a),g;b.forEach(function(a){g=d.find(a);0<g.length&&(d=g)});return d}function h(a){return(a.match(/(\s|^)s-line-clamp-\d+(?!\S)\b/g)||[]).map(c.trim)}function k(a){c(a).removeClass(function(a,b){return h(b).join(" ")}).addClass("s-line-clamp-2")}function b(a){var b=n.ue;b&&b.tag&&b.tag(a)}return{getAsinContent:function(a){a=e(a,[".template\\\x3dSEARCH_RESULTS",".s-latency-cf-section",".s-card-container"]);a.find(".a-spacing-medium").removeClass("a-spacing-medium");
a.find('[class*\x3d"status-badge"]').remove();k(a.find("[class*\x3ds-line-clamp]"));return a},findLineClampClass:h,getActiveTabHeight:function(a){a=c(a).closest(".a-tab-container").find(".a-tab-content").not(".a-hidden").height();return d.isNullOrUndefined(a)?400:a},escapeSpecialHashCharacter:function(a){return a.replace(/#/g,"\\#")},logMetric:b,checkCriticalDataMissing:function(a){for(var b in a)if(d.isNullOrUndefined(a[b])||d.isBlank(a[b]))return!0;return!1},checkCriticalComponentDataInvalid:function(a){return d.isNullOrUndefined(a.uuid)||
d.isBlank(a.uuid)||0>=c(a.carousel).length||0>=c(a.tabContent).length||!d.isNumber(a.initialActiveTabHeight)?!0:!1},logMissingCriticalData:function(a,c){for(var e in a)(d.isNullOrUndefined(a[e])||d.isBlank(a[e]))&&b("tab-navigation:"+c+":"+e)},getMatchingElement:function(a,b){return c(a).find(b)},setElementHeight:function(a,b){c(a).height(b)},setLineClampClass:k,setCSSPropertyForObject:function(a,b,c){d.isNullOrUndefined(c)||a.css(b,c)}}})});
/* ******** */
(function(l){var f=window.AmazonUIPageJS||window.P,n=f._namespace||f.attributeErrors,e=n?n("SearchWebSpecBasedShoppingWidgetAssets",""):f;e.guardFatal?e.guardFatal(l)(e,window):e.execute(function(){l(e,window)})})(function(l,f,n){l.when("A").register("s-sbs-metrics",function(e){var z=e.$;return{logFeatureLatencyMetric:function(e,l){f.uet&&z.isFunction(f.uet)&&f.uet(e,l,{wb:1})},sendLatencyMetricsToServer:function(e){f.uex&&z.isFunction(f.uex)&&f.uex("ld",e,{wb:1})}}});l.when("A","R","rush-router-pattern-parser").register("s-sbs-widget-common",
function(e,z,m){function l(a){a.addClass("s-sbs-widget--loading");a.find(".sbs-refinement-bin-spinner").removeClass("aok-hidden");a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden")}function h(){return!(e.capabilities.isSafari||e.capabilities.isAmazonApp)}var d=e.$;return{getQueryParameters:function(){var a=(f.location.href||"").split("?"),a=1<a.length?a.slice(1).join("?"):a[0];return m.parseQueryString(a)},getActiveRefinementBinIds:function(a){return a.find(".sbs-refinement-bin").map(function(a,
c){return d(c).data("refinement-bin-id")}).get()},getSearchParametersMap:function(a){var b={},c,d;if(a.rh!==n)for(a=a.rh.split(","),d=0;d<a.length;d++)c=a[d].split(":"),b[c[0]]=c[1];return b},getNodeListString:function(a){var b="",c,d;for(d=0;d<a.length;d++)c=a[d],""!==b&&(b+=","),b=b+"n:"+c;return b},buildSearchQueryString:function(a){var b,c="";for(b in a)""!==c&&"n"!==b&&(c+=","),"nodeScope"===b?c+=a[b]:"n"!==b&&(c=c+b+":"+a[b]);return c},setQueryParameter:function(a,b,c,d){a=(a.data("widget")||
{}).metadata;a!==n&&a.hasOwnProperty(c)&&(c=a[c],c!==n&&""!==c&&(b[d]=c));return b},addLinkParameters:function(a,b){(a=(a.data("widget")||{}).linkParams)&&d.each(a,function(a,d){b[a]=d});return b},showWidget:function(a){a.removeClass("s-sbs-widget--loading");a.removeClass("s-sbs-widget--loading-without-selections");a.find(".sbs-refinement-bin-spinner").addClass("aok-hidden")},hideWidget:function(a){h()&&l(a)},scrollToTarget:function(a){a&&d(a).closest(".sbs-refinement-bin").scrollTop(a.offsetTop-
a.parentElement.offsetTop+5)},updatePopularRefinementsVisibility:function(a){var b=0,c=a.find("input:checked").length;a.find(".sbs-featured-refinement").toggleClass("aok-hidden",0<c);0===c&&(a.find("div.sbs-featured-refinement").each(function(a,c){"none"!==d(c).css("display")&&b++}),a.find(".sbs-refinement-list-divider").toggleClass("aok-hidden",0===b))},incrementClientSideMetricCounter:function(a){f.ue&&f.ue.count&&f.ue.count(a,(f.ue.count(a)||0)+1)},toggleVisibilityForEachBin:function(a){a.find(".sbs-refinement-bin").each(function(a,
c){0<d(c).find(".sbs-refinement-container").not(".sbs-ineligible-hidden").not(".sbs-tagging-hidden").length?d(c).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):d(c).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")})},updateActiveCheckMarkVisibility:function(a){var b=a.data("stateRefinementsMap"),c;a.find(".sbs-refinement-bin").each(function(a,e){c=d(e).attr("data-refinement-bin-id");b.hasOwnProperty(c)||d(e).closest(".sbs-refinement-bin-cell").find(".sbs-active-checkmark").addClass("aok-hidden")})},
navigateTo:function(a){var b={};b.url=a;z.to(b)},shouldShowLoadingState:h,showLoadingState:l}});l.when("A","s-sbs-eligible-refinements","s-sbs-widget-common").register("s-sbs-widget-tagging",function(e,l,m){function f(a){return d.map(a.split(" "),function(a){if(-1<a.indexOf("sbs-refinement-tag-"))return a.substring(19)})[0]}function h(a,b,c,e){var h=(c.data("widget")||{}).tagLabels,f=c.data("stateRefinementsMap"),p,w,A;h!==n&&1<h.length&&(-1<h.indexOf(a)||"sbsTagButtonAll"===a)&&(h.forEach(function(q){q===
a?c.find(".sbs-refinement-container.sbs-refinement-tag-"+q).removeClass("sbs-tagging-hidden"):!1===b?c.find(".sbs-refinement-container.sbs-refinement-tag-"+q).each(function(a,b){c.find(b).addClass("sbs-tagging-hidden");p=d(b).find(":input");!0===p.prop("checked")&&(p.prop("checked",!1),w=d(b).attr("data-refinement-id"),A=d(b).closest(".sbs-refinement-bin").attr("data-refinement-bin-id"),l.updateStateRefinementsMap(c,w,A,!1,"checkbox"===p[0].type))}):c.find(".sbs-refinement-container.sbs-refinement-tag-"+
q).removeClass("sbs-tagging-hidden")}),f!==n&&0<Object.keys(f).length&&e?(m.showLoadingState(c),l.updateEligibleRefinements("",c)):e&&"sbsTagButtonAll"===a?(c.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden"),c.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden"),m.toggleVisibilityForEachBin(c)):e&&(c.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden"),m.toggleVisibilityForEachBin(c)))}
var d=e.$;return{getTag:f,updateTaggedRefinementsVisibility:h,verifyTaggedSelectedRefinements:function(a){var b=(a.data("widget")||{}).tagLabels,c=[];b!==n&&1<b.length&&(b.forEach(function(b){0<a.find(".sbs-refinement-tag-"+b).find("input:checked").length&&c.push(b)}),a.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),c.length===b.length||0===c.length?a.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"):c.forEach(function(c){h(c,!1,a,
!1);a.find(".sbs-tag-button-"+c).addClass("a-button-selected sbs-tag-button-selected")}))},taggedRefinement:function(a,b,c){var e=(c.data("widget")||{}).tagLabels,m,l;e!==n&&1<e.length&&(e=d(a).find(":input"),m=!0,l=0,"checkbox"===e.prop("type")&&(m=d(a).find(":input").prop("checked")),m?0===c.find(".sbs-tagging-hidden").length&&(c.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),c.find(".sbs-tag-button-"+b).addClass("a-button-selected sbs-tag-button-selected"),h(b,
!1,c,!1)):(c.find(".sbs-refinement-container.sbs-refinement-tag-"+b).each(function(c,b){!0===d(b).find(":input").prop("checked")&&d(b).data("refinement-id")!==d(a).data("refinement-id")&&l++}),0===l&&(c.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected"),c.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"),h(b,!0,c,!1))))},tagButtonHandler:function(a,b){d(a).hasClass("sbs-tag-button-selected")||("sbs-tag-button-all"===d(a).find(":input").data("button-id")?
(h("sbsTagButtonAll",!1,b,!0),b.find("div[class*\x3d'sbs-refinement-tag']").removeClass("sbs-tagging-hidden")):h(f(a.className),!1,b,!0),m.updateActiveCheckMarkVisibility(b),b.find(".sbs-tag-button").removeClass("sbs-tag-button-selected"),d(a).addClass("sbs-tag-button-selected"),m.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSTagButtonClick"))}}});l.when("A","s-sbs-widget-common").register("s-sbs-widget-feedback",function(e,f){function m(a,b){var c=(b.data("widget")||{}).metadata;c!==
n&&c.hasOwnProperty("formsUrl")&&(c=c.formsUrl,b.find(".sbs-feedback-form").find("input[name\x3d__token_]").val(a.csrfToken.token),b.find(".sbs-feedback-selected-refinements-text-area").find("textarea").val(JSON.stringify(f.getQueryParameters())),e.post(c,{paramsFormat:"string",params:b.find(".sbs-feedback-form").serialize(),success:function(){},error:function(a,c,b){l.log("Status: "+c+";Error: "+b,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function B(a){var b=(a.data("widget")||{}).metadata;b!==n&&b.hasOwnProperty("sbsWidgetFormUrl")&&
(b=b.sbsWidgetFormUrl,e.get(b,{accepts:"application/json",success:function(c){c.hasOwnProperty("csrfToken")&&c.csrfToken.hasOwnProperty("token")&&m(c,a)},error:function(a,b,d){l.log("Status: "+b+";Error: "+d,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function h(a,b){b.find(".sbs-heading-container").find(".sbs-heading-text").each(function(a,b){d(b).addClass("sbs-feedback-hidden aok-hidden")});b.find(".sbs-heading-block").find("[headingId\x3d"+a+"]").removeClass("sbs-feedback-hidden aok-hidden");b.find(".sbs-free-text-container").removeClass("sbs-feedback-hidden aok-hidden");
b.find(".sbs-feedback-form-submit-button-container").removeClass("sbs-feedback-hidden aok-hidden")}var d=e.$;return{sendFeedbackToForm:m,submitFeedback:B,toggleFeedbackContent:h,createFeedbackQuestionButtonClickHandler:function(a){return function(b){var c=d(b.currentTarget);b.preventDefault();a.find(".sbs-radio-button-container").find("input:checked").each(function(a,b){d(b).prop("checked",!1)});b=c.find(":input");b.prop("checked",!0);b=b.attr("id");h(b,a)}},createFeedbackSubmitButtonClickHandler:function(a){return function(b){b.preventDefault();
a.find(".sbs-feedback-form").fadeOut("slow",function(){a.find(".sbs-feedback-post-submit-container").removeClass("sbs-feedback-hidden aok-hidden").css("display","none").fadeIn("slow");a.find(".sbs-feedback-post-submit-content").focus()});B(a)}}}});l.register("s-sbs-afs-template",function(){return{getAFSRequestTemplate:function(e){e=e.data("activeRefinementBinsArray")||[];return{pageNumber:"1",asinCountPerPage:"10",filters:[{runLevel:"1",filterId:"sbs",filterType:"refinementsearch",filterParameters:{OptionalMap:{size:"1",
"include-refinements":"true","feature-set-definitions":'{"REFINEMENTS": {"deliveryDayRefinement": "enabledWithoutBinning","enableRefinementDiscriminators": "false","enableSmartRefinements": "true"}}',"active-refinement-ids":JSON.stringify(e)}}}]}}}});l.when("A","s-sbs-metrics","s-sbs-widget-common","s-sbs-afs-template").register("s-sbs-eligible-refinements",function(e,f,m,n){function h(a,b,c){b=b.toString();a.hasOwnProperty(c)?-1===a[c].indexOf(b)&&(a[c]+="|"+b):a[c]=b;return a}function d(a,b,c){var d;
b=b.toString();a.hasOwnProperty(c)&&(d=a[c].split("|"),b=d.indexOf(b),-1<b&&(d.splice(b,1),0<d.length?a[c]=d.join("|"):delete a[c]));return a}function a(a,b){var c=[],d=!1,e=p(b),g;if(0!==Object.keys(a).length)for(b=0;b<a.values.length;b++)"0"===a.values[b].notAvailable&&c.push(a.values[b].id);if(e.hasClass("sbs-featured-refinement-bin")){if(e.find(".sbs-button-list-item").addClass("sbs-ineligible-hidden"),e.find(".a-button-selected").closest(".sbs-refinement-container").each(function(a,b){g=p(b).find(":input").data("refinement-id").toString();
-1===c.indexOf(g)&&c.push(g)}),0!==c.length)for(b=0;b<c.length;b++)e.find("[data-refinement-id\x3d'"+c[b]+"']").closest(".sbs-button-list-item").removeClass("sbs-ineligible-hidden")}else if(e.find(".sbs-refinement-container").addClass("sbs-ineligible-hidden"),e.find("input:checked").closest(".sbs-refinement-container").each(function(a,b){g=p(b).data("refinement-id").toString();-1===c.indexOf(g)&&c.push(g)}),0!==c.length)for(b=0;b<c.length;b++)e.find("[data-refinement-id\x3d'"+c[b]+"']").removeClass("sbs-ineligible-hidden");
0<e.find(".sbs-refinement-container").not(".sbs-ineligible-hidden").not(".sbs-tagging-hidden").length&&(d=!0);return d}function b(b,c,d){var e,f=b.additionalFilterData["*value*"].sbs.refinements,g,h,k;d.find(".sbs-refinement-bin").each(function(b,y){k=p(y).data("refinement-bin-id");if(k!==c&&"n"!==k){g=!1;h={};for(e=0;e<f.length;e++)if(f[e].shortId===k){h=f[e];break}(g=a(h,y))?p(y).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):p(y).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")}m.updatePopularRefinementsVisibility(p(y))})}
function c(a){var b={};Object.keys(a).sort().forEach(function(c){b[c]=a[c]});delete b["feature-set-definitions"];return JSON.stringify(b)}function t(a){var b=(a.data("widget")||{}).scopedBrowseNodeIds;a=a.data("stateRefinementsMap");var c="";b&&(c=b.join(","));c&&a&&a.n?-1===b.indexOf(a.n)&&(c+=","+a.n):a&&a.n&&(c=a.n);return c}function u(a,b){var c=a.data("stateRefinementsMap"),d=(a.data("widget")||{}).metadata,e=t(a),g,f;if(d&&c&&e){g=n.getAFSRequestTemplate(a);g.sessionId=d.sessionId;g.customerId=
d.customerId;a=g.filters[0].filterParameters.OptionalMap;a["search-alias"]=d.searchAlias;a["session-id"]=d.sessionId;a["customer-id"]=d.customerId;a["marketplace-id"]=d.marketplace;a["should-update-server-cache"]=b?"true":"false";a.store=d.store;a.keywords=d.marketplaceDefaultLanguageKeyword.toLowerCase();a.node=e;for(f in c)"n"!==f&&(b=c[f].split("|"),b.sort(),a[f]=b.join("|"));g.filters[0].filterParameters.OptionalMap=a}return g}function v(a,d,e,h,n){var g,r={},k=e.data("cachedCalls");n||m.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCall");
k&&(r=k);f.logFeatureLatencyMetric("bb","SBSAFSAjaxCall");p.ajax({type:"POST",url:"/gp/sfx/get-filtered-asins.html",dataType:"json",timeout:5E3,xhrFields:{withCredentials:!0},data:{afsRequest:JSON.stringify(a)},success:function(x){!n&&x.hasOwnProperty("additionalFilterData")&&x.additionalFilterData&&0<x.additionalFilterData["*value*"].sbs.refinements.length&&(f.logFeatureLatencyMetric("cf","SBSAFSAjaxCall"),g=c(a.filters[0].filterParameters.OptionalMap),r[g]=x,e.data("cachedCalls",r),b(x,d,e),m.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetAFSCallSuccess"))},
error:function(a,b,c){n||(f.logFeatureLatencyMetric("cf","SBSAFSAjaxCall"),m.incrementClientSideMetricCounter("timeout"===b?"HCXEffortlessShoppingSBSWidgetAFSCallTimeout":"HCXEffortlessShoppingSBSWidgetAFSCallFailed"),l.log("Status: "+b+";Error: "+c,"SBS_WIDGET_ELIGIBLE_REFINEMENTS_CALL_ERROR"))},complete:function(){n||(m.showWidget(e),m.scrollToTarget(h),f.sendLatencyMetricsToServer("SBSAFSAjaxCall"))}})}var p=e.$;return{addRefinement:h,removeRefinement:d,updateRefinementsDisplayedInBin:a,processResponse:b,
buildKey:c,buildNodeList:t,getAFSRequest:u,callAFS:v,updateStateRefinementsMap:function(a,b,c,e,f){var g=a.data("stateRefinementsMap");g&&(f?g=e?h(g,b,c):d(g,b,c):(g.hasOwnProperty(c)&&delete g[c],e&&(g=h(g,b,c))),a.data("stateRefinementsMap",g))},updateEligibleRefinements:function(a,d,f){var h,l=u(d,!1),g=d.data("cachedCalls"),n;l?(g&&(h=c(l.filters[0].filterParameters.OptionalMap),h in g&&(n=g[h])),n?e.delay(function(){b(n,a,d);m.showWidget(d);m.scrollToTarget(f)},150):v(l,a,d,f,!1,!1)):m.showWidget(d)}}});
l.when("A","rush-dom","rush-framework","a-button","s-sbs-metrics","s-sbs-widget-common","s-sbs-widget-tagging","s-sbs-widget-feedback","s-sbs-eligible-refinements").register("s-sbs-widget",function(e,f,l,n,h,d,a,b,c){function t(a,b){(a=(a.data("widget")||{}).scopedBrowseNodeIds)||(a=[]);a=d.getNodeListString(a);b.n&&(a+=",n:"+b.n);return a}function u(a,b){for(var c in b)"n"!==c&&(""===b[c]?delete a[c]:a[c]=b[c]);return a}function v(a){var b={},c;a.find(".sbs-refinement-bin").each(function(a,c){var d=
k(c).data("refinement-bin-id");a=k(c).find("input:checked").closest(".sbs-refinement-container");b[d]="";0<a.length&&k(a).each(function(a,c){""===b[d]?b[d]=k(c).data("refinement-id"):(new RegExp("(^"+k(c).data("refinement-id")+")|(\\|"+k(c).data("refinement-id")+")")).test(b[d])||(b[d]+="|"+k(c).data("refinement-id"))})});c=a.find(".sbs-featured-refinement-bin");0<c.length&&(c=c[0],a=a.find(".sbs-featured-refinement-button.a-button-selected"),0<a.length&&(b[k(c).data("refinement-bin-id")]=k(a[0]).find(":input").data("refinement-id")));
return b}function p(a){var b,c,e;b=d.getQueryParameters();c=d.getSearchParametersMap(b);e=v(a);c=u(c,e);c.nodeScope=t(a,e);b.rh=d.buildSearchQueryString(c);b=d.setQueryParameter(a,b,"keyword","k");b=d.setQueryParameter(a,b,"refMarker","ref");b=d.setQueryParameter(a,b,"persistId","pid");b.page=1;b=d.addLinkParameters(a,b);return location.origin+location.pathname+"?"+k.param(b)}function w(a){return function(b){var e=b.selectedButton.$button[0];b=k(a.find(".sbs-featured-refinement-bin")[0]).data("refinement-bin-id");
e=k(e).find(":input").data("refinement-id");d.hideWidget(a);a.find(".sbs-refinement-bin").scrollTop(0);"n"===b&&(a.find(".sbs-refinement-bin input:checked").each(function(a,b){k(b).prop("checked",!1)}),a.data("stateRefinementsMap",{}));c.updateStateRefinementsMap(a,e,b,!0,!1);a.data("stateRefinementsMap")&&!k.isEmptyObject(a.data("stateRefinementsMap"))&&c.callAFS(c.getAFSRequest(a,!0),b,a,null,!0);b=p(a);d.navigateTo(b)}}function A(b){return function(c){a.tagButtonHandler(c.selectedButton.$button[0],
b)}}function q(a){a.find(".sbs-tag-button").removeClass("a-button-selected sbs-tag-button-selected");a.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected");a.find(".sbs-active-checkmark").addClass("aok-hidden");a.find(".sbs-featured-refinement-button").removeClass("a-button-selected");a.find(".sbs-refinement-bin input:checked").each(function(b,c){a.find(c).prop("checked",!1)});a.find(".sbs-refinement-text-input").prop("value","");a.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden");
a.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-button-list-item.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-refinement-bin-cell").removeClass("aok-hidden");a.find(".sbs-featured-refinement").removeClass("aok-hidden");a.find(".sbs-refinement-bin").scrollTop(0);a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden");a.data("stateRefinementsMap",
{})}function C(a){return function(b){b.preventDefault();q(a)}}function D(b){return function(e){var f=k(e.currentTarget);e=f.closest(".sbs-refinement-container");var h=e.data("refinement-id"),g=e.closest(".sbs-refinement-bin"),l=g.data("refinement-bin-id"),n=f.prop("checked"),f="checkbox"===f.prop("type"),m;d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClick");d.hideWidget(b);f?g.find("[data-refinement-id\x3d'"+h+"']").each(function(a,b){k(b).find(":input").prop("checked",
n);!k(b).hasClass("sbs-featured-refinement")&&n&&(m=k(b).closest("li").get(0))}):(g.find("input:checked").each(function(a,b){k(b).prop("checked",!1)}),g.find("[data-refinement-id\x3d'"+h+"']").each(function(a,b){k(b).find(":input").prop("checked",!0);k(b).hasClass("sbs-featured-refinement")||(m=k(b).closest("li").get(0))}));if(g=a.getTag(e.attr("class")))a.taggedRefinement(e,g,b),m||(m=e.closest("li").get(0));c.updateStateRefinementsMap(b,h,l,n,f);b.data("stateRefinementsMap")&&!k.isEmptyObject(b.data("stateRefinementsMap"))&&
c.callAFS(c.getAFSRequest(b,!0),l,b,null,!0);e=p(b);d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClickSuccess");d.navigateTo(e)}}function g(a){return function(b){var e=k(b.currentTarget).find(":input"),f=e.prop("type"),g;b.preventDefault();d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClick");d.hideWidget(a);"submit"===f?(g=e.data("refinement-id"),e=e.closest(".sbs-featured-refinement-bin").data("refinement-bin-id")):(g=e.closest(".sbs-refinement-container").data("refinement-id"),
e=e.closest(".sbs-refinement-bin").data("refinement-bin-id"));c.updateStateRefinementsMap(a,g,e,!0,"checkbox"===f);c.callAFS(c.getAFSRequest(a,!0),e,a,null,!0);d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetRefinementClickSuccess");d.navigateTo(k(b.currentTarget).prop("href"))}}function r(b){var e=!1,f=(b.data("widget")||{}).metadata,g=d.getQueryParameters(),g=d.getSearchParametersMap(g),h=d.getActiveRefinementBinIds(b),k;d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoad");
g.n&&(k=b.find(".sbs-featured-refinement-button.a-button-selected"),0<k.length&&g.n===k.first().find(":input").data("refinement-id").toString()||delete g.n);b.data("stateRefinementsMap",g);b.data("activeRefinementBinsArray",h);f&&(e="true"===f.hasSelectedRefinements.toLowerCase());e?(d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinements"),a.verifyTaggedSelectedRefinements(b),c.updateEligibleRefinements("",b),d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadWithRefinementsSuccess")):
(b.find(".sbs-tag-button-all").addClass("a-button-selected sbs-tag-button-selected"),d.showWidget(b));d.incrementClientSideMetricCounter("HCXEffortlessShoppingSBSWidgetLoadSuccess")}var k=e.$;h.logFeatureLatencyMetric("bb","SBSComponentScan");l.registerComponent("s-sbs-widget","s-sbs-widget",function(a){var c=k(a.elem()),d=c.data("widget")||{},f=d.scopedBrowseNodeIds,l=d.linkParams,d=d.metadata;h.logFeatureLatencyMetric("bb","SBSWidgetLoad");h.logFeatureLatencyMetric("cf","SBSComponentScan");h.sendLatencyMetricsToServer("SBSComponentScan");
f&&l&&d&&0<c.find(".es-sbs-top-slot-widget").length&&(r(c),c.find(".sbs-refinement-container").delegate("input","change",D(c)),c.find(".sbs-reset-filters").click(C(c)),e.on("a:button-group:featuredRefinementButtons:toggle",w(c)),e.on("a:button-group:tagButtons:toggle",A(c)),c.find(".sbs-feedback-form").submit(b.createFeedbackSubmitButtonClickHandler(c)),c.find(".sbs-yes-button").click(b.createFeedbackQuestionButtonClickHandler(c)),c.find(".sbs-no-button").click(b.createFeedbackQuestionButtonClickHandler(c)),
c.find(".sbs-direct-link").click(g(c)),c.find(".sbs-direct-link-toggle-button").click(g(c)),a.teardown=function(){e.off("a:button-group:featuredRefinementButtons:toggle");e.off("a:button-group:tagButtons:toggle")});h.logFeatureLatencyMetric("cf","SBSWidgetLoad");h.sendLatencyMetricsToServer("SBSWidgetLoad")});k(".s-sbs-widget").each(function(a,b){f.scan(b)});return{createFeaturedRefinementButtonToggleHandler:w,createResetFiltersClickHandler:C,createRefinementClickHandler:D,updateNodeScopeWithSelectedSubtype:t,
addSelectedRefinements:u,getSelectedRefinements:v,buildNavigationUrl:p,onWidgetLoad:r,createDirectLinkClickHandler:g}})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("LoomSponsoredProductsAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("A","rush-framework").register("sp-sponsored-result",function(c,b){function e(a){a=a.elem();a=c.$(a).find(".s-image");if(0<a.length){a=(a=a.is(":visible"))?0:1;var b=f("sp_hidden")||0;f("sp_hidden",b+a);a=f("sp_delivered")||0;f("sp_delivered",a+1)}}var f=d.ue&&d.ue.count;f&&
b.registerComponent("sp-sponsored-result","sp-sponsored-result",e)})});
/* ******** */
(function(n){var q=window.AmazonUIPageJS||window.P,v=q._namespace||q.attributeErrors,c=v?v("QuantitySelectorAssets",""):q;c.guardFatal?c.guardFatal(n)(c,window):c.execute(function(){n(c,window)})})(function(n,q,v){n.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(c,a,b){function g(){d&&d.enableCheckoutCompatibility&&f()}function f(){c.$('span[id^\x3d"'+a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){c.$(this)[0].style.color="#B12704"});
c.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=c.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),c.$('button[id^\x3d"'+a+'-announce"]').each(function(){c.$(this)[0].style.paddingRight="17px"}))})}function m(a){function d(a){return c.$(a+"-announce")}return function(a){return new d(a)}}function p(d){var g=function(a,g){var b=a+"-extradata",f=d.state(b);if(null==g)return b=d.state(a),g=c.$.extend({},b,f);f=c.$.extend({},f,g);d.state(b,
f)};g.parse=function(){for(var g=c.$(a.getQsWidgetGenericStateSelectorQuery()),h=a.getQsWidgetConfigurationId(""),l=0;l<g.length;l++){var f=g[l].getAttribute("data-a-state");if((f=b.parseJSON(f).key)&&f.substring(0,h.length)==h){var m=d.state(f);m&&m.id||(m=b.parseJSON(g[l].innerHTML),d.state(f,m))}}};g.replace=function(a,g){a+="-extradata";"function"===typeof d.state.replace?d.state.replace(a,g):d.state(a,g)};return{state:g}}var d;n.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",
function(a,d){n.register("QuantitySelectorAUIDeps",function(){return{aUtil:b,aState:a.object,aButton:d.object,initialize:g}})});(function(){for(var g=c.$(a.getQsWidgetGenericStateSelectorQuery()),f=a.getQsWidgetGlobalConfigurationId(),k=0;k<g.length;k++){var h=g[k].getAttribute("data-a-state");if((h=b.parseJSON(h).key)&&h.substring(0,f.length)==f){d=b.parseJSON(g[k].innerHTML);break}}})();(function(){d&&d.enableCheckoutCompatibility?(n.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",
function(a){n.register("QuantitySelectorAUIDeps_AState",function(){return{object:p(a)}})}),n.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",function(a){n.register("QuantitySelectorAUIDeps_AButton",function(){return{object:m(a)}})}),c.on("checkout:afterReload",function(){c.trigger(a.getQsWidgetEventInitialize(),!1)})):(n.when("a-state").execute("qsAUIDeps-a-state-register",function(a){n.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),n.when("a-button").execute("qsAUIDeps-a-button-register",
function(a){n.register("QuantitySelectorAUIDeps_AButton",function(){return{object:a}})}));c.on("a:pageUpdate ready",function(){c.trigger(a.getQsWidgetEventInitialize(),!1)})})();g()});"use strict";n.when("A").register("QuantitySelectorConstants",function(c){var a={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},b={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},
getQsWidgetEventLoadStatesAndInitialize:function(){return"quantity-selector-widget:loadStatesAndInitialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetVariationEventTriggerAction:function(){return"quantity-selector-widget-variation-selector:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},
getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},getQsWidgetVariationEventSelectId:function(){return"quantity-selector-widget-variation-selector:selectId"},getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},
getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetInitialViewTextLink:function(){return"text_link"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},
getQsWidgetConfigurationId:function(a){return"qs-widget-configuration-"+a},getQsWidgetStateScriptSelectorQuery:function(a){return"script[data-a-state*\x3d'qs-widget-configuration-"+a+"'], "+("div[data-a-state*\x3d'qs-widget-configuration-"+a+"']")},getQsWidgetGenericStateSelectorQuery:function(){return"script[type\x3d'a-state'], div[data-a-state]"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetDivSelectorQueryForWidgetContainers:function(){return"div[id^\x3dqs-widget-container-]"},
getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetDivSelectorQueryForSpinners:function(){return"div[id^\x3dqs-widget-spinner-]"},getQsWidgetCheckboxId:function(a){return"qs-widget-checkbox-"+a},getQsWidgetInputSelectorQueryForCheckboxes:function(){return"input[id^\x3dqs-widget-checkbox-]"},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+
a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetVariationDropdownViewId:function(a){return"qs-widget-dropdown-view-variation-"+a},getQsWidgetDropdownItemId:function(a,b){return"qs-widget-dropdown-item-"+b+"-"+a},getQsWidgetDropdownItemAriaId:function(a,b){return"qs-widget-dropdown-item-aria-"+b+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,b){return"qs-widget-dropdown-item-quantitySuffix-"+
b+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+a},getQsWidgetDropdownVariationUnorderedListId:function(a){return"qs-widget-dropdown-variation-unorderedlist-"+a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+
a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryId:function(){return"qs-widget-summary-"},
getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+
a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+
a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetVariationDropdownItemDecl:function(){return"qs-widget-dropdown-variation-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},
getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+a},getQsWidgetBottomSheetSelectQuantityTextId:function(a){return"qs-widget-bottom-sheet-select-quantity-text-"+a},getQsWidgetBottomSheetPriceTextId:function(a){return"qs-widget-bottom-sheet-price-text-"+a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+
a},getQsWidgetInitialViewTextLinkId:function(a){return"qs-widget-link-"+a},getQsWidgetBottomSheetHeightConfig:function(){return a},getQsWidgetBottomSheetDropDownScrollFactor:function(){return b},getQsWidget1DBottomSheetSelectorCssClass:function(){return"qs-widget-new-1d-dropdown-li"},getQsWidget2DBottomSheetQuantitySelectorCssClass:function(){return"qs-widget-new-2d-dropdown-qs-li"},getQsWidget2DBottomSheetVariationSelectorCssClass:function(){return"qs-widget-new-2d-dropdown-vs-li"},getQsWidgetVariationSelectorListMapKey:function(){return"variationSelectorListsMap"},
getQsWidgetVariationSelectorSelectedIdKey:function(){return"selectedId"},getQsWidgetVariationSelectorDisplayTextKey:function(){return"displayText"},getQsWidgetVariationSelectorDisplayTextWithQuantityKey:function(){return"displayTextWithQuantity"}}});"use strict";n.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(c,a,b){function g(c){return(c=a.getQsWidgetConfiguration(c).metadata)?b.aUtil.parseJSON(c):null}return{isWeblabEnabled:function(a,b,
c){a:{if((a=g(a))&&a.weblabs)for(var d=0;d<a.weblabs.length;d++){var t=a.weblabs[d];if(t.weblabName==b){b=t.treatment;break a}}b=null}return null==b?c:"T1"==b?!0:!1},getMetaConfiguration:function(a,b){return(a=g(a))?a[b]:null}}});"use strict";n.when("A","QuantitySelectorAUIDeps","QuantitySelectorConstants").register("QuantitySelectorMetrics",function(c,a,b){function g(a){q.ue&&q.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}n.when("ready").execute(function(){c.now()});return{incrementInitializeCount:function(a,
b){var c="QuantitySelector-Initialize",c=a?c+"-Success-Count":c+"-Failed-Count";g(b?c+":mobile":c+":desktop")},incrementInvalidIdCount:function(){g("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(a,b,c){a="QuantitySelector-TriggerAction-"+a;a=b?a+"-Success-Count":a+"-Failed-Count";g(c?a+":mobile":a+":desktop")},incrementChangeLinkCount:function(){g("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(a){var b="QuantitySelector-ShowPopup-Count";g(a?b+":mobile":b+":desktop")},
logLatencyMetric:function(a,b,c){a="QuantitySelector-TimeTo-"+a;q.ue&&q.ue.count&&a&&"undefined"!==typeof q.ue_t0&&(b-=q.ue_t0,ue.count(a,b),ue.count(a+"Hundredths",Math.floor(b/10)))},logCsm:function(c,g){var p=a.aState.state(b.getQsWidgetConfigurationId(c));if(p&&(c="mobile"==p.viewType.toLowerCase()?"mob":"dsk",(p=p.qsCsm)&&p.almBrandRefMarker&&p.pageRefMarker)){var d;a:{d=p.sellingUomDimension;var t=p.pricingUomDimension;if(d&&t){var u="s";switch(d){case "count":u+="u";break;case "weight":u+=
"w";break;default:d=void 0;break a}u+="p";switch(t){case "count":u+="u";break;case "weight":u+="w";break;default:d=void 0;break a}d=u}else d=void 0}d&&(g={pageType:p.pageType,subPageType:p.subPageType,pageTypeId:p.pageTypeId,storeName:p.tabId,programRegionId:p.programRegionId,hitType:p.hitType,refMarker:p.almBrandRefMarker+"_"+c+"_"+p.pageRefMarker+"_qs_"+g+"_"+d,fromTabName:p.fromTabName,toTabName:p.toTabName},q.ue&&q.ue.event&&ue.event(g,"quantityselector_attr","quantityselector.QuantityselectorMetrics.2"))}}}});
"use strict";n.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(c,a,b,g){function f(d){var b=g.aState.state(a.getQsWidgetConfigurationId(d));b&&b.id||(m(d),b=g.aState.state(a.getQsWidgetConfigurationId(d)));return b}function m(d){var b=a.getQsWidgetConfigurationId(d);d=a.getQsWidgetStateScriptSelectorQuery(d);d=c.$(d).first();d=g.aUtil.parseJSON(d.html());g.aState.state(b,d)}function p(){for(var d=[],b=c.$(a.getQsWidgetGenericStateSelectorQuery()),
f=a.getQsWidgetConfigurationId(""),k=0;k<b.length;k++){var h=b[k].getAttribute("data-a-state");(h=g.aUtil.parseJSON(h).key)&&h.substring(0,f.length)==f&&(h=h.substring(f.length),d.push(h))}return d}c.on(a.getQsWidgetEventConfigureList(),function(a){"function"===typeof a&&a(p())});c.on(a.getQsWidgetEventConfigureGet(),function(a,b){a=f(a);"function"===typeof b&&b(a)});c.on(a.getQsWidgetEventConfigureSet(),function(b,t){g.aState.state.replace(a.getQsWidgetConfigurationId(b),t);c.trigger(a.getQsWidgetEventInitialize(),
!0,b)});return{getQsWidgetConfiguration:f,loadQsWidgetStateConfiguration:function(b){var c=g.aState.state(a.getQsWidgetConfigurationId(b));c&&c.id||m(b)},reloadQsWidgetStateConfiguration:m,saveOriginalSettings:function(a){},setEnable:function(b,c){c={enable:c};g.aState.state(a.getQsWidgetConfigurationId(b),c)},setInitialized:function(b){g.aState.state(a.getQsWidgetConfigurationId(b),{initialized:!0})},setSelectedId:function(b,c){c={selectedId:c,selectedQuantity:null};g.aState.state(a.getQsWidgetConfigurationId(b),
c)},setSelectedQuantity:function(b,c){c={selectedId:null,selectedQuantity:c};g.aState.state(a.getQsWidgetConfigurationId(b),c)},setData:function(b,c){g.aState.state(a.getQsWidgetConfigurationId(b),c)},getQsUIDs:p}});"use strict";n.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps","QuantitySelectorMetrics").register("QuantitySelectorUtils",function(c,a,b,g,f){function m(e){return"true"==e||1==e?!0:!1}function p(e){return"mobile"==a.getQsWidgetConfiguration(e).viewType.toLowerCase()?
!0:!1}function d(e){e=a.getQsWidgetConfiguration(e);return m(e.showConfirmationView)?!0:!1}function t(e){e=a.getQsWidgetConfiguration(e);return m(e.allowZeroQuantity)?!0:!1}function u(e){e=l(e);return null==e||1>e.length?!1:!0}function k(e){e=a.getQsWidgetConfiguration(e).variationSelectorListsMap;if(null==e)return null;e=Object.keys(e);return null==e||1>e.length?null:e[0]}function h(e,b){var c=a.getQsWidgetConfiguration(e).variationSelectorListsMap;if(null==c)return null;null==b&&(b=k(e));return null==
b?null:c[b]}function l(e,a){e=h(e,a);return null==e?null:e.selectorItems}function r(e){var a=c.$("#"+b.getQsWidgetQuantityChangelinkId(e));e=c.$("#"+b.getQsWidgetTextInputUpdateButtonId(e));a.attr("draggable","false");e.attr("draggable","false")}function w(e){return c.$("#"+b.getQsWidgetContainerId(e))}function n(e){return g.aButton("#"+b.getQsWidgetButtonId(e))}function x(e){return c.$("#"+b.getQsWidgetDropdownContainerId(e))}function E(e){return c.$("#"+b.getQsWidgetDropdownViewId(e))}function y(e){return c.$("#"+
b.getQsWidgetVariationDropdownViewId(e))}function v(e){return c.$("#"+b.getQsWidgetDropdownUnorderedListId(e))}function B(e){return c.$("#"+b.getQsWidgetTextInputId(e))}function F(e,b){e=a.getQsWidgetConfiguration(e);for(var c=0;c<e.qsItems.length;c++)if(e.qsItems[c].id==b)return e.qsItems[c]}function G(e,a){var c=h(e,a);if(null==c)return null;c=c[b.getQsWidgetVariationSelectorSelectedIdKey()];if(null==c)return H(e);e=l(e,a);if(null==e)return null;for(a=0;a<e.length;a++)if(e[a].id==c)return e[a];
return null}function H(e,a){e=l(e,a);if(null==e)return null;for(a=0;a<e.length;a++)if(m(e[a].isSelected))return e[a];return null}function C(e){var b=a.getQsWidgetConfiguration(e).selectedId;return b?b:I(e)}function I(e){e=a.getQsWidgetConfiguration(e);if(e.qsItems)for(var b=0;b<e.qsItems.length;b++)if(m(e.qsItems[b].isSelected))return e.qsItems[b].id}function J(a,c){var d=h(a,c);if(null==d)return null;d=d[b.getQsWidgetVariationSelectorSelectedIdKey()];return null!=d?d:K(a,c)}function K(a,b){a=H(a);
return null==a?null:a.id}function L(e){return a.getQsWidgetConfiguration(e).selectedQuantity}function M(a,b){return 0>b?a[0].id:b>=a.length?a[a.length-1].id:a[b].id}function N(a,b){if(null==a)return 0;for(var c=0;c<a.length;c++)if(b==a[c].id)return c}function O(a,b){return(t(a)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(b)}function P(a){if(a){var d=c.$("#"+b.getQsWidgetCheckboxId(a)),h=w(a);a=c.$("#"+b.getQsWidgetSpinnerId(a))}else d=c.$(b.getQsWidgetInputSelectorQueryForCheckboxes()),
a=c.$(b.getQsWidgetDivSelectorQueryForSpinners()),h=c.$(b.getQsWidgetDivSelectorQueryForWidgetContainers());d.remove();a.remove();h.removeClass("qs-widget-hidden")}function Q(e,b){b=b.displayTextWithQuantityList;var c=a.getQsWidgetConfiguration(e).qsItems;e=C(e);for(var d=0;d<c.length;d++)if(c[d].id==e)return b[d];return null}function R(a,c){null==c&&(c=k(a));if(null==c)return{};var d=G(a,c);if(null==d)return{};var h=p(a)?d.displayTextForMobile:d.dissplayTextForDesktop;a=Q(a,d);var l={};l[c]=g.aUtil.parseJSON(d.data);
l[c][b.getQsWidgetVariationSelectorDisplayTextKey()]=h;l[c][b.getQsWidgetVariationSelectorDisplayTextWithQuantityKey()]=a;return l}function S(a,b){a=h(a,b);return null==a||null==a.actionTriggerId||""==a.actionTriggerId?null:a.actionTriggerId}function D(e,b,d){var h=a.getQsWidgetConfiguration(e),l=h.selectedId,k=h.selectedQuantity,t=g.aUtil.parseJSON(h.staticData),f;if(l)for(var r=0;r<h.qsItems.length;r++)h.qsItems[r].id==l&&(f=g.aUtil.parseJSON(h.qsItems[r].data),f=c.$.extend({qsUID:e,tunneledData:b,
quantityData:f},t,f),u(e)&&(f=c.$.extend(f,R(e,d))));k&&(f=c.$.extend({qsUID:e,tunneledData:b},t,{quantity:k}),u(e)&&(f=c.$.extend(f,R(e,d))));return f}var z=[];c.on(b.getQsWidgetEventTriggerAction(),function(e,d,h){var l=a.getQsWidgetConfiguration(e);d||(d=l.actionId);var l="mobile"==l.viewType.toLowerCase(),g=!1;if(e=D(e,h))c.trigger(b.getQsWidgetEventAction(d),e),f.incrementTriggerActionCount(d,!0,l),g=!0;g||f.incrementTriggerActionCount(d,!1,l)});c.on(b.getQsWidgetVariationEventTriggerAction(),
function(e,d,h,l){var g="mobile"==a.getQsWidgetConfiguration(e).viewType.toLowerCase();h=D(e,h);null==d&&(d=S(e,l));null!=d&&(c.trigger(b.getQsWidgetEventAction(d),h),f.incrementTriggerActionCount(d,!1,g))});return{isInitialized:function(e){return(e=a.getQsWidgetConfiguration(e))?e.initialized:!1},isMobile:p,isQsWidgetEnabled:function(e){e=a.getQsWidgetConfiguration(e);return e.hasOwnProperty("enable")?m(e.enable):!0},isConfirmationViewEnabled:d,isAllowZeroQuantityEnabled:t,isInitialViewDropdown:function(e){return a.getQsWidgetConfiguration(e).initialView.toLowerCase()==
b.getQsWidgetInitialViewDropdown()?!0:!1},isInitialViewTextLink:function(e){return a.getQsWidgetConfiguration(e).initialView.toLowerCase()==b.getQsWidgetInitialViewTextLink()?!0:!1},isVariationSelectorEnabled:u,getVariationSelectorItemList:h,getQsWidgetBottomSheetConfig:function(e){var c=a.getQsWidgetConfiguration(e),h=b.getQsWidgetBottomSheetHeightConfig(),l=0;c.summaryDisclaimerText||(l=d(e)?h.disclaimerTextAdjustmentWithAtc:h.disclaimerTextAdjustment);return d(e)?{closeMessage:c.bottomSheetCancelText,
height:h.heightWithAtc-l}:{closeMessage:c.bottomSheetDoneText,height:h.height-l}},getQsWidgetBottomSheetChangeCurrentQuantityText:function(e){return a.getQsWidgetConfiguration(e).bottomSheetChangeCurrentQuantityText},isActionTriggerOnConfirmation:function(e){return a.getQsWidgetConfiguration(e).actionTrigger.toLowerCase()==b.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(e){return a.getQsWidgetConfiguration(e).actionTrigger.toLowerCase()==b.getQsWidgetActionTriggerOnSelect()?
!0:!1},isVariationSelectorTriggerOnSelect:function(a){return null==a?!1:a.actionTriggerType.toLowerCase()==b.getQsWidgetActionTriggerOnSelect()},isVariationSelectorTriggerOnConfirmation:function(a){return null==a?!1:a.actionTriggerType.toLowerCase()==b.getQsWidgetActionTriggerOnConfirmation()},isTextInputRequired:function(a,b){a=F(a,b).quantityText;return"+"==a.substr(a.length-1)?{result:!0,initialQuantityText:a.substr(0,a.length-1)}:{result:!1}},initializeWidget:function(a){var d=C(a);d?c.trigger(b.getQsWidgetEventSelectId(),
a,d,!1,function(){r(a)}):(d=L(a))&&c.trigger(b.getQsWidgetEventSelectQuantity(),a,d,!1,function(){r(a)});u&&(d=J(a),null!=d&&c.trigger(b.getQsWidgetVariationEventSelectId(),a,d,!1,function(){}));P(a)},activateWidget:function(a){var d=z.indexOf(a);-1<d&&z.splice(d,1);setTimeout(function(){z.push(a)},b.getQsWidgetActivateDebounce())},deactivateWidget:function(a){a=z.indexOf(a);-1<a&&z.splice(a,1)},getActivatedQsWidgets:function(){return z},hideComponent:function(a,b){a.addClass("aok-hidden")},showComponent:function(a){a.removeClass("aok-hidden")},
isComponentVisible:function(a){return!a.hasClass("aok-hidden")},setComponentVisibility:function(a,b){b?a.css("visibility","visible"):a.css("visibility","hidden")},setHtml:function(a,b){a.html(b)},setQsWidgetContainerMinWidthAndHeight:function(a){a=w(a);a.css("min-width",a.width()+"px");a.css("min-height",a.height()+"px")},resetQsWidgetContainerMinWidthAndHeight:function(a){a=w(a);a.css("min-width","0px");a.css("min-height","0px")},enableQsWidget:function(e){var b=n(e),d=B(e);b.enable();d.removeClass("a-form-disabled");
d.addClass("a-form-normal");d.removeAttr("disabled");a.setEnable(e,!0)},disableQsWidget:function(e){var b=n(e),d=B(e);b.disable();d.removeClass("a-form-normal");d.addClass("a-form-disabled");d.attr("disabled","disabled");a.setEnable(e,!1)},popOutDropDownContainer:function(a){var b=w(a),d=b.offset();a=x(a);a.appendTo(document.body);a.css({left:d.left,top:d.top});d.top-q.scrollY+a.height()>c.$(q).height()&&(b=d.top-a.height()+b.height(),a.css({left:d.left,top:b}))},getQsWidgetButtonContainer:function(a){return c.$("#"+
b.getQsWidgetButtonContainerId(a))},getQsWidgetButtonAsComponent:n,getQsWidgetButton:function(a){return c.$("#"+b.getQsWidgetButtonId(a)+"-announce")},getQsWidgetDropdownContainer:x,getQsWidgetDropdownElement:function(a){return c.$("#"+b.getQsWidgetDropdownId(a))},getQsWidgetDropdownViewSelector:E,getQsWidgetVariationDropdownViewSelector:y,getQsWidgetDropdownUnorderedListElement:v,getQsWidgetDropdownVariationUnorderedListElement:function(a){return c.$("#"+b.getQsWidgetDropdownVariationUnorderedListId(a))},
getQsWidgetDropdownItemElement:function(a,d){return c.$("#"+b.getQsWidgetDropdownItemAriaId(a,d))},getQsWidgetTextInputContainer:function(a){return c.$("#"+b.getQsWidgetTextInputContainerId(a))},getQsWidgetTextInputElement:B,getQsWidgetTextInputUpdateButtonContainer:function(a){return c.$("#"+b.getQsWidgetTextInputUpdateButtonContainerId(a))},getQsWidgetQuantityContainer:function(a){return c.$("#"+b.getQsWidgetQuantityContainerId(a))},getQsWidgetQuantityElement:function(a){return c.$("#"+b.getQsWidgetQuantityId(a))},
getQsWidgetQuantitySuffixElement:function(a){return c.$("#"+b.getQsWidgetQuantitySuffixId(a))},getQsWidgetInitialViewSuffixElement:function(a){return c.$("#"+b.getQsWidgetInitialViewSuffixId(a))},getQsWidgetSummaryAtcButton:function(a){return c.$("#"+b.getQsWidgetSummaryAtcId(a))},getQsWidgetSummaryContainer:function(a){return c.$("#"+b.getQsWidgetSummaryPriceId(a))},getQsWidgetSummaryPriceSymbolElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceSymbolId(a))},getQsWidgetSummaryPriceWholeElement:function(a){return c.$("#"+
b.getQsWidgetSummaryPriceWholeId(a))},getQsWidgetSummaryPriceFractionElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceFractionId(a))},getQsWidgetSummaryPriceDecimalElement:function(a){return c.$("#"+b.getQsWidgetSummaryPriceDecimalId(a))},getQsWidgetFooterPriceContainer:function(a){return c.$("#"+b.getQsWidgetFooterPriceContainerId(a))},getQsWidgetFooterPriceSymbolElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceSymbolId(a))},getQsWidgetFooterPriceWholeElement:function(a){return c.$("#"+
b.getQsWidgetFooterPriceWholeId(a))},getQsWidgetFooterPriceFractionElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceFractionId(a))},getQsWidgetFooterPriceDecimalElement:function(a){return c.$("#"+b.getQsWidgetFooterPriceDecimalId(a))},getQsWidgetFooterQuantitySuffixContainer:function(a){return c.$("#"+b.getQsWidgetFooterQuantitySuffixContainerId(a))},getQsWidgetFooterQuantitySuffixElement:function(a){return c.$("#"+b.getQsWidgetFooterQuantitySuffixId(a))},getQsWidgetBottomSheetQuantitySuffixElement:function(a){return c.$("#"+
b.getQsWidgetBottomSheetQuantitySuffixId(a))},getQsWidgetBottomSheetPriceTextElement:function(a){return c.$("#"+b.getQsWidgetBottomSheetPriceTextId(a))},getQsWidgetInitialViewTextLinkElement:function(a){return c.$("#"+b.getQsWidgetInitialViewTextLinkId(a))},getQsItem:F,getVariationSelectorItemById:function(a,b,d){a=l(a,d);if(null==a)return null;for(d=0;d<a.length;d++)if(a[d].id==b)return a[d];return null},getSelectedVariationSelectorItem:G,getSelectedQsItemId:C,getInitialSelectedQsItemId:I,getSelectedQuantity:L,
getInitialSelectedVariationSelectorItemId:K,getSelectedVariationSelectorItemIdData:function(a,d,c){null==c&&(c=k(a));if(null==c)return null;a={};a[b.getQsWidgetVariationSelectorSelectedIdKey()]=d;d={};d[b.getQsWidgetVariationSelectorListMapKey()]={};d[b.getQsWidgetVariationSelectorListMapKey()][c]=a;return d},getSelectedVariationSelectorItemId:J,getQsItemFromQuantityText:function(b,d){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var c=0;c<b.length;c++)if(d.toLowerCase()==b[c].quantityText.toLowerCase()||
parseFloat(d)==parseFloat(b[c].quantityText))return b[c]},getFocusedQsItemIdInBottomSheet:function(d){var c=E(d).scrollTop(),h=b.getQsWidgetBottomSheetDropDownScrollFactor(),c=parseInt((c-h.constant+h.adjustment)/h.increment);d=a.getQsWidgetConfiguration(d).qsItems;return M(d,c)},getFocusedVariationSelectorItemIdInBottomSheet:function(a,d){var c=y(a);if(null==c)return null;var c=c.scrollTop(),h=b.getQsWidgetBottomSheetDropDownScrollFactor(),c=parseInt((c-h.constant+h.adjustment)/h.increment);a=l(a,
d);return M(a,c)},getIndexFromIdInBottomSheet:function(b,d){b=a.getQsWidgetConfiguration(b).qsItems;return N(b,d)},getVariationSelectorIndexFromIdInBottomSheet:function(a,b,d){a=l(a,d);return N(a,b)},saveQsWidgetDropdownTopPosition:function(b){var d=v(b);d&&(d=d.position().top,a.setData(b,{scrollTop:d}));return!1},setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(d){a.setData(d,{scrollTop:b.getQsWidgetDropdownScrollMetricThreshold()})},
isQsWidgetDropdownScrolled:function(d){var c=v(d);return c?(c=c.position().top,(d=a.getQsWidgetConfiguration(d).scrollTop)?Math.abs(c-d)>b.getQsWidgetDropdownScrollMetricThreshold():!1):!1},generateQsDropdownDOM:function(d){var c="",h=a.getQsWidgetConfiguration(d),l=h.qsItems,h=h.selectedId,g=p(d);if(!l)return"";for(var k=0;k<l.length;k++){var f,t=l[k].id,r=l[k].quantityText;if(g){f=d;var m=u(f)?b.getQsWidget2DBottomSheetQuantitySelectorCssClass():b.getQsWidget1DBottomSheetSelectorCssClass(),n=b.getQsWidgetDropdownItemId(f,
t),w=b.getQsWidgetDropdownItemAriaId(f,t),q=b.getQsWidgetDropdownItemDecl();f='\x3cspan class\x3d"a-declarative" data-action\x3d"'+q+'" data-'+q+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+f+"\x26quot;,\x26quot;id\x26quot;:"+t+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+n+'" aria-labelledby\x3d"'+w+'" class\x3d"'+m+'"\x3e'+r+"\x3c/li\x3e\x3c/span\x3e"}else{f=d;var x=l[k].quantityTextAbbreviatedSuffix,m=l[k].id==h,n=b.getQsWidgetDropdownItemId(f,t),w=b.getQsWidgetDropdownItemAriaId(f,t),
A=b.getQsWidgetDropdownItemQuantitySuffixId(f,t),q=b.getQsWidgetDropdownDecl(f),v="";x&&(v='\x3cspan id\x3d"'+A+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+x+"\x3c/span\x3e");x="false";A="qs-widget-dropdown-link";m&&(x="true",A+=" qs-widget-dropdown-link-active aok-block aok-nowrap");f='\x3cspan class\x3d"a-declarative" data-action\x3d"'+q+'" data-'+q+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+f+"\x26quot;,\x26quot;id\x26quot;:"+t+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+n+'" aria-labelledby\x3d"'+
w+'" aria-checked\x3d"'+x+'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"0" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+w+'" class\x3d"'+A+'"\x3e'+r+"\x26nbsp;\x26nbsp;"+v+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}c+=f}return c},generateVariationSelectorDOM:function(a,d){if(!p(a))return"";d=l(a,d);for(var c="",h=0;h<d.length;h++){var f=a,g=d[h].id,k=d[h].displayTextForMobile,t=d[h].ariaLabelText,r=b.getQsWidget2DBottomSheetVariationSelectorCssClass(),m=b.getQsWidgetDropdownItemId(f,
g);b.getQsWidgetDropdownItemAriaId(f,g);var u=b.getQsWidgetVariationDropdownItemDecl(),c=c+('\x3cspan class\x3d"a-declarative" data-action\x3d"'+u+'" data-'+u+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+f+"\x26quot;,\x26quot;id\x26quot;:\x26quot;"+g+'\x26quot;}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+m+'" aria-label\x3d"'+t+'" class\x3d"'+r+'"\x3e'+k+"\x3c/li\x3e\x3c/span\x3e")}return c},isQsWidgetTextInputValid:O,validateQsWidgetTextInput:function(a){var d=B(a),c=d.val();a=O(a,c);var h=
d.parent().hasClass(b.getQsWidgetAuiInputTextWrapperClass())?d.parent():d;if(a)return d.val(c.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),h.removeClass("a-form-error"),h.addClass("a-form-normal"),!0;h.removeClass("a-form-normal");h.addClass("a-form-error");return!1},isUserClickInSummary:function(a){var d=b.getQsWidgetSummaryId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,d.length)==d)return!0;a=a.parentElement}return!1},hideSpinner:P,EnableVariationSelector:function(a){a&&y(a).removeClass("qs-widget-disable")},
DisableVariationSelector:function(a){a&&y(a).addClass("qs-widget-disable")},getVariationSelectorDisplayTextWithQuantity:Q,getVariationSelectorActionTriggerId:S,getQsWidgetSelectionPayload:D}});"use strict";n.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants").register("QuantitySelectorWidget",function(c,a,b,g){function f(d){a.deactivateWidget(d);var b=a.getQsWidgetButtonContainer(d),c=a.getQsWidgetDropdownContainer(d),f=a.getQsWidgetDropdownElement(d),h=a.getQsWidgetQuantityContainer(d),
l=a.getQsWidgetSummaryAtcButton(d),g=a.getQsWidgetFooterPriceContainer(d),m=a.getQsWidgetFooterQuantitySuffixContainer(d);a.setComponentVisibility(g,!0);a.setComponentVisibility(m,!0);g=a.getQsWidgetTextInputContainer(d);a.isComponentVisible(g)||a.showComponent(b);a.hideComponent(c);a.hideComponent(f);a.hideComponent(h);a.hideComponent(l);a.resetQsWidgetContainerMinWidthAndHeight(d)}function m(d,f,m){var k=a.getQsItem(d,f),h=k.quantityText,l=k.quantityTextAbbreviatedSuffix,r=k.quantityTextFullSuffix,
p=k.selectedText,k=k.price,n=a.getQsWidgetSummaryPriceSymbolElement(d),q=a.getQsWidgetSummaryPriceWholeElement(d),v=a.getQsWidgetSummaryPriceFractionElement(d),y=a.getQsWidgetSummaryPriceDecimalElement(d);a.setHtml(n,k.currencySymbol);a.setHtml(q,k.wholeValue);a.setHtml(v,k.fractionValue);a.setHtml(y,k.decimalSeparator);n=a.getQsWidgetQuantityElement(d);a.setHtml(n,h);h=a.getQsWidgetQuantitySuffixElement(d);l&&r?(a.setHtml(h,l),l=a.getQsWidgetInitialViewSuffixElement(d),a.setHtml(l,r)):a.setHtml(h,
"");l=a.getQsWidgetFooterPriceSymbolElement(d);h=a.getQsWidgetFooterPriceWholeElement(d);n=a.getQsWidgetFooterPriceFractionElement(d);q=a.getQsWidgetFooterPriceDecimalElement(d);a.setHtml(l,k.currencySymbol);a.setHtml(h,k.wholeValue);a.setHtml(n,k.fractionValue);a.setHtml(q,k.decimalSeparator);r&&(k=a.getQsWidgetFooterQuantitySuffixElement(d),a.setHtml(k,r));r="Current quantity "+p+". Click to change quantity";a.isInitialViewDropdown(d)?(a.getQsWidgetButtonAsComponent(d).text(p),a.getQsWidgetButton(d).attr("aria-label",
r)):a.isInitialViewTextLink(d)&&(k=a.getQsWidgetInitialViewTextLinkElement(d),k.text(p),k.attr("aria-label",r));b.setSelectedId(d,f);m&&c.trigger(g.getQsWidgetEventTriggerAction(),d)}function p(d,f){var p=a.getQsWidgetTextInputElement(d),k=p.val(),h=a.getQsWidgetButtonContainer(d),l=a.getQsWidgetTextInputContainer(d),r=a.getQsWidgetTextInputUpdateButtonContainer(d),n=a.getQsItemFromQuantityText(d,k);a.hideComponent(r);n?(a.hideComponent(l),a.showComponent(h),m(d,n.id,f)):(a.hideComponent(h),a.showComponent(l),
p.blur(),b.setSelectedQuantity(d,k),f&&c.trigger(g.getQsWidgetEventTriggerAction(),d))}c.on(g.getQsWidgetEventSelectId(),function(d,b,c,f){m(d,b,c);b=a.getQsWidgetButtonContainer(d);c=a.getQsWidgetTextInputContainer(d);d=a.getQsWidgetTextInputUpdateButtonContainer(d);a.hideComponent(d);a.hideComponent(c);a.showComponent(b);f&&f()});c.on(g.getQsWidgetEventSelectQuantity(),function(d,b,c,f){a.getQsWidgetTextInputElement(d).val(b);p(d,c);f&&f()});return{hideAllPopover:function(){for(var d=a.getActivatedQsWidgets(),
b=0;b<d.length;b++)f(d[b])},showPopover:function(d){a.activateWidget(d);a.setQsWidgetContainerMinWidthAndHeight(d);var c=a.getQsWidgetDropdownUnorderedListElement(d),f=a.getQsWidgetButtonContainer(d),g=a.getQsWidgetDropdownContainer(d),h=a.getQsWidgetDropdownElement(d),l=a.getQsWidgetQuantityContainer(d),r=a.getQsWidgetSummaryAtcButton(d);a.setHtml(c,a.generateQsDropdownDOM(d));var c=a.getQsWidgetFooterPriceContainer(d),m=a.getQsWidgetFooterQuantitySuffixContainer(d);a.setComponentVisibility(c,!1);
a.setComponentVisibility(m,!1);a.showComponent(h);a.hideComponent(l);a.hideComponent(r);a.showComponent(g);a.hideComponent(f);a.popOutDropDownContainer(d);g=b.getQsWidgetConfiguration(d);if(f=g.qsItems)g=g.selectedId,null===g&&(g=f[0].id),a.getQsWidgetDropdownItemElement(d,g).focus()},showConfirmation:function(b){a.activateWidget(b);var c=a.getQsWidgetButtonContainer(b),f=a.getQsWidgetDropdownContainer(b),g=a.getQsWidgetDropdownElement(b),h=a.getQsWidgetQuantityContainer(b);b=a.getQsWidgetSummaryAtcButton(b);
a.hideComponent(g);a.showComponent(h);a.showComponent(b);a.showComponent(f);a.hideComponent(c)},showPrice:function(b,c){c=a.getQsItem(b,c).price;var f=a.getQsWidgetSummaryPriceSymbolElement(b),g=a.getQsWidgetSummaryPriceWholeElement(b),h=a.getQsWidgetSummaryPriceFractionElement(b);b=a.getQsWidgetSummaryPriceDecimalElement(b);a.setHtml(f,c.currencySymbol);a.setHtml(g,c.wholeValue);a.setHtml(h,c.fractionValue);a.setHtml(b,c.decimalSeparator)},selectOption:m,showTextInput:function(b,c){var f=a.getQsWidgetTextInputContainer(b),
g=a.getQsWidgetTextInputUpdateButtonContainer(b),h=a.getQsWidgetButtonContainer(b);a.hideComponent(h);a.showComponent(f);var l=a.getQsWidgetTextInputElement(b);c&&l.val(c);c=l.val();a.isQsWidgetTextInputValid(b,c)&&a.getSelectedQuantity(b)!==c?a.showComponent(g):a.hideComponent(g);setTimeout(function(){l.focus()},200)},validateAndSelectQuantity:p,selectConfirmation:function(b){a.isActionTriggerOnConfirmation(b)&&c.trigger(g.getQsWidgetEventTriggerAction(),b);f(b)}}});"use strict";n.when("A","QuantitySelectorWidget",
"QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata").register("QuantitySelector",function(c,a,b,g,f,m,p,d){function n(a,c){try{var f=b.isMobile(c)}catch(k){k instanceof TypeError&&m.incrementInvalidIdCount();return}try{if(!b.isInitialized(c)||a)eval(d.getMetaConfiguration(c,"script")),g.setInitialized(c),b.initializeWidget(c),b.isQsWidgetEnabled(c)?b.enableQsWidget(c):b.disableQsWidget(c),m.incrementInitializeCount(!0,
f)}catch(k){m.incrementInitializeCount(!1,f)}}function u(a){g.loadQsWidgetStateConfiguration(a);n(!0,a)}c.declarative(f.getQsWidgetButtonDecl(),"click",function(c){var d=c.data.qsUID;(c=b.isMobile(d))?a.showBottomSheet(d):a.showPopover(d);m.incrementShowPopup(c);b.isInitialViewDropdown(d)?m.logCsm(d,"cqd"):m.logCsm(d,"ccq");setTimeout(function(){b.saveQsWidgetDropdownTopPosition(d)},250)});c.declarative(f.getQsWidgetDropdownDecl(),"click",function(c){var d=c.data.qsUID;c=c.data.id;var f=b.isActionTriggerOnSelect(d),
g=b.isTextInputRequired(d,c),k=b.isConfirmationViewEnabled(d),n=b.isQsWidgetDropdownScrolled(d);k?n?(b.setQsWidgetDropdownScrolled(d),m.logCsm(d,"dcq_scl")):(b.clearQsWidgetDropdownScrolled(d),m.logCsm(d,"dcq")):n?m.logCsm(d,"dsq_scl"):m.logCsm(d,"dsq");a.selectOption(d,c,f&&!g.result);g.result?a.showTextInput(d,g.initialQuantityText):k&&a.showConfirmation(d)});c.declarative(f.getQsWidgetDropdownItemDecl(),"click",function(b){a.alignQsItem(b.data.qsUID,b.data.id)});c.declarative(f.getQsWidgetVariationDropdownItemDecl(),
"click",function(b){a.alignVariationSelectorItem(b.data.qsUID,b.data.id)});c.declarative(f.getQsWidgetDropdownDecl(),"focusin",function(b){a.showPrice(b.data.qsUID,b.data.id)});c.declarative(f.getQsWidgetDropdownDecl(),"mouseenter",function(b){a.showPrice(b.data.qsUID,b.data.id)});c.declarative(f.getQsWidgetDropdownDecl(),"mouseleave",function(c){c=c.data.qsUID;var d=b.getSelectedQsItemId(c);a.showPrice(c,d)});c.declarative(f.getQsWidgetQuantityChangelinkDecl(),"click",function(c){c=c.data.qsUID;
a.showPopover(c);m.incrementChangeLinkCount();b.saveQsWidgetDropdownTopPosition(c);m.logCsm(c,"ccl")});c.declarative(f.getQsWidgetSummaryAtcDecl(),"click",function(c){c=c.data.qsUID;a.selectConfirmation(c);b.isQsWidgetDropdownScrolled(c)?m.logCsm(c,"atc_scl"):m.logCsm(c,"atc")});c.declarative(f.getQsWidgetTextInputDecl(),"keydown",function(a){var c=a.data.qsUID,d=a.$event.which;8==d||9==d||13==d||37<=d&&40>=d||46==d||(!(48<=d&&57>=d||96<=d&&105>=d)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||
a.$event.metaKey?a.$event.preventDefault():3<=b.getQsWidgetTextInputElement(c).val().length&&a.$event.preventDefault())});c.declarative(f.getQsWidgetTextInputDecl(),"keyup",function(c){var d=c.data.qsUID;b.validateQsWidgetTextInput(d)&&13==c.$event.keyCode?(c=b.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,c)):a.showTextInput(d)});c.declarative(f.getQsWidgetTextInputDecl(),"focusout",function(c){c=c.data.qsUID;if(""===b.getQsWidgetTextInputElement(c).val()){var d;d=(d=g.getQsWidgetConfiguration(c).selectedId)?
b.getQsItem(c,d).selectedText:b.getSelectedQuantity(c);a.showTextInput(c,d);b.validateQsWidgetTextInput(c)}});c.declarative(f.getQsWidgetTextInputDecl(),"change",function(b){a.showTextInput(b.data.qsUID)});c.declarative(f.getQsWidgetTextInputUpdateButtonDecl(),"click",function(c){var d=c.data.qsUID;b.validateQsWidgetTextInput(d)&&(d=c.data.qsUID,c=b.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,c))});c.$(document).click(function(c){0!=b.getActivatedQsWidgets().length&&(b.isUserClickInSummary(c)||
a.hideAllPopover())});c.$(q).resize(function(){a.hideAllPopover()});c.on(f.getQsWidgetEventInitialize(),function(a,b){p.initialize();if("string"==typeof b)n(a,b);else{b=g.getQsUIDs();for(var c=0;c<b.length;c++)n(a,b[c])}});c.on(f.getQsWidgetEventLoadStatesAndInitialize(),function(){for(var a=g.getQsUIDs(),c=0;c<a.length;c++){var d=a[c];b.isInitialized(d)||u(d)}});c.on(f.getQsWidgetEventConfigureEnable(),function(a){b.enableQsWidget(a)});c.on(f.getQsWidgetEventConfigureDisable(),function(a){b.disableQsWidget(a)});
c.on(f.getQsWidgetEventConfigureReset(),function(a){for(var b=g.getQsUIDs(),d=0;d<b.length;d++){var k=b[d];if("string"!==typeof a||a==k)g.reloadQsWidgetStateConfiguration(k),c.trigger(f.getQsWidgetEventInitialize(),!0,k)}});b.hideSpinner();var k=c.now();m.logLatencyMetric("JSReady",k);return{loadStateAndInitializeWidget:u}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("ConsumablesATCActionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(k){var n=window.AmazonUIPageJS||window.P,t=n._namespace||n.attributeErrors,g=t?t("QuantitySliderAssets",""):n;g.guardFatal?g.guardFatal(k)(g,window):g.execute(function(){k(g,window)})})(function(k,n,t){k.when("A").register("qs-cart-count-handler",function(g){var f=g.$,h={DEFAULT:function(e,d,b,c,h){g.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:e,clientName:d},success:function(d){d&&d.isOK&&d.total?f.isFunction(c)&&c(d.total.numActiveItem):k.log("Malformed get-cart-count response for sessionId\x3d"+
e,"ERROR",b)},error:function(){k.log("Failed to retrieve get-cart-count response for sessionId\x3d"+e,"ERROR",b);f.isFunction(h)&&h()}})},UFG:function(f,d,b,c,g){}};return{getTotalCartCount:function(e,d){return(f.isFunction(h[d])?h[d]:h.DEFAULT)(e.request.sessionId,e.clientName,e.attribution,e.onSuccess,e.onError)}}});"use strict";k.when("A","quantity-slider-utils","qs-cart-update-utils").register("qs-cart-update-handler",function(g,f,h){function e(c){r||(r="quantity-slider-widget-"+c);return r}function d(c,
f){if(!f.atcFormSubmitDisabled){if((c=c.$target&&c.$target.closest(".qs-atc-form"))&&0!==c.length)return c;k.log("Missing $form object","ERROR",e(f.clientName))}}function b(b,d,e){g.trigger(f.ACTIONS.ADD_TO_CART_SUBMIT_START,{asin:b,cartType:d.cartType,clientName:d.clientName,isQSAction:e,request:d});c(b,d,!0,e)}function c(c,b,d,a){var p=b.cartType,r=JSON.stringify(a?h.getQSRequestObject(b,d,p):h.getATCRequestObject(b,p)),m=h.getAjaxUrl(b,d,p);m&&l.ajax({url:m,type:h.getHttpMethodType(d,p),data:r,
headers:h.getHeadersForRequest(b,d,p),xhrFields:{withCredentials:!0},success:function(m,p,l){m.jqXHR=l;delete q[c];(m=h.adaptResponseObject(m,b,d,b.cartType))?(f.setUpdatedQSParamsForAsin(c,{quantityInCart:m.quantity,cartItemId:m.itemId}),g.trigger(d?f.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS:f.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,{asin:c,cartType:b.cartType,request:b,response:m,clientName:b.clientName,attribution:e(b.clientName),isQSAction:a,isDecreaseQuantityAction:!d}),f.logUrl(b.loggingUrl)):k.log("Invalid Response from the server",
"ERROR",e(b.clientName))},error:function(m){delete q[c];m=m||{};k.log("Ajax request failed with type: "+(d?"addItems":"modifyItems")+", status code: "+m.status+", error: "+m.responseText,"ERROR",e(b.clientName));g.trigger(f.ACTIONS.QS_CART_SUBMIT_ERROR,{asin:c,cartType:p,clientName:b.clientName,isQSAction:a,isDecreaseQuantityAction:!d,isMaxOrderQuantityReached:b.quantityInCart>=b.maxOrderQuantity,response:m,request:b});d&&b.$form&&b.$form.submit()}})}var l=g.$,r="",q={};g.declarative("qs-add-to-cart-trigger",
"click",function(c){var e=c.data&&c.data.asin,g=f.getQSParamsForAsin(e);c.$event&&c.$event.preventDefault();q[e]||(q[e]=!0,g.isMultipleAsinsSubmitting=1<Object.keys(q).length,g.$form=d(c,g),g.triggeringEvent=c,b(e,g,!1))});g.declarative("qs-slider-widget-trigger","click",function(e){var h=e.data&&e.data.asin,l=f.getQSParamsForAsin(h),a=e.$target[0]&&e.$target[0].className||"",p=g.contains(a,"qs-increase-quantity")||g.contains(a,"qs-decrease-quantity"),a=g.contains(a,"qs-decrease-quantity");e.$event&&
e.$event.preventDefault();p&&!q[h]&&(q[h]=!0,l.isMultipleAsinsSubmitting=1<Object.keys(q).length,l.triggeringEvent=e,a?(g.trigger(f.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,{asin:h,cartType:l.cartType,clientName:l.clientName,isQSAction:!0,isDecreaseQuantityAction:!0,request:l}),c(h,l,!1,!0)):(l.$form=d(e,l),b(h,l,!0)))});return{setAttribution:function(b){r=b}}});"use strict";k.when("A","qs-fresh-cart-update-utils").register("qs-cart-update-utils",function(g,f){function h(a){var b=a.quantityInCart||0;
return{items:[{asin:a.asinId,offerListingId:a.offerListingId,quantity:b<a.minOrderQuantity?a.minOrderQuantity-b:1}]}}function e(a,b,c){return(d.isFunction(b[c])?b[c]:b.DEFAULT)(a)}var d=g.$,b={DEFAULT:h,UFG:f.getUfgCartRequestObject},c={DEFAULT:h,UFG:f.getUfgCartRequestObject},l={DEFAULT:function(a){var b=a.quantityInCart||0,c;c=a.cartItemId;c=!c||"C"!==c[0]&&"S"!==c[0]?c:c.substring(1);return{items:[{id:c,quantity:b<=a.minOrderQuantity?0:b-1}]}},UFG:f.getUfgCartRequestObject},r={DEFAULT:function(a){return a.ajaxCartUrl},
UFG:function(a){return a.addToCartUrl}},k={DEFAULT:function(a){return a.ajaxCartUrl}},n={DEFAULT:function(a){return(a=a.entity&&a.entity.items&&a.entity.items[0])?{itemId:a.id,quantity:a.quantity,isTotal:!0}:null},UFG:f.ufgCartResponseAdapter},t={DEFAULT:function(a,b){a=(b.quantityInCart||0)-1;return 0>a?null:{itemId:a?b.cartItemId:"",quantity:a,isTotal:!0}},UFG:f.ufgCartResponseAdapter},u={DEFAULT:"POST",UFG:"POST"},a={DEFAULT:"PUT",UFG:"POST"},p={DEFAULT:function(a){return{"x-api-csrf-token":a.csrfToken,
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"'}},UFG:function(a){return{"Content-Type":"application/json"}}},w={DEFAULT:function(a){return{"x-api-csrf-token":a.csrfToken,Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items/v1"',"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.modify-items.request/v1"'}},UFG:function(a){return{"Content-Type":"application/json"}}};
return{getATCRequestObject:function(a,c){return e(a,b,c)},getQSRequestObject:function(a,b,d){return e(a,b?c:l,d)},adaptResponseObject:function(a,b,c,e){c=c?n:t;return(d.isFunction(c[e])?c[e]:c.DEFAULT)(a,b)},getHttpMethodType:function(c,b){c=c?u:a;return c[b]?c[b]:c.DEFAULT},getHeadersForRequest:function(a,c,b){c=c?p:w;return(d.isFunction(c[b])?c[b]:c.DEFAULT)(a)},getAjaxUrl:function(a,c,b){return e(a,c?r:k,b)}}});"use strict";k.when("A").register("qs-fresh-cart-update-utils",function(g){function f(f,
e){return e&&e.items?e.items.find(function(d){return d.ASIN===f}):null}return{getUfgCartRequestObject:function(f){return f.additionalInput},ufgCartResponseAdapter:function(g,e){return(e=f(e.asinId,g.clientResponseModel))?{itemId:e.itemId,quantity:e.quantity,isTotal:!0,rawResponse:g}:{itemId:"invalidItemId",quantity:0,isTotal:!0,rawResponse:g}}}});"use strict";k.when("A","quantity-slider-utils").register("quantity-slider-metrics-handler",function(g,f){function h(c,b){return"QuantitySliderWidget::"+
c+"::"+(b?b+"::":"")}function e(c){var b=n.ue;"undefined"!==typeof b&&b.count(c,1)}function d(c,d){f.assert(c&&d.clientName,"Missing required properties while logging metrics");var g=d.isQSAction?d.isDecreaseQuantityAction?b.QS_DECREASE:b.QS_INCREASE:b.ATC;c=h(d.clientName,d.cartType)+c+"::"+g;e(c)}var b={ATC:"ATC",QS_INCREASE:"QSIncrease",QS_DECREASE:"QSDecrease"};return{logRequestStartMetrics:function(c){d("CountStart",c)},logRequestSuccessMetrics:function(c){d("CountSuccess",c)},logRequestErrorMetrics:function(c){d("CountError",
c)},logMaxQuantityReachedMetric:function(c){c=h(c.clientName,c.cartType)+"MaxQuantityReached";e(c)},logMultipleAsinsSubmittingMetric:function(c){c=h(c.clientName,c.cartType)+"MultipleAsinsSubmitting";e(c)}}});"use strict";k.when("A","quantity-slider-utils","qs-cart-update-handler","quantity-slider-metrics-handler").register("quantity-slider-widget",function(g,f,h,e){function d(a){return"."+a+"-qs-slider-button"}function b(a,c){a=d(a)+" .qs-decrease-quantity";c?f.disableButton(a):f.enableButton(a)}
function c(a,c){a=d(a)+" .qs-increase-quantity";c?f.disableButton(a):f.enableButton(a)}function l(a,c){a="."+a+"-qs-add-to-cart-button .qs-slider-atc-button";c?f.disableButton(a):f.enableButton(a)}function k(a){a.isQSAction&&(a.isDecreaseQuantityAction?f.deselectButton(d(a.asin)+" .qs-decrease-quantity"):f.deselectButton(d(a.asin)+" .qs-increase-quantity"))}function q(a){f.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!1);var d=a.asin;a.isQSAction?(b(d,!1),c(d,!1)):l(d,!1);k(a);f.assert(a.asin&&
a.request&&a.response&&a.response.quantity!==t,"Required properties missing in payload object for UpdateQSWidget");v(a.asin,a.response.quantity,a.request.maxOrderQuantity);a.request.enableQuantityLimitMessage&&f.toggleDomNodeVisibility("."+a.asin+"-qs-quantity-limit-message",a.response.quantity>=a.request.maxOrderQuantity);f.updateTotalCartCountOnUI(a,a.cartType);e.logRequestSuccessMetrics(a)}function n(a){f.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!0);var d=a.asin;a.isQSAction?(b(d,
!0),c(d,!0)):l(d,!0);e.logRequestStartMetrics(a);a.request&&a.request.isMultipleAsinsSubmitting&&e.logMultipleAsinsSubmittingMetric(a)}function v(a,b,e){var g="."+a+"-qs-add-to-cart-button",h=d(a);0<b?(f.changeATCtoQS(g,h),g=u("."+a+"-qs-qty-present-in-cart"),Number.isInteger(b)&&g.html(b),c(a,b>=e)):(f.changeQStoATC(g,h),c(a,!1))}var u=g.$;Number.isInteger||(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&-9007199254740992<a&&9007199254740992>a&&Math.floor(a)===a});g.on(f.ACTIONS.ADD_TO_CART_SUBMIT_START,
function(a){n(a)});g.on(f.ACTIONS.ADD_TO_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){q(a)},1500);a.response.quantity===a.request.maxOrderQuantity&&e.logMaxQuantityReachedMetric(a)});g.on(f.ACTIONS.REMOVE_FROM_CART_SUBMIT_START,function(a){n(a)});g.on(f.ACTIONS.REMOVE_FROM_CART_SUBMIT_SUCCESS,function(a){setTimeout(function(){q(a)},1500)});g.on(f.ACTIONS.QS_CART_SUBMIT_ERROR,function(a){f.toggleDomNodeVisibility("."+a.asin+"-qs-slider-spinner",!1);if(a.isQSAction&&a.isMaxOrderQuantityReached)b(a.asin,
!1);else{var d=a.asin;a.isQSAction?(b(d,!1),c(d,!1)):l(d,!1)}k(a);e.logRequestErrorMetrics(a)});return{ACTIONS:f.ACTIONS,CART_IDEMPOTENT_REQUEST_DELAY:1500,setAttribution:h.setAttribution,updateQuantitySliderWidget:v}});"use strict";k.when("A","qs-cart-count-handler","a-button").register("quantity-slider-utils",function(g,f,h){function e(b){return d("."+b+"-qs-slider-data").first().data("qs-model")}var d=g.$;return{ACTIONS:{ADD_TO_CART_SUBMIT_START:"quantity-slider:add-to-cart-start",ADD_TO_CART_SUBMIT_SUCCESS:"quantity-slider:add-to-cart-success",
REMOVE_FROM_CART_SUBMIT_START:"quantity-slider:remove-from-cart-start",REMOVE_FROM_CART_SUBMIT_SUCCESS:"quantity-slider:remove-from-cart-success",QS_CART_SUBMIT_ERROR:"quantity-slider:cart-submit-error"},assert:function(b,c){if(!b)throw Error(c);},changeATCtoQS:function(b,c){d(b).hasClass("aok-hidden")||(d(b).addClass("aok-hidden"),d(c).removeClass("aok-hidden"))},changeQStoATC:function(b,c){d(c).hasClass("aok-hidden")||(d(c).addClass("aok-hidden"),d(b).removeClass("aok-hidden"))},disableButton:function(b){h(d(b)).disable()},
deselectButton:function(b){b=h(d(b));b.isEnabled()&&b.setStatus("normal")},enableButton:function(b){h(d(b)).enable()},getQSParamsForAsin:e,setUpdatedQSParamsForAsin:function(b,c){var f=e(b);d("."+b+"-qs-slider-data").data(g.extend(f,c))},toggleDomNodeVisibility:function(b,c){c?d(b).removeClass("aok-hidden"):d(b).addClass("aok-hidden")},updateTotalCartCountOnUI:function(b,c){b=g.extend({},b);b.onSuccess=function(c){n.$Nav&&n.$Nav.when("api.setCartCount").run(function(b){b(c)});k.when("mash").execute("quantity-slider-mash-update",
function(b){b.cart&&d.isFunction(b.cart.didUpdate)&&b.cart.didUpdate({newCartQuantity:c})})};f.getTotalCartCount(b,c)},logUrl:function(b){b&&g.post(b)}}})});
/* ******** */
(function(d){var f=window.AmazonUIPageJS||window.P,r=f._namespace||f.attributeErrors,b=r?r("ALMCartActionAssets",""):f;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,f,r){d.when("A").register("alm-cart-action-query-string-utils",function(b){function c(c,l){var g=e(c),h=a(c);g?l["discoveredAsins.0"]=c.asin:h&&(c=b.filter(c.items,function(a){return e(a)}),c=b.map(c,function(a){return a.asin}),b.each(c,function(a,e){l["discoveredAsins."+e.toString()]=a}));return l}
function a(a){return a&&a.items&&b.$.isArray(a.items)&&0<a.items.length}function e(a){return a&&a.asin&&"string"===typeof a.asin&&""!==a.asin}return{addQueryStringParamsToUrl:function(a,e){var g={};if(e&&e.reftag){var h=e.reftag;"string"===typeof h&&""!==h&&(g.ref_=h)}if(e&&e.queryLogInfoParams){var h=e.queryLogInfoParams,k;for(k in h)h.hasOwnProperty(k)&&"string"===typeof k&&""!==k&&"string"===typeof h[k]&&""!==h[k]&&(g[k]=h[k])}c(e,g);(e=b.$.param(g))&&"string"===typeof e&&""!==e&&(a+="?"+e);return a}}});
"use strict";d.when("A","jQuery").register("afx-add-all-helper",function(b,c){return{updateQuantityForAsin:function(a,e,b){a&&e&&!isNaN(b)&&c("#"+a).closest("form").find("#afx-add-all-"+e+"-quantity").attr("value",b)}}});"use strict";d.when("A","jQuery","a-button").register("fx-atfc-button-utils",function(b,c,a){function e(a){return"atfc-spinner-"+(a.asin?a.asin:a.clientId?a.clientId:"noAsin")}var q=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");b&&b.length&&
(q=!0,a=e(a.data),b.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),c("#"+a).css({width:b.outerWidth()+"px"}),c("#"+a).css({height:b.outerHeight()+"px"}),b.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button");a=e(a.data);a=c("#"+a);b&&b.length&&a&&a.length&&(q=!1,b.css("visibility","visible"),b.unwrap())},shouldDisableButtonClicks:function(){return q}}});"use strict";d.when("fresh-shared-add-to-cart-v2","qs-fresh-shared-add-to-cart").register("fresh-add-to-cart",
function(b,c){function a(a){b.attachCallbacks(a)}b.initialize("desktop");c.initialize("desktop");return{addToFreshCart:function(b){a(b)},attachCallbacks:a,updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}});"use strict";d.when("shared-alm-multi-add-to-cart").register("alm-multi-add-to-cart",function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{multiAddToCart:function(a){c(a)},attachCallbacks:c,attachPreHandler:function(a){b.attachPreHandler(a)}}});
"use strict";d.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,c){return{addToFreshCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});"use strict";d.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(c){var a=
"/fom/add-to-fresh-order";c.reftag!==r&&(a+="/ref\x3d"+c.reftag);c.data!==r&&c.data.csrfToken&&(a+="?csrf\x3d"+encodeURIComponent(c.data.csrfToken));b.post(a,{success:c.success,error:c.error,params:JSON.stringify(c.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}});
"use strict";d.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function c(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var e=c(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:e})},resolve:function(a){var e=c(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:e})},substitute:function(a){a=c(a.data);a.sourceUrl=f.location.pathname+f.location.search;
a=b.$.param(a);f.location.href="/afx/cartconflicts/resolve/substitute?"+a}}});"use strict";d.when("A").register("afx-get-cart-count",function(b){return function(c){b.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:c.sessionID,clientName:"SharedFreshHandler"},success:c.success,error:c.error})}});"use strict";d.when("A","alm-cart-action-query-string-utils").register("alm-multi-add-to-cart-proxy",function(b,c){return{multiAddToCart:function(a){var e=c.addQueryStringParamsToUrl("/alm/addtocart/multiple",
a.data);b.$.ajax(e,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)}}});"use strict";d.register("afx-callbacks-helper",function(b){function c(b){var c=b in a;!c&&d.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,d,l){b=b in a?b:"default";c(b)&&a[b].success&&a[b].success(d,l)},error:function(b,d,l,g){b=b in a?b:"default";c(b)&&a[b].error&&a[b].error(d,
l,g)}}});"use strict";d.register("afx-preHandler-helper",function(b){var c={};return{addPreHandler:function(a){c[a.clientID||"default"]=a},getPreHandler:function(a){return c[a]}}});"use strict";d.register("afx-csm-metrics-utils",function(){var b={},c=function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,e){a=Date.now()-b[a];c(e,a)},setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,
b){f.ue&&f.uet&&a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:c,sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});"use strict";d.register("add-to-cart-common-utils",function(){return{vibrate:function(){return f.amazon&&f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}}});"use strict";d.when("A","a-modal").register("fresh-atfc-modal-utils",
function(b,c){return{removeModal:function(){var a=c.get("fresh-add-to-cart-modal");a&&c.remove(a)},showModal:function(a,e,d){e&&(e={name:"fresh-add-to-cart-modal",header:e.header,inlineContent:e.body,footer:e.footer},"desktop"===d&&(e.width=325),c.create(a.$currentTarget,e).show(),b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){c.remove(a.popover)}))}}});"use strict";d.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper",
"fresh-atfc-ewc-helper").register("fresh-atfc-error-modal-utils",function(b,c,a,e,q,f,g){function h(a,c,e,m){d.when("a-modal").execute("showModal",function(d){c||k(a);a.data.quantity&&(f.updateQuantity("fresh-clear-slot-button",a.data.quantity),f.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity));var h={name:"fresh-add-to-cart-error-modal",header:c.header,inlineContent:c.errorMessage,footer:c.footer,data:{event:a,response:m}};"desktop"===e&&(h.width=325);d.create(a.$currentTarget,
h).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){g.refreshCart(a.data.sessionID);d.remove(b.popover)})})}function k(b,e){a.showGenericErrorModal({success:function(a,d,h){a&&(a=c.parseJSON(h.http.response),m(b,a,e))},error:function(){d.log("Failed to get the generic error modal","Error");h(b,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
e)}})}function m(a,b,c){var m=b.errorModalHtml,d=q.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in d&&e.increment(d[b.clientResponseModel.uberCartStatus.errorStatusCode]);h(a,m,c,b)}return{removeModal:function(){d.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:h,showGenericErrorModal:k,parseResponseAndShowErrorModal:m}});"use strict";
d.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",function(b,c,a,e){function q(a){e({sessionID:a,success:function(a){a&&a.isOK&&a.total&&f(a.total.numActiveItem)},error:function(){d.log("Failed to get cart count","Error",a)}})}function f(a){d.when("nav.setCartCount").execute(function(b){b(a)});d.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var g;d.when("EWC").execute("add-to-cart-refresh",
function(a){g=a});d.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){g!==r&&"function"===typeof g.refresh?g.refresh():q(a)}}});"use strict";d.when("A","afx-storeIntroductionSheet-helper","afx-cpi-helper").register("f3-consumables-atc-helper",function(b,c,a){return{handleAddToCart:function(e,d,f){d.storeIntroductionSheetHtml&&d.storeIntroductionSheetHtml.content?c.render(e,d,f):d.renderUFGCartProgressIndicator?a.render(e):b.trigger("fresh-atfc:success","false",{almBrandId:e.brandId})}}});
"use strict";d.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ALM_MULTI_ATC_COUNT:"almMultiAddToCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ALM_MULTI_ATC_COUNT_SUCCESS:"almMultiAddToCartCountSuccess",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ALM_MULTI_ATC_COUNT_ERROR_MODAL:"almMultiAddToCartCountErrorModal",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED:"almMultiAddToCartCountErrorUnexpected",
ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",ATFC_STORE_INTRODUCTION_SHEET:"afxStoreIntroductionSheet",ATFC_OCX_STORE_INTRODUCTION_SHEET:"afxOfferComparisonStoreIntroductionSheet",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",
ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(e){a[e]=
b[e]+":"+c});return a}}});"use strict";d.when("A").register("afx-quantity-helper",function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}});"use strict";d.when("A","afx-csm-metrics-utils","afx-metrics-helper").register("afx-storeIntroductionSheet-helper",function(b,c,a){function e(a,b){var c=b?400:190;d.when("a-sheet").execute(function(e){e.create({inlineContent:a,
closeType:"icon",height:c}).show();f("mobile",b)})}function f(b,e){b=a.getMetricsForDevice(b);e?c.increment(b.ATFC_OCX_STORE_INTRODUCTION_SHEET):c.increment(b.ATFC_STORE_INTRODUCTION_SHEET)}function l(){b.show(b.$("#sis-background"));b.$("body").css({overflow:"hidden"});b.$("#offer-comparison-store-introduction-side-sheet-container").show(function(){h({right:"0px"})});f("desktop",!0)}function g(){var a=b.$("#offer-comparison-store-introduction-side-sheet-container").width()+30;h({right:"-"+a+"px"},
function(){b.$("#offer-comparison-store-introduction-side-sheet-container").remove()});b.$("body").css({overflow:"scroll"});b.hide(b.$("#sis-background"));b.$("#offer-comparison-store-introduction-side-sheet-background-container").remove()}function h(a,c){b.animate(b.$("#offer-comparison-store-introduction-side-sheet-container"),a,300,"ease-out",c)}b.declarative("close-offer-comparison-store-introduction-side-sheet","click",function(a){g()});return{render:function(a,c,d){c=c.storeIntroductionSheetHtml.content;
a=a.additionalParams&&a.additionalParams.shouldRenderSIS;"mobile"===d?e(c,a):"desktop"===d&&(b.$("body").append(c),l())}}});"use strict";d.when("A").register("afx-cpi-helper",function(b){return{render:function(c){b.trigger("consumables-atc:success",{atcAction:{ASIN:c.asin,numberOfItems:c.quantity,operationType:"ADDED"},programDetails:{programType:"UFG",brandId:c.brandId,storeId:c.storeId},requestOverrides:{responseType:"HTML","cart-progress-indicator":{messageType:"topsheet"}}})}}});"use strict";
d.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(e,d,f){!0===e.isSuccess?!0===e.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(f,d,"Failed to call getconflictsummary")},error:a.error})}}});"use strict";d.when("A","afx-atfc-v2-proxy","fx-atfo-proxy",
"fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("fresh-shared-add-to-cart-v2",function(b,c,a,e,f,l,g,h,k,m,y,n,t,p){return{updateQuantity:g.updateQuantity,attachCallbacks:h.addCallbacks,updateAddAllQuantityForAsin:n.updateQuantityForAsin,initialize:function(n){function w(a){return a.isItemSoldByCount?
!JSON.parse(a.isItemSoldByCount):a.pickingStrategy?"bulk"===a.pickingStrategy||"catch"===a.pickingStrategy:!1}function x(a,b,d,g){p.vibrate();a.data.amountInUom===r&&w(a.data)&&(a.data.amountInUom=a.data.quantity,a.data.quantity=1);c.addToFreshCart({data:a.data,success:function(c,g,w){200===w.status&&(f.increment(u.ATFC_SUCCESSFUL_ADD_COUNT),g=u.ATFC_CTCF+":lineItemBucket:"+z(c),f.endWidgetTimer(b,g),y.refreshCart(a.data.sessionID),h.success(a.data.clientID,a,c.clientResponseModel),t.handleAddToCart(a.data,
c,n));m.removeModal();e.showButtonAndRemoveSpinner(a);d&&d()},error:function(c,d,w){var l=u.ATFC_CTCF,k=c.responseText,p;m.removeModal();k&&(p=JSON.parse(k),l=u.ATFC_CTCF+":lineItemBucket:"+z(p.clientResponseModel));400===c.status&&p?(f.increment(u.ATFC_ERROR_MODAL_COUNT),m.parseResponseAndShowErrorModal(a,p,n)):403===c.status?location.reload():(f.increment(u.ATFC_UNEXPECTED_ERROR_COUNT),m.showGenericErrorModal(a,n),h.error(a.data.clientID,a,c,d,w));f.endWidgetTimer(b,l);e.showButtonAndRemoveSpinner(a);
g&&g()}})}function A(a,c){f.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=g.getQuantity(a.$target);x(a,c,function(){location.reload()})},error:function(){d.log("Failed to clear reservation");m.showGenericErrorModal(a,n)}})}function z(a){return a.items&&Math.ceil(a.items.length/5)}var u=l.getMetricsForDevice(n),v=u.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",
function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c={data:a};if(a.tunneledData&&a.tunneledData.$target){var d=a.tunneledData.$target,c=b.$.extend(c,{$target:d,$currentTarget:d,$declarativeTarget:d});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),e.hideButtonAndRenderSpinner(c);x(c,v)});
b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;A(a,v)});b.declarative("fresh-add-to-cart","click",function(a){f.startWidgetTimer(v);f.increment(u.ATFC_COUNT);e.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||(e.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=g.getQuantity(a.$target),x(a,v)))});b.declarative("fresh-add-to-cart-alcohol",
"click",function(a){a.$currentTarget.context.disabled=!0;f.startWidgetTimer(v);a.data.quantity=g.getQuantity(a.$target);x(a,v)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;m.removeModal();k.execute({data:a.data,error:function(b,c,e){m.showGenericErrorModal(a,n);h.error(a.data.clientID,a,b,c,e)}})});b.declarative("fresh-add-to-order","click",function(b){e.shouldDisableButtonClicks()||(e.hideButtonAndRenderSpinner(b),p.vibrate(),a.addToFreshOrder({data:b.data,
success:function(a,c,d){200===d.http.status&&h.success(b.data.clientID,b,a.clientResponseModel);e.showButtonAndRemoveSpinner(b)},error:function(c,d,f){m.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),m.parseResponseAndShowErrorModal(b,c,n);else if(401===c.http.status)location.reload();else{var g=a.getFallbackErrorModalHtml();m.showModal(b,g,n);h.error(b.data.clientID,b,c,d,f)}e.showButtonAndRemoveSpinner(b)}}))})}}});"use strict";d.when("A","alm-multi-add-to-cart-proxy","fx-atfc-button-utils",
"afx-csm-metrics-utils","afx-metrics-helper","afx-callbacks-helper","afx-preHandler-helper","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","f3-consumables-atc-helper","add-to-cart-common-utils").register("shared-alm-multi-add-to-cart",function(b,c,a,e,d,f,g,h,k,m,y){return{attachCallbacks:f.addCallbacks,attachPreHandler:g.addPreHandler,initialize:function(n){function t(d,g,q,t){y.vibrate();c.multiAddToCart({data:d.data,success:function(c,g,t){200===t.status&&(e.increment(p.ALM_MULTI_ATC_COUNT_SUCCESS),
k.refreshCart(d.data.sessionID),b.trigger("multipleAddToCart:success",d.data),f.success(d.data.clientId,d,c),m.handleAddToCart(d.data,c,n));h.removeModal();a.showButtonAndRemoveSpinner(d);q&&q()},error:function(b,c,m){a.showButtonAndRemoveSpinner(d);var g;h.removeModal();b.responseText&&(g=JSON.parse(b.responseText));400===b.status&&g?(e.increment(p.ALM_MULTI_ATC_COUNT_ERROR_MODAL),h.parseResponseAndShowErrorModal(d,g,n)):403===b.status?location.reload():(e.increment(p.ALM_MULTI_ATC_COUNT_ERROR_UNEXPECTED),
h.showGenericErrorModal(d,n));f.error(d.data.clientId,d,b,c,m);t&&t()}})}var p=d.getMetricsForDevice(n),r=p.ATFC_LATENCY_SCOPE+Date.now();b.declarative("alm-multi-add-to-cart","click",function(b){e.increment(p.ALM_MULTI_ATC_COUNT);var c=g.getPreHandler(b.data.clientId);c&&c.preHandle&&(c=c.preHandle(b))&&(b=c);c=b.$currentTarget.find("input");!b.data.items||1>b.data.items.length||a.shouldDisableButtonClicks()||c.is(":disabled")||(a.hideButtonAndRenderSpinner(b),t(b,r))})}}});d.when("A","f3-consumables-atc-helper",
"fresh-atfc-ewc-helper","afx-callbacks-helper","fresh-atfc-error-modal-utils","add-to-cart-common-utils").register("qs-fresh-shared-add-to-cart",function(b,c,a,d,f,l){return{initialize:function(g){function h(a){return"UFG"==a.cartType&&a.response&&a.request&&a.request.additionalInput?!0:!1}function k(b){if(h(b)&&b.response.rawResponse){var k=b.response.rawResponse,n=k.jqXHR,l=b.request,p=l.triggeringEvent;p.data=l.additionalInput;200===n.status&&(a.refreshCart(l.sessionId),d.success(b.clientName,
p,k.clientResponseModel),c.handleAddToCart(p.data,k,g));f.removeModal()}}b.on("quantity-slider:add-to-cart-start",function(a){l.vibrate()});b.on("quantity-slider:remove-from-cart-start",function(a){l.vibrate()});b.on("quantity-slider:remove-from-cart-success",function(a){k(a)});b.on("quantity-slider:add-to-cart-success",function(a){k(a)});b.on("quantity-slider:cart-submit-error",function(a){if(h(a)){var b=a.request.triggeringEvent,c=a.response,k=c.responseText,l;f.removeModal();k&&(l=JSON.parse(k));
b.data=a.request.additionalInput;400===c.status&&l?f.showModal(b,l.errorModalHtml,g):403===c.status?location.reload():(f.showGenericErrorModal(b,g),d.error(a.clientName,b,c,"error",c.statusText))}})}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,c=m?m("APEAdaptiveSkyscraperWidgetAssets",""):f;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,f,m){"use strict";e.when("Rush","s-web-application-controller","ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-execute","ape-adaptive-skyscraper-metrics","s-skyscraper-slot","af").execute("ape-adaptive-skyscraper",function(c,f,e,u,B){function v(){try{u.execute()}catch(b){B.incrementMetric(e.METRIC_ERROR)}}
c.on(f.ACTIONS.LOAD_SEARCH_PAGE_COMPLETE,function(){setTimeout(v,e.PAGINATION_EXECUTE_TIMEOUT)});v()});"use strict";e.register("ape-adaptive-skyscraper-constants",function(){return{RESEND_ACTIVATE_EVENT_TIMEOUT:600,PAGINATION_EXECUTE_TIMEOUT:600,METRIC_DONE:"adplacements:adaptive-skyscraper:done",METRIC_ERROR:"adplacements:adaptive-skyscraper:error",METRIC_NO_ADAP_SKYS:"adplacements:adaptive-skyscraper:no-adaptive-skyscrapers",METRIC_NO_BLOCKING:"adplacements:adaptive-skyscraper:no-blocking-elements",
METRIC_NO_SPACE:"adplacements:adaptive-skyscraper:no-space"}});"use strict";e.when("ape-adaptive-skyscraper-constants","ape-adaptive-skyscraper-metrics","A").register("ape-adaptive-skyscraper-execute",function(c,e,m){function u(e){function f(){var b=e.querySelector("iframe");b&&b.contentWindow&&b.contentWindow.postMessage&&m.$.isFunction(b.contentWindow.postMessage)&&b.contentWindow.postMessage(JSON.stringify({action:"TRIGGER",eventName:"adaptiveSkyReady"}),"*")}f();setTimeout(f,c.RESEND_ACTIVATE_EVENT_TIMEOUT)}
return{execute:function(){function m(){function a(a){a=q[String(a)].querySelector("div");a.style.display="none";a.style.marginTop=""}function d(a,d){a=q[String(a)].querySelector("div");a.style.display="block";a.style.marginTop=String(d)+"px"}var h,l;h=1;for(l=0;h<n&&l<r.length;h++)"active"!==t[h]?a(h):(d(h,r[l]),l++);for(;h<n;h++)a(h)}function v(a){var d;if(a.data){try{d=JSON.parse(a.data)}catch(h){d={}}d&&d.frameId&&d.action&&"COLLAPSE"===d.action&&(a=x[d.frameId],"number"===typeof a&&0!==a&&(t[a]=
"inactive",m()))}}var b,q={},y,r=[],z,x={},n=0,A=f.innerHeight,w=[],t={};b={tops:[],bottoms:[]};b=function(){var a={},d,h,l,p={},b=0,g={},k=document.getElementsByClassName("slot\x3dSKYSCRAPER template\x3dSAFE_FRAME");0>=k.length&&(k=document.getElementsByClassName("slot\x3dLEFT template\x3dSAFE_FRAME"));for(l=0;l<k.length;l++)d=k[l].children[0],h=d.getElementsByTagName("iframe")[0].getAttribute("data-frame-id"),a[b]=d,p[h]=b,g[b]="active",b++;return{cachedFrameContainers:a,numByFrameId:p,numSkyscrapers:b,
skyscraperStates:g}}();q=b.cachedFrameContainers;x=b.numByFrameId;n=b.numSkyscrapers;t=b.skyscraperStates;1>=n?function(a,d){e.incrementMetric(c.METRIC_NO_ADAP_SKYS);d&&u(a["0"])}(q,1===n):(z=Math.ceil(q["0"].offsetTop+619+A),y=function(){var a=document.getElementsByClassName("s-result-list");if(0>=a.length)return 0;a=a[a.length-1];return Math.ceil(a.offsetTop+a.offsetHeight)}(),b=document.getElementsByClassName?document.getElementsByClassName("AdHolder"):document.querySelector(".AdHolder"),(!b||
b.length&&0>=b.length)&&e.incrementMetric(c.METRIC_NO_BLOCKING),b=function(a,d,h){var b=[h],p=[d],e={},g={},k,c,f;if(0>=a.length)return{tops:b,bottoms:p};for(k=0;k<a.length;k++)c=Math.floor(a[k].offsetTop),f=Math.ceil(c+a[k].offsetHeight),c>d&&c<h&&!e[c]&&(b.push(c),e[c]=!0),f>=d&&f<h&&!g[f]&&(p.push(f),g[f]=!0);[b,p].forEach(function(a){a.sort(function(a,d){return a-d})});return{tops:b,bottoms:p}}(b,z,y),w=function(a,d){for(var h=[],b=0,c=0,f=0,g=a.length+d.length,k,e;f<g&&c<d.length&&b<a.length;)f++,
k=d[c],e=a[b],k>=e?b++:c<d.length-2&&d[c+1]<e?c++:619>e-k?c++:(h.push([k,e]),c++,b++);return w=h}(b.tops,b.bottoms),r=function(a,d,b,c){var e=[];d=d.reverse();var f=1;a=Number(a.offsetTop);var g,k;if(0>=d.length)return e;for(g=d.pop();f<b&&g;)g[0]<a&&(g[0]=a),g[0]>g[1]||619>g[1]-g[0]?((k=d.pop())&&g[0]>k[0]&&(k[0]=g[0]),g=k):(e.push(g[0]-a-619),f++,a=g[0],g[0]+=619+c);return e}(q["0"],w,n,A),function(a,d){var b;if(!(a.length>=d||(a=d-a.length-1,0>=a)))for(b=0;b<a;b++)t[d-b-1]="inactive"}(r,n),0>=
r.length&&e.incrementMetric(c.METRIC_NO_SPACE),function(a,b,c,e){function f(a){return function(b){try{a(b)}catch(d){}}}a.addEventListener?a.addEventListener(b,f(c),!0===e):a.attachEvent&&a.attachEvent("on"+b,f(c))}(f,"message",v),m(),function(a,b){var c;for(c=0;c<a;c++)"active"===b[c]&&u(q[String(c)])}(n,t),e.incrementMetric(c.METRIC_DONE))}}});"use strict";e.register("ape-adaptive-skyscraper-metrics",function(){return{incrementMetric:function(c){f.ue&&f.ue.count&&c&&f.ue.count(c,(f.ue.count(c)||
0)+1)}}})});
/* ******** */
(function(t){var p=window.AmazonUIPageJS||window.P,r=p._namespace||p.attributeErrors,k=r?r("SponsoredBrandsVideoAssets",""):p;k.guardFatal?k.guardFatal(t)(k,window):k.execute(function(){t(k,window)})})(function(t,p,r){t.when("A","rush-framework","sbv-single-product","sbv-slideshow-product-mixin").register("sbv-slideshow-single-product",function(k,q,f,h){var d=function(){this.attribution=this.name="sbv-slideshow-single-product"};k.mixin(d.prototype,h);var e=new d;q.registerComponent(e.name,e.attribution,
function(c){var d=k.$(c.elem()),a=d.find(".sbv-product:first"),a=0===a.length?d.children().get(-1):a.get(0);e.setup(e.attribution,d,a,c,f)})});"use strict";t.when("A","rush-framework","sbv-video-single-mixin","sbv-single-product","sbv-store-ingress").register("sbv-video-single-product",function(k,q,f,h,d){var e=function(){this.attribution=this.name="sbv-video-single-product"};k.mixin(e.prototype,f);var c=new e;q.registerComponent(c.name,c.attribution,function(e){var a=k.$(e.elem()),b=a.find(".sbv-product:first").get(0),
n=a.find(".sbv-store-ingress:first").get(0);c.setup(c.attribution,a,b,n,e,h,d)})});"use strict";t.when("A","rush-framework","sbv-single-link","sbv-video-single-mixin").register("sbv-video-single-link",function(k,q,f,h){var d=function(){this.attribution=this.name="sbv-video-single-link"};k.mixin(d.prototype,h);var e=new d;q.registerComponent(e.name,e.attribution,function(c){var d=k.$(c.elem()),a=d.find(".sbv-link:first").get(0);e.setup(e.attribution,d,a,null,c,f,null)})});t.when("A","base-mixin","sbv-video").register("sbv-video-single-mixin",
function(k,q,f){return{setup:function(h,d,e,c,l,a,b){var n=d.find(".sbv-video:first"),g=q.setup(h,d,l).withVideoPreviewImageSrc(l.prop("videoPreviewImageSrc")).withVideoSrc(l.prop("videoSrc")).withHasAudio("true"===l.prop("hasAudio")).withStoreName(l.prop("storeName")||"").withStoreUrl(l.prop("storeUrl")||"").withStoreCta(l.prop("storeCta")||"").build();d.hasClass("aok-hidden")&&d.hasClass("sbv-abd")||"none"==d.css("display")?g.reportAdRenderSuppressed():(g.reportAceVideoResponseReceived(),h=f.initialize(h,
n.get(0),g,l.prop("instrumentationPixelUrl")),a.initialize(e,g,h),b&&c&&b.initialize(c,g,h))}}});t.when("A","sbv-metrics-manager","sbv-automated-test-metrics-client","sbv-platform-compatibility","sbv-latency-event-handler").register("base-mixin",function(k,q,f,h){return{setup:function(d,e,c){h.setAppVersion(c.prop("appVersion"));return q.builder().withAttribution(d).withMetricsIdentifier(c.prop("metricsIdentifier")).withAdvertiserId(c.prop("advertiserId")).withCampaignId(c.prop("campaignId")).withSlotId(c.prop("slotId")).withSearchQuery(c.prop("searchQuery")).withWidgetIndex(c.prop("widgetIndex")).withDeviceEnv(c.prop("deviceEnv")||
"").withDeviceOs(c.prop("deviceOs")||"").withDeviceType(c.prop("deviceType")||"").withDevicePlatformVersion(c.prop("devicePlatformVersion")||"").withDeviceModel(c.prop("deviceModel")||"").withDeviceMake(c.prop("deviceMake")||"").withAppVersion(c.prop("appVersion")||"").withStage(c.prop("stage")).withClientId(c.prop("clientId")).withWeblabs(c.prop("weblabs")).withLanguage(c.prop("language")).withMarketplaceId(c.prop("marketplaceId")).withWidgetType(c.prop("widgetType")).withWidgetGroupId(c.prop("widgetGroupId")).withPageType(c.prop("pageType")).withPageNumber(c.prop("pageNumber")).withSushiSourceGroupEndpoint(c.prop("sushiSourceGroupEndpoint"))}}});
t.when("base-mixin","sbv-slideshow").register("sbv-slideshow-product-mixin",function(k,q){return{setup:function(f,h,d,e,c){var l=h.find(".sbv-slideshow-view-container:first").get(0);f=k.setup(f,h,e).build();f.reportSlideshowWidgetResponseReceived();l=q.initialize(l,f);(h=h.find(".sbv-slideshow-timer:first").get(0))&&h.dataset&&h.dataset.jsploadedtime&&(h=Date.now()-h.dataset.jsploadedtime,f.reportTimeWaitingForScriptToExecute(h));c.initialize(d,f,l)}}});t.when("A","3p-promise").register("sbv-adblock-detector",
function(k,q){var f={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}};return{timeoutWrapper:function(h){return new q(function(d,e){var c=setTimeout(function(){clearTimeout(c);d()},h)})},fetchWrapper:function(h,d,e){e=this.timeoutWrapper(e);h=p.fetch(h,d);return q.race([h,e])},init:function(){if(k.$(".sbv-video-single-product").find(".sbv-compliant-abd").length){var h=this.fetchWrapper("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_\x3d1607460946161",f,2E3);return new q(function(d,
e){h.then(function(c){e(c)}).catch(function(c){d(c)})})}}}});t.when("af","ready").register("sbv-latency-event-handler");t.when("A").register("sbv-single-link",function(k){function q(){this.init=function(f,h,d){k.$(f).find("a").click(function(){h.reportLinkClicked(d&&d.getVideoCurrentTimeMs())});k.$(f).find(".sbv-link-cta-container").click(function(){h.reportCallToActionClicked(d&&d.getVideoCurrentTimeMs())});k.$(f).find(".sbv-link-img-container").click(function(){h.reportImageClicked(d&&d.getVideoCurrentTimeMs())});
k.$(f).find(".sbv-link-headline").click(function(){h.reportHeadlineClicked(d&&d.getVideoCurrentTimeMs())})}}return{initialize:function(f,h,d){(new q).init(f,h,d)}}});"use strict";t.when("A","sbv-sushi-client").register("sbv-metrics-manager",function(k,q){function f(a,b){function n(a,b){var n=g(e.VM_POST_FAILURE);n[c.VIEW_METRICS_FAILURE]=a;n[c.ERROR_MESSAGE]=b;m(n)}function g(a){var g=k.$.extend({},v);g[c.EVENT_TYPE]=a;g[c.METRICS_SEQUENCE_NUMBER]=h++;g[c.NETWORK_TYPE]=navigator&&navigator.connection&&
navigator.connection.type;return g}function m(a,g){f&&f.processEvent(a,l);t&&t.processEvent(a)}var h=0,f=q.newClient(a,p,b,"AceVisClientMetrics"),v=null,t=null;this.setSushiClient=function(a){f=a};this.setDefaultEventAttributes=function(a){v=k.$.extend({},a);v[c.USER_AGENT]=navigator.userAgent};this.setAutomatedTestMetricsClient=function(a){t=a};this.reportAceVideoResponseReceived=function(){var a=g(e.ACE_VIDEO_RESPONSE_RECEIVED);m(a)};this.reportAdBlockDetected=function(){var a=g(e.AD_BLOCK_DETECTED);
m(a)};this.reportTimeWaitingForScriptToExecute=function(a){var b=g(e.TIME_WAITING_FOR_SCRIPT_TO_EXECUTE);b[c.LOAD_TIME_MS]=a;m(b)};this.reportTimeWaitingForScriptToExecuteFailure=function(a){var b=g(e.TIME_WAITING_FOR_SCRIPT_TO_EXECUTE_FAILURE);b[c.ERROR_MESSAGE]=a;m(b)};this.reportAdRenderSuppressed=function(){var a=g(e.AD_RENDER_SUPPRESSED);m(a)};this.reportSlideshowWidgetResponseReceived=function(){var a=g(e.SLIDESHOW_WIDGET_RESPONSE_RECEIVED);m(a)};this.reportSlideshowClicked=function(a,b){var n=
g(e.SLIDESHOW_CLICKED);n[c.SLIDESHOW_TOTAL_SLIDES]=a;n[c.SLIDESHOW_CURRENT_INDEX]=b;m(n)};this.reportSlideshowSwiped=function(a){var b=g(e.SLIDESHOW_SWIPED);b[c.SLIDESHOW_TOTAL_SLIDES]=a;m(b)};this.reportSlideshowOnScreen=function(a){var b=g(e.SLIDESHOW_ON_SCREEN);b[c.SLIDESHOW_TOTAL_SLIDES]=a;m(b)};this.reportSlideshowOffScreen=function(a,b){var n=g(e.SLIDESHOW_OFF_SCREEN);n[c.SLIDESHOW_TOTAL_SLIDES]=a;n[c.TIME_ON_SCREEN_MS]=b;m(n)};this.reportSlideshowLoop=function(a,b){var n=g(e.SLIDESHOW_LOOP);
n[c.SLIDESHOW_TOTAL_SLIDES]=a;n[c.SLIDESHOW_LOOP_COUNT]=b;m(n)};this.reportSlideshowLoadFailed=function(a,b){var n=g(e.SLIDESHOW_LOAD_FAILED);n[c.SLIDESHOW_TOTAL_SLIDES]=a;n[c.ERROR_MESSAGE]=b;m(n)};this.reportSlideshowLoadCompleted=function(a){var b=g(e.SLIDESHOW_LOAD_COMPLETED);b[c.SLIDESHOW_TOTAL_SLIDES]=a;m(b)};this.reportAdFeedbackLoadFailed=function(a){var b=g(e.AD_FEEDBACK_LOAD_FAILED);b[c.STATUS_CODE]=a;m(b)};this.reportAdFeedbackLoadFailedFromErr=function(a){var b=g(e.AD_FEEDBACK_LOAD_FAILED_FROM_ERR);
b[c.ERROR_MESSAGE]=a;m(b)};this.reportAdFeedbackLoadSucceeded=function(a){var b=g(e.AD_FEEDBACK_LOAD_SUCCEEDED);b[c.STATUS_CODE]=a;m(b)};this.reportAdFeedbackKeywordEncodingFailure=function(){var a=g(e.AD_FEEDBACK_KEYWORD_ENCODING_FAILURE);m(a)};this.reportAdFeedbackPopoverOpened=function(){var a=g(e.AD_FEEDBACK_POPOVER_OPENED);m(a)};this.reportMissingVideoFunction=function(a){var b=g(e.MISSING_VIDEO_FUNCTION);b[c.ERROR_MESSAGE]=a;m(b)};this.reportPreviewImageLoadSuccess=function(a,b){var n=g(e.PREVIEW_IMAGE_LOAD_SUCCESS);
n[c.LOAD_TIME_MS]=a;n[c.RETRY_COUNT]=b;m(n)};this.reportPreviewImageLoadFailure=function(a,b){var n=g(e.PREVIEW_IMAGE_LOAD_FAILURE);n[c.LOAD_TIME_MS]=a;n[c.STATUS_CODE]=b;m(n)};this.reportVideoDomainVerificationFailure=function(a){var b=g(e.VIDEO_DOMAIN_VERIFICATION_FAILURE);b[c.ERROR_MESSAGE]=a;m(b)};this.reportVideoReadyForPlayback=function(a,b,n,d,h,f){var l=g(e.VIDEO_READY_FOR_PLAYBACK);l[c.LOAD_TIME_MS]=a;l[c.RETRY_COUNT]=b;l[c.PERCENT_DOWNLOADED]=n;l[c.VIDEO_TOTAL_LENGTH_MS]=d;l[c.START_TIME_MS]=
h;l[c.END_TIME_MS]=f;m(l)};this.reportVideoPlaybackInitiated=function(a){var b=g(e.VIDEO_PLAYBACK_INITIATED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportVideoPlaybackStarted=function(a,b,n){var d=g(e.VIDEO_PLAYBACK_STARTED);d[c.VIDEO_CURRENT_TIME_MS]=a;d[c.PERCENT_DOWNLOADED]=b;d[c.DROPPED_FRAMES]=n;m(d)};this.reportTimeToFirstFrame=function(a,b,n,d,h){var f=g(e.TIME_TO_FIRST_FRAME);f[c.LOAD_TIME_MS]=a;f[c.PERCENT_DOWNLOADED]=b;f[c.DROPPED_FRAMES]=n;f[c.START_TIME_MS]=d;f[c.END_TIME_MS]=h;m(f)};
this.reportVideoBufferingStarted=function(a,b,n){var d=g(e.VIDEO_BUFFERING_STARTED);d[c.VIDEO_CURRENT_TIME_MS]=a;d[c.PERCENT_DOWNLOADED]=b;d[c.DROPPED_FRAMES]=n;m(d)};this.reportVideoBufferingEnded=function(a,b,n){var d=g(e.VIDEO_BUFFERING_ENDED);d[c.VIDEO_CURRENT_TIME_MS]=a;d[c.PERCENT_DOWNLOADED]=b;d[c.DROPPED_FRAMES]=n;m(d)};this.reportVideoPlaybackFailure=function(a,b,n){var d=g(e.VIDEO_PLAYBACK_FAILURE);d[c.VIDEO_CURRENT_TIME_MS]=a;d[c.ERROR_MESSAGE]=b;d[c.ERROR_CODE]=n;m(d)};this.reportVideoDurationPlayed=
function(a,b,n){var d=g(e.VIDEO_DURATION_PLAYED);d[c.VIDEO_BOUNDRY_CROSSED_TIME_MS]=a;d[c.PERCENT_DOWNLOADED]=b;d[c.DROPPED_FRAMES]=n;m(d)};this.reportPlaybackCompleted=function(a,b){var n=g(e.PLAYBACK_COMPLETED);n[c.VIDEO_CURRENT_TIME_MS]=a;n[c.DROPPED_FRAMES]=b;m(n)};this.reportVideoOnScreen=function(a){var b=g(e.VIDEO_ON_SCREEN);b[c.PERCENT_DOWNLOADED]=a;m(b)};this.reportVideoOffScreen=function(a,b,n){var d=g(e.VIDEO_OFF_SCREEN);d[c.TIME_ON_SCREEN_MS]=a;d[c.WAS_BUFFERING]=b;d[c.VIDEO_CURRENT_TIME_MS]=
n;m(d)};this.reportVideoView=function(a,b){var n=g(e.VIDEO_VIEW);n[c.CONTINUOUS_PLAYBACK_DURATION_MS]=a;m(n);b&&f&&f.flush(f,!0)};this.reportVideoPauseInitiated=function(a){var b=g(e.VIDEO_PAUSED_INITIATED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportVideoPaused=function(a,b,n){var d=g(e.VIDEO_PAUSED);d[c.VIDEO_CURRENT_TIME_MS]=a;d[c.PERCENT_DOWNLOADED]=b;d[c.DROPPED_FRAMES]=n;m(d)};this.reportVideoSoundOn=function(a,b){var n=g(e.VIDEO_SOUND_ON);n[c.VIDEO_CURRENT_TIME_MS]=a;n[c.SOUND_TOGGLE_METHOD]=
b;m(n)};this.reportVideoSoundOff=function(a,b){var n=g(e.VIDEO_SOUND_OFF);n[c.VIDEO_CURRENT_TIME_MS]=a;n[c.SOUND_TOGGLE_METHOD]=b;m(n)};this.reportVideoClicked=function(a){var b=g(e.VIDEO_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportProductClicked=function(a){var b=g(e.PRODUCT_CLICKED);a!==r&&(b[c.VIDEO_CURRENT_TIME_MS]=a);m(b)};this.reportProductTitleClicked=function(){var a=g(e.PRODUCT_TITLE_CLICKED);m(a)};this.reportProductReviewCountClicked=function(){var a=g(e.PRODUCT_REVIEW_COUNT_CLICKED);
m(a)};this.reportProductPriceClicked=function(){var a=g(e.PRODUCT_PRICE_CLICKED);m(a)};this.reportLinkClicked=function(a){var b=g(e.LINK_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportCallToActionClicked=function(a){var b=g(e.CALL_TO_ACTION_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportHeadlineClicked=function(a){var b=g(e.HEADLINE_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportImageClicked=function(a){var b=g(e.IMAGE_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportStoreIngressClicked=
function(a){var b=g(e.STORE_INGRESS_CLICKED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportBlankScreenLoadFailure=function(){var a=g(e.BLANK_SCREEN_LOAD_FAILURE);m(a)};this.reportPlaybackFailedToStartAfterPlay=function(){var a=g(e.PLAYBACK_FAILED_TO_START_AFTER_PLAY);m(a)};this.reportAudioToggleIconDisplayed=function(){var a=g(e.AUDIO_TOGGLE_ICON_DISPLAYED);m(a)};this.reportPlayButtonShown=function(){var a=g(e.PLAY_BUTTON_SHOWN);m(a)};this.reportPlayButtonClicked=function(a){var b=g(e.PLAY_BUTTON_CLICKED);
b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportDurationTickerDisplayed=function(a){var b=g(e.VIDEO_DURATION_TICKER_SHOWN);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportVideoAborted=function(a){var b=g(e.VIDEO_ABORTED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportVideoSuspended=function(a){var b=g(e.VIDEO_SUSPENDED);b[c.VIDEO_CURRENT_TIME_MS]=a;m(b)};this.reportVideoPlayPromiseRejected=function(a){var b=g(e.VIDEO_PLAY_PROMISE_REJECTED);b[c.ERROR_MESSAGE]=a;m(b)};this.reportVideoPlayPromiseNotSupported=
function(){var a=g(e.VIDEO_PLAY_PROMISE_NOT_SUPPORTED);m(a)};this.reportDebugInfoCopiedSuccess=function(a){var b=g(e.DEBUG_INFO_COPIED_SUCCESS);b[c.DEBUG_INFO_CONTENT]=a;m(b)};this.reportDebugInfoCopiedFailure=function(a){var b=g(e.DEBUG_INFO_COPIED_FAILURE);b[c.ERROR_MESSAGE]=a;m(b)};this.reportDebugInfoCopiedMessageShown=function(){var a=g(e.DEBUG_INFO_COPIED_MESSAGE_SHOWN);m(a)};this.reportDebugInfoCopiedMessageHidden=function(){var a=g(e.DEBUG_INFO_COPIED_MESSAGE_HIDDEN);m(a)};this.reportViewMetricsPostRequestFailure=
n;this.reportViewMetricsVideoViewed=function(a){var b=g(e.VM_VIDEO_VIEWED);m(b);this.emitViewMetrics(a,d.VIEWED)};this.reportViewMetricsVideoProgressFiveSeconds=function(a){var b=g(e.VM_VIDEO_PROGRESS_FIVE_SECONDS);m(b);this.emitViewMetrics(a,d.PROGRESS_FIVE_SECONDS)};this.reportViewMetricsVideoFirstQuartile=function(a){var b=g(e.VM_VIDEO_FIRST_QUARTILE);m(b);this.emitViewMetrics(a,d.FIRST_QUARTILE)};this.reportViewMetricsVideoMidpoint=function(a){var b=g(e.VM_VIDEO_MIDPOINT);m(b);this.emitViewMetrics(a,
d.MIDPOINT)};this.reportViewMetricsVideoThirdQuartile=function(a){var b=g(e.VM_VIDEO_THIRD_QUARTILE);m(b);this.emitViewMetrics(a,d.THIRD_QUARTILE)};this.reportViewMetricsVideoComplete=function(a){var b=g(e.VM_VIDEO_COMPLETE);m(b);this.emitViewMetrics(a,d.COMPLETE)};this.reportViewMetricsVideoUnmute=function(a){var b=g(e.VM_VIDEO_UNMUTE);m(b);this.emitViewMetrics(a,d.UNMUTE)};this.emitViewMetrics=function(a,b){if(a===r)n(b,"instrumentationPixelUrl is undefined");else{var g=JSON.stringify({v:{def:"iab",
event:b}});a="/"===a.substr(-1)?a+"v/":a+"/v/";fetch(a+encodeURI(g),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:g}).then(function(a){if(!a.ok&&0!==a.status)throw Error(a.status+" "+a.statusText);}).catch(function(a){n(b,a.message)})}};this.getDebugMetricAttributes=function(){var a=v[c.SEARCH_QUERY],n=v[c.ADVERTISER_ID],g=v[c.CAMPAIGN_ID],d=v[c.METRICS_IDENTIFIER],m=v[c.CLIENT_ID],e;a:{if(b&&(e=b.split("-")[1])){e=e.split(".")[0].toUpperCase();break a}e="UNKNOWN"}return{searchQuery:a,
advertiserId:n,campaignId:g,metricsIdentifier:d,clientId:m,region:e,stage:v[c.STAGE]}}}function h(){function a(){var a=[];a[c.METRICS_IDENTIFIER]=n;a[c.ADVERTISER_ID]=g;a[c.CAMPAIGN_ID]=d;a[c.WIDGET_INDEX]=l;a[c.DEVICE_ENV]=k;a[c.DEVICE_OS]=q;a[c.DEVICE_TYPE]=y;a[c.DEVICE_PLATFORM_VERSION]=u;a[c.DEVICE_MODEL]=p;a[c.DEVICE_MAKE]=D;a[c.APP_VERSION]=t;a[c.STAGE]=E;a[c.SLOT_ID]=e;a[c.SEARCH_QUERY]=h;a[c.CLIENT_ID]=F;a[c.WEBLABS]=G;a[c.LANGUAGE]=H;a[c.VIDEO_PREVIEW_IMAGE_SRC]=I;a[c.VIDEO_SRC]=J;a[c.HAS_AUDIO]=
K;a[c.STORE_NAME]=L;a[c.STORE_URL]=M;a[c.STORE_CTA]=N;a[c.MARKETPLACE_ID]=O;a[c.WIDGET_TYPE]=P;a[c.WIDGET_GROUP_ID]=Q;a[c.PAGE_TYPE]=R;a[c.PAGE_NUMBER]=B;return a}var b="sbv-search-widget",n=r,g=r,d=r,e=r,h=r,l=r,k=r,q=r,y=r,u=r,p=r,D=r,t=r,E=r,F=r,G=r,H=r,I=r,J=r,K=r,L=r,M=r,N=r,O=r,S="https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",C=r,P=r,Q=r,R=r,B=r,z=r;this.withAttribution=function(a){b=a||"sbv-search-widget";return this};this.withSearchQuery=function(a){h=a;return this};
this.withMetricsIdentifier=function(a){n=a;return this};this.withAdvertiserId=function(a){g=a;return this};this.withCampaignId=function(a){d=a;return this};this.withSlotId=function(a){e=a;return this};this.withWidgetIndex=function(a){l=a;return this};this.withDeviceEnv=function(a){k=a;return this};this.withDeviceOs=function(a){q=a;return this};this.withDeviceType=function(a){y=a;return this};this.withDevicePlatformVersion=function(a){u=a;return this};this.withDeviceModel=function(a){p=a;return this};
this.withDeviceMake=function(a){D=a;return this};this.withAppVersion=function(a){t=a;return this};this.withStage=function(a){E=a;return this};this.withClientId=function(a){F=a;return this};this.withWeblabs=function(a){G=a;return this};this.withLanguage=function(a){H=a;return this};this.withVideoPreviewImageSrc=function(a){I=a;return this};this.withVideoSrc=function(a){J=a;return this};this.withHasAudio=function(a){K=a;return this};this.withStoreName=function(a){L=a;return this};this.withStoreUrl=
function(a){M=a;return this};this.withStoreCta=function(a){N=a;return this};this.withMarketplaceId=function(a){O=a;return this};this.withSushiSourceGroupEndpoint=function(a){S=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events";return this};this.withAutomatedTestMetricsClient=function(a){C=a;return this};this.withWidgetType=function(a){P=a;return this};this.withWidgetGroupId=function(a){Q=a;return this};this.withPageType=function(a){R=a;return this};this.withPageNumber=
function(a){if(a){var b=parseInt(a,10);if(!isNaN(b))return B=b,this}B=a;return this};this.build=function(){z=new f(b,S);C!==r&&z.setAutomatedTestMetricsClient(C);z.setDefaultEventAttributes(a());return z}}var d={VIEWED:"VIEWED",PROGRESS_FIVE_SECONDS:"PROGRESS_5_SEC",FIRST_QUARTILE:"FIRST_QUARTILE",MIDPOINT:"MIDPOINT",THIRD_QUARTILE:"THIRD_QUARTILE",COMPLETE:"COMPLETE",UNMUTE:"UNMUTE"},e={ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",AD_BLOCK_DETECTED:"AdBlockDetected",AD_RENDER_SUPPRESSED:"AdRenderSuppressed",
AUDIO_TOGGLE_ICON_DISPLAYED:"AudioToggleIconDisplayed",BLANK_SCREEN_LOAD_FAILURE:"BlankScreenLoadFailure",CALL_TO_ACTION_CLICKED:"CallToActionClicked",AD_FEEDBACK_KEYWORD_ENCODING_FAILURE:"AdFeedbackKeywordEncodingFailure",AD_FEEDBACK_LOAD_FAILED:"AdFeedbackLoadFailed",AD_FEEDBACK_LOAD_FAILED_FROM_ERR:"AdFeedbackLoadFailedFromErr",AD_FEEDBACK_LOAD_SUCCEEDED:"AdFeedbackLoadSucceeded",AD_FEEDBACK_POPOVER_OPENED:"AdFeedbackPopoverOpened",DEBUG_INFO_COPIED_SUCCESS:"DebugInfoCopiedSuccess",DEBUG_INFO_COPIED_FAILURE:"DebugInfoCopiedFailure",
DEBUG_INFO_COPIED_MESSAGE_SHOWN:"DebugInfoCopiedMessageShown",DEBUG_INFO_COPIED_MESSAGE_HIDDEN:"DebugInfoCopiedMessageHidden",HEADLINE_CLICKED:"HeadlineClicked",IMAGE_CLICKED:"ImageClicked",LINK_CLICKED:"LinkClicked",MISSING_VIDEO_FUNCTION:"MissingVideoFunction",NO_VIDEO_SRC_ON_ELEMENT:"NoVideoSrcOnElement",PLAY_BUTTON_CLICKED:"PlayButtonClicked",PLAY_BUTTON_SHOWN:"PlayButtonShown",PLAYBACK_COMPLETED:"PlaybackCompleted",PREVIEW_IMAGE_LOAD_FAILURE:"PreviewImageLoadFailure",PREVIEW_IMAGE_LOAD_SUCCESS:"PreviewImageLoadSuccess",
PRODUCT_CLICKED:"ProductClicked",PRODUCT_TITLE_CLICKED:"ProductTitleClicked",PRODUCT_REVIEW_COUNT_CLICKED:"ProductReviewCountClicked",PRODUCT_PRICE_CLICKED:"ProductPriceClicked",STORE_INGRESS_CLICKED:"StoreIngressClicked",TIME_TO_FIRST_FRAME:"TimeToFirstFrame",TIME_WAITING_FOR_SCRIPT_TO_EXECUTE:"TimeWaitingForScriptToExecute",TIME_WAITING_FOR_SCRIPT_TO_EXECUTE_FAILURE:"TimeWaitingForScriptToExecuteFailure",VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",
VIDEO_CLICKED:"VideoClicked",VIDEO_DOMAIN_VERIFICATION_FAILURE:"VideoDomainVerificationFailure",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_DURATION_TICKER_SHOWN:"VideoDurationTickerShown",VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_INITIATED:"VideoPausedInitiated",VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",
VIDEO_SOUND_OFF:"VideoSoundOff",VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_VIEW:"VideoView",PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_ABORTED:"VideoAborted",VIDEO_SUSPENDED:"VideoSuspended",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected",VIDEO_PLAY_PROMISE_NOT_SUPPORTED:"VideoPlayPromiseNotSupported",SLIDESHOW_WIDGET_RESPONSE_RECEIVED:"SlideshowWidgetResponseReceived",SLIDESHOW_CLICKED:"SlideshowClicked",SLIDESHOW_SWIPED:"SlideshowSwiped",SLIDESHOW_ON_SCREEN:"SlideshowOnScreen",
SLIDESHOW_OFF_SCREEN:"SlideshowOffScreen",SLIDESHOW_LOOP:"SlideshowLoop",SLIDESHOW_LOAD_COMPLETED:"SlideshowLoadCompleted",SLIDESHOW_LOAD_FAILED:"SlideshowLoadFailed",SLIDESHOW_IMAGE_LOAD_ERROR:"SlideshowImageLoadError",SLIDESHOW_IMAGE_LOAD_SUCCESS:"SlideshowImageLoadSuccess",VM_VIDEO_VIEWED:"ViewMetricsVideoViewed",VM_VIDEO_PROGRESS_FIVE_SECONDS:"ViewMetricsVideoProgressFiveSeconds",VM_VIDEO_FIRST_QUARTILE:"ViewMetricsVideoFirstQuartile",VM_VIDEO_MIDPOINT:"ViewMetricsVideoMidpoint",VM_VIDEO_THIRD_QUARTILE:"ViewMetricsVideoThirdQuartile",
VM_VIDEO_COMPLETE:"ViewMetricsVideoComplete",VM_VIDEO_UNMUTE:"ViewMetricsVideoUnmute",VM_POST_FAILURE:"ViewMetricsPostFailure"},c={APP_VERSION:"appVersion",CLIENT_ID:"clientId",SEARCH_QUERY:"searchQuery",CONTINUOUS_PLAYBACK_DURATION_MS:"continuousPlaybackDurationMs",DEVICE_MAKE:"deviceMake",DEVICE_MODEL:"deviceModel",DEVICE_ENV:"deviceEnv",DEVICE_OS:"deviceOs",DEVICE_TYPE:"deviceType",DEVICE_PLATFORM_VERSION:"devicePlatformVersion",DEBUG_INFO_CONTENT:"debugInfoContent",DROPPED_FRAMES:"droppedFrames",
ERROR_MESSAGE:"errorMessage",ERROR_CODE:"errorCode",EVENT_TYPE:"eventType",HAS_AUDIO:"hasAudio",LOAD_TIME_MS:"loadTimeMs",START_TIME_MS:"startTimeMs",END_TIME_MS:"endTimeMs",MARKETPLACE_ID:"marketplaceId",METRICS_SEQUENCE_NUMBER:"metricsSequenceNumber",METRICS_IDENTIFIER:"metricsIdentifier",ADVERTISER_ID:"advertiserId",CAMPAIGN_ID:"campaignId",NETWORK_TYPE:"networkType",PAGE_TYPE:"pageType",PAGE_NUMBER:"pageNumber",PERCENT_DOWNLOADED:"percentDownloaded",RETRY_COUNT:"retryCount",LANGUAGE:"language",
SLOT_ID:"slotId",SOUND_TOGGLE_METHOD:"soundToggleMethod",STAGE:"stage",STATUS_CODE:"statusCode",STORE_CTA:"storeCta",STORE_NAME:"storeName",STORE_URL:"storeUrl",TIME_ON_SCREEN_MS:"timeOnScreenMs",USER_AGENT:"userAgent",VIDEO_BOUNDRY_CROSSED_TIME_MS:"videoBoundaryCrossedTimeMs",VIDEO_CURRENT_TIME_MS:"videoCurrentTimeMs",VIDEO_SRC:"videoSrc",VIDEO_PREVIEW_IMAGE_SRC:"videoPreviewImageSrc",VIDEO_TOTAL_LENGTH_MS:"videoTotalLengthMs",WAS_BUFFERING:"wasBuffering",WIDGET_INDEX:"widgetIndex",WEBLABS:"weblabs",
WIDGET_TYPE:"widgetType",WIDGET_GROUP_ID:"widgetGroupId",SLIDESHOW_LOOP_COUNT:"slideshowLoopCount",SLIDESHOW_CURRENT_INDEX:"slideshowCurrentIndex",SLIDESHOW_TOTAL_SLIDES:"slideshowTotalSlides",VIEW_METRICS_FAILURE:"viewMetricsFailure"},l={n:1};return{EVENT_TYPES:e,SOUND_TOGGLE_OFF_CAUSE:{ICON_TAP:"IconTap",VIDEO_OFF_SCREEN:"VideoOffScreen"},SOUND_TOGGLE_ON_CAUSE:{ICON_TAP:"IconTap"},DEFAULT_SUSHI_SOURCE_GROUP_ENDPOINT:"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",builder:function(){return new h}}});
t.register("sbv-transportation-client",function(){var k=function(){},q=function(){function h(){if(p.XDomainRequest){var d=new p.XDomainRequest;d.onerror=k;d.ontimeout=k;d.onprogress=k;d.onload=k;d.timeout=0;return d}if(p.XMLHttpRequest){d=new p.XMLHttpRequest;if(!("withCredentials"in d))throw"";return d}return null}return{send:function(d,e){if(e&&d){var c=h();if(!c)throw"";c.open("POST",d,!0);c.setRequestHeader&&c.setRequestHeader("Content-type","text/plain");c.send(e)}},isSupported:!0}}(),f=function(){return{send:function(h,
d){if(h&&d&&!p.navigator.sendBeacon(h,d))throw"";},isSupported:!!p.navigator.sendBeacon}}();return{ajaxClient:q,beaconClient:f}});t.when("sbv-transportation-client","sbv-event-manager").register("sbv-sushi-client",function(k,q){function f(d,e,c,f){this.endpoint=c;this.window=e;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=
1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=k;var a=this;this.compressor=function(a){function b(g){if(g)switch(typeof g){case "number":return!(isNaN(g)||Infinity===g)&&g.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return g.length>a.dictionaryIndex.length;default:return!0}return!1}function c(b){a.eventsDictionary[b]="#"+a.dictionaryIndex++;a.reverseEventsDictionary[a.eventsDictionary[b]]=b;return a.eventsDictionary[b]}function d(e){if(b(e)){var f=
0;e instanceof Array?f=2:e instanceof Function?f=null:e instanceof Object&&(f=1);switch(f){case 0:return a.eventsDictionary[e]?a.eventsDictionary[e]:c(e);case 2:for(var l=[],f=0;f<e.length;f++)l[f]=d(e[f]);return l;case 1:f={};for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(f[a.eventsDictionary[l]?a.eventsDictionary[l]:c(l)]=-1===h.indexOf(l)?d(e[l]):e[l]);return f}}return e}return{compressData:d,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this);
this.onBeforeUnload=function(){!0!==a.unloadHandlerCalled&&(a.flush(a,!0),a.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){}return null};this.resetBatch=function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0};this.sendWithClient=function(a){if(null==this.endpoint||""===this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=
this.compressor.buildPOSTObject();return a.send(this.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{return this.sendWithClient(b)}catch(c){}}return null};this.flush=function(a,b){a.eventsQueue.length&&(b||!1!==a.window.navigator.onLine)&&(b=a.eventsQueue.length,a.sendWithPriority(a.transportationClient.beaconClient,a.transportationClient.ajaxClient),a.resetBatch(),a.ueCount("EventsSent",b))};this.startHighPriorityQueueTimer=function(){0===
this.highPriorityFlushInterval?this.flush(this,!1):this.highPriorityTimer||(this.highPriorityTimer=setTimeout(this.flush,this.highPriorityFlushInterval,this,!1))};this.startLowPriorityQueueTimer=function(){this.lowPriorityTimer||(this.lowPriorityTimer=setTimeout(this.flush,this.lowPriorityFlushInterval,this,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+this.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()};
this.encodeEvent=function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this,!0);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)};this.addEvent=function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){this.eventSequence++;1E3<this.eventSequence&&
this.ueCount("SushiClientMaxCallsReached");return 1E3<this.eventSequence};this.isValidAPICall=function(a){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")};this.ueCount=function(a,b){if("undefined"!==typeof ue&&ue&&ue.count)return b=0===b?0:b||(ue.count(f+":"+a)||0)+1,ue.count(f+":"+a,b),b};this.processEvent=function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess"):this.ueCount("ClientEventsFailed");
return c};q.addEventListener(d,p,"beforeunload",100,this.onBeforeUnload);q.addEventListener(d,document,"visibilitychange",100,this.onBeforeUnload);q.addEventListener(d,p,"blur",100,this.onBeforeUnload);q.addEventListener(d,p,"pagehide",100,this.onBeforeUnload);p.app||(p.app={});var b=p.app.willDisappear;p.app.willDisappear=function(){b&&b();a.onBeforeUnload()}}var h=["messageId","timestamp"];return{newClient:function(d,e,c,h){return new f(d,e,c,h)}}});t.when("A").register("sbv-automated-test-metrics-client",
function(k){function q(f){this.videoSingleProduct=f;this.processEvent=function(f){var d=this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR");d===r&&(d=[]);d.push(f);this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR",d)}}return{newClient:function(f){return new q(f)}}});t.when("A").register("sbv-platform-compatibility",function(k){function q(){return k.capabilities.isAmazonApp&&k.capabilities.ios}var f=null,h=navigator;return{isIOS:function(){return k.capabilities.ios},isIOSWebView:q,
canUseViewWillDisappearToReportMetrics:function(){if(!q()||!f)return!1;var d=f.split(".");if(2>d.length)return!1;var e=parseInt(d[0]),d=parseInt(d[1]);return 13<e||13===e&&18<=d},setAppVersion:function(d){f=d},isSafari:function(){return!(!h.vendor||!h.vendor.match(/apple/i))},isWebView:function(){return k.capabilities.isAmazonApp},_setNavigator:function(d){h=d}}});t.when("A").register("sbv-single-product",function(k){function q(){this.init=function(f,h,d){k.$(f).find("a:not(.sbv-store-ingress-link)").click(function(){var c=
d&&d.getVideoCurrentTimeMs&&d.getVideoCurrentTimeMs();h.reportProductClicked(c)});var e=k.$(f).find(".sbv-product-img");e.data("imgsrc")&&e.attr("src",e.data("imgsrc"));e=k.$(f).find(".faceout-product-title");k.$(e).find("a").click(function(){h.reportProductTitleClicked()});e=k.$(f).find(".faceout-product-review");k.$(e).find("a").click(function(){h.reportProductReviewCountClicked()});f=k.$(f).find(".faceout-product-price");k.$(f).find("a").click(function(){h.reportProductPriceClicked()})}}return{loadAdFeedback:function(f){try{var h=
document.querySelector(".sbv-ad-feedback"),d=k.$(".sbv-sponsored-label");if(h){var e=k.$(h).attr("data-cid"),c=k.$(h).attr("data-aid"),l=k.$(h).data("slotname"),a=k.$(h).data("searchkeywords");"true"===k.$(h).data("keywordEncodingFailed")&&f.reportAdFeedbackKeywordEncodingFailure();var b=JSON.stringify({adPlacementMetaData:{adElementId:"video_single_product",pageType:"Search",slotName:l,pageUrl:"",searchTerms:a},adCreativeMetaData:{adNetwork:"aax",adProgramId:1010,adImpressionId:"",adCreativeId:e,
adId:c}}),n=p.location.protocol+"//"+p.location.hostname+"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html?pl\x3d"+encodeURIComponent(b),g=new XMLHttpRequest;g.onreadystatechange=function(){if(4===g.readyState&&200===g.status){var a=JSON.parse(g.responseText);if(a&&"ok"===a.status){"html"in a&&a.html&&(h.innerHTML=a.html,f.reportAdFeedbackLoadSucceeded(g.status));if("script"in a&&a.script){var b=document.createElement("script");b.type="text/javascript";b.innerHTML=a.script;h.appendChild(b)}k.$(".sbv-ad-feedback a").click(function(){f.reportAdFeedbackPopoverOpened()})}else d.removeClass("aok-hidden"),
f.reportAdFeedbackLoadFailed(g.status)}};g.open("GET",n,!0);g.send()}}catch(m){k.$(".sbv-sponsored-label").removeClass("aok-hidden"),e=4E3<m.message.length?m.message.substring(0,3997)+"...":m.message,f.reportAdFeedbackLoadFailedFromErr(e)}},initialize:function(f,h,d){(new q).init(f,h,d);this.loadAdFeedback(h)}}});t.when("A").register("sbv-store-ingress",function(k){function q(){this.init=function(f,h,d){k.$(f).find("a").click(function(){h.reportStoreIngressClicked(d&&d.getVideoCurrentTimeMs())})}}
return{initialize:function(f,h,d){(new q).init(f,h,d)}}});t.register("sbv-retryable",function(){return function(k,q,f,h){function d(){0<l?(l--,e()):(a.cancel(),c())}var e=k,c=h,l=q,a=this;this._init=function(){e();this._intervalID=setInterval(d,f)};this.cancel=function(){clearInterval(this._intervalID)};this._init()}});t.when("A","sbv-video-mixin").register("sbv-video",function(k,q){var f=function(){this.metricsManager=this.$muteClickRegion=this.$unmuteIcon=this.$muteIcon=this.videoPlayer=null;this.onScreenStartTime=
0;this.videoTag=null};k.mixin(f.prototype,q);return{initialize:function(h,d,e,c){var l=new f;l.init(h,d,e,c,!0);return l}}});t.when("A","sbv-viewability-manager","sbv-metrics-manager","sbv-video-player-builder","sbv-platform-compatibility","3p-promise","sbv-adblock-detector").register("sbv-video-mixin",function(k,q,f,h,d,e,c){var l=0,a={isViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isSecondQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};return{load:function(){this.videoPlayer.load()},
toggleAudio:function(){var a=!this.videoPlayer.isMuted();this.setMuteStatus(a,a?f.SOUND_TOGGLE_OFF_CAUSE.ICON_TAP:f.SOUND_TOGGLE_ON_CAUSE.ICON_TAP)},updateMuteClickRegionAriaPressed:function(){var a="true"===this.$muteClickRegion.attr("aria-pressed");this.$muteClickRegion.attr("aria-pressed",!a)},setMuteButtonStatus:function(a){var c=this.$muteIcon,g=this.$unmuteIcon;a?(c.css("fill-opacity",1),g.css("fill-opacity",0)):(c.css("fill-opacity",0),g.css("fill-opacity",1))},setMuteStatus:function(a,c){var g=
this.videoPlayer,d=this.metricsManager;this.setMuteButtonStatus(a);a?(g.mute(),d&&d.reportVideoSoundOff(g.getCurrentTimeMs(),c)):(g.unmute(),d&&d.reportVideoSoundOn(g.getCurrentTimeMs(),c))},initPreviewImage:function(){var a=this.videoTag.dataset.videopreviewsrc;this.videoTag.getAttribute("poster")!==a&&this.videoTag.setAttribute("poster",a)},displayMuteClickRegion:function(a){a?(this.$muteClickRegion.addClass("aok-block"),this.$muteClickRegion.removeClass("aok-hidden"),this.metricsManager.reportAudioToggleIconDisplayed()):
(this.$muteClickRegion.addClass("aok-hidden"),this.$muteClickRegion.removeClass("aok-block"))},displayDurationTicker:function(a){this.$durationTicker&&this.$durationTicker.length&&(a?(this.$durationTicker.removeClass("aok-hidden"),this.metricsManager.reportDurationTickerDisplayed()):this.$durationTicker.addClass("aok-hidden"))},showPlayButton:function(a){var c=this.attribution;a?(this.$playButtonClickRegion.removeClass("aok-hidden"),this.metricsManager.reportPlayButtonShown()):(this.$playButtonClickRegion.addClass("aok-hidden"),
q.registerElement(c,this.videoTag,.5,!0,!0,!0,this.onFiftyPercentViewability.bind(this)),q.registerElement(c,this.videoTag,.01,!0,!0,!0,this.onOnePercentViewability.bind(this)))},showDebugInfoCopiedHint:function(a){a?(this.$debugInfoCopiedHint.addClass("aok-block"),this.$debugInfoCopiedHint.removeClass("aok-hidden"),this.metricsManager.reportDebugInfoCopiedMessageShown()):(this.$debugInfoCopiedHint.addClass("aok-hidden"),this.$debugInfoCopiedHint.removeClass("aok-block"),this.metricsManager.reportDebugInfoCopiedMessageHidden())},
copyDebugInfoToClipboard:function(){var a=this,c=this.metricsManager;if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){var g=JSON.stringify(this.metricsManager.getDebugMetricAttributes());navigator.clipboard.writeText(g).then(function(){c.reportDebugInfoCopiedSuccess(g);a.showDebugInfoCopiedHint(!0);setTimeout(function(){a.showDebugInfoCopiedHint(!1)},3E3)}).catch(function(a){c.reportDebugInfoCopiedFailure(a.message)})}else c.reportDebugInfoCopiedFailure("No Supports Clipboard API")},
manualPlay:function(){var a=this.videoPlayer,c=this.metricsManager;this.showPlayButton(!1);a.play();c.reportPlayButtonClicked(a.getCurrentTimeMs());c.reportVideoPlaybackInitiated(a.getCurrentTimeMs())},onOnePercentViewability:function(a,c){a=this.videoPlayer;var g=this.metricsManager;c?(this.onScreenStartTime=this.getCurrentTimeMs(),g.reportVideoOnScreen(a.getPercentDownloaded())):(a.isMuted()||this.setMuteStatus(!0,f.SOUND_TOGGLE_OFF_CAUSE.VIDEO_OFF_SCREEN),c=this.getCurrentTimeMs()-this.onScreenStartTime,
g.reportVideoOffScreen(c,0!=this.videoBufferingStartTime,a.getCurrentTimeMs()),this.onScreenStartTime=0,a.seekToStart(),a.resetContinuousPlaybackDurationMs())},onFiftyPercentViewability:function(a,c){a=this.videoPlayer;var g=this.metricsManager;c?(a.play(),a.resetContinuousPlaybackDurationMs(),g.reportVideoPlaybackInitiated(a.getCurrentTimeMs()),this.viewSessionStartTime=this.getCurrentTimeMs()):(a.pause(),g.reportVideoPauseInitiated(a.getCurrentTimeMs()),g.reportVideoView(a.getContinuousPlaybackDurationMs(),
d.isIOSWebView()),a.resetContinuousPlaybackDurationMs(),this.viewSessionBufferingDuration=0)},onVideoReadyForPlayback:function(a,c,g,d,e,f){this.metricsManager.reportVideoReadyForPlayback(a,c,g,d,e,f);this.onDurationLeftUpdated(0,d)},onVideoPlaybackFailure:function(a,c,g){this.displayMuteClickRegion(!1);this.displayDurationTicker(!1);this.metricsManager.reportVideoPlaybackFailure(a,g,c)},onVideoPlaying:function(a,c,g){this.displayMuteClickRegion(!0);this.displayDurationTicker(!0);this.metricsManager.reportVideoPlaybackStarted(a,
c,g)},onVideoPlaybackPaused:function(a,c,g){this.displayMuteClickRegion(!1);this.displayDurationTicker(!1);this.metricsManager.reportVideoPaused(a,c,g)},onVideoBufferingStarted:function(a,c,g){var d=this.metricsManager;this.videoBufferingStartTime=this.getCurrentTimeMs();d.reportVideoBufferingStarted(a,c,g)},getCurrentTimeMs:function(){return Date.now()},onVideoBufferingEnded:function(a,c,g){var d=this.metricsManager;this.videoBufferingStartTime=0;d.reportVideoBufferingEnded(a,c,g)},onTimeToFirstFrame:function(a,
c,d,e,f){this.metricsManager.reportTimeToFirstFrame(a,c,d,e,f)},onPlaybackCompleted:function(b,c,d){this.metricsManager.reportPlaybackCompleted(b,c);a.isCompleteLogged||(a.isCompleteLogged=!0,this.metricsManager.reportViewMetricsVideoComplete(d))},onDurationPlayed:function(a,c,d){this.metricsManager.reportVideoDurationPlayed(a,c,d)},onContinuousDurationPlayed:function(a){this.metricsManager.reportVideoView(a,!0)},logClick:function(){var a=this.videoPlayer,c=this.metricsManager;c&&c.reportVideoClicked(a.getCurrentTimeMs())},
getVideoCurrentTimeMs:function(){return this.videoPlayer.getCurrentTimeMs()},onVideoAborted:function(a){var c=this.metricsManager;c&&c.reportVideoAborted(a)},onVideoSuspended:function(a){var c=this.metricsManager;c&&c.reportVideoSuspended(a)},onDurationLeftUpdated:function(a,c){this.$durationTickerSeconds&&this.$durationTickerSeconds.length&&(a=("0"+Math.floor((c-a)/1E3)).slice(-2),!isNaN(a)&&isFinite(a)&&this.$durationTickerSeconds.html(a))},onVideoUnmute:function(b){a.isUnmuteLogged||(a.isUnmuteLogged=
!0,this.metricsManager.reportViewMetricsVideoUnmute(b))},onVideoViewMetricsEvent:function(b,c,d){!a.isViewedLogged&&2E3<=b&&(a.isViewedLogged=!0,this.metricsManager.reportViewMetricsVideoViewed(d));!a.isProgressFiveSecondsLogged&&5E3<=b&&(a.isProgressFiveSecondsLogged=!0,this.metricsManager.reportViewMetricsVideoProgressFiveSeconds(d));!a.isFirstQuartileLogged&&b>=.25*c&&(a.isFirstQuartileLogged=!0,this.metricsManager.reportViewMetricsVideoFirstQuartile(d));!a.isMidpointLogged&&b>=.5*c&&(a.isMidpointLogged=
!0,this.metricsManager.reportViewMetricsVideoMidpoint(d));!a.isThirdQuartileLogged&&b>=.75*c&&(a.isThirdQuartileLogged=!0,this.metricsManager.reportViewMetricsVideoThirdQuartile(d))},onVideoPlayPromiseRejected:function(a){var c=this.metricsManager;d.isIOS()&&null!==a&&""!==a&&a.startsWith("NotAllowedError")&&this.showPlayButton(!0);c&&c.reportVideoPlayPromiseRejected(a)},onVideoPlayPromiseNotSupported:function(){var a=this.metricsManager;a&&a.reportVideoPlayPromiseNotSupported()},init:function(b,
e,g,f,p){function t(a,b,c){u.onDurationPlayed(a,b,c)}function v(a){u.onContinuousDurationPlayed(a)}function w(a,b){u.onOnePercentViewability(a,b)}function x(a,b){u.onFiftyPercentViewability(a,b)}function y(){u.load();q.registerElement(b,u.videoTag,.5,!0,!0,!0,x);q.registerElement(b,u.videoTag,.01,!0,!0,!0,w)}e=k.$(e);this.videoTag=e.find("video:first").get(0);var u=this;u.attribution=b;u.metricsManager=g;a={isViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,
isSecondQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};if(!p||this.videoTag!==r&&null!==this.videoTag&&this.videoTag.load!==r&&null!==this.videoTag.load){u.initPreviewImage();p=h.builder(this.videoTag).withVideoReadyForPlaybackHandler(function(a,b,c,d,e,g){u.onVideoReadyForPlayback(a,b,c,d,e,g)}).withTimeToFirstFrameHandler(function(a,b,c,d,e){u.onTimeToFirstFrame(a,b,c,d,e)}).withVideoPlaybackFailureHandler(function(a,b,c){u.onVideoPlaybackFailure(a,b,c)}).withVideoPlayingHandler(function(a,
b,c){u.onVideoPlaying(a,b,c)}).withVideoPlaybackPausedHandler(function(a,b,c){u.onVideoPlaybackPaused(a,b,c)}).withPlaybackCompletedHandler(function(a,b){u.onPlaybackCompleted(a,b,f)}).withVideoBufferingStartedHandler(function(a,b,c){u.onVideoBufferingStarted(a,b,c)}).withVideoBufferingEndedHandler(function(a,b,c){u.onVideoBufferingEnded(a,b,c)}).withVideoPlayedToBoundaryHandler(2E3,t).withVideoPlayedToBoundaryHandler(15E3,t).withVideoPlaybackFailedAfterPlayErrorCallback(function(){g.reportPlaybackFailedToStartAfterPlay()}).withVideoAbortedHandler(function(a){u.onVideoAborted(a)}).withVideoSuspendedHandler(function(a){u.onVideoSuspended(a)}).withTimeUpdateHandler(function(a,
b){u.onDurationLeftUpdated(a,b);u.onVideoViewMetricsEvent(a,b,f)}).withVideoPlayPromiseRejectedHandler(function(a){u.onVideoPlayPromiseRejected(a)}).withVideoPlayPromiseNotSupportedHandler(function(){u.onVideoPlayPromiseNotSupported()});d.isIOSWebView()&&!d.canUseViewWillDisappearToReportMetrics()&&(p=p.withVideoPlayedToContinuousBoundaryHandler(2E3,v));var A=p.build();u.videoPlayer=A;e.find("a").click(function(){u.logClick()});p=e.find('[data-itemid\x3d"sbv-video-mute-click-region"]');u.$muteClickRegion=
p;u.$muteIcon=e.find('[data-itemid\x3d"sbv-video-mute-icon"]');u.$unmuteIcon=e.find('[data-itemid\x3d"sbv-video-unmute-icon"]');u.setMuteButtonStatus(A.isMuted());p.click(function(){u.updateMuteClickRegionAriaPressed();u.toggleAudio();u.$debugInfoCopiedHint&&u.$debugInfoCopiedHint.length&&(l+=1,5===l&&(u.copyDebugInfoToClipboard(),l=0));if(!A.isMuted())u.onVideoUnmute(f)});p.keydown(function(a){if(" "===a.key||"Enter"===a.key||"Spacebar"===a.key)a.preventDefault(),u.updateMuteClickRegionAriaPressed(),
u.toggleAudio()});p=e.find(".sbv-duration-ticker-seconds");u.$durationTickerSeconds=p;p=e.find(".sbv-duration-ticker-container");u.$durationTicker=p;p=e.find('[data-itemid\x3d"sbv-video-play-click-region"]');u.$playButtonClickRegion=p;p.click(function(){u.manualPlay()});e=e.find(".sbv-video-debug-info-copied-message-container");u.$debugInfoCopiedHint=e;(e=c.init())?e.then(function(){navigator.onLine&&(u.load(),u.showPlayButton(!0),g.reportAdBlockDetected())}).catch(function(){y()}):y()}else g.reportMissingVideoFunction(this.videoTag===
r||null===this.videoTag?"videoTag is undefined":this.videoTag.outerHTML?this.videoTag.outerHTML:"load function is undefined and outerHTML is not supported")}}});t.when("A","sbv-slideshow-mixin").register("sbv-slideshow",function(k,q){var f=function(){this.metricsManager=this.carousel=r;this.numOfSlides=this.currentSlideIndex=0};k.mixin(f.prototype,q);return{initialize:function(h,d){var e=new f;e.init(h,d);d.reportSlideshowLoadCompleted(e.numOfSlides);return e}}});t.when("A","a-carousel-framework",
"sbv-viewability-manager","sbv-metrics-manager").register("sbv-slideshow-mixin",function(k,q,f,h){var d=0,e=0,c=0,l=this,a=function(a,c){l.carousel===r?l.metricsManager.reportSlideshowLoadFailed(l.numOfSlides,"slideshow.carousel is undefined"):c?(e=k.interval(function(){d+=1},1),l.metricsManager.reportSlideshowOnScreen(l.numOfSlides),b(!0)):(l.status="IDLE",l.metricsManager.reportSlideshowOffScreen(l.numOfSlides,d),clearInterval(e),d=0,b(!1))},b=function(a){a&&l.autoRotate===r?l.autoRotate=k.interval(function(){l.status=
"AUTO_PLAYING";l.carousel.gotoNextPage({accessibleSafe:!0})},2500):(c=0,l.autoRotate!==r&&(clearInterval(l.autoRotate),l.autoRotate=r))};return{onFiftyPercentViewability:a,autoPlay:b,init:function(d,e){var h=k.$(d),p=h.get(0);l=this;l.metricsManager=e;q.onInit("sbv-slideshow-carousel",function(d){l.carousel=d;l.numOfSlides=l.carousel.getAttr("totalPages");l.status="IDLE";d=l.carousel.dom.$viewport;k.on("a:pan-horizontal:"+d[0].id,function(a){l.status="SWIPING";b(!1);a.ended&&b(!0)});d.bind(k.action.end,
function(a){"SWIPING"===l.status&&l.metricsManager.reportSlideshowSwiped(l.numOfSlides);b(!0)});h.find("a").click(function(){l.metricsManager.reportSlideshowClicked(l.numOfSlides,l.currentSlideIndex)});k.on("a:carousel:sbv-slideshow-carousel:change:pageNumber",function(a){var b=a.newValue-1;l.currentSlideIndex=b;var d=a.oldValue-1;0===b&&d===l.numOfSlides-1&&(c+=1,l.metricsManager.reportSlideshowLoop(l.numOfSlides,c));k.$(".sbv-slideshow-pagination-container").each(function(){k.$(this).children("ul").children("li:eq("+
d+")").removeClass("a-selected");k.$(this).children("ul").children("li:eq("+b+")").addClass("a-selected")})});f.registerElement(p,.5,!0,!0,!0,a)});return this}}});"use strict";t.when("sbv-retryable","sbv-platform-compatibility").register("sbv-video-player-builder",function(k,p){function f(d){var a=this,b=0,e=0;this._videoElement=d;this._onVideoBufferingEnded=this._onVideoBufferingStarted=this._onPlaybackCompleted=this._onPlaybackPaused=this._onVideoPlaying=this._onVideoPlaybackFailure=this._onTimeToFirstFrame=
this._onVideoReadyForPlayback=r;this._lastOnTimeUpdateCurrentTimeMs=0;this._boundaryChecks=[];this._continuousDurationBoundaryChecks=[];this._retryable=null;this._registerEventListeners=function(){var d=a._videoElement;d.oncanplay=function(){return a._handleVideoReadyForPlaybackEvent()};d.onerror=function(){!a._assetLoaded&&3>a._retryLoadCount?(a._retryLoadCount++,setTimeout(a._videoElement.load.bind(a._videoElement),2E3)):a._handleVideoPlaybackFailureEvent()};d.onplaying=function(){a._handleFirstFramePlayedEvent();
a._playbackstate===c.BUFFERING&&a._onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate!==c.END&&a._onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate=c.PLAYING};d.onpause=function(){a._videoElement.currentTime!==a._videoElement.duration&&(a._playbackstate=c.PAUSED,a._onPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};d.onended=function(){a._playbackstate=c.END;
var d=a.getDurationMs();e+=d-b;b=0;a._onPlaybackCompleted(a.getDurationMs(),a.getDroppedFrames());a._playInternal()};d.onwaiting=function(){a._playbackstate=c.BUFFERING;a._onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};d.ontimeupdate=function(){a.cancelPlayRetryable();var b=a.getCurrentTimeMs(),c=a.getDurationMs(),d=a.getContinuousPlaybackDurationMs();a._continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(d)});a._boundaryChecks.forEach(function(c){c.reportIfBoundaryCrossed(a._lastOnTimeUpdateCurrentTimeMs,
b,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});a._lastOnTimeUpdateCurrentTimeMs=b;a._onTimeUpdated(b,c)};d.onabort=function(){var b=a.getCurrentTimeMs();a._onAborted(b)};d.onsuspend=function(){var b=a.getCurrentTimeMs();a._onSuspended(b)}};this._getDateTime=function(){return(new Date).getTime()};this._playInternal=function(){a._initiatedPlayTime||(a._initiatedPlayTime=a._getDateTime());var b=a._videoElement.play();b?b.catch(function(b){var c="Unknown";"string"===typeof b?c=b:
b instanceof DOMException&&(c=b.name+": "+b.message);a._onVideoPlayPromiseRejected(c)}):a._onVideoPlayPromiseNotSupported()};this.cancelPlayRetryable=function(){a._retryable&&(a._retryable.cancel(),a._retryable=null)};this._init=function(){a._playbackstate=c.INITIATED;a._loadStartTime=a._getDateTime();a._assetLoaded=!1;a._retryLoadCount=0;a._firstFramePlayed=!1;a._initiatedPlayTime=r};this._init();this._registerEventListeners();this._handleVideoReadyForPlaybackEvent=function(){if(!a._assetLoaded){var b=
a._loadStartTime,c=a._getDateTime();a._onVideoReadyForPlayback(c-b,a._retryLoadCount,a.getPercentDownloaded(),a.getDurationMs(),b,c);a._assetLoaded=!0}};this._handleFirstFramePlayedEvent=function(){if(!a._firstFramePlayed){var b=a._initiatedPlayTime,c=a._getDateTime();a._onTimeToFirstFrame(c-b,a.getPercentDownloaded(),a.getDroppedFrames(),b,c);a._firstFramePlayed=!0}};this._handleVideoPlaybackFailureEvent=function(){var b=a._videoElement;if(b.error){var c="UNKNOWN";if(b.error.code)switch(b.error.code){case 1:c=
"MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c=b.error.code.toString()}a._onVideoPlaybackFailure(a.getCurrentTimeMs(),c,b.error.message)}};this.addVideoReadyForPlaybackListener=function(b){a._onVideoReadyForPlayback=b;4==a._videoElement.readyState&&(a._onVideoReadyForPlayback(0,0,a.getPercentDownloaded(),a.getDurationMs(),0,0),a._assetLoaded=!0)};this.addVideoPlaybackFailureListener=function(b){a._onVideoPlaybackFailure=
b;if(a._videoElement.error&&a._videoElement.error.code)a._videoElement.onerror()};this.play=function(){p.isIOS()?(a._retryable&&a.cancelPlayRetryable(),a._retryable=new k(a._playInternal,10,200,function(){a._assetLoaded&&null!=a._playbackFailedAfterPlayErrorCallback&&a._playbackFailedAfterPlayErrorCallback()})):a._playInternal()};this.pause=function(){a.cancelPlayRetryable();a._videoElement.pause()};this.seekToStart=function(){var c=a.getCurrentTimeMs();e+=c-b;b=0;a._lastOnTimeUpdateCurrentTimeMs=
0;a._videoElement.currentTime=0};this.mute=function(){a._videoElement.muted=!0};this.unmute=function(){a._videoElement.muted=!1};this.isMuted=function(){return a._videoElement.muted};this.getCurrentTimeMs=function(){return Math.round(1E3*a._videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a._videoElement.duration)};this.getDroppedFrames=function(){return a._videoElement.getVideoPlaybackQuality?a._videoElement.getVideoPlaybackQuality().droppedVideoFrames:a._videoElement.webkitDroppedFrameCount!=
r?a._videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return e+(a.getCurrentTimeMs()-b)};this.resetContinuousPlaybackDurationMs=function(){var c=a.getCurrentTimeMs();e=0;b=c===a.getDurationMs()?0:c;a._continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var b=a._videoElement.buffered,c=0;if(b){for(var d=0;d<b.length;d++)c+=b.end(d)-b.start(d);return c/a._videoElement.duration}return 0};this.load=function(){a._videoElement.load()}}
function h(c,a){this.reportIfBoundaryCrossed=function(b,d,e,f,h){!isNaN(c)&&0<=c&&c<=e&&(b<=d?c>b&&c<=d&&a(c,f,h):(0<c&&c<=d||c>b&&c<=e)&&a(c,f,h))}}function d(c,a){var b=!1;this.resetReported=function(){b=!1};this.reportIfBoundaryCrossed=function(d){var e;if(e=!b)e=!isNaN(c)&&0<=c&&c<d;e&&(b=!0,a(d))}}function e(c){var a=this;this._videoPlayer=new f(c);this.withVideoReadyForPlaybackHandler=function(b){a._videoPlayer.addVideoReadyForPlaybackListener(b);return a};this.withTimeToFirstFrameHandler=function(b){a._videoPlayer._onTimeToFirstFrame=
b;return a};this.withVideoPlaybackFailureHandler=function(b){a._videoPlayer.addVideoPlaybackFailureListener(b);return a};this.withVideoPlayingHandler=function(b){a._videoPlayer._onVideoPlaying=b;return a};this.withVideoPlaybackPausedHandler=function(b){a._videoPlayer._onPlaybackPaused=b;return a};this.withPlaybackCompletedHandler=function(b){a._videoPlayer._onPlaybackCompleted=b;return a};this.withVideoBufferingStartedHandler=function(b){a._videoPlayer._onVideoBufferingStarted=b;return a};this.withVideoBufferingEndedHandler=
function(b){a._videoPlayer._onVideoBufferingEnded=b;return a};this.withVideoPlayedToBoundaryHandler=function(b,c){a._videoPlayer._boundaryChecks.push(new h(b,c));return a};this.withVideoPlayedToContinuousBoundaryHandler=function(b,c){a._videoPlayer._continuousDurationBoundaryChecks.push(new d(b,c));return a};this.withVideoPlaybackFailedAfterPlayErrorCallback=function(b){a._videoPlayer._playbackFailedAfterPlayErrorCallback=b;return a};this.withVideoAbortedHandler=function(b){a._videoPlayer._onAborted=
b;return a};this.withVideoSuspendedHandler=function(b){a._videoPlayer._onSuspended=b;return a};this.withTimeUpdateHandler=function(b){a._videoPlayer._onTimeUpdated=b;return a};this.withVideoPlayPromiseRejectedHandler=function(b){a._videoPlayer._onVideoPlayPromiseRejected=b;return a};this.withVideoPlayPromiseNotSupportedHandler=function(b){a._videoPlayer._onVideoPlayPromiseNotSupported=b;return a};this.build=function(){var b=a._videoPlayer;if(b._onVideoReadyForPlayback&&b._onTimeToFirstFrame&&b._onVideoPlaybackFailure&&
b._onVideoPlaying&&b._onPlaybackPaused&&b._onPlaybackCompleted&&b._onVideoBufferingStarted&&b._onVideoBufferingEnded&&b._onAborted&&b._onSuspended&&b._onTimeUpdated&&b._onVideoPlayPromiseRejected&&b._onVideoPlayPromiseNotSupported)return a._videoPlayer;throw Error("Need implements all event listeners");}}var c={PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",INITIATED:"initiated",END:"ended"};return{builder:function(c){return new e(c)}}});t.register("sbv-event-manager",function(){function k(f){var d=
0,e;for(e in f)d++;return d}function p(h,d,e){return function(c){f[d]&&f[d][e]&&f[d][e].listeners.forEach(function(d){if(d.callback)try{d.callback(c)}catch(a){t.log(a&&a.message||"Unknown error in callback.","ERROR",h),ue&&ue.count&&ue.count("sbv-js-errors",(ue.count("sbv-js-errors")||0)+1)}})}}var f={};return{addEventListener:function(h,d,e,c,k){f[d]||(f[d]={});f[d][e]||(f[d][e]={listeners:[],generatedCallback:p(h,d,e)},d.addEventListener(e,f[d][e].generatedCallback));f[d][e].listeners.push({priority:c,
callback:k});f[d][e].listeners.sort(function(a,b){return a.priority-b.priority})},removeEventListener:function(h,d,e,c){f[h]&&f[h][d]&&(f[h][d].listeners=f[h][d].listeners.filter(function(d){return d.priority!==e||d.callback!==c}),0===f[h][d].listeners.length&&(h.removeEventListener(d,f[h][d].generatedCallback),delete f[h][d],k(f[h])&&delete f[h]))}}});"use strict";t.when("A","amzn-safe-frame-viewability","sbv-platform-compatibility","sbv-event-manager").register("sbv-viewability-manager",function(k,
q,f,h){function d(a,b){a.isInView=b;a.callback(a.ratio,b);a.recurring||m(a.element,a.ratio,a.dispatchOnElementInView,a.dispatchOnElementOutOfView,a.recurring)}function e(a,b){a.dispatchOnElementInView&&b>=a.ratio&&!a.isInView&&d(a,!0);a.dispatchOnElementOutOfView&&b<a.ratio&&a.isInView&&d(a,!1)}function c(a){e(a,0)}function l(a){var b=q.geom(a.element);e(a,b&&b.self&&b.self.iv||0)}function a(){t.forEach(c)}function b(){t.forEach(l)}function n(){document.hidden?a():setTimeout(b,50)}function g(){a();
b()}function m(c,d,e,l,m){var q=t.length;t=t.filter(function(a){return!(a.element===c&&a.ratio===d&&a.dispatchOnElementInView===e&&a.dispatchOnElementOutOfView===l&&a.recurring===m)});0===t.length&&(k.off("afterReady",v),k.off(k.constants.BROWSER_EVENTS.SCROLL,v),k.off(k.constants.BROWSER_EVENTS.RESIZE,v),k.off(k.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,v),h.removeEventListener(document,"visibilitychange",1,n),h.removeEventListener(p,"beforeunload",1,a),f.isWebView()||(h.removeEventListener(p,
"focus",1,b),h.removeEventListener(p,"blur",1,a)),f.isSafari()&&!f.isWebView()&&(h.removeEventListener(p,"pagehide",1,a),h.removeEventListener(p,"pageshow",1,b),h.removeEventListener(p,"popstate",1,g)));return q!==t.length}function r(){f.canUseViewWillDisappearToReportMetrics()&&!x&&(x=!0,p.app||(p.app={}),w=p.app.willDisappear,p.app.willDisappear=function(){a();w&&w()})}var t=[],v,w,x=!1;v=k.throttle(function(){t.forEach(l)},50);return{registerElement:function(c,d,e,m,q,w,x){d={element:d,ratio:e,
dispatchOnElementInView:m,dispatchOnElementOutOfView:q,recurring:w,callback:x};0===t.length&&(k.on("afterReady",v),k.on(k.constants.BROWSER_EVENTS.SCROLL,v),k.on(k.constants.BROWSER_EVENTS.RESIZE,v),k.on(k.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,v),h.addEventListener(c,document,"visibilitychange",1,n),f.isWebView()||(h.addEventListener(c,p,"focus",1,b),h.addEventListener(c,p,"blur",1,a)),f.isSafari()&&!f.isWebView()&&(h.addEventListener(c,p,"pagehide",1,a),h.addEventListener(c,p,"pageshow",1,
b),h.addEventListener(c,p,"popstate",1,g)),r());t.push(d);l(d);return d},deregisterElement:m,_handleRatioInViewChange:e,_onBrowserVisibilityChange:n}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,k=c._namespace||c.attributeErrors,a=k?k("SearchQuestionAnswerWidgetAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,k){b.when("A","ready").execute("aspa-partial-collapse-expander",function(a){a.on("a:expander:qna_answer_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-partial-collapse-header").addClass("aok-hidden");a.expander.$expander.find(".a-expander-partial-collapse-content").addClass("aspa-padding-none")});
a.on("a:expander:qna_question_expander:toggle:expand",function(c){var f=c.expander.$expander.find(".s-line-clamp-2");f.addClass("aok-block").removeClass("aok-inline-block");a.delay(function(){f.addClass("aok-inline-block").removeClass("aok-block")},0);b.when("a-expander").execute("aspa-question-expander",function(a){a.initializeExpanders()})})});"use strict";b.when("jQuery","rush-framework","a-button").register("aspa-voting-component",function(a,b,f){function k(a,h){for(var d=0;d<a.length;++d)if(a[d].name===
h)return a[d].value;return null}function z(c){var h={};a.map(c,function(a){h[a.name]=a.value});return h}function m(b){function h(){n.addClass("aok-hidden");p.addClass("aok-hidden");r.removeClass("aok-hidden")}function d(){t.removeClass("aok-hidden")}function f(a){401===a.status?(l.unbind("submit"),l.submit()):(n.removeClass("aok-hidden"),p.removeClass("aok-hidden"))}function u(a){401!==a.status&&r.addClass("aok-hidden")}function m(){for(var a={},b=0;b<e.length;++b)"csm-producer"!==e[b].name&&"csm-schema"!==
e[b].name&&(a[e[b].name]=e[b].value);c.ue&&c.ue.event&&c.ue.event(a,v,w);n.addClass("aok-hidden");p.addClass("aok-hidden");t.removeClass("aok-hidden")}var l=a(b.currentTarget),g=l.closest(".aspa-feedback-container"),n=g.find(".aspa-vote-buttons"),r=g.find(".aspa-loading-section"),t=g.find(".aspa-success-section"),p=g.find(".aspa-error-section"),g=l.attr("action"),x=l.attr("method"),e=l.serializeArray(),q=z(e),v=k(e,"csm-producer"),w=k(e,"csm-schema"),y={"X-Requested-With":"XMLHttpRequest"};b.preventDefault();
g?"application/json"===q.contentType?(delete q.contentType,a.ajax({url:g,type:x,contentType:"application/json",data:JSON.stringify(q),withCredentials:!0,headers:y,beforeSend:h,success:d,error:f,complete:u})):a.ajax({url:g,type:x,data:e,withCredentials:!0,headers:y,beforeSend:h,success:d,error:f,complete:u}):v&&w&&m()}b.registerComponent("aspa-voting-component","aspa-voting-component",function(b){b=a(b.elem()).find(".aspa-vote-form");var c=f(".aspa-upvote-button"),d=f(".aspa-downvote-button");c.isEnabled()||
c.enable();d.isEnabled()||d.enable();b.submit(m)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PantryCPIMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,c=d._namespace||d.attributeErrors,a=c?c("InterstitialProgramInformationSheetAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,c){b.when("A").register("lucid-metrics-logger",function(a){var b=function(b,a){var c=d.ue;"undefined"!==typeof c&&c.count(b,a)};return{logCountMetrics:b,incrementCountMetrics:function(a){b(a,1)}}})});
/* ******** */
(function(h){var k=window.AmazonUIPageJS||window.P,u=k._namespace||k.attributeErrors,a=u?u("SearchWebVSEVideoWidgetAssets",""):k;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,k,u){h.register("vse-search-utils",function(){function a(a){var b,g;"undefined"!==typeof a&&(b=k.ue)&&(g=b.count(a)||0,b.count(a,g+1))}return{postCountMetric:a,postTimeMetric:function(a,b){var g;"undefined"!==typeof a&&"undefined"!==typeof b&&(g=k.ue)&&g.count(a,b)},logError:function(a,
b,g,d){k.ueLogError&&k.ueLogError(d,{logLevel:a,attribution:b,message:g})},logHideWidgetMetrics:function(f){a("vse_search_widget_hidden");f.trigger("vse:search:widget:hidden")},getAssetSpec:function(a,b){a=a.$(b.currentTarget);b=a.parent().data();var g=a.closest("li").index(),d=a.find(".vse-video-image").data("img");return{contentId:b.asin,aciContentId:b.aciContentId,title:b.title,vendorName:b.vendorName,vendorCode:b.vendorCode,referenceUrl:b.referenceUrl,referenceLinkTitle:b.referenceTitle,videoUrl:b.videoUrl,
$el:a,duration:b.duration,imageUrl:d,sponsored:b.sponsored|0,videoVoteContainer:{},productAsin:b.productAsin,refTag:"vse-s-ic-"+g,relatedProducts:b.relatedProducts,sponsorProducts:b.sponsorProducts,vendorTrackingId:b.vendorTrackingId,videoReferenceId:b.videoRefId,index:a.closest("li").index()}},reSize:function(a){a.trigger("resize",{},{width:k.innerWidth,height:k.innerHeight})},getModalFactory:function(a){var b=null;a.capabilities.mobile?h.now("a-secondary-view").execute("vse-search-secondary-view-factory",
function(a){b=a}):h.now("a-modal").execute("vse-search-modal-factory",function(a){b=a});return b},refTagRecorder:function(a,b,g,d){d=d||0;if(!(3<=d)){var c=this;a.post("/gp/mobile/tag/?ref\x3dvse_vws_vc_"+b+g,{error:function(){c.refTagRecorder(a,b,g,++d)}})}}}});h.when("vse-search-utils").execute("vse-search-ajax-calls",function(a){h.register("vse-search-preLoadCallHook",function(){function f(b,g){try{var d=b.A,c=b.request,n=b.block,h=b.handleFailure,k=b.handleSuccess;g--;var p=3-g-1,l=d.now();d.ajax("/vap/ew/componentbuilder",
{params:c,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:c.timeout||4E3,withCredentials:!0,success:function(b){var f=d.now()-l;a.postTimeMetric("vse_search:preload:success:",f);a.postCountMetric("vse_search:preload:success:"+c.page+":"+c.placement+":"+p);d.$(n).html(b);k(d,c,b)},error:function(e){a.postCountMetric("vse_search:preload:error:"+c.page+":"+c.placement+":"+p);(0===e.http.status||500<=e.http.status&&599>=e.http.status)&&0<g?f(b,g):(a.postCountMetric("vse_search:preload:error:"),
h(d,e))}})}catch(e){a.logError("FATAL","vse_search","[vse_search_preLoadCallHook] ",e)}}return{get:function(a,g,d,c,n){f({A:a,block:g,request:d,handleFailure:n,handleSuccess:c},3)}}});h.register("vse-search-lazyLoadCallHook",function(){function f(b,g,d){try{var c=b.A,n=b.context,h=b.handleFailure,k=b.handleSuccess,p=atob(g.attr("data-configuration")),l=JSON.parse(p),e={pageContext:n,configuration:l},r=c.now();d--;var v=3-d-1;c.ajax("/vap/ew/subcomponent/"+l.type,{params:e,paramsFormat:"json",method:"post",
contentType:"application/json",timeout:n.timeout||4E3,withCredentials:!0,success:function(b){var f=c.now()-r;a.postTimeMetric("vse_search:lazyload:success:",f);a.postCountMetric("vse_search:lazyload:success:"+e.page+":"+e.placement+":"+v);g.html(b);k(c,e,b,l.type)},error:function(n){a.postCountMetric("vse_search:lazyload:error:"+e.page+":"+e.placement+":"+v);(0===n.http.status||500<=n.http.status&&599>=n.http.status)&&0<d?f(b,g,d):(a.postCountMetric("vse_search:lazyload:error:"),h(c,e,n,l.type))}})}catch(z){a.logError("FATAL",
"vse_search","[vse_search_lazyLoadCallHook] ",z)}}return{get:function(a,g,d,c,n){var h=a.$;h(g+" div[data-configuration]").each(function(){f({A:a,context:d,handleFailure:n,handleSuccess:c},h(this),3)})}}});h.register("vse-search-relatedProductsHook",function(){function f(b,g,d){try{var c=b.A,n=b.context,h=b.handleFailure,k=b.handleSuccess,p=b.block,l={pageContext:n,configuration:b.config},e=c.now();d--;var r=3-d-1;0<r&&(l.configuration.assets=[]);c.ajax("/vap/ew/subcomponent/relatedproducts/",{params:l,
paramsFormat:"json",method:"post",contentType:"application/json",timeout:n.timeout||4E3,withCredentials:!0,success:function(b){var f=c.now()-e;a.postTimeMetric("vse_search:preload:success:",f);a.postCountMetric("vse_search:preload:success:"+l.page+":"+l.placement+":"+r);c.$(p).html(b);c.$(p).removeClass("aok-hidden");k(c,b)},error:function(e){a.postCountMetric("vse_search:preload:error:"+l.page+":"+l.placement+":"+r);(0===e.http.status||500<=e.http.status&&599>=e.http.status)&&0<d?f(b,g,d):(a.postCountMetric("vse_search:lazyload:error:"),
h(c,e))}})}catch(v){a.logError("FATAL","vse_search","[vse_search_preLoadCallHook] ",v)}}return{get:function(a,g,d,c,n,h){f({A:a,context:d,handleFailure:h,handleSuccess:n,block:g,config:c},3)}}})});"use strict";h.when("A","vse-search-utils","vse-search-preLoadCallHook","vse-search-lazyLoadCallHook","vse-search-relatedProductsHook","rush-framework").register("vse-search-widget",function(a,f,b,g,d,c){a.$(".vse-search-video-carousel").delegate(".vse-video-card.vse-avoid-clicks","click",function(){f.postCountMetric("vse-search.widgetClickedBeforeRushFramework")});
c.registerComponent("vse-search-widget","vse-search-widget",function(c){try{var k=a.now();f.postTimeMetric("vse-search-preload-load-time",k);var u,p,l,e,r=!1,v=!1,z=!1,B=!1,y=!0,E=!1,q=c.elem();h.when("af").execute("vse-search-widget-load-images-lazily",function(){a.loadDescendantImagesManually(a.$(q));a.$(".vse-video-image").addClass("vse-show-img-after-af");a.trigger("a:image:vse:manualLoaded")});c=function K(){if(q)if(z)a.off("scroll",K);else if(a.onScreen(a.$(q),0)){var b=a.now()-k;r?(f.postCountMetric("vse-search.widgetViewedWithLightboxWidgetsCount"),
f.postTimeMetric("vse-search.widgetViewedWithLightboxWidgetsDuration",b)):(f.postCountMetric("vse-search.widgetViewedWithNoLightboxWidgetsCount"),f.postTimeMetric("vse-search.widgetViewedWithNoLightboxWidgetsDuration",b));f.postTimeMetric("vse-search-preload.pageLoadToWidgetViewedDuration",b);z=!0}};c();a.on("scroll",c);var A=a.$(q).attr("data-page-state");if(A){var C=atob(A),m=JSON.parse(C);e=m.clientPrefix;var L=m.popoverTriggerId,t=m.popoverContainerId,F=m.popoverName,w=m.initialVideo,M=m.celQueryStringParam,
D=m.videoDataList,x=m.relatedProductsConfig,G=0;l={requester:m.requester,clientPrefix:e,page:m.page,placement:m.placement,device:m.device,locale:m.locale,requestId:m.requestId,sessionId:m.sessionId,customerId:m.customerId,marketplaceID:m.marketplaceID,metadata:m.metadata,videoDataList:D,video:{contentID:w.contentId,contentIDType:"ASIN",videoURL:w.videoURL,imageURL:w.videoImageUrl},product:{contentID:w.relatedProductsAsins,contentIDType:"ASIN"}};A=function(){var b=a.$(".vse-search-video-carousel").find(".vse-search-video-profile");
0<b.length&&(a.$(".vse-search-active-profile-container").removeClass("aok-hidden"),a.$(".vse-search-active-profile-container").html(b.clone().removeClass("aok-hidden").html()))};C=function(){var b=a.$(".vse-search-video-carousel").find(".vse-search-disclosure-container");0<b.length&&a.$(".vse-vendor-name-container").append(b.clone().removeClass("aok-hidden").html())};m=function(a){a.trigger("vse:"+e+":relatedproducts:preload:succeeded")};c=function(a){a.trigger("vse:"+e+":relatedproducts:preload:failed")};
if(x){B=!0;A();C();var N={id:x.id,type:x.type,binder:x.binder,assets:[x.assets],features:{features:x.features}};l.metadata.relatedProductsAsins=w.relatedProductsAsins;d.get(a,"#"+e+"-ingress-product-carousel-container",l,N,m,c)}var H=function(a,b){a.trigger("vse:"+e+":lazyload:"+b.configuration.type+":failed")},I=function(a,b){a.trigger("vse:"+e+":lazyload:"+b.configuration.type+":succeeded")};b.get(a,"#"+t+" .vse-search-video-block",l,function(a){y=!1;h.when("VSEComponentAssets").execute("vse-search-preload-success",
function(){r=!0;v&&(a.trigger("vse:"+e+":page:lightBoxOpened",{assetSpec:p,lightBoxId:t}),g.get(a,"#"+t,l,I,H),f.postCountMetric("vse-search.lightBoxOpenedBeforePreload"));a.delay(function(){f.reSize(a)},500)});a.trigger("vse:"+e+":preload:succeeded")},function(a){r=!1;a.trigger("vse:"+e+":preload:failed");f.logHideWidgetMetrics(a)});a.$(q).find(".vse-search-video-carousel").delegate(".vse-video-card .vse-carousel-item","click",function(b){if(!(B&&(a.$(b.target).closest(".vse-search-active-profile-container").length||
a.$(b.target).closest(".vse-disclosure").length)||y)){b.preventDefault();var c=f.getModalFactory(a);p=f.getAssetSpec(a,b);a.objectIsEmpty(c)?(y=!0,f.logHideWidgetMetrics(a)):(u=c.get(a.$("#"+L)),a.objectIsEmpty(u)?(y=!0,f.logHideWidgetMetrics(a)):(u.show(),f.refTagRecorder(a,p.index,M,0)))}});a.on("a:popover:afterShow:"+F,function(b){v=!0;a.$(b.popover.$popover).addClass(a.$("#"+t).data("cssClass"));G++;r&&(a.trigger("vse:"+e+":page:lightBoxOpened",{assetSpec:p,lightBoxId:t}),1===G&&(g.get(a,"#"+
t,l,I,H),f.postCountMetric("vse-search.lightBoxOpenedAfterPreload")));f.reSize(a)});a.on("a:popover:beforeHide:"+F,function(){r&&(a.trigger("vse:"+e+":page:lightBoxClosed"),a.$("#"+t+" .vse-placeholder").addClass("aok-hidden"),a.$("#"+t+" .vse-search-video-block").removeClass("vse-search-absolute-lb"))});a.on(e+":vse:player:registered",function(){a.$("#"+t+" .vse-search-video-block").first().animate({opacity:1})});a.declarative(e+"-carousel-see-more","click touch",function(){a.$(q).find(".vse-video-card").first().find(".vse-carousel-item").click()});
a.on(e+":vse:sushiMetrics",function(b){var c=D.map(function(a){return a.contentId}).join(","),f=function(a){a=b.buildSushiPayload({eventName:"vse-search.thumbnailImpression",stringPayload:"",intPayload:1,videoAsin:a});b.postMetric.emitSushiMetric(a,b.endpoint)},e=function(){h.when("A","a-carousel-framework").execute("vse-carousel-metric-handler",function(a,b){var c=b.getCarousel(a.$(q).find(".vse-search-video-carousel")),e=c.getAttr("name"),d=[];D.map(function(a){d.push({videoAsin:a.contentId,impressionRecorded:!1})});
b=function J(){for(var b=c.getAttr("pageNumber"),g=c.getAttr("pageSize"),h=c.getAttr("totalPages"),k=0;k<Math.min(b*g,d.length);k++)d[k].impressionRecorded||(f(d[k].videoAsin),d[k].impressionRecorded=!0);b===h&&(a.off("a:carousel:"+e+":change:pageSize",J),a.off("a:carousel:"+e+":change:pageNumber",J))};b();a.on("a:carousel:"+e+":change:pageSize",b);a.on("a:carousel:"+e+":change:pageNumber",b)})},d=function O(){if(q)if(E)a.off("scroll",O);else if(a.onScreen(a.$(q),0)){var d=b.buildSushiPayload({eventName:"vse-search.pageView",
stringPayload:"",intPayload:1,videoAsinList:c});b.postMetric.emitSushiMetric(d,b.endpoint);B?f(w.contentId):e();E=!0}},g=b.buildSushiPayload({eventName:"vse-search.pageRender",stringPayload:"",intPayload:1,videoAsinList:c});b.postMetric.emitSushiMetric(g,b.endpoint);d();a.on("scroll",d)});a.$(q).find(".vse-sm-link").removeClass("vse-avoid-clicks");a.$(q).find(".vse-video-card").removeClass("vse-avoid-clicks");a.$(q).find(".vse-search-container-spinner").addClass("aok-hidden");f.postTimeMetric("vse-search.timeToRemoveSpinner",
a.now()-k)}else f.logHideWidgetMetrics(a),f.postCountMetric("vse-search-preload-page-state-not-found")}catch(P){y=!0,f.logHideWidgetMetrics(a)}})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MiraiDiscoverWidgetSearchWebAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,e=l?l("ListsCommonUtilityAssets",""):h;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,h,l){g.when("A").register("al-ajax-response-state-parser",function(e){var b=e.$;return{getState:function(d){d=b(d).filter("#listsAjaxResponseStateSection");var a=b("#listsAjaxResponseStateSection");a&&0<=a.length&&a.remove();b(d).appendTo("body");e.state.parse();d=e.state("listsAjaxResponseState")||
{};return{hasError:d.hasError,authRequired:d.authRequired,authUrl:d.authUrl,error:d.error}}}});"use strict";g.when("A","al-bottomsheet-with-fallback","iphone-x-detector").register("bottom-sheet-utils",function(e,b,d){var a=e.$;e.declarative("al-sheet-with-fallback","click",function(f){f.$event.preventDefault();var a=f.data;f=b.create(b.buildComponentParams(a.componentName,a.showCloseButton,d.getAdjustedHeightPx(a.bottomsheetHeight),a.popoverHeight,a.popoverWidth,a.headerForPopover,a.viewLabel,a.viewDescription?
a.viewDescription:a.viewLabel,a.paddingForPopover,a.closeMessage),f.$target);b.show(f)});return{raiseBottomsheet:function(b){b=a(b).parents(".a-sheet-web-container");b.css("z-index",1E4);b.siblings(".a-sheet-lightbox").css("z-index",8E3)}}});"use strict";g.when("A").register("al-bottomsheet-with-fallback",function(e){function b(c){h.ueLogError&&h.ueLogError({logLevel:"ERROR",message:c})}var d,a;g.when("a-sheet").execute(function(c){d=c});g.when("a-modal").execute(function(c){a=c});var f=function(c){if(c)return d?
d.get(c.name):a.get(c.name);b("No ComponentParams specified. Please generate componentParams using .create(component)")},p={IS_POPOVER_LABEL:"IS_POPOVER",IS_BOTTOMSHEET_LABEL:"IS_BOTTOMSHEET"};return{create:function(c,f){if(c)return d?d.create(c):a.create(f,c),c;b("No ComponentParams specified. Please generate componentParams using .create(component)")},show:function(c){(c=f(c))?c.show():b("No View Created. Please create a view first by calling .create(component)")},hide:function(c){(c=f(c))?c.hide():
b("No View Created. Please create a view first by calling .create(component)")},changeHeight:function(c,a,e){var g=f(c);g?d?(g.changeHeight({height:a,duration:e}),c.bottomsheetHeight=a):(g.update({height:a}),c.popoverHeight=a):b("No View Found. Please create a view first by calling .create(component)")},remove:function(c){(c=f(c))?c.$container.remove():b("No View Created. Please create a view first by calling .create(component)")},exists:function(c){return f(c)?!0:!1},onCloseExecute:function(c,a,
f){if("function"!==typeof a)b("Expected onCloseFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeHide":"afterHide")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},onOpenExecute:function(c,a,f){if("function"!==typeof a)b("Expected onOpenFunction to be of type function");else if(c)e.on((d?"a:sheet":"a:popover")+":"+(f?"beforeShow":"afterShow")+":"+c.name,a);else b("No ComponentParams specified. Please generate componentParams using .create(component)")},
buildComponentParams:function(a,b,f,e,g,h,u,y,v,w){var x=d!==l,k={viewTypeLabel:x?p.IS_BOTTOMSHEET_LABEL:p.IS_POPOVER_LABEL,name:a};x?(k.closeType=w?"message":b?"icon":l,k.closeMessage=w,k.height=f,k.sheetLabel=u,k.sheetDescription=y,k.preloadDomId=a):(k.closeButton=b,k.height=e,k.width=g,k.dataStrategy="preload",k.header=h,k.hideHeader=h===l,k.padding=v!==l?v:"none",k.popoverLabel=u);return k},VIEW_TYPE_LABELS:p}});"use strict";g.when("A").register("lists-dpx-common-utils",function(e){return{urlParamValue:function(b){for(var d=
h.location.search.substring(1).split("\x26"),a=0;a<d.length;a++){var f=d[a].split("\x3d");if(f[0]===b)return f[1]}}}});"use strict";g.when("A").register("iphone-x-detector",function(){function e(){try{var a=b();d.forEach(function(b){if(-1<a.indexOf(b))return!0})}catch(f){}return!1}function b(){try{var a;a:{for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf("amzn-app-ctxt\x3d")){a=c.substring(14,c.length);break a}}a=
null}if(a){var e=a.match(/"v":.*%2C*/);if(e)return e.toString().toLowerCase()}}catch(g){}return""}var d=["iphone10","iphone11"];return{isIphoneX:e,getDeviceType:b,getAdjustedHeightPx:function(a){try{if(a=parseInt(a,10),e())return a+40}catch(b){}return a}}});"use strict";g.when("A").register("amazon-lists-csrf-utils",function(e){return{addCsrfToken:function(b){var d=e.$("[data-amazon-lists-csrf-token]");0!==d.length&&(b["anti-csrftoken-a2z"]=d.attr("data-amazon-lists-csrf-token"))},hasCsrfToken:function(b){b=
b["anti-csrftoken-a2z"];return""!==b&&b!==l}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("lists-ajax-handler",function(e,b){function d(a){b.hasCsrfToken(a)||b.addCsrfToken(a)}function a(a,c){"function"===typeof a?a(c):r("callableFunction passed in is not callable: "+a)}function f(a,c,b){m(a);b&&m(n(a,b));c&&m(n(a,c));c&&b&&m(n(a,c,b))}function g(a){m("lists_ajax_before_send");a&&m(n("lists_ajax_before_send",a))}function c(a){try{return a.replaceAll("/","_")}catch(c){r("Replace all failed for URL: "+
a)}}function n(a,c,b){return[a,c,b].filter(function(a){return""!==a&&a!==l}).join(":")}function m(a){q&&q.count(a,(q.count(a)||0)+1)}function r(a){h.ueLogError(l,{logLevel:"ERROR",attribution:"ListsCommonUtilityAssets::ListsAjaxHandler",message:a})}var t=e.$,q=h.ue;return{post:function(b){var e=b.headers||[];d(e);var h=c(b.url);g(h);t.ajax({type:"POST",url:b.url,cache:b.isCached,headers:e,data:b.params,timeout:b.timeout,success:function(c,d){f("lists_ajax_success",h,d);a(b.successCallback,c)},error:function(c,
d){f("lists_ajax_error",h,d);a(b.errorCallback)}})},get:function(b){var d=c(b.url);g(d);t.ajax({type:"GET",url:b.url,headers:b.headers,cache:b.isCached,data:b.params,timeout:b.timeout,success:function(c,e){f("lists_ajax_success",d,e);a(b.successCallback,c)},error:function(c,e){f("lists_ajax_error",d,e);a(b.errorCallback)}})}}})});
/* ******** */
(function(g){var d=window.AmazonUIPageJS||window.P,k=d._namespace||d.attributeErrors,c=k?k("ListsCreateAssets",""):d;c.guardFatal?c.guardFatal(g)(c,window):c.execute(function(){g(c,window)})})(function(g,d,k){g.when("A","al-bottomsheet-with-fallback","al-ajax-response-state-parser","create-new-list-hz","bottom-sheet-utils","lists-dpx-common-utils").execute(function(c,f,z,v,m,e){function t(){m.raiseBottomsheet("#redesigned-create-list-form-wrapper")}function a(b){var a=d.ue?d.ue.rid:k;b={createIngressName:b.createIngressName};
a&&(b.relatedRequestID=a);n.ajax({type:"GET",url:"/hz/wishlist/create",data:b,success:A,error:function(b,a,c){r("Failed to fetch CreateList-Form. Status: "+a+"; Error: "+c)},timeout:2E4})}function A(b){var a=n(b).filter("#createlist-form-container");b=z.getState(b);b.authRequired&&b.authUrl?d.location.href=b.authUrl:b.hasError?r("CreateList form has error \x3d "+b.error):(n("#redesigned-create-list-form-wrapper").html(a),p("#create-list-form-spinner"),u("#redesigned-create-list-form-wrapper"))}function p(b){n(b).addClass("aok-hidden")}
function u(b){n(b).removeClass("aok-hidden")}function r(b){f.changeHeight(h,110);p("#create-list-form-spinner");p("#redesigned-create-list-form-wrapper");u("#createlist-form-loading-error-section");d.ueLogError&&d.ueLogError({logLevel:"FATAL",message:b});if(!y())f.onCloseExecute(h,l,!1)}function l(){p("#createlist-form-loading-error-section");p("#redesigned-create-list-form-wrapper");u("#create-list-form-spinner");d.location.reload()}function q(b,a,c){r("List creation failed. Status: "+a+"; Error: "+
c)}function B(b){b.hasError?r("List creation failed with Error: "+b.error):d.location="/hz/wishlist/ls/"+b.listExternalId}function y(){return"DETAIL_PAGE"===(c.state("createListIngressState")||{}).ingressName&&w}var n=c.$,w,x,h;c.declarative("awl-create-list-bottomsheet","click",function(b){var e=b.data||{};c.state("createListIngressState",{ingressName:e.ingressName});var d=e.componentName;d&&"function"==typeof uet&&uet("bb",d,{wb:1});d=b.data||{};h=f.create(f.buildComponentParams(d.componentName,
!0,340,430,400,k,d.viewName,d.viewDescription,k,k),b.$target);f.show(h);if(y())f.onOpenExecute(h,t);a(e);(b=e.componentName)&&"function"==typeof uet&&uet("cf",b,{wb:1});b&&"function"==typeof uex&&uex("ld",b,{wb:1})});c.declarative("create-list-bottomsheet-submit","click",function(b){b=b.data||{};var a=d.ue?d.ue.rid:k;a&&(b.relatedRequestID=a);a=n("#createlist-list-name-textinput").val();a===k||0===a.length?n("#createlist-list-name-textinput").parent("div").addClass("a-form-error"):(p("#createlist-form-loading-error-section"),
p("#redesigned-create-list-form-wrapper"),u("#create-list-form-spinner"),b.listName=a,(a=e.urlParamValue("createAndAddAsin"))&&0<a.length&&(b.asin=a),y()?((a=w.getAsin())&&0<a.length&&(b.asin=a),v(b,w.handleSuccess,w.handleError)):"HEARTS_BOTTOMSHEET"===(c.state("createListIngressState")||{}).ingressName&&x?(b.isDefault=!0,f.hide(h),v(b,x.onCreateSuccess,x.onCreateError)):v(b,B,q))});g.when("dp-create-list-handler").execute(function(a){w=a});g.when("hearts-create-list-handler").execute(function(a){x=
a});c.on("a:expander:create-list-learn-more-popover:toggle:expand",function(){h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?f.changeHeight(h,425):f.changeHeight(h,580)});c.on("a:expander:create-list-learn-more-popover:toggle:collapse",function(){f.changeHeight(h,340);h.viewTypeLabel===f.VIEW_TYPE_LABELS.IS_BOTTOMSHEET_LABEL?f.changeHeight(h,340):f.changeHeight(h,430)});c.declarative("createlist-list-name-validation",["keyup"],function(a){0!==a.$target.context.value.length&&n("#createlist-list-name-textinput").parent("div").hasClass("a-form-error")&&
n("#createlist-list-name-textinput").parent("div").removeClass("a-form-error")})});"use strict";g.when("A","create-new-list-hz","a-modal","lists-dpx-common-utils").register("create-utils",function(c,f,g,v){function m(a){a&&"function"==typeof uet&&uet("cf",a,{wb:1});a&&"function"==typeof uex&&uex("ld",a,{wb:1})}var e=c.$,t=function(a){a="#"+(a.formId||"addToCart");0===e(a).length&&(a="#atwl-form");return a};c.declarative("show-create-list",["click touchstart"],function(a){a.$event.preventDefault();
var d=a.data;if(d.url||d.name)"function"==typeof uet&&uet("bb","create-list-dp-widget",{wb:1}),g.create(a.$target,d).show({padding:"none"}),m("create-list-dp-widget");c.on("a:popover:afterHide:redesigned-create-list",function(){g.remove("redesigned-create-list")})});c.declarative("list-name-validation",["keyup"],function(a){0!==a.$target.context.value.length&&e("#alert-list-name").is(":visible")&&(e("#alert-list-name").addClass("aok-hidden"),e("#alert-list-name").parent("div").find("input").each(function(){e(this).removeClass("a-form-error")}))});
return{submitCreate:function(a,g,p){a.$event.preventDefault();var u=e("#create-list-form").closest(".a-popover"),r=e("#list-name").val();if(""===r)e("#alert-list-name").removeClass("aok-hidden"),e("#alert-list-name").parent("div").find("input").each(function(){e(this).addClass("a-form-error")});else{var l={},q=c.state("popoverState")||{},q=t(q),m=v.urlParamValue("createAndAddAsin");m&&1<m.length&&(l.asin=m);"1"===e("#is-create-and-add").val()&&(q=e(q).find("#ASIN, [name^\x3d'ASIN'], [name\x3d'a'], [name\x3d'asin']").val(),
"undefined"!==q&&(l.asin=e.trim(q)));e("#create-list-loading").removeClass("aok-hidden");u.find("#popover-spinner .a-popover-loading").show();e("#create-list-form").addClass("aok-hidden");l.listName=r;l.sid=a.data.sessionId;l.vendorId=a.data.sourceVendorId;l.privacyStatus=a.data.privacyStatus;l.listType=a.data.listType;if(a=d.ue?d.ue.rid:k)l.relatedRequestID=a;f(l,g,p)}}}});"use strict";g.when("A","amazon-lists-csrf-utils").register("create-new-list-hz",function(c,f){var g=c.$;return function(c,m,
e){var t=[];f.addCsrfToken(t);var a=d.ue?d.ue.rid:k;a&&(c.relatedRequestID=a);c.isJson=!0;return g.ajax("/hz/wishlist/create/newlist",{type:"POST",headers:t,data:c,success:m,error:e,timeout:1E4})}})});
/* ******** */
(function(n){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,c=q?q("HeartsAssets",""):p;c.guardFatal?c.guardFatal(n)(c,window):c.execute(function(){n(c,window)})})(function(n,p,q){"use strict";n.when("A","content-margin-utils","hearts-logging-utils","heart-error-utils","hearts-enabled").register("heart-icon-event-handlers-module",function(c,b,d,f){var k={},h;c.declarative("lists-hearts-heart-action","click",function(a){var r=a.data||{},m=a.$currentTarget.closest(".amazon-lists-heart-container"),
b=m.find(".amazon-lists-heart-icon-container"),u=m.find(".amazon-lists-filled-heart"),g=m.find(".amazon-lists-empty-heart"),f=m.find("[aria-checked]"),t=m.find(".amazon-lists-heart-flyout");if(1===u.length&&1===g.length&&1===t.length){a.$event.stopPropagation();a.$event.preventDefault();var v=r.itemExternalId;v in k||(k[v]=!0,m={itemExternalId:v,$heartsContainer:m,$heartsIconContainer:b,$filledHeart:u,$emptyHeart:g,$heartButton:f,isFilledByAttribute:0<f.length,$flyout:t},b=r.flyoutMarginSelector,
u=m.isFilledByAttribute?"true"===m.$heartButton.attr("aria-checked"):m.$emptyHeart.hasClass("aok-hidden"),u?(w(m),d.incrementCount(d.REMOVE_FROM_HEARTS_COUNTER),d.logEventDetails(a.$event),a=m.$heartsContainer.data("heartsListId"),a===q&&h!==q&&(a=h),c.post("/hz/wishlist/hearts/remove",{headers:y(r),params:p(r,a),success:n(m,b,r.isShortenedResponseView),error:l(m)})):(x(m),d.incrementCount(d.ADD_TO_HEARTS_COUNTER),d.logEventDetails(a.$event),c.post("/hz/wishlist/hearts/add",{headers:y(r),params:p(r),
success:z(m,b,r.isShortenedResponseView),error:e(m)})))}});var z=function(a,r,d){return function(b){delete k[a.itemExternalId];if(b.hasError)w(a),f.showError(a,b.errorContent,d,r);else{var c=b.listExternalId;a.$heartsContainer.data("heartsListId",c);h===q&&(h=c);t(a,b.flyoutContent,r);g(a.itemExternalId,!0)}}},e=function(a){return function(){delete k[a.itemExternalId];w(a)}},n=function(a,b,d){return function(c){delete k[a.itemExternalId];if(c.hasError)x(a),f.showError(a,c.errorContent,d,b);else{var e=
a.$heartsContainer,l=c.listExternalId;e.data("heartsListId",l);h===q&&(h=l);e.data("heartsListId")&&e.removeData("heartsListId");t(a,c.flyoutContent,b);g(a.itemExternalId,!1)}}},l=function(a){return function(){delete k[a.itemExternalId];x(a)}},g=function(a,b){c.trigger("hearts:stateChange",{itemExternalId:a,isHearted:b})},p=function(a,b){a={vendorId:a.vendorId||"listsadoption.hearts.unknown",itemType:a.itemType.toLowerCase(),itemExternalId:a.itemExternalId,isShortenedResponseView:a.isShortenedResponseView};
b&&(a.listExternalId=b);return a},y=function(a){var b=[];a.antiCsrfToken&&(b["anti-csrftoken-a2z"]=a.antiCsrfToken);return b},x=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","true"):(a.$emptyHeart.addClass("aok-hidden"),a.$filledHeart.removeClass("aok-hidden"))},w=function(a){a.isFilledByAttribute?a.$heartButton.attr("aria-checked","false"):(a.$filledHeart.addClass("aok-hidden"),a.$emptyHeart.removeClass("aok-hidden"))},t=function(a,d,h){var e=a.$flyout,g=a.$heartsContainer,
f=g.data("timer");f&&clearTimeout(f);e.html(d);d=e.find(".amazon-lists-heart-list-name-template");d.remove();f=a.$flyout.find(".amazon-lists-heart-flyout-text");f.html(f.html().replace("LIST_NAME",d[0].outerHTML));e.removeClass("aok-hidden");d=g.attr("style");g.attr("style","");f=e.outerWidth(!0)+2+1;h=b.getMaxHeartsContainerWidth(g,h);h=Math.min(f,h);e.addClass("aok-hidden");g.attr("style",d);c.animate(g,{width:h},300,"ease-out",function(){e.removeClass("aok-hidden");var b=c.delay(function(){A(a)},
5E3);g.data("timer",b)})},A=function(a){var b=a.$flyout;b.html("");c.animate(a.$heartsContainer,{width:34},300,"ease-out",function(){b.addClass("aok-hidden")})};(function(){var a=document.createElement("style");document.head.appendChild(a);a.sheet.insertRule(".amazon-lists-heart-container.amazon-lists-heart-container{visibility: visible;opacity: 0.95;}",0)})()});"use strict";n.when("A","hearts-logging-utils","hearts-enabled").register("heart-flyout-event-handlers",function(c,b){c.declarative("amazon-lists-heart-add-flyout-action",
"click",function(d){var c=d.data||{};d.$event.stopPropagation();d.$event.preventDefault();b.incrementCount(b.CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER);c.listExternalId&&(p.location.href="/hz/wishlist/ls/"+c.listExternalId)})});"use strict";n.when("A","hearts-enabled").register("content-margin-utils",function(c){return{getMaxHeartsContainerWidth:function(b,d){var f=.8*c.$(p).width(),k=0;b=b.closest(d);1===b.length&&(f=b.width(),k=4);return f-k},getErrorDisplayWidth:function(b,d){b=b.closest(d);return 1===
b.length?b.width():null}}});"use strict";n.when("hearts-enabled").register("hearts-logging-utils",function(){var c=p.ue,b=function(b){c&&c.count(b,(c.count(b)||0)+1)};return{ADD_TO_HEARTS_COUNTER:"addToHeartsList",REMOVE_FROM_HEARTS_COUNTER:"removeFromHeartsList",CLICK_ADD_TO_HEARTS_LIST_TOAST_COUNTER:"clickAddToHeartsListToast",MOVE_ITEM_COUNTER:"reusablehearts:moveToList",CHANGE_DEFAULT_AND_MOVE_COUNTER:"reusablehearts:changeDefaultAndMove",CREATE_LIST_COUNTER:"reusablehearts:createList",incrementCount:b,
logEventDetails:function(c){if("undefined"!==typeof c){var f=c.offsetX-13;c=c.offsetY-10;if("undefined"!==typeof f&&"undefined"!==typeof c){var k,h;17<f?k="Right":-17>f&&(k="Left");17<c?h="Bottom":-17>c&&(h="Top");k&&b("heartsListClickMargin"+k);h&&(b("heartsListClickMargin"+h),k&&b("heartsListClickMargin"+h+k))}}}}});n.when("A","content-margin-utils","native-heart-utils","hearts-enabled").register("heart-error-utils",function(c,b,d){var f=function(h,d,e,f){var l=h.$flyout,g=h.$heartsContainer,n=
h.$heartsIconContainer,p,q;e?p=b.getErrorDisplayWidth(g,f):q=b.getMaxHeartsContainerWidth(g,f);if(null!==p||null!==q)g.addClass("aok-hidden"),n.addClass("aok-hidden"),g.removeClass("amazon-lists-heart-container"),e?g.addClass("amazon-lists-popup-error-container"):g.addClass("amazon-lists-flyout-error-container"),e?(l.width(p),g.height(0),g.css("margin",0),g.css("top",0)):g.width(0),g.removeClass("aok-hidden"),l.html(d),l.removeClass("amazon-lists-heart-flyout"),e&&l.removeClass("aok-nowrap"),l.removeClass("aok-hidden"),
l.children().first().width("100%"),e?(d=l.height(),d={height:d,"margin-top":-1*d}):d={width:Math.min(l.width(),q)},c.animate(g,d,300,"ease-out",function(){l.removeClass("aok-hidden");c.delay(function(){k(h,e)},5E3)})},k=function(b,d){var e=b.$heartsContainer,f=b.$heartsIconContainer,l=b.$flyout;c.animate(e,d?{height:0,"margin-top":0}:{width:0},300,"ease-out",function(){e.addClass("aok-hidden");e.removeClass("amazon-lists-popup-error-container");e.addClass("amazon-lists-heart-container");e.attr("style",
"");f.removeClass("aok-hidden");l.html("");l.addClass("amazon-lists-heart-flyout");d&&l.addClass("aok-nowrap");e.removeClass("aok-hidden")})};return{showError:function(b,c,e,k){d.canShowNativeHeartsFab()?n.when("mash","ContextualActions").execute(function(l,g){g.renderNativeErrorToast?g.renderNativeErrorToast({successCallback:function(){},failCallback:function(){f(b,c,e,k);d.logCounterMetricsForNativeHeartFab("lists:dp:nativeHearts:showErrorHeartErr")},asin:b.itemExternalId,startTimeMs:Date.now()}):
f(b,c,e,k)}):f(b,c,e,k)}}});"use strict";n.when("A","hearts-enabled").register("native-heart-utils",function(){return{canShowNativeHeartsFab:function(){return!1}}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,f=m?m("SearchMultiQuestionWidgetAssets",""):l;f.guardFatal?f.guardFatal(k)(f,window):f.execute(function(){k(f,window)})})(function(k,l,m){k.when("rush-dispatcher","rush-util").register("cse-multi-question-actions",function(f,b){return{listeners:{update:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:update-selections"},apply:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");
return c+":multi-question:apply-selections"},remove:function(c){if(!b.isNotBlank(c))throw Error("widget must be a non-empty string");return c+":multi-question:remove-selections"}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-multi-question-actions").register("cse-question-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={answered:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:answered"},previousAnswered:function(a){d(b.isNotBlank(a),
"questionId must be a non-empty string");return a+":question:previous-answered"},hide:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:hide-question"},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":question:show-question"}};return{listeners:h,triggers:{updateSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.update(a),e)},applySelections:function(a,e){d(b.isNotBlank(a),
"widget must be a non-empty string");return g(c.listeners.apply(a),e)},removeSelections:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(c.listeners.remove(a),e)},updatePrevious:function(a,e){d(b.isNotBlank(a),"widget must be a non-empty string");return g(h.previousAnswered(a),e)},show:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.show(a))},hide:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(h.hide(a),
{questionToShow:e})}}}});"use strict";k.when("rush-dispatcher","rush-util","cse-question-actions").register("cse-answer-actions",function(f,b,c){function d(a,b){if(!a)throw Error(b);}var g=f.trigger,h;h={deselect:function(a){d(b.isNotBlank(a),"questionId must be a non-empty string");return a+":answer:deselect"}};return{listeners:h,triggers:{selected:function(a,e){d(b.isNotBlank(a),"questionId must be a non-empty string");return g(c.listeners.answered(a),e)},deselect:function(a,c){d(b.isNotBlank(a),
"questionId must be a non-empty string");d(b.isNotBlank(c),"uuid must be a non-empty string");return g(h.deselect(a),{selectedUuid:c})}}}})});
/* ******** */
(function(g){var r=window.AmazonUIPageJS||window.P,t=r._namespace||r.attributeErrors,b=t?t("AEEDiscoveryDeepCheckPromiseAssets",""):r;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,r,t){g.when("ags-dc-promise/app/aapi","ags-dc-promise/app/component/lib","ags-dc-promise/app/config","ags-dc-promise/app/fetch","ags-dc-promise/app/repaint","ags-dc-promise/app/retry","ags-dc-promise/lib/controller","ags-dc-promise/lib/metrics","ags-dc-promise/lib/on-error").register("ags-dc-promise/app/component",
function(b,a,c,e,f,d,p,h,n){var g=h.incrementCounterOnCall("batch"),l=h.incrementCounterOnCall("controllerError"),k=h.incrementCounterOnCall("fetchFailed"),q=h.incrementCounterOnCall("productv2Call");h=h.incrementCounterOnCall("repaintError");b=q(b.productv2);b=d(b);b=g(b);e=e(b);d=h(a.logRepaintError);f=n(f,d);k=k(a.logFetchFailure);a=l(a.logControllerError);f=p({fetch:e,repaint:f,recordFetchFailure:k});f=n(f,a);return{name:c.name,attribution:c.attribution||c.name,controller:f}});g.declare("ags-dc-promise/app/component/lib",
{logControllerError:function(b,a){a.log.error(b,b.toString())},logFetchFailure:function(b,a){b.log.error(null,a.statusText)},logRepaintError:function(b,a){a.log.error(b,b.toString())}});g.declare("ags-dc-promise/app/config",{name:"ags-dc-promise",attribution:"ags-dc-promise",aapi:{queryArgs:["dexAgsDeepCheckPromiseParamsMap\x3d{ENABLE_AGS_DEEP_CHECK_PROMISE_258953:T2,isAgsDeepCheckPromiseEnabled:true}"]},fetch:{batchSize:20,batchIntervalMillis:50},retry:{strategy:"max-attempts",maxAttempts:1,delay:50}});
g.when("A","ags-dc-promise/app/config","ags-dc-promise/lib/latency/event-handler").execute("read:ags-dc-promise/app/config",function(b,a){b.each(a,function(a,e){g.declare("ags-dc-promise/app/config/"+e,a)})});g.when("A","3p-promise","aapi-token-dcp","s-aapi-ajax-config","ags-dc-promise/app/config/aapi","ags-dc-promise/app/init/aapi/lib","ags-dc-promise/lib/aapi","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/promise-handle").register("ags-dc-promise/app/aapi",function(b,
a,c,e,f,d,p,h,n,g){a=h.partial(g,a);d=h.partial(d.adaptJquery,b.$,a);b=b.extend({marketplaces:[e.marketplaceId],endpoint:e.ajaxEndpoint,ajax:d,headers:{"x-api-csrf-token":c,"Accept-Language":e.marketplaceLocale}},f);return p(b)});g.declare("ags-dc-promise/app/init/aapi/lib",{adaptJquery:function(b,a,c){var e=c.success,f=c.failure||c.error,d=a();c.xhrFields={withCredentials:!0};c.success=function(f,a,c){b.isFunction(e)&&e.call(null,f,a,c);d.resolve(f)};c.failure=function(a,e,c){b.isFunction(f)&&f.call(null,
a,e,c);d.reject(a)};c.error=c.failure;b.ajax(c.url,c);return d.promise}});g.when("A","3p-promise","ags-dc-promise/app/config/fetch","ags-dc-promise/lib/fetch").register("ags-dc-promise/app/fetch",function(b,a,c,e){return function(f){f=b.extend({productv2:f,Promise:a,inclusions:["buyingOptions[].delivery(product.delivery/v1)"],setInterval:setInterval,clearInterval:clearInterval},c);return e(f)}});g.when("ags-dc-promise/lib/date-format","ags-dc-promise/lib/repaint").register("ags-dc-promise/app/repaint",
function(b,a){return a(b)});g.when("ags-dc-promise/app/config/retry","ags-dc-promise/lib/retry/lib").execute("register:ags-dc-promise/app/retry",function(b,a){a.retryStrategyProvider[b.strategy](function(a){return a(b)});g.when("3p-promise","ags-dc-promise/lib/retry","ags-dc-promise/app/retry/strategy").register("ags-dc-promise/app/retry",function(a,e,f){return e({getNextDelay:f,Promise:a,setTimeout:setTimeout})})});g.when("A","ags-dc-promise/lib/latency/event-handler").register("ags-dc-promise/lib/common",
function(b){return{getProperty:function(a){return function(b){return b[a]}},getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(location.search);return null===a||null===decodeURIComponent?"":decodeURIComponent(a[1].replace(/\+/g," "))},findFirst:function(a,c){var e,f,d;if(!b.$.isFunction(a))throw new TypeError("predicate should be a function, not a "+typeof a);if(!b.isArray(c))throw new TypeError("collection should be an array, not a "+
typeof c);for(d=0;d<c.length;++d)if(f=c[d],a(f)){e=f;break}return e},partial:function(a){var b=Array.prototype.slice.call(arguments,1);if(1>b.length)throw Error("no arguments given");return function(){var e=Array.prototype.slice.call(arguments);return a.apply(null,b.concat(e))}}}});g.declare("ags-dc-promise/lib/counter",function(){var b=0;return function(){return b++}});g.when("ags-dc-promise/lib/assert").register("ags-dc-promise/lib/memoize",function(b){return function(a,c){b.isType("memo","object",
c);return function(){var e=Array.prototype.slice.call(arguments),f=JSON.stringify(e),d=c[f];"undefined"===typeof d&&(d=a.apply(null,e),c[f]=d);return d}}});g.declare("ags-dc-promise/lib/on-error",function(b,a){return function(){var c=Array.prototype.slice.call(arguments);try{return b.apply(null,c)}catch(e){return a.apply(null,[e].concat(c))}}});g.declare("ags-dc-promise/lib/promise-handle",function(b){var a={};a.promise=new b(function(b,e){a.resolve=b;a.reject=e});return a});g.when("ags-dc-promise/lib/common",
"ags-dc-promise/lib/pipeline","ags-dc-promise/lib/metrics","ags-dc-promise/lib/controller/lib").register("ags-dc-promise/lib/controller",function(b,a,c,e){var f=b.partial(e.validateComponent,e.validateAsin);return a(e.validateConfig,function(d){d=b.partial(e.controller,d.fetch,d.repaint,d.recordFetchFailure);return a(f,d)})});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/controller/lib",function(b,a,c){return{PROP_ASIN:"asin",
controller:function(e,f,d,b){var c=b.prop("asin");f=a.partial(f,b);d=a.partial(d,b);e(c).then(f).catch(d)},validateConfig:c(a.partial(b.isType,["config","fetch"],"function"),a.partial(b.isType,["config","repaint"],"function"),a.partial(b.isType,["config","recordFetchFailure"],"function")),validateComponent:function(a,f){a(f.prop("asin"));return f},validateAsin:c(a.partial(b.isType,"asin","string"),a.partial(b.notEmpty,"asin"))}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/aapi/lib",
"ags-dc-promise/lib/aapi/productv2").register("ags-dc-promise/lib/aapi",function(b,a,c,e){return a(c.validateConfig,function(f){var d=b.partial(c.addMarketplaces,f.marketplaces),p=b.partial(c.addUrlEndpoint,f.endpoint),h=b.partial(c.addQueryArgs,f.queryArgs),g=b.partial(c.addHeaders,f.headers);f=b.partial(c.send,f.ajax);return{productv2:a(e,d,p,h,g,f)}})});g.when("A","ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/aapi/lib",function(b,
a,c,e){return{addHeaders:function(f,d){d.headers=b.extend({},f,d.headers);return d},addMarketplaces:function(f,d){d.url="/api/marketplaces/"+f.join(",")+d.url;return d},addQueryArgs:function(f,d){f&&(d.url+=(-1===d.url.lastIndexOf("?")?"?":"\x26")+f.join("\x26"));return d},addUrlEndpoint:function(f,d){d.url=f+d.url;return d},send:function(f,d){return f(d)},validateConfig:e(c.partial(a.isArray,["config","marketplaces"]),c.partial(a.notEmpty,["config","marketplaces"]),c.partial(a.isType,["config","endpoint"],
"string"),c.partial(a.notEmpty,["config","endpoint"]),c.partial(a.isType,["config","headers"],"object"),c.partial(a.isType,["config","ajax"],"function"))}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/aapi/productv2/lib").register("ags-dc-promise/lib/aapi/productv2",function(b,a){var c=b.partial(a.validateArgs,a.validateAsins,a.validateInclusions,a.validateModifyRequest),e=b.partial(a.addMerchantRefinementToRequest,a.deserializeRefinementParameter);return b.partial(a.productv2,c,a.formatRequest,
a.addUrl,e,a.addAcceptHeader)});g.when("A","ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/aapi/productv2/lib",function(b,a,c,e){return{addAcceptHeader:function(f,d,a){var e="product/v2";d=d.join(",");1<f.length&&(e="collection("+e+")/v1");a.headers=b.extend(a.headers||{},{Accept:'application/vnd.com.amazon.api+json; type\x3d"'+e+'"; expand\x3d"'+d+'"; experiments\x3d"dexAgsDeepCheckPromiseParamsMap_1"'});return a},deserializeRefinementParameter:function(f){var d=
{},a,e;if(!f)return{};f=f.split(",");return b.reduce(f,function(f,b){a=b.split(":");if(2!==a.length||!a[0]||!a[1])return f;e=a[1].split("|");d[a[0]]=e;return d},{})},addMerchantRefinementToRequest:function(a,d){var e=c.getUrlParameter("me"),b=c.getUrlParameter("rh");(a=a(b).p_6)&&1===a.length&&!e&&(e=a[0]);e&&(e="merchantId\x3d"+e,d.url+=(-1===d.url.lastIndexOf("?")?"?":"\x26")+e+"\x26merchantSelectionType\x3dEXCLUSIVE");return d},addUrl:function(a,d){d.url="/products/"+a.join(",");return d},formatRequest:function(){return b.reduce(arguments,
function(a,d){return d(a)},{})},productv2:function(a,d,e,b,g,m,l,k){a(m,l,k);a=[c.partial(e,m),c.partial(g,m,l),b];k&&a.push(k);return d.apply(null,a)},validateArgs:function(a,d,e,b,c,g){a(b);d(c);g&&e(g)},validateAsins:e(c.partial(a.isArray,"asins"),c.partial(a.notEmpty,"asins")),validateModifyRequest:c.partial(a.isType,"modifyRequest","function"),validateInclusions:e(c.partial(a.isArray,"inclusions"),c.partial(a.notEmpty,"inclusions"))}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/assert/lib").register("ags-dc-promise/lib/assert",
function(b,a){return{isArray:b.partial(a.isArray,a.follow),isType:b.partial(a.isType,a.follow),lengthAtLeast:b.partial(a.lengthAtLeast,a.follow),notEmpty:b.partial(a.notEmpty,a.follow)}});g.when("A","ags-dc-promise/lib/latency/event-handler").register("ags-dc-promise/lib/assert/lib",function(b){function a(a){return-1===a.indexOf(" ")?a:'"'+a+'"'}function c(e){return b.isArray(e)?b.map(e,a).join("."):a(e)}return{follow:function(a,f){var d;if("string"===typeof a)return f;if(!b.isArray(a))throw new TypeError("`path` must be a string or Array, not a "+
typeof a);if(1===a.length)return f;for(d=1;d<a.length;++d){if("object"!==typeof f)throw new TypeError(a.slice(0,d).join(".")+" must be an object, not a "+typeof f);f=f[a[d]]}return f},isArray:function(a,f,d){a=a(f,d);if(b.isArray(a))return d;throw new TypeError(c(f)+" should be an Array, not a "+typeof a);},isType:function(a,f,d,b){a=typeof a(f,b);if(a===d)return b;throw new TypeError(c(f)+" should be a "+d+", not a "+a);},lengthAtLeast:function(a,b,d,p){a=a(b,p).length;if(d<=a)return p;throw Error(c(b)+
".length should be at least "+d+" but is "+a);},notEmpty:function(a,b,d){if(0<a(b,d).length)return d;throw Error(c(b)+" is empty");}}});g.when("A","ags-dc-promise/lib/common","ags-dc-promise/lib/memoize","ags-dc-promise/lib/date-format/lib").execute("register:ags-dc-promise/lib/date-format",function(b,a,c,e){var f,d;"undefined"!==typeof r.Intl&&b.$.isFunction(r.Intl.DateTimeFormat)?(b=a.partial(e.format,Intl.DateTimeFormat),b=a.partial(e.convert,b),f=a.partial(e.getToken,e.isLetter),f=a.partial(e.tokenize,
f),d=a.partial(e.unescape,e.SINGLE_QUOTE_RE),d=a.partial(e.getOperation,e.TOKEN_OPERATIONS,d),a=a.partial(e.formatDateStr,f,d,b,e.validateLocale,e.validateFormat),g.declare("ags-dc-promise/lib/date-format",c(a,{}))):g.log("Intl.DateTimeFormat not found","ERROR","ags-dc-promise")});g.when("A","ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/date-format/lib",function(b,a,c,e){return{TOKEN_OPERATIONS:{EEEE:{weekday:"long"},EEE:{weekday:"short"},
E:{weekday:"narrow"},MMMM:{month:"long"},MMM:{month:"short"},MM:{month:"2-digit"},M:{month:"numeric"},dd:{day:"2-digit"},d:{day:"numeric"},yyyy:{year:"numeric"},yy:{year:"2-digit"},"''":"'","'":""},SINGLE_QUOTE_RE:/'{1,2}/g,formatDateStr:function(a,d,e,c,g,m,l){var k;c(m);g(l);a=a(l);k=b.map(a,d);return function(a,d){return e(m,k,new Date(a),d)}},convert:function(a,d,b,e,c){var g=[],l,k;for(l=0;l<b.length;++l)k=b[l],"object"===typeof k?(k.timeZone=c,g.push(a(d,k,e))):g.push(k);return g.join("")},
format:function(a,d,b,e){return(new a(d,b)).format(e)},getOperation:function(a,d,b){if("specifier"===b.type){if(a=a[b.str],"undefined"===typeof a)throw Error("Invalid date format specifier: \x3c"+b.str+"\x3e");}else if("text"===b.type)a=d(b.str);else throw Error("Invalid token: "+JSON.stringify(b));return a},getToken:function(a,d,b){for(var e=d[b],c=!1,g=b;g<d.length&&d[g]===e;)++g;if(a(e))return{type:"specifier",str:d.substring(b,g)};for(g=b;g<d.length&&(c||!a(d[g]));++g)"'"===d[g]&&("'"===d[g+1]?
++g:c=!c);return{type:"text",str:d.substring(b,g)}},isLetter:function(a){a=a.charCodeAt(0);return 65<=a&&90>=a||97<=a&&122>=a},tokenize:function(a,b){var e=[],c,g;for(g=0;g<b.length;)c=a(b,g),e.push(c),g+=c.str.length;return e},unescape:function(a,b){return b.replace(a,function(a){if("'"===a)return"";if("''"===a)return"'"})},validateLocale:e(c.partial(a.isType,"locale","string"),c.partial(a.notEmpty,"locale")),validateFormat:e(c.partial(a.isType,"format","string"),c.partial(a.notEmpty,"format"))}});
g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/on-error","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/promise-handle","ags-dc-promise/lib/fetch/lib").register("ags-dc-promise/lib/fetch",function(b,a,c,e,f){return c(f.validateConfig,function(d){var g=f.newContext(),h=c(f.throwIfInvalidAsin,function(){return null}),h=a(h,d.Promise.reject),n=b.partial(e,d.Promise),n=b.partial(f.addToPromiseHandles,g.promiseHandles,n),m=b.partial(f.addToQueue,g.queue),l=b.partial(f.getNextBatch,g.queue,d.batchSize),
k=b.partial(f.resolveAsin,g.promiseHandles),k=b.partial(f.resolveBatch,k),q=b.partial(f.rejectAsin,g.promiseHandles),q=b.partial(f.rejectBatch,q),k=b.partial(f.requestBatch,d.productv2,d.inclusions,k,q),q=b.partial(f.stopInterval,g,d.clearInterval),l=b.partial(f.requestNextBatch,l,k,q);d=b.partial(f.startInterval,g,d.setInterval,l);g=b.partial(f.getPromise,g.promiseHandles);d=b.partial(f.enroll,n,m,d);return b.partial(f.fetch,h,g,d)})});g.when("A","ags-dc-promise/lib/metrics","ags-dc-promise/lib/assert",
"ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/fetch/lib",function(b,a,c,e,f){return{fetch:function(a,b,e,f){return a(f)||b(f)||e(f)||b(f)},addToPromiseHandles:function(a,b,e){a[e]=b()},addToQueue:function(a,b){a.push({asin:b})},enroll:function(a,b,e,f){a(f);b(f);e()},getPromise:function(a,b){return(a=a[b])&&a.promise},getNextBatch:function(a,b){var e=a.slice(0,b);a.splice(0,b);return e},newContext:function(){return{queue:[],promiseHandles:{},requestInterval:null}},
resolveAsin:function(a,b){a[b.asin].resolve(b)},resolveBatch:function(a,f){var c=[];f.entities?c=b.map(f.entities,e.getProperty("entity")):c.push(f.entity);b.each(c,a)},rejectAsin:function(a,b,e){a[b].reject(e)},rejectBatch:function(a,e,f){b.each(e,function(b){a(b,f)})},requestBatch:function(a,c,g,n,m,l){l=b.map(l,e.getProperty("asin"));n=e.partial(n,l);a(l,c).then(f(g,m)).catch(f(n,m))},requestNextBatch:function(b,f,c){b=b();c=c()?a.onLoad:function(){};e.partial(f,c)(b)},startInterval:function(a,
b,e){return null===a.requestInterval&&0<a.queue.length?(a.requestInterval=b(e,a.batchIntervalMillis),!0):!1},stopInterval:function(a,b){return null!==a.requestInterval&&0===a.queue.length?(b(a.requestInterval),a.requestInterval=null,!0):!1},throwIfInvalidAsin:f(e.partial(c.isType,"asin","string"),e.partial(c.notEmpty,"asin")),validateConfig:f(e.partial(c.isType,["config","productv2"],"function"),e.partial(c.isArray,["config","inclusions"]),e.partial(c.notEmpty,["config","inclusions"]),e.partial(c.isType,
["config","batchIntervalMillis"],"number"),e.partial(c.isType,["config","batchSize"],"number"),e.partial(c.isType,["config","Promise"],"function"),e.partial(c.isType,["config","setInterval"],"function"),e.partial(c.isType,["config","clearInterval"],"function")),validateFunction:e.partial(c.isType,"fn","function")}});g.when("af","ready").register("ags-dc-promise/lib/latency/event-handler");g.when("rush-metrics-adapter","ags-dc-promise/lib/metrics/lib","ags-dc-promise/app/config").register("ags-dc-promise/lib/metrics",
function(b,a,c){return{incrementCounterOnCall:function(e){a.validateCounterName(e);return function(f){a.validateFunction(f);return function(){b.incrementCount(e);return f.apply(null,arguments)}}},setCSMMarker:function(e){a.validateMarker(e);b.setTimer(e,c.attribution,{wb:1})},onLoad:function(){b.publish("ld",c.attribution,{wb:1})}}});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/metrics/lib",function(b,a,c){return{validateCounterName:c(a.partial(b.isType,
"counterName","string"),a.partial(b.notEmpty,"counterName")),validateFunction:a.partial(b.isType,"fn","function"),validateMarker:c(a.partial(b.isType,"marker","string"),a.partial(b.notEmpty,"marker"))}});g.when("A","ags-dc-promise/lib/pipeline/lib").register("ags-dc-promise/lib/pipeline",function(b,a){return function(){var c=Array.prototype.slice.call(arguments);a.validateFns(c);b.each(c,a.validateFn);return b.reduce(c,a.reducer)}});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common").register("ags-dc-promise/lib/pipeline/lib",
function(b,a){return{reducer:function(a,b){return function(){return b(a.apply(null,arguments))}},validateFn:a.partial(b.isType,"fn","function"),validateFns:a.partial(b.lengthAtLeast,"fns",2)}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/repaint/lib").register("ags-dc-promise/lib/repaint",function(b,a,c){return a(c.validateBuildFormatDateStr,function(e){var f=b.partial(c.removeEmptySpans,c.EMPTY_SPAN_RE),d=a(c.formatDateTemplate,f),f=a(c.formatDateRangeTemplate,
f),g=b.partial(c.paint,c.getDeliveryDateValueOrRange);return b.partial(c.repaint,d,f,e,g)})});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/repaint/lib",function(b,a,c){return{EMPTY_SPAN_RE:/<span><\/span>/g,formatDateTemplate:function(a,b,d){a=a(d.dateTime,d.zoneId);return('\x3cspan aria-label\x3d"'+b.replace("{date}",a)+'"\x3e\x3cspan dir\x3d"auto"\x3e'+b+"\x3c/span\x3e\x3c/span\x3e").replace("{date}",'\x3c/span\x3e\x3cspan class\x3d"a-text-bold" dir\x3d"auto"\x3e'+
a+"\x3c/span\x3e\x3cspan\x3e")},formatDateRangeTemplate:function(a,b,d){var c=a(d.min.dateTime,d.min.zoneId);a=a(d.max.dateTime,d.max.zoneId);d=b.replace("{from}",c).replace("{to}",a);a='\x3cspan class\x3d"a-text-bold" dir\x3d"auto"\x3e'+a+"\x3c/span\x3e\x3cspan\x3e";return('\x3cspan aria-label\x3d"'+d+'"\x3e\x3cspan dir\x3d"auto"\x3e'+b+"\x3c/span\x3e\x3c/span\x3e").replace("{from}",'\x3c/span\x3e\x3cspan class\x3d"a-text-bold" dir\x3d"auto"\x3e'+c+"\x3c/span\x3e").replace("{to}",a)},getDeliveryDateValueOrRange:c(a.partial(b.isArray,
["entity","buyingOptions"]),a.getProperty("buyingOptions"),a.partial(a.findFirst,function(a){return"object"===typeof a.delivery}),a.partial(b.isArray,["buyingOption","delivery","entity","messageInstructions"]),a.getProperty("delivery"),a.getProperty("entity"),a.getProperty("messageInstructions"),a.partial(a.findFirst,function(a){return"AMAZON_GLOBAL_STORE"===a.type}),a.partial(b.isArray,["messageInstruction","messageData"]),a.getProperty("messageData"),a.partial(a.findFirst,function(a){return"AMAZON_GLOBAL_STORE"===
a.key}),a.partial(b.isType,["messageData","promise","deliveryDateValueOrRange"],"object"),a.getProperty("promise"),a.getProperty("deliveryDateValueOrRange")),paint:function(a,b,d,c){c=a(c);a=c.deliveryDate;c=c.deliveryDateRange;if(a)return b(a);if(c)return d(c);throw Error("no delivery date or range present");},removeEmptySpans:function(a,b){return b.replace(a,"")},repaint:function(b,c,d,g,h,n){var m=h.elem().children.item(0);d=d(h.prop("locale"),h.prop("format"));b=a.partial(b,d,h.prop("dateTemplate"));
c=a.partial(c,d,h.prop("dateRangeTemplate"));b=g(b,c,n);m?h.replace(m,b):h.append(h.elem(),b)},validateBuildFormatDateStr:a.partial(b.isType,"formatDateStr","function")}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/promise-handle","ags-dc-promise/lib/retry/lib").register("ags-dc-promise/lib/retry",function(b,a,c,e){return a(e.validateConfig,function(a){return function(d){e.validateFn(d);return function(){var g=Array.prototype.slice.call(arguments),h=c(a.Promise),
n,m=b.partial(e.retry,a.setTimeout,function(){n()}),m=b.partial(e.rejectOrRetry,a.getNextDelay,h.reject,m);n=b.partial(e.runStrategy,d,g,h.resolve,m);n();return h.promise}}})});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/retry/lib",function(b,a,c){return{rejectOrRetry:function(a,b,c,g){a=a(g);null===a?b(g):c(a)},retry:function(a,b,c){a(b,c)},runStrategy:function(a,b,c,g){a.apply(null,b).then(c).catch(g)},retryStrategyProvider:{"max-attempts":function(a){g.when("ags-dc-promise/lib/retry/strategy/max-attempts").register("ags-dc-promise/app/retry/strategy",
a)}},validateConfig:c(a.partial(b.isType,["config","Promise"],"function"),a.partial(b.isType,["config","getNextDelay"],"function"),a.partial(b.isType,["config","setTimeout"],"function")),validateFn:a.partial(b.isType,"fn","function")}});g.when("ags-dc-promise/lib/common","ags-dc-promise/lib/counter","ags-dc-promise/lib/pipeline","ags-dc-promise/lib/retry/strategy/max-attempts/lib").register("ags-dc-promise/lib/retry/strategy/max-attempts",function(b,a,c,e){return c(e.validateConfig,function(c){return b.partial(e.getNextDelay,
a(),c.maxAttempts,c.delay)})});g.when("ags-dc-promise/lib/assert","ags-dc-promise/lib/common","ags-dc-promise/lib/pipeline").register("ags-dc-promise/lib/retry/strategy/max-attempts/lib",function(b,a,c){return{getNextDelay:function(a,b,c,g){return a()<b&&500>g.status?c:null},validateConfig:c(a.partial(b.isType,["config","maxAttempts"],"number"),a.partial(b.isType,["config","delay"],"number"))}});g.when("rush-framework","ags-dc-promise/lib/metrics","ags-dc-promise/app/component").execute("register:ags-dc-promise/app/component",
function(b,a,c){a.setCSMMarker("bb");b.registerComponent(c.name,c.attribution,c.controller)})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,k=n?n("PostsSharedFeedAssets","PostsSharedFeedAssets"):m;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,m,n){var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p=function(){function g(f,e){for(var a=0;a<e.length;a++){var b=
e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(f,e,a){e&&g(f.prototype,e);a&&g(f,a);return f}}();l.now("posts-sushi-client").execute(function(g){"undefined"===typeof g&&l.register("posts-sushi-client",function(){var f=["messageId","timestamp"];return function(){function e(a,b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.endpoint=b;this.window=a;this.eventsQueue=[];this.eventsDictionary=
{};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(b){var f=function(){};b=function(){var b=function(){if(a.XDomainRequest){var d=new a.XDomainRequest;d.onerror=f;d.ontimeout=f;d.onprogress=f;d.onload=f;d.timeout=0;return d}if(a.XMLHttpRequest){d=new a.XMLHttpRequest;
if(!("withCredentials"in d))throw"";return d}return null};return{send:function(a,c){if(c&&a){var h=b();if(!h)throw"";h.open("POST",a,!0);h.setRequestHeader&&h.setRequestHeader("Content-type","text/plain");h.send(c)}},isSupported:!0}}();var e=function(){return{send:function(b,d){if(b&&d&&!a.navigator.sendBeacon(b,d))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();return{ajaxClient:b,beaconClient:e}}(this);this.compressor=function(a){var b=
function(d){if(d)switch("undefined"===typeof d?"undefined":k(d)){case "number":return!(d!==d||Infinity===d)&&d.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return d.length>a.dictionaryIndex.length;default:return!0}return!1},e=function(d){a.eventsDictionary[d]||(a.eventsDictionary[d]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[d]]=d);return a.eventsDictionary[d]},g=function(a){if(b(a)){var c=0;a instanceof Array?c=2:a instanceof Function?c=null:
a instanceof Object&&(c=1);switch(c){case 0:return e(a);case 2:for(var h=[],c=0;c<a.length;c++)h[c]=g(a[c]);return h;case 1:c={};for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(c[e(h)]=-1===f.indexOf(h)?g(a[h]):a[h]);return c}}return a};return{compressData:g,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}p(e,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&(this.flush(this),this.unloadHandlerCalled=!0)}},
{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(b){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();
return a.send(this.endpoint,b)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];for(a=0;a<b.length;a++){c=b[a];try{return this.sendWithClient(c)}catch(f){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===this.highPriorityFlushInterval?this.flush(this):
this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,b){return a+"-"+b+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?
a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||{}).n?this.startHighPriorityQueueTimer():
this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,b,c){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(c)}},{key:"addEvent",value:function(a,b){this.decorateEvent(a,b);var c=this.stringify(a);return c?(this.encodeEvent(a,c,b),!0):!1}},{key:"isValidAPIParam",value:function(a,b){return a&&-1<a.constructor.toString().indexOf(b)}},{key:"isMaxCallsReached",
value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,b){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,b){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("ACEPostsMetrics:"+a,0===b?0:b||(ue.count("ACEPostsMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,b){var c=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a,
this.options)&&(c=this.addEvent(a,this.options));c?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return c}}]);return e}()})});"use strict";l.now("posts-clamp").execute(function(g){"undefined"===typeof g&&l.register("posts-clamp",function(){return function(f,e){function a(a,b){m.getComputedStyle||(m.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var d=/(-([a-z]){1})/g;"float"==
b&&(b="styleFloat");d.test(b)&&(b=b.replace(d,function(a,b,d){return d.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this});return m.getComputedStyle(a).getPropertyValue(b)}function b(b){var c=a(f,"line-height");"normal"==c&&(c=1.2*parseInt(a(f,"font-size")));return parseInt(c)*b}function c(a){if(a.lastChild.children&&0<a.lastChild.children.length)return c(Array.prototype.slice.call(a.children).pop());if(a.lastChild&&a.lastChild.nodeValue&&""!=a.lastChild.nodeValue&&
a.lastChild.nodeValue!=e.truncationChar)return a.lastChild;a.lastChild.parentNode.removeChild(a.lastChild);return c(f)}function g(a,b){if(b&&!(f.clientHeight<=b))for(;f.clientHeight>b;){var c=a.nodeValue.split("");if(1<c.length){do{c.pop();var e=c.join("");a.nodeValue=e}while(/[\s\n,.]+/.test(c[c.length-1])&&1<c.length)}k&&(f.innerHTML=a.nodeValue+k.innerHTML)}}if(f!==n){e=e||{};var l=e.clamp||2,k;e.truncationHTML&&(k=document.createElement("span"),k.innerHTML=e.truncationHTML);l=b(l);g(c(f),l)}}})})});
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,q=n?n("BrandFollowButtonJS",""):m;q.guardFatal?q.guardFatal(l)(q,window):q.execute(function(){l(q,window)})})(function(l,m,n){var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u=function(){function g(c,a){for(var e=0;e<a.length;e++){var f=a[e];f.enumerable=
f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(c,f.key,f)}}return function(c,a,e){a&&g(c.prototype,a);e&&g(c,e);return c}}();l.when("A").register("brand-follow-constants",function(){return{Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR:"span[class*\x3dbrand-follow-button-container]",Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR:"span[class*\x3dbrand-follow-button]",Brand_FOLLOW_BUTTON_SELECTOR:"button[data-bfid]",Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR:'button[data-bfid][data-showtooltip\x3d"true"]',
BRAND_FOLLOW_STATUS_MAP:"brand-follow-status",BRAND_FOLLOW_STATUS:{FOLLOWING:"following",NOT_FOLLOWING:"not_following",PENDING:"pending",NOT_SIGNED_IN:"not_signed_in",ERROR:"error"},BRAND_FOLLOW_CSRF_KEY:"brand-follow-csrf",BRAND_FOLLOW_CSRF_DATA_KEY:"csrf",BRAND_FOLLOW_LAST_CLICK_EVENT_MAP:"brand-follow-last-click-event-map",BFID_DATA_KEY:"bfid",FOLLOW_STATUS_DATA_KEY:"followstatus",FOLLOW_TEXT_DATA_KEY:"followtext",FOLLOWING_TEXT_DATA_KEY:"followingtext",REQUEST_ID_DATA_KEY:"requestid",PLACEMENT_TYPE_DATA_KEY:"placementtype",
PLACEMENT_SUB_TYPE_DATA_KEY:"placementsubtype",PLACEMENT_ID_DATA_KEY:"placementid",COMPONENT_TYPE_DATA_KEY:"componenttype",COMPONENT_ID_DATA_KEY:"componentid",ELEMENT_TYPE_DATA_KEY:"elementtype",ELEMENT_ID_DATA_KEY:"elementid",TOOLTIP_TEXT_DATA_KEY:"tooltiptext",BACK_BUTTON_SUPPORT_ENABLED_DATA_KEY:"backbuttonsupportenabled",ARIA_LABEL_KEY:"aria-label",ARIA_LABEL_FOLLOW_DATA_KEY:"arialabelfollow",ARIA_LABEL_FOLLOWING_DATA_KEY:"arialabelfollowing",HIDE_TOOLTIP_KEY:"brand_follow_hide_tooltip",TOOLTIP_DISPLAY_TIME:5E3,
TOOLTIP_STATUS_SHOWN:"SHOWN",TOOLTIP_STATUS_NOT_SHOWN:"NOT_SHOWN",TOOLTIP_STATUS_DISABLED:"DISABLED",FOLLOW_AJAX_TIMEOUT:2E3,FOLLOW_AJAX_RETRIES:2,FOLLOW_ENDPOINT:"/followv2/follow",FOLLOW_ENTITY_TYPE:"brand",FOLLOW_REF_TAG:"bft",FOLLOW_CSM_PREFIX:"BrandFollow",FOLLOW_CSM_SUCCESS:"Success",FOLLOW_CSM_FAIL:"Fail",FOLLOW_CSM_FOLLOW:"Follow",FOLLOW_CSM_UNFOLLOW:"Unfollow",FOLLOW_CSM_GET_FOLLOW_STATUS:"GetFollowStatus",HTTP_GET:"GET",HTTP_POST:"POST",HTTP_DELETE:"DELETE",SIGN_IN_PORTAL:"/ap/signin",AUTH_PORTAL_ASSOC_HANDLE:{"amazon.com":"usflex",
"amazon.co.uk":"gbflex","amazon.de":"deflex","amazon.fr":"frflex","amazon.es":"esflex","amazon.in":"inflex","amazon.it":"itflex","amazon.co.jp":"jpflex","amazon.ca":"caflex"},BREAKPOINTS:{MOBILE:840},SUSHI_ENDPOINT:{gamma:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Gamma.ClientEvents",prod:"https://unagi-na.amazon.com/1/events/com.amazon.eel.BrandFollowButtonMetrics.Prod.ClientEvents"},EVENT_TYPE:{FOLLOW:"Follow",UNFOLLOW:"Unfollow"}}});"use strict";l.when("A","brand-follow-constants").register("brand-follow-auth-portal-link-builder",
function(g,c){return{signin:function(){var a={"openid.ns":"http://specs.openid.net/auth/2.0","openid.claimed_id":"http://specs.openid.net/auth/2.0/identifier_select","openid.identity":"http://specs.openid.net/auth/2.0/identifier_select","openid.mode":"checkid_setup","openid.return_to":m.location.href,"openid.assoc_handle":c.AUTH_PORTAL_ASSOC_HANDLE[m.location.hostname.replace(/.+?(?=amazon)/,"")]};return c.SIGN_IN_PORTAL+"?"+g.$.param(a)}}});"use strict";l.register("brand-follow-csm-helper",function(){return{incrementCSMCounter:function(g,
c){m.ue&&m.ue.count&&m.ue.count(g,(m.ue.count(g)||0)+1,c)},logBodyBegin:function(g){"function"==typeof uet&&uet("bb",g,{wb:1})},sendCsmMetrics:function(g){"function"==typeof uex&&uex("ld",g,{wb:1})}}});"use strict";l.when("A","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-data-storage-helper",function(g,c,a){var e={set:function(a,e,c){var h={};h[e]=c;g.state(a,h)},get:function(a){return g.state(a)},setFollowStatus:function(a,k){e.set(c.BRAND_FOLLOW_STATUS_MAP,a,k)},getFollowStatus:function(a){var k=
e.get(c.BRAND_FOLLOW_STATUS_MAP);return k===n?n:k[a]},setLastClickEvent:function(a,k){e.set(c.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP,a,k)},getLastClickEvent:function(f){var k=c.FOLLOW_CSM_PREFIX+":dataStorageHelper:getLastClickAction";a.incrementCSMCounter(k);var p=e.get(c.BRAND_FOLLOW_LAST_CLICK_EVENT_MAP);if(p===n)return a.incrementCSMCounter(k+":emptyMap"),n;(f=p[f])||a.incrementCSMCounter(k+":notFoundInMap");return f},setCsrf:function(a){e.set(c.BRAND_FOLLOW_CSRF_KEY,c.BRAND_FOLLOW_CSRF_DATA_KEY,a)},
getCsrf:function(){var a=e.get(c.BRAND_FOLLOW_CSRF_KEY);return a===n?n:a[c.BRAND_FOLLOW_CSRF_DATA_KEY]}};return e});"use strict";l.when("A","brand-follow-constants","brand-follow-data-storage-helper","brand-follow-csm-helper").register("brand-follow-afs-helper",function(g,c,a,e){var f={makeCallToAfs:function(a,f,h,b,d,r){var t=c.FOLLOW_CSM_PREFIX+":"+a;e.incrementCSMCounter(t);(function v(l){e.logBodyBegin(r);g.$.ajax({url:f,type:a,headers:{Accept:"application/json","Content-Type":"application/json"},
data:h,dataType:"json",cache:!1,timeout:c.FOLLOW_AJAX_TIMEOUT,success:function(a,d,k){e.incrementCSMCounter(t+":"+c.FOLLOW_CSM_SUCCESS);e.sendCsmMetrics(r);"function"===typeof b&&b(a,d,k)},error:function(b,h,f){if("timeout"===h&&l)e.incrementCSMCounter(t+":timeout"),v(--l);else{var p=t+":"+c.FOLLOW_CSM_FAIL;e.incrementCSMCounter(p);"timeout"===h&&e.incrementCSMCounter(p+":timeout");e.sendCsmMetrics(r);m.ueLogError&&m.ueLogError({logLevel:"WARN",attribution:"BrandFollowKataComponentAssets",message:"AFS "+
a+" call failed with status "+h+", error thrown: "+f+", response text: "+b.responseText});"function"===typeof d&&d(b,h,f)}}})})(c.FOLLOW_AJAX_RETRIES)},getFollowStatusAndInitCsrf:function(e,p,h,b){f.makeCallToAfs(c.HTTP_GET,c.FOLLOW_ENDPOINT+"/"+e+"_"+c.FOLLOW_ENTITY_TYPE,{ref:c.FOLLOW_REF_TAG},function(d,e,c){d.signedIn?(a.setCsrf(d.csrf),"function"===typeof p&&p(d)):"function"===typeof b&&b()},h,c.FOLLOW_CSM_PREFIX+":"+c.FOLLOW_CSM_GET_FOLLOW_STATUS)},follow:function(e,p,h,b){var d=c.FOLLOW_CSM_PREFIX+
":"+c.FOLLOW_CSM_FOLLOW,r=function(){f.makeCallToAfs(c.HTTP_POST,c.FOLLOW_ENDPOINT,JSON.stringify({authenticity_token:a.getCsrf(),entity_id:e,category:c.FOLLOW_ENTITY_TYPE,ref:c.FOLLOW_REF_TAG}),p,h,d)};a.getCsrf()===n?f.getFollowStatusAndInitCsrf(e,r,n,b):r()},unfollow:function(e,p,h){var b=c.FOLLOW_CSM_PREFIX+":"+c.FOLLOW_CSM_UNFOLLOW,d=function(){f.makeCallToAfs(c.HTTP_DELETE,c.FOLLOW_ENDPOINT+"/"+e+"_"+c.FOLLOW_ENTITY_TYPE+"?"+g.$.param({authenticity_token:a.getCsrf(),ref:c.FOLLOW_REF_TAG}),n,
p,h,b)};a.getCsrf()===n?f.getFollowStatusAndInitCsrf(e,d):d()}};return f});"use strict";l.when("A").register("brand-follow-button-tooltip-factory",function(g){g=g.$;var c=g("\x3cdiv class\x3d'brand-follow-tooltip-root'/\x3e").appendTo("body");return{getOrCreateTooltip:function(){0===c.children().length&&c.append("\x3cdiv role\x3d'tooltip' class\x3d'bf-tooltip' id\x3d'bf-tooltip' aria-hidden\x3d'true' style\x3d'z-index: 299; visibility: hidden; opacity: 0;'\x3e\x3cdiv class\x3d'bf-tooltip-inner'\x3eFollow to see more from this brand on Amazon\x3c/div\x3e\x3cdiv class\x3d'bf-arrow-border'\x3e\x3cdiv class\x3d'bf-arrow'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");
return c.children().first()}}});"use strict";l.when("A").register("brand-follow-button-tooltip-position",function(g){function c(){if(1===g.viewport().zoom)return{top:0,left:0};h||(h=p('\x3cspan id\x3d"bf-tooltip-offset-tracker"\x3e\x3c/span\x3e'),p("body").prepend(h));var b;p.withoutRtl(function(){b=h.offset()});return b}function a(b,a){var e=g.viewport(),h=c(),k,f;p.withoutRtl(function(){k=a.offset();f=b.offset()});k.top-=h.top;k.left-=h.left;f.top-=h.top;f.left-=h.left;var m=a.outerWidth(),l=a.outerHeight(),
n=b.outerWidth(!0),q=b.outerHeight(!0);return{windowWidth:e.width,windowHeight:e.height,windowTop:e.scrollTop,windowLeft:e.scrollLeft,windowRight:e.scrollLeft+e.width,windowBottom:e.scrollTop+e.height,zoomTop:h.top,zoomLeft:h.left,triggerWidth:m+1,triggerHeight:l,triggerTop:k.top-1,triggerLeft:k.left-1,triggerRight:k.left+m+1,triggerBottom:k.top+l+1,triggerVerticalCenter:k.top+l/2,triggerHorizontalCenter:k.left+m/2,popoverWidth:n,popoverHeight:q,popoverTop:f.top,popoverLeft:f.left,popoverRight:f.left+
n,popoverBottom:f.top+q,popoverVerticalCenter:f.top+q/2,popoverHorizontalCenter:f.left+n/2}}function e(b){return b.removeClass("a-arrow-top a-arrow-bottom a-arrow-left a-arrow-right")}function f(b){var a={deltaTop:0},e;a.top=b.triggerVerticalCenter-b.popoverHeight/2;a.top<b.windowTop+15?(e=Math.min(b.windowTop+15,b.triggerTop-15),a.deltaTop=a.top-e,a.top=e):a.top+b.popoverHeight>b.windowBottom-15&&(e=Math.min(15,b.windowBottom-b.triggerBottom+15),a.deltaTop=a.top+b.popoverHeight-(b.windowBottom-e),
a.top=b.windowBottom-e-b.popoverHeight);return a}function k(a){var d={deltaLeft:0},e;d.left=a.triggerHorizontalCenter-a.popoverWidth/2;15>d.left?(e=Math.min(15,a.triggerLeft-15),d.deltaLeft=d.left-e,d.left=e):d.left+a.popoverWidth>a.windowRight-15&&(e=Math.min(15,a.windowRight-a.triggerRight+15),d.deltaLeft=d.left+a.popoverWidth-(a.windowRight-e),d.left=a.windowRight-e-a.popoverWidth);return d}var p=g.$;p(m);var h=null;return{windowCenter:function(b){b=a(b.$popover,b.$trigger);var d={};d.top=(b.windowHeight-
b.popoverHeight)/2;d.left=(b.windowWidth-b.popoverWidth)/2;0>d.top&&(d.top=0);return d},windowTop:function(b){b=a(b.$popover,b.$trigger);var d={top:0};d.left=b.windowWidth/2-b.popoverWidth/2;return d},windowFullWidth:function(a){return{top:0,left:0}},triggerRight:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=f(d);b.left=d.triggerRight;e(c).addClass("a-arrow-right");c.find(".bf-arrow-border").css("top",d.popoverHeight/2+b.deltaTop);return b},triggerLeft:function(b,d){var c=b.$popover;
b=b.$trigger;d||(d=a(c,b));b=f(d);b.left=d.triggerLeft-d.popoverWidth;b.left=0<b.left?b.left:0;e(c).addClass("a-arrow-left");c.find(".bf-arrow-border").css("top",d.popoverHeight/2+b.deltaTop);return b},triggerTop:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=k(d);b.top=d.triggerTop-d.popoverHeight;e(c).addClass("a-arrow-top");c.find(".bf-arrow-border").css("left",d.popoverWidth/2+b.deltaLeft);return b},triggerBottom:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b=k(d);b.top=
d.triggerBottom;e(c).addClass("a-arrow-bottom");c.find(".bf-arrow-border").css("left",d.popoverWidth/2+b.deltaLeft);return b},triggerHorizontal:function(b,d){var e=b.$popover,c=b.$trigger;d||(d=a(e,c));return d.triggerLeft-d.windowLeft>d.windowRight-d.triggerRight?this.triggerLeft(b,d):this.triggerRight(b,d)},triggerVertical:function(b,d){var e=b.$popover,c=b.$trigger;d=d?d:a(e,c);return d.triggerTop-d.windowTop>d.popoverHeight+15?this.triggerTop(b,d):this.triggerBottom(b,d)},triggerVerticalAlignLeft:function(b,
d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b={};var k=0,h=0,f=d.windowBottom-d.triggerBottom;b.left=d.triggerLeft;b.top=f>d.popoverHeight?d.triggerBottom+3:d.triggerTop-d.popoverHeight-3;15>b.left?(h=Math.min(15,d.triggerLeft-15),k=b.left-h,b.left=h):b.left+d.popoverWidth>d.windowRight-15&&(h=Math.min(15,d.windowRight-d.triggerRight+15),k=b.left+d.popoverWidth-(d.windowRight-h),b.left=d.windowRight-h-d.popoverWidth);e(c).addClass(f>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");p.withoutRtl(function(){c.find(".bf-arrow-border").css("left",
d.triggerWidth/2+k)});return b},triggerBottomAlignRight:function(b,d){var c=b.$popover;b=b.$trigger;d||(d=a(c,b));b={};var h=0,k=0,f=d.windowBottom-d.triggerBottom;b.left=d.triggerRight-d.popoverWidth;b.top=d.triggerBottom+3;15>b.left?(k=Math.max(0,b.left),h=k-b.left,b.left=k):b.left+d.popoverWidth>d.windowRight-15&&(k=Math.min(15,d.windowRight-d.triggerRight+15),h=b.left+d.popoverWidth-(d.windowRight-k),b.left=d.windowRight-k-d.popoverWidth);e(c).addClass(f>d.popoverHeight?"a-arrow-bottom":"a-arrow-top");
p.withoutRtl(function(){c.find(".bf-arrow-border").css("right",d.triggerWidth/2+h)});return b},customPosition:function(b,d){return d.call(this,{popover:b,$popover:b.$popover,$trigger:b.$trigger,measure:a})}}});"use strict";l.when("A","brand-follow-button-tooltip-factory","brand-follow-button-tooltip-position","brand-follow-constants").register("brand-follow-button-tooltip",function(g,c,a,e){var f=g.$;return{show:function(k){var p=c.getOrCreateTooltip(),h=f(k);k=h.data(e.TOOLTIP_TEXT_DATA_KEY);h=a.triggerBottomAlignRight({$popover:p,
$trigger:h});k&&p.find(".bf-tooltip-inner").first().text(k);p.css({top:h.top+"px",left:h.left+6+"px",visibility:"visible",opacity:1,transition:"opacity 0.5s"})},hide:function(){c.getOrCreateTooltip().css({visibility:"hidden",opacity:0,transition:"visibility 0s 0.5s, opacity 0.5s linear"})}}});"use strict";l.register("brand-follow-sushi-client",function(){var g=["messageId","timestamp"];return function(){function c(a,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.endpoint=e;this.window=a;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.rejectedEvents=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=function(e){var c=function(){};e=function(){var e=function(){if(a.XDomainRequest){var b=new a.XDomainRequest;b.onerror=c;b.ontimeout=c;b.onprogress=c;
b.onload=c;b.timeout=0;return b}if(a.XMLHttpRequest){b=new a.XMLHttpRequest;if(!("withCredentials"in b))throw"";return b}return null};return{send:function(a,d){if(d&&a){var c=e();if(!c)throw"";c.open("POST",a,!0);c.setRequestHeader&&c.setRequestHeader("Content-type","text/plain");c.send(d)}},isSupported:!0}}();var p=function(){return{send:function(e,b){if(e&&b&&!a.navigator.sendBeacon(e,b))throw"";},isSupported:!!a.navigator.sendBeacon&&!(a.cordova&&a.cordova.platformId&&"ios"===a.cordova.platformId)}}();
return{ajaxClient:e,beaconClient:p}}(this);this.compressor=function(a){var e=function(b){if(b)switch("undefined"===typeof b?"undefined":q(b)){case "number":return!(b!==b||Infinity===b)&&b.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return b.length>a.dictionaryIndex.length;default:return!0}return!1},c=function(b){a.eventsDictionary[b]||(a.eventsDictionary[b]=a.dictionaryIndex++,a.reverseEventsDictionary[a.eventsDictionary[b]]=b);return a.eventsDictionary[b]},h=function(a){if(e(a)){var d=
0;a instanceof Array?d=2:a instanceof Function?d=null:a instanceof Object&&(d=1);switch(d){case 0:return c(a);case 2:for(var f=[],d=0;d<a.length;d++)f[d]=h(a[d]);return f;case 1:d={};for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&(d[c(f)]=-1===g.indexOf(f)?h(a[f]):a[f]);return d}}return a};return{compressData:h,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this)}u(c,[{key:"onBeforeUnload",value:function(){!0!==this.unloadHandlerCalled&&
(this.flush(this),this.unloadHandlerCalled=!0)}},{key:"stringify",value:function(a){try{return JSON.stringify(a)}catch(e){console.warn("Fail to stringify data")}return null}},{key:"resetBatch",value:function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0}},{key:"sendWithClient",value:function(a){if(null==this.endpoint||""==this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var e=
this.compressor.buildPOSTObject();return a.send(this.endpoint,e)}throw"";}}},{key:"sendWithPriority",value:function(){for(var a=arguments.length,e=Array(a),c=0;c<a;c++)e[c]=arguments[c];for(a=0;a<e.length;a++){c=e[a];try{return this.sendWithClient(c)}catch(k){}}return null}},{key:"flush",value:function(a){a.eventsQueue.length&&(a.sendWithPriority(a.transportationClient.beaconClient||{},a.transportationClient.ajaxClient||{}),a.resetBatch())}},{key:"startHighPriorityQueueTimer",value:function(){0===
this.highPriorityFlushInterval?this.flush(this):this.highPriorityTimer||(this.highPriorityTimer=this.window.setTimeout(this.flush,this.highPriorityFlushInterval,this))}},{key:"startLowPriorityQueueTimer",value:function(){this.lowPriorityTimer||(this.lowPriorityTimer=this.window.setTimeout(this.flush,this.lowPriorityFlushInterval,this))}},{key:"generateMessageId",value:function(a,c){return a+"-"+c+"-"+this.eventSequence}},{key:"getCurrentISODate",value:function(){var a=new Date,c=function(a){return 10>
a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}},{key:"decorateEvent",value:function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())}},{key:"startTimers",value:function(a){(a||
{}).n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()}},{key:"encodeEvent",value:function(a,c,f){c=c.length;(499===this.eventsQueue.length||524288<this.batchSize+c)&&this.flush(this);this.batchSize+=c;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(f)}},{key:"addEvent",value:function(a,c){this.decorateEvent(a,c);var f=this.stringify(a);return f?(this.encodeEvent(a,f,c),!0):!1}},{key:"isValidAPIParam",value:function(a,c){return a&&-1<a.constructor.toString().indexOf(c)}},
{key:"isMaxCallsReached",value:function(){this.eventSequence++;5E4<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 5E4<this.eventSequence}},{key:"isValidAPICall",value:function(a,c){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")}},{key:"ueCount",value:function(a,c){"undefined"!==typeof ue&&ue&&ue.count&&ue.count("BrandFollowMetrics:"+a,0===c?0:c||(ue.count("BrandFollowMetrics:"+a)||0)+1)}},{key:"processEvent",value:function(a,c){var f=this.unloadHandlerCalled=
!1;this.options=c||{};this.isValidAPICall(a,this.options)&&(f=this.addEvent(a,this.options));f?this.ueCount("ClientEventsSuccess:"+a.event_type):(console.error("Invalid JS SushiEel API call"),this.ueCount("ClientEventsFailed:"+a.event_type));return f}}]);return c}()});"use strict";l.when("A","brand-follow-sushi-client","brand-follow-constants").register("brand-follow-metrics-client",function(g,c,a){var e=g.$;g=document.domain;g=0===g.indexOf("www.amazon")||0===g.indexOf("smile.amazon");var f=new c(m,
a.SUSHI_ENDPOINT[g?"prod":"gamma"]);return{getAttributeMapFromElement:function(c){var f=e(c).data(a.BFID_DATA_KEY),h=e(c).data(a.REQUEST_ID_DATA_KEY),b=e(c).data(a.PLACEMENT_TYPE_DATA_KEY),d=e(c).data(a.PLACEMENT_SUB_TYPE_DATA_KEY),g=e(c).data(a.PLACEMENT_ID_DATA_KEY),m=e(c).data(a.COMPONENT_TYPE_DATA_KEY),l=e(c).data(a.COMPONENT_ID_DATA_KEY),n=e(c).data(a.ELEMENT_TYPE_DATA_KEY);c=e(c).data(a.ELEMENT_ID_DATA_KEY);return{bfid:f,request_id:h,placement_type:b,placement_sub_type:d,placement_id:g,component_type:m,
component_id:l,element_type:n,element_id:c}},buildFollowButtonClickMetricEvent:function(a,c,e){a=this.getAttributeMapFromElement(a);return{bfid:a.bfid,request_id:a.request_id,placement_type:a.placement_type,placement_sub_type:a.placement_sub_type,placement_id:a.placement_id,component_type:a.component_type,component_id:a.component_id,element_type:a.element_type,element_id:a.element_id,event_type:c,tooltip_status:m.brandFollowTooltipStatus,timestamp:Date.now(),event_source:m.location.href,schema_version:1}},
processMetricEvent:function(a,c){f.processEvent(a,c)}}});"use strict";l.when("A","brand-follow-constants","brand-follow-button-tooltip","brand-follow-data-storage-helper").execute("brand-follow-tooltip-helper",function(g,c,a,e){var f=g.$;g.on("brandFollow:followButton:loaded",function(){var e;try{e="true"!==localStorage.getItem(c.HIDE_TOOLTIP_KEY)}catch(d){e=!1}if(e)if(e=f(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR),e.length)if(g.capabilities.mobile||g.capabilities.tablet||screen.width<=c.BREAKPOINTS.MOBILE){var b=
e.get(0);a.show(b);m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_SHOWN;k(b)?p():f(m).scroll(g.throttle(function(){k(b)&&p()},200))}else f(c.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave"),f(c.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(c.Brand_FOLLOW_BUTTON_WITH_TOOLTIP_SELECTOR,"mouseenter mouseleave",function(b){"mouseenter"===b.type?(a.show(b.target),m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_SHOWN,localStorage.setItem(c.HIDE_TOOLTIP_KEY,
"true")):"mouseleave"===b.type&&a.hide()});else m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_DISABLED;else m.brandFollowTooltipStatus=c.TOOLTIP_STATUS_NOT_SHOWN});var k=function(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(m.innerHeight||document.documentElement.clientHeight)&&a.right<=(m.innerWidth||document.documentElement.clientWidth)},p=function(){localStorage.setItem(c.HIDE_TOOLTIP_KEY,"true");setTimeout(function(){a.hide()},c.TOOLTIP_DISPLAY_TIME)}});"use strict";l.when("A",
"brand-follow-data-storage-helper","brand-follow-constants","brand-follow-csm-helper").register("brand-follow-shared-utils",function(g,c,a,e){var f=g.$;m.BrandFollowSharedUtils={getLastClickAction:function(k){var g=a.FOLLOW_CSM_PREFIX+":sharedUtils:getLastClickAction";e.incrementCSMCounter(g);var h;h=a.FOLLOW_CSM_PREFIX+":sharedUtils:getBFID";e.incrementCSMCounter(h);k?"string"===typeof k?h=k:k instanceof Element&&1===k.nodeType?((k=f(k).find(a.Brand_FOLLOW_BUTTON_SELECTOR).andSelf().filter(a.Brand_FOLLOW_BUTTON_SELECTOR).first().data(a.BFID_DATA_KEY))||
e.incrementCSMCounter(h+":notFound"),h=k):(e.incrementCSMCounter(h+":unknownInput"),h=void 0):h=void 0;h||e.incrementCSMCounter(g+":emptyBFID");(h=c.getLastClickEvent(h))||e.incrementCSMCounter(g+":emptyResponse");return h},isFollowing:function(e){return c.getFollowStatus(e)===a.BRAND_FOLLOW_STATUS.FOLLOWING}}});"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants").register("on-brand-follow-status-change",function(g,c,a){var e=g.$;g.state.bind("brand-follow-status",
function(f,k){for(var g in k)k.hasOwnProperty(g)&&k[g]&&(c.getFollowStatus(g)===a.BRAND_FOLLOW_STATUS.FOLLOWING?e("[data-bfid\x3d'"+g+"']").each(function(){e(this).text(e(this).data(a.FOLLOWING_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))}):e("[data-bfid\x3d'"+g+"']").each(function(){e(this).text(e(this).data(a.FOLLOW_TEXT_DATA_KEY));e(this).attr(a.ARIA_LABEL_KEY,e(this).data(a.ARIA_LABEL_FOLLOW_DATA_KEY))}))})});"use strict";l.when("A").register("brand-follow-button-event-helper",
function(g){return{triggerFollowButtonLoadedEvent:function(){g.trigger("brandFollow:followButton:loaded")},triggerFollowButtonRedirectionEvent:function(c){g.trigger("brandFollow:followButton:redirectToAuthPortal",c)}}});"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-auth-portal-link-builder","brand-follow-button-event-helper","brand-follow-metrics-client","brand-follow-csm-helper").register("brand-follow-button-click-handler",
function(g,c,a,e,f,k,p,h){var b=g.$;g.on("brandFollow:followButton:loaded",function(){b(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).undelegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click");b(a.Brand_FOLLOW_BUTTON_CONTAINER_SELECTOR).delegate(a.Brand_FOLLOW_BUTTON_WRAPPER_SELECTOR,"click",function(d){var g=a.FOLLOW_CSM_PREFIX+":clickHandler";h.incrementCSMCounter(g);var l=b(this).find(a.Brand_FOLLOW_BUTTON_SELECTOR).first(),n=l.data(a.BFID_DATA_KEY);if(n){var q=c.getFollowStatus(n);q||(q=l.data(a.FOLLOW_STATUS_DATA_KEY)?
a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);switch(q){case a.BRAND_FOLLOW_STATUS.FOLLOWING:h.incrementCSMCounter(g+":status:following");c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);c.setLastClickEvent(n,a.EVENT_TYPE.UNFOLLOW);e.unfollow(n,function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);var b=p.buildFollowButtonClickMetricEvent(l,a.EVENT_TYPE.UNFOLLOW,d);p.processMetricEvent(b,{n:1})},function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING)});
break;case a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING:h.incrementCSMCounter(g+":status:not_following");c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.PENDING);c.setLastClickEvent(n,a.EVENT_TYPE.FOLLOW);e.follow(n,function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.FOLLOWING);var b=p.buildFollowButtonClickMetricEvent(l,a.EVENT_TYPE.FOLLOW,d);p.processMetricEvent(b,{n:1})},function(){c.setFollowStatus(n,a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING)},function(){k.triggerFollowButtonRedirectionEvent(d);var a=f.signin();
m.location.assign(a)});break;case a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN:h.incrementCSMCounter(g+":status:not_signed_in");k.triggerFollowButtonRedirectionEvent(d);g=f.signin();m.location.assign(g);break;case a.BRAND_FOLLOW_STATUS.ERROR:h.incrementCSMCounter(g+":status:error");k.triggerFollowButtonLoadedEvent();break;case a.BRAND_FOLLOW_STATUS.PENDING:return h.incrementCSMCounter(g+":status:pending"),!1;default:h.incrementCSMCounter(g+":status:unknown")}}else h.incrementCSMCounter(g+":emptyBFID")})})});
"use strict";l.when("A","brand-follow-data-storage-helper","brand-follow-constants","brand-follow-afs-helper","brand-follow-button-event-helper","brand-follow-csm-helper","on-brand-follow-status-change","ready").register("brand-follow-button-initializer",function(g,c,a,e,f,k){g.on("brandFollow:followButton:loaded",function(){g.$(a.Brand_FOLLOW_BUTTON_SELECTOR).each(function(){var f=g.$(this),h=f.data(a.BFID_DATA_KEY);if(h!==n){var b=c.getFollowStatus(h);if(b===n||b===a.BRAND_FOLLOW_STATUS.ERROR){b=
f.data(a.FOLLOW_STATUS_DATA_KEY);if(f.data(a.BACK_BUTTON_SUPPORT_ENABLED_DATA_KEY)){var d=m.performance||m.webkitPerformance,d=d&&d.navigation&&2==d.navigation.type;!/bot|crawl|spider/i.test(m.navigator&&m.navigator.userAgent)&&d&&(b="")}if(""!==b)c.setFollowStatus(h,b?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);else{c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.PENDING);var l=a.FOLLOW_CSM_PREFIX+":FetchFollowStatus";k.incrementCSMCounter(""+l);e.getFollowStatusAndInitCsrf(h,
function(b){c.setFollowStatus(h,b.isFollowing?a.BRAND_FOLLOW_STATUS.FOLLOWING:a.BRAND_FOLLOW_STATUS.NOT_FOLLOWING);k.incrementCSMCounter(l+":success");f.data(a.FOLLOW_STATUS_DATA_KEY)!==b.isFollowing&&k.incrementCSMCounter(l+":FoundDiff")},function(){k.incrementCSMCounter(l+":error");c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.ERROR)},function(){k.incrementCSMCounter(l+":notSignedIn");c.setFollowStatus(h,a.BRAND_FOLLOW_STATUS.NOT_SIGNED_IN)})}}else b===a.BRAND_FOLLOW_STATUS.FOLLOWING?(f.text(f.data(a.FOLLOWING_TEXT_DATA_KEY)),
f.attr(a.ARIA_LABEL_KEY,f.data(a.ARIA_LABEL_FOLLOWING_DATA_KEY))):(f.text(f.data(a.FOLLOW_TEXT_DATA_KEY)),f.attr(a.ARIA_LABEL_KEY,f.data(a.ARIA_LABEL_FOLLOW_DATA_KEY)))}})});f.triggerFollowButtonLoadedEvent()});"use strict";l.when("A","brand-follow-constants","brand-follow-button-event-helper","ready").execute("brand-follow-button-mutation-observer",function(g,c,a){var e=g.$;(function(){var f=m.MutationObserver||m.WebKitMutationObserver||m.MozMutationObserver;f!==n&&(new f(function(f,g){var h;g=!1;
for(var b=0;b<f.length;b++){h=f[b];if("childList"!==h.type)break;h=h.addedNodes;for(var d,l=0;l<h.length;l++)if(d=h[l],0!==e(d).find(c.Brand_FOLLOW_BUTTON_SELECTOR).length){g=!0;break}if(g){a.triggerFollowButtonLoadedEvent();break}}})).observe(document,{childList:!0,subtree:!0})})()})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("BrandFollowKataComponentAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(g){var h=window.AmazonUIPageJS||window.P,l=h._namespace||h.attributeErrors,f=l?l("PostsSearchWidgetAssets",""):h;f.guardFatal?f.guardFatal(g)(f,window):f.execute(function(){g(f,window)})})(function(g,h,l){g.when("A","rush-framework","related-posts-search-metrics-client","related-posts-carousel-view","af","ready").register("related-posts-search-widget",function(f,h,k,c){h.registerComponent("related-posts-search-widget","related-posts-search-widget",function(b){var e=f.$(b.elem());b={sushiEndpoint:b.prop("sushiEndpoint"),
requestId:b.prop("requestId"),pageType:b.prop("pageType"),pageId:b.prop("pageId"),appMode:b.prop("appMode"),platform:b.prop("platform"),mShopBuild:b.prop("mShopBuild")};e=new c(e);b=new k(e,b);e.initEvents(b);e.$carousel.length||b.emitCsmCounter("PostsCarouselWidgetExpectedButNotLoaded")})});"use strict";g.when("A","a-carousel-framework","posts-carousel-linkto","af","ready").register("related-posts-carousel-view",function(f,g,k){function c(a){this.$carouselContainer=a.find(".posts-feed-preview-wrapper");
this.$carousel=a.find(".related-posts-carousel-container")}var b=f.$,e=!1;c.prototype.getCarouselElement=function(){return this.$carousel};c.prototype.initEvents=function(a){var d=this;g.onInit("posts-feed-preview-carousel",function(c){e?a.emitCsmCounter("PostsCarouselWidgetAlreadyInitialized"):c?(a.emitCsmCounter("PostsCarouselWidgetInitialized"),d.auiCarousel=c,f.on(f.constants.BROWSER_EVENTS.SCROLL,function(){a.handleUserScroll()}),c.onChange("px",function(){a.handleUserScroll()}),b(".posts-feed-preview-card").click(function(d){a.handleUserClick(d)}),
h.addEventListener("beforeunload",function(){a.handleUnload()}),h.addEventListener("pagehide",function(){a.handleUnload()}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&a.handleUnload();"visible"===document.visibilityState&&a.handlePageLoad()}),d.$carouselContainer.delegate("[data-target-href]","click",function(a){var e=a.target,c=d.$carouselContainer.get(0),m=b(a.target).attr("data-target-href");if(null===m||m===l)m=b(a.target).closest("[data-target-href]").attr("data-target-href");
for(;e&&e!==c;){if(e.hasAttribute("ignore-data-target-href"))return!1;e=e.parentNode}if("string"===typeof m&&m.length)return k.execute(m),!1}),d.$carouselContainer.delegate(".posts-feed-preview-link","mousedown keydown",function(a){switch(a.type){case "mousedown":b(a.target).addClass("posts-feed-preview-link-remove-outline");break;case "keydown":b(a.target).removeClass("posts-feed-preview-link-remove-outline")}}),e=!0,a.initialize(),a.handlePageLoad()):a.emitCsmCounter("PostsCarouselWidgetCarouselNotFound")})};
return c});"use strict";g.when("A","posts-sushi-client","related-posts-measure","af","ready").register("related-posts-search-metrics-client",function(f,g,k){function c(a,d){this.carouselView=a;this.metricConfig=d;this.state={postVisibilityEventStates:{},postImpressionMetadata:{},carouselOnScreen:!1,unloadHandled:!1};this.sushiClient=new g(h,this.metricConfig.sushiEndpoint)}var b={PostImpression:2,PostPartialImpression:1,CarouselOffScreen:1,PostClick:1,PostView:2,PostOffScreen:1,PageEgress:1},e=f.$;
c.prototype.initialize=function(){this.isCarouselOutOfViewPort()||this.checkPostsClientSideMetrics()};c.prototype.handlePageLoad=function(){this.carouselInstance=this.generateInstanceId();this.requestInstance=this.generateInstanceId()};c.prototype.generateInstanceId=function(){return Math.round(Math.floor(999999*Math.random())+1)};c.prototype.emitCsmCounter=function(a){this.sushiClient.ueCount(a)};c.prototype.decorateMetricPayload=function(a){a.request_id=this.metricConfig.requestId;a.request_instance=
this.requestInstance;a.carousel_instance=this.carouselInstance;a.page_type=this.metricConfig.pageType;a.page_id=this.metricConfig.pageId;a.app_mode=this.metricConfig.appMode;a.app_build="1.0";a.platform=this.metricConfig.platform;this.metricConfig.mShopBuild&&(a.mshop_build=this.metricConfig.mShopBuild);a.event_version=b[a.event_type];return a};c.prototype.handleUserScroll=function(){this.checkPostsClientSideMetrics()};c.prototype.getOriginPx=function(a){a=e("#"+a);var d=a.offset();return a.length?
d.left+","+d.top:"-1,-1"};c.prototype.postOriginsAreInvalid=function(){for(var a=e(".posts-feed-preview-card"),d=null,b=!1,c=-1,f=this.carouselView.getCarouselElement().is(":visible"),h=0;h<a.length;h++){var g=e(a[h]),k=g.attr("id");if(g=g.is(":visible")){-1===c&&(c=h);k=this.getOriginPx(k);if(d){if(a=k===d)this.emitCsmCounter("PostsCarouselInvalidOrigins:LastVisible:"+(b?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CurVisible:"+(g?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:CarouselVisible:"+
(f?"true":"false")),this.emitCsmCounter("PostsCarouselInvalidOrigins:FirstVisibleIndex:"+c);return a}d=k;b=g}}this.emitCsmCounter("PostsCarouselInvalidOrigins:NoCardsVisible:"+(d?"false":"true"));this.emitCsmCounter("PostsCarouselInvalidOrigins:CardsInvis:CarouselVisible:"+(f?"true":"false"));return!0};c.prototype.checkPostsClientSideMetrics=function(){if(this.postOriginsAreInvalid()){this.emitCsmCounter("PostsCarouselInvalidOrigins");var a=!this.isCarouselOutOfViewPort();this.emitCsmCounter("PostsCarouselInvalidOrigins:OnScreen:"+
(a?"true":"false"))}else this.checkPostImpressionMetrics(),this.checkPostCarouselOffScreenMetric()};c.prototype.checkPostImpressionMetrics=function(){for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),f=b.attr("data-post-rank");this.checkPostViewMetric(c,f);this.checkPostOffScreenMetric(c,f);b.is(":visible")&&(this.checkPostPartialImpressionMetric(c,f),this.checkPostImpressionMetric(c,f))}};c.prototype.postEventEmittedSinceComingOnScreen=function(a,d){return this.state.postVisibilityEventStates[d]?
this.state.postVisibilityEventStates[d][a]||!1:!1};c.prototype.shouldEmitMetrics=function(a,d){return!this.postEventEmittedSinceComingOnScreen(a,d)};c.prototype.checkPostCarouselOffScreenMetric=function(){if(this.state.carouselOnScreen&&this.isCarouselOutOfViewPort()){this.state.carouselOnScreen=!1;var a=this.decorateMetricPayload({event_type:"CarouselOffScreen"});this.sushiClient.processEvent(a,{n:1});this.carouselInstance=this.generateInstanceId()}};c.prototype.checkPostPartialImpressionMetric=
function(a,d){this.shouldEmitMetrics("PostPartialImpression",a)&&this.isPartialImpression(a)&&(this.state.carouselOnScreen=!0,d=this.buildPostEvent("PostPartialImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostPartialImpression"))};c.prototype.isPartialImpression=function(a){a=k.getElementViewportExtents(a);return(a.isTopInViewport||a.isBottomInViewport)&&(a.isLeftInViewport||a.isRightInViewport)};c.prototype.checkPostViewMetric=function(a,d){if(this.shouldEmitMetrics("PostView",
a)&&this.isView(a)){d=this.buildPostEvent("PostView",a,d);var b=f.now()-this.state.postVisibilityEventStates[a].PostImpression;0<b&&36E5>b&&(d.dwell_time_ms=Math.round(b));this.sushiClient.processEvent(d,{n:1});this.updateImpressionState(a,"PostView")}};c.prototype.isView=function(a){if(this.postEventEmittedSinceComingOnScreen("PostImpression",a))return a=k.getElementViewportAreas(a),a.viewportArea<.5*a.totalArea};c.prototype.checkPostImpressionMetric=function(a,d){this.shouldEmitMetrics("PostImpression",
a)&&this.isImpression(a)&&(d=this.buildPostEvent("PostImpression",a,d),this.sushiClient.processEvent(d,{n:1}),this.updateImpressionState(a,"PostImpression",f.now()))};c.prototype.isImpression=function(a){a=k.getElementViewportAreas(a);return a.viewportArea>=.5*a.totalArea};c.prototype.checkPostOffScreenMetric=function(a,d){this.isPostOutOfViewPort(a)&&this.postEventEmittedSinceComingOnScreen("PostPartialImpression",a)&&(d=this.buildPostEvent("PostOffScreen",a,d),this.sushiClient.processEvent(d,{n:1}),
this.state.postVisibilityEventStates[a].PostImpression=!1,this.state.postVisibilityEventStates[a].PostPartialImpression=!1,this.state.postVisibilityEventStates[a].PostView=!1)};c.prototype.isPostOutOfViewPort=function(a){return!f.onScreen(e("#"+a),0)};c.prototype.isCarouselOutOfViewPort=function(){return!f.onScreen(this.carouselView.getCarouselElement(),0)};c.prototype.buildPostEvent=function(a,d,b){return this.decorateMetricPayload({event_type:a,post_id:d.split("Posts-")[1],rank:parseInt(b,10),origin_px:this.getOriginPx(d)})};
c.prototype.updateImpressionState=function(a,d,b){var c=this.state.postVisibilityEventStates[a]||{};c[d]="undefined"===typeof b?!0:b;this.state.postVisibilityEventStates[a]=c};c.prototype.handleUserClick=function(a){var d=e(a.target),b=d.attr("data-post-id"),c=d.attr("data-post-rank"),f=d.attr("data-click-target");if(null===b||null===c||b===l||c===l)c=d.closest(".posts-feed-preview-card"),b=c.attr("id"),c=c.attr("data-post-rank");if(null===f||f===l)f=d.closest("[data-click-target]"),f=null!==f&&f!==
l?f.attr("data-click-target"):"UNKNOWN";var g=this.buildPostEvent("PostClick",b,c);g.click_target=f;"FollowButton"===f&&h.BrandFollowSharedUtils&&e.isFunction(h.BrandFollowSharedUtils.getLastClickAction)&&(g.click_action=h.BrandFollowSharedUtils.getLastClickAction(a.target));this.sushiClient.processEvent(g,{n:1});a=d.closest("[data-click-action]");null!==a&&a!==l&&"Egress"===a.attr("data-click-action")&&"FollowButton"!==f&&(a=a.attr("data-target-destination")||"NONE",this.emitPageEgressMetric(b,c,
a,f))};c.prototype.emitPageEgressMetric=function(a,d,b,c){a=this.buildPostEvent("PageEgress",a,d);a.destination_type=b;a.click_target=c;this.sushiClient.processEvent(a,{n:1})};c.prototype.handleUnload=function(){if(!this.state.unloadHandled){this.state.unloadHandled=!0;for(var a=e(".posts-feed-preview-card"),d=0;d<a.length;d++){var b=e(a[d]),c=b.attr("id"),b=b.attr("data-post-rank");if(this.postEventEmittedSinceComingOnScreen("PostImpression",c)&&this.shouldEmitMetrics("PostView",c)){var b=this.buildPostEvent("PostView",
c,b),g=f.now()-this.state.postVisibilityEventStates[c].PostImpression;0<g&&36E5>g&&(b.dwell_time_ms=Math.round(g));this.sushiClient.processEvent(b,{n:1});this.updateImpressionState(c,"PostView")}}this.state.carouselOnScreen&&(a=this.decorateMetricPayload({event_type:"CarouselOffScreen"}),this.sushiClient.processEvent(a,{n:1}),this.state.carouselOnScreen=!1);this.state.carouselInstance=this.generateInstanceId();this.sushiClient.onBeforeUnload()}};return c});"use strict";g.when("A","af","ready").register("related-posts-measure",
function(f){function g(){var b=c(h),e=b.scrollTop(),a=b.scrollLeft(),d=h.innerHeight||b.height(),b=h.innerWidth||b.width();return{top:e,left:a,height:d,width:b,bottom:e+d,right:a+b}}function k(b){var c=b.offset(),a=c.top,c=c.left,d=b.height();b=b.width();return{top:a,left:c,height:d,width:b,bottom:a+d,right:c+b}}var c=f.$;return{getElementViewportAreas:function(b){b=c("#"+b);var e=g(),a=e.width*e.height,d=k(b),h=d.width*d.height,e=Math.max(Math.min(d.right,e.right)-Math.max(d.left,e.left),0)*Math.max(Math.min(d.bottom,
e.bottom)-Math.max(d.top,e.top),0);return b.length&&f.onScreen(b,0)?{totalArea:h,viewportArea:e,totalViewportArea:a}:{totalArea:1,viewportArea:0,totalViewportArea:a}},getElementViewportExtents:function(b){b=c("#"+b);var e=g(),a=k(b);return b.length&&f.onScreen(b,0)?{isTopInViewport:a.top>=e.top&&a.top<e.bottom,isBottomInViewport:a.bottom>=e.top&&a.bottom<e.bottom,isLeftInViewport:a.left>=e.left&&a.left<e.right,isRightInViewport:a.right>=e.left&&a.right<e.right}:{isTopInViewport:!1,isBottomInViewport:!1,
isLeftInViewport:!1,isRightInViewport:!1}},getViewportCoordinates:g,getElementLocation:k}});g.when("af","ready").register("posts-carousel-linkto",function(){return{execute:function(f){h.location.href=f}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PrelaunchAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("INSearchCXAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MoreLikeThisAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchCountdownAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DynamicComparisonAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("VseProductVideoSearchAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("MashovAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
