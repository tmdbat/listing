(function(w){var r=window.AmazonUIPageJS||window.P,da=r._namespace||r.attributeErrors,f=da?da("DetailPageImageBlockAssets",""):r;f.guardFatal?f.guardFatal(w)(f,window):f.execute(function(){w(f,window)})})(function(w,r,da){w.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var b=r.ue;if(b){var a=b.count(f)||0;b.count(f,a+1)}}},postTimeMetric:function(f,b){if("undefined"!==typeof f&&"undefined"!==typeof b){var a=r.ue;a&&a.count(f,b)}},emitNexusMetric:function(f){r.ue&&
ue.event&&ue.event(f,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(f,b,a,g,l,c,n,d){return{eventSource:"IBCarousel",placementContext:d,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:f,intPayload:b,videoAsin:a,videoAsinList:"",groupType:g,pageUrl:l,pageAsin:c,weblabIds:n}}}});"use strict";w.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});w.register("postEarlyMetric",function(){return null});"use strict";
w.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,b,a,g){f=f.extend(!0,{},a,g);var l=new b(f);w.register("ImageBlockAPI",function(){return l.api});return l});"use strict";w.when("A","jQuery").execute(function(f,b){f.on("a:image:load:landingImage",function(){r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});f.loadDynamicImage(b("#landingImage"))});"use strict";w.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(f){function b(a){a&&(w.load.js(a),r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",r.parseInt(performance.now())))}function a(a){a&&w.load.css(a)}var g=f.airyConfig;g===da?w.when("ImageBlockBTF").execute(function(l){g=l.airyConfig;b(g.jsUrl);a(g.cssUrl)}):(b(g.jsUrl),a(g.cssUrl))});"use strict";w.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,
b,a,g,l){var c={};return function(n){var d=this;d.dispatch=function(a,b){var d=c[a];g.isDefined(d)&&f.each(d,function(a,c){c.call(r,b)})};d.register=function(a,b){g.isDefined(c[a])||(c[a]=[]);"function"===typeof b&&c[a].push(b)};d.model=new b(n,d);d.view=new a(n,d,d.model);d.api=new l(n,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";w.when("A","imageBlockUtils").register("ImageBlockModel",function(f,b){function a(a,c,d,l,f,h){b.isDefined(a)&&(D.type=a);b.isDefined(c)&&
(D.index=c);b.isDefined(d)&&(D.thumbnailIndex=d);b.isDefined(l)&&(D.variant=l);b.isDefined(f)&&(D.color=f);D.shoppableScene=h||null}function g(b){a("image",0,0,"MAIN",b||d.landingAsinColor||d.defaultColor,null)}function l(b){b=b.data;M=f.copy(D);a(b.type,b.index,b.thumbnailIndex,b.variant,b.color,b.shoppableScene)}function c(a){l(a);a=f.copy(a);a.data=f.copy(D);p.dispatch("updateView",a)}function n(){M=f.copy(D);g(D.color)}var d,p,D={},M={},z,r;return function(a,b){p=b;d=a;p.register("updateSelection",
c);p.register("updateModel",l);p.register("resetModel",n);this.init=function(){g()};this.getCurrentItem=function(){return f.copy(D)};this.getPreviousItem=function(){return f.copy(M)};this.setCurrentEvent=function(a){z=a};this.getCurrentEvent=function(){return z};this.setImmersiveViewModalInstance=function(a){r=a};this.getImmersiveViewModalInstance=function(){return r};this.updateTitle=function(a){d.title=a}}});"use strict";w.when("ImageBlockBTF","postMetric").execute(function(f,b){function a(a,b,
g,d,p){function D(a){"click"===a.type&&d.postCountMetric("thumbClick");"click"===a.type&&u.overrideAltImageClickAction?q.dispatch("thumbActionClick",a):q.dispatch("updateSelection",a)}function M(a){u.useClickZoom||q.dispatch("imageClick",a)}function z(a){u.useClickZoom||q.dispatch("imageHover",a)}function H(a){q.dispatch("button360Click",a)}function B(b){!g.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(F.update(b),"swatchHover"!==b.type&&x.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&
d.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):(F.render(b.data.color,!1,b.onload),b={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",b))}function E(a){q.dispatch("resize",a)}function O(a){g.selectThumbnail(a,G)}function P(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"],alwaysInteractive:!0}]})}function N(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===f.useIV?w.when("a-modal").execute(function(){P()}):P();u.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],D);a.declarative("thumb-action",["click"],D);a.declarative("main-image-click",
["click"],M);a.declarative("main-image-click",["mouseenter","mouseleave"],z);a.declarative("button-360-click",["click"],H);a.on("resize",E)}function h(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function A(a){var b=x.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var F,u,q,x,G;return function(a,d,f){F=this;u=a;q=d;x=f;G=b("#imageBlock #altImages ul");var k=b("#imageBlock .canvas"),m=b("#main-image-container"),e;F.subViews=[];for(d=0;d<p.length;d++)F.subViews.push(new p[d](a,
f,F,q));F.render=function(a,d,h){var f=0;G.find(".item").remove();a=a||x.getCurrentItem().color;b.each(F.subViews,function(b,c){f=c.render(a,f,k,G,m,d,h)||f});var g=G.find(".a-button-selected").closest(".a-declarative");e=A(g)};F.init=function(){G=b("#imageBlock #altImages ul");var a=G.find(".a-button-selected").closest(".a-declarative"),e=a.data("action"),a=a.data(e)||{};a.color=u.landingAsinColor||u.defaultColor;q.dispatch("updateModel",{data:a});F.render(a.color,!0);u.isDebug&&r.console&&console.log(u);
q.register("updateView",B);q.register("selectThumbnail",O);N()};F.update=function(a){b.each(F.subViews,function(b,c){c.update(a)});u.usePeekHover&&("mouseleave"===a.type?q.dispatch("updateSelection",e):"click"===a.type&&(e=h(a)||e))}}}var g=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);w.when.apply(w,g).register("ImageBlockView",function(){for(var b=arguments[0],c=arguments[1],f=arguments[2],d=arguments[3],g=[],D=4,M=arguments.length;D<M;D++)g.push(arguments[D]);return a(b,c,f,d,g)})});
"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,b,a,g,l,c,n){function d(c,e,k,m){if(!a.isjQueryObjDefined(c.find(".a-button-selected"))){var d=x.getCurrentItem();if(!m||"chromeless-video"!==d.type||!q.autoplayVideo){m=0;"image"===d.type&&(m=Math.max(M(d.color,d.variant),0));var h=e+m;h>=k&&(m=0,h=e);e=a.getImageHash(d.color,m,q);-1!==e&&(G.dispatch("updateModel",{data:{index:m,
thumbnailIndex:h,variant:e.variant,type:"image",shoppableScene:e.shoppableScene}}),e=c.find(".item").get(h),a.selectGivenThumbnail(b(e),c))}}}function p(e,m,k){m=q.colorImages&&q.colorImages[m];var h=e;a.isDefined(m)&&(b.each(m,function(b,c){e<q.maxAlts&&(a.createThumbnail({type:"image",index:b,thumbnailIndex:e,variant:c.variant,shoppableScene:c.shoppableScene},c.thumb,L,"imageThumbnail"),e++)}),c.isEnabled&&n.logAltImgRequestPlacedOnThumbnails(b,c,x),d(L,h,e,k));return e}function D(c,e){if("image"===
c.type){var m=b("#image-canvas-caption #canvasCaption"),k,d=q.staticStrings,h=q.colorImages,f=c.color,g=c.index;a.isShoppableScenesEnabled()&&c.shoppableScene?k=d.clickSceneTagsToShopProducts:e&&q.useIV?k=d.clickToExpand:h[f]&&h[f][g].hiRes&&q.useHoverZoom?(k=q.useHoverZoomIpad?d.touchToZoom:q.useClickZoom?d.clickToZoom:d.rollOverToZoom,q.hoverZoomIndicator&&(k="\x3cimg src\x3d'"+q.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+k)):q.useIV&&(k=d.clickToExpand);m.html(k)}}function M(b,c){return a.getIndexForVariant(b,
c,q)}function z(c,e){var m="a-dynamic-image";if(!q.acEnabled){var k;b.each(c.main,function(b,c){a.isDefined(k)||(k=parseFloat(c[1]/c[0])<=parseFloat(q.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});m+=k}var d=a.getMaxDimensionsOfMainImage(c.main,S,q),h=d[0],f=d[1],d=b("\x3cdiv\x3e\x3c/div\x3e"),h={"max-height":h,"max-width":f};d.addClass(m).css(h).attr({"data-old-hires":c.hiRes,"data-a-manual-replacement":"true",onload:e}).data("a-dynamic-image",c.main);return d}function r(a){var b=
t.find(".swatchHoverExp");a=z(a);b.find(".imgTagWrapper").html(a);f.loadImageManually(a);return b}function B(a){var b=S.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");q.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(q.imgTagWrapperClasses)}function E(b,e){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){a.isDefined(e)&&l.postCountMetric("mainImageUpdateOnTwisterVariationClick");var m=a.getImageHash(b.color,b.index,q);if(-1===m)return m=
{data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},a.lazyLoadingRequired(b,x,q)?N(b,!1,e):(G.dispatch("updateModel",m),a.showUnavailable(b.color)),-1;var k=t.find(".item.itemNo"+b.thumbnailIndex);if(!a.isjQueryObjDefined(k)){var k=b.thumbnailIndex,d=z(m,e),h;if(a.isShoppableScenesEnabled()&&m.shoppableScene){h="desktop-dp-atf-ib-shoppablescenes-tags-"+k;"function"==typeof uet&&uet("bb",h,{wb:1});d.attr("data-a-image-name","shoppable-scene");var g=t.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
g.addClass("celwidget").attr("cel_widget_id",h);g.children("span").css("display","inline-block");G.dispatch("initialize-shoppable-scene",{index:k,shoppableScene:m.shoppableScene,imageSource:m.hiRes,$tagPlaceholder:g.find(".mirai-scene-tag-placeholder"),$viewProductsButton:g.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",h,{wb:1});h=g}else h=t.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");h.addClass("image item itemNo"+k+" maintain-height");
h.find(".placeHolder").replaceWith(d);t.find(".list").append(h);f.loadImageManually(d);k=h}B(k);G.dispatch("loadMagnifier");D(b);q.useIV&&a.isDefined(m.hiRes)&&k.css("cursor","pointer");b.isUserGenerated&&(k=x.getPreviousItem(),d=b.variant,a.isDefined(d)&&k.thumbnailIndex!==b.thumbnailIndex&&(c.isEnabled&&n.logAltImgRequestServed(c),l.postCountMetric("ImageThumbnailSelectedVariant:"+d),0===d.indexOf("IG")&&(l.postCountMetric("IGImageSelectedVariant:"+d),l.postCountMetric("IGImageSelectedEvent:"+b.interaction))));
f.trigger("dp:image-block:update",m)}}function O(b){var c=Math.max(M(b.color,x.getCurrentItem().variant),0),c=a.getImageHash(b.color,c,q);if(-1===c)return a.lazyLoadingRequired(b,x,q)?a.lazyLoadOnHoverEnabled(q)&&(P(".3",!0),a.spinner(t,!0),f.delay(function(){x.getCurrentEvent().data===b&&N(b,!0)},500)):a.showUnavailable(b.color),-1;var e=r(c);l.postCountMetric("mainImageUpdateOnTwisterVariationHover");B(e);f.trigger("dp:image-block:update",c)}function P(a,c){c?t.css("opacity",a):b("#imageBlock").css("opacity",
a)}function N(b,c,e){k=c;m=e;var d=b.color,f=q.colorToAsin[d];if(f&&f.asin){var n={};n.params={asin:f.asin,productGroupID:q.productGroupID,color:d};n.success=function(g){g?(l.postCountMetric("lazyloadImageBlockOnTwisterUpdateSuccess"),a.ajaxState(f.asin,"success"),q.colorImages[d]=g.colorImage,a.isDefined(q.spin360ColorEnabled)&&(q.spin360ColorEnabled[d]=g.enable360),d===b.color&&(c&&k?(l.postCountMetric("lazyloadImageBlockOnTwisterHoverSuccess"),b===x.getCurrentEvent().data&&(h(b),O(b))):(l.postCountMetric("lazyloadImageBlockOnTwisterClickSuccess"),
g={type:"updatedData",data:x.getCurrentItem(),onload:e||m},G.dispatch("updateView",g))),w.register(a.rankedImagesReadyEvent(f.asin))):(l.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail"),a.ajaxState(f.asin,"fail"))};n.error=function(){l.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail");a.ajaxState(f.asin,"fail")};n.indicator=a.spinner(t);a.ajaxState(f.asin,void 0)&&"fail"!==a.ajaxState(f.asin,void 0)||(c?l.postCountMetric("lazyloadImageBlockOnTwisterHover"):l.postCountMetric("lazyloadImageBlockOnTwisterClick"),
P(".3",c),g.load("/gp/product/features/apparel-main-image/ranked-images.html",n),a.ajaxState(f.asin,"sent"));return q.colorImages&&q.colorImages[d]}}function h(c,e){a.lazyLoadingRequired(c,x,q)||(b("#imageBlock").css("opacity","1"),t.css("opacity","1"),a.spinner(t,!1),t.find("li").removeClass("selected"),b("#image-canvas-caption #canvasCaption").empty(),a.hideUnavailable(),e&&t.find(".list .item").remove())}function A(){var c=t.find(".item .imgTagWrapper"),e=a.getContainerHeight(S,q.holderRatio,q.holderMaxHeight);
0<e&&(S.height(e),c.height(e));t.find("img.a-dynamic-image").each(function(){var c=b(this);c.data("a-manual-replacement")&&f.loadDynamicImage(this);var e=c.data("a-dynamic-image"),e=a.getMaxDimensionsOfMainImage(e,S,q);c.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function F(a){D(x.getCurrentItem(),"mouseenter"===a.type)}var u,q,x,G,L,t,S,k,m,e;return function(b,c,d,m){u=this;q=b;x=c;G=m;q.colorImages[q.landingAsinColor]=q.colorImages[q.defaultColor];u.render=function(b,c,d,m,k,f,g){t=d;
L=m;S=k;e=p(c,b,f);f||(b=x.getCurrentItem(),a.lazyLoadingRequired(b,x,q)&&G.dispatch("updateModel",{data:{type:"lazy-loaded"}}));h(x.getCurrentItem(),!f);E(x.getCurrentItem(),g);return e};u.update=function(b){var c=b.data;x.setCurrentEvent(b);"ingress"!==c.type&&h(b.data,!1);"swatchHover"===b.type?c.color===x.getCurrentItem().color?E(x.getCurrentItem()):b.captured||-1===O(c)||(b.captured=!0):"image"===c.type&&(c.interaction=b.type,c.isUserGenerated=!0,"mouseenter"===b.type&&l.postCountMetric("dpcc_imageThumbHovered_"+
(c.thumbnailIndex+1)+"_"+e),E(c),q.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,L),"click"===b.type&&(l.postCountMetric("dpcc_imageThumbClicked_total"),l.postCountMetric("dpcc_imageThumbClicked_"+(c.thumbnailIndex+1)+"_"+e))))};q.overrideAltImageClickAction&&a.addTag("clickEnabledOnAltImages");G.register("imageHover",F);G.register("resize",A)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(f,b,a,g,l,c){function n(a){P?a.css("cursor","url('"+z.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function d(b){var c=b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(a.isDefined(c))for(var c=c[1].split("_"),d=0;d<c.length;d++){var f=c[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);a.isDefined(f)&&(b[f[1]]=parseInt(f[2],10))}return b}function p(p,h){function A(){var a;h.useClickZoom?(a=h.offsetInClickZoom,a=[Math.min(1,
Math.max(0,J[0]-(C[0]+a))/(C[2]-2*a)),Math.min(1,Math.max(0,J[1]-(C[1]+a))/(C[3]-2*a))]):a=e&&e.updatePosition();if(a&&m&&m.detailSize){var b=[m.detailSize[0]-m.rect.width,m.detailSize[1]-m.rect.height];f.capabilities.rtl?m.detailImage.get(0).style.right=-(a[0]*b[0])+"px":m.detailImage.get(0).style.left=-(a[0]*b[0])+"px";m.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function F(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function u(a){var c=R?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:
"";J=R?[c.pageX,c.pageY]:[a.pageX,a.pageY];if(f.capabilities.rtl){var e=b(r).width();J=R?[e-c.pageX,c.pageY]:[e-a.pageX,a.pageY]}}function q(a){R&&a.preventDefault();u(a);h.useClickZoom?a=[C[0],C[1],C[0]+C[2],C[1]+C[3]]:(a=e?e.offset:p.offsetParent().offset(),a=z.acEnabled?[a.left,a.top,E.width()+a.left,E.height()+a.top]:[I[0]+a.left,I[1]+a.top,I[0]+I[2]+a.left,I[1]+I[3]+a.top]);J[0]<a[0]||J[1]<a[1]||J[0]>=a[2]||J[1]>=a[3]||z.acEnabled&&!F(p)?(h.fadeMagnifier?W||(W=!0,O=setTimeout(function(){x(!0)},
500)):h.useClickZoom||x(),y&&(y=!1,clearTimeout(X))):(y||(y=!0,X=setTimeout(function(){g.postCountMetric("dppc_hoverZoomOpened");l.isEnabled&&c.logHoverZoomRequestServed(l)},1E3)),h.fadeMagnifier&&W&&(W=!1,clearTimeout(O)),A())}function x(a){a&&t.suppressMagnifier(!0);if(H&&(m&&m.hide(),e&&(e.destroy(),e=null),H=!1,R?(p.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),b(document).trigger("disengaged.magnifier")):b(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
M(),a))p.one("click.magnifier touchstart.magnifier",function(a){D(a,!0)})}function D(a,c){c&&t.suppressMagnifier(!1);if(!H&&!aa&&(0===fa&&(g.postCountMetric("dppc_hoverTime",new Date-(r.ue&&r.ue.t0||0)),fa=1),ea[U]||(g.postCountMetric("dppc_hoverMain"),ea[U]=1),I=[p.position().left,p.position().top,p.width(),p.height()],U&&(u(a),m?m.refit().show():m=new w,h.useClickZoom||(e=e||new ga),C=m.getWindowSize(),A()),H=!0,R?(p.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",
q).bind("touchend.magnifier",x),b(document).trigger("engaged.magnifier")):(z.acEnabled?E.unbind("mousemove.magnifier"):p.unbind("mousemove.magnifier"),b(document).trigger("engaged.magnifier").bind("mousemove.magnifier",q)),c)){var d=b("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){x(!0)})}}function M(){h.useHoverZoom&&(R?p.bind("touchstart.magnifier touchmove.magnifier",D):z.acEnabled?F(p)&&E.bind("mousemove.magnifier",D):p.bind("mousemove.magnifier",D))}var t=
this,E=p.offsetParent(),k={detailImageUrl:p.attr("data-old-hires"),location:"over",locationElement:p,prelaod:"ready",zIndex:50,offsetInClickZoom:50};h=b.extend(k,h);h.adjustment=[10,0,-10,0];var m=null,e=null,J=null,I=null,C=null,B={"null":1,"":1,undefined:1},H=!1,aa=!1,U=h.detailImageUrl,R=h.useHoverZoomIpad||0,fa=0,ea={},ga=function(){function a(b){var c=Math.round(Math.min(p.width(),m.rect.width/b));b=Math.round(Math.min(p.height(),m.rect.height/b));f.css({width:c,height:b});e=[c,b]}var c=this,
e=[0,0],d=(m.detailSize&&m.detailSize[0]||5E8)/I[2],k=(m.detailSize&&m.detailSize[1]||5E8)/I[3],d=k>d?k:d;b("#magnifierLens").remove();var f=b("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});h.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+h.generalImageUrls.zoomLensBackground+")"});z.showMagnifierOnHover?n(f):f.css("cursor","pointer");c.updatePosition=function(){var a=[I[2]-e[0],I[3]-e[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(J[0]-e[0]/2-I[0]-c.offset.left)/a[0])),
d=0>=a[1]?.5:Math.max(0,Math.min(1,(J[1]-e[1]/2-I[1]-c.offset.top)/a[1])),k=I[0]+Math.round(b*a[0]),a=I[1]+Math.round(d*a[1]);f.get(0).style.left=k+"px";f.get(0).style.top=a+"px";return[b,d]};c.destroy=function(){f.remove()};c.offset=p.offsetParent().offset();a(d);c.updatePosition();f.appendTo(p.parent());m.detailImage[0].complete||m.detailImage.load(function(){var b=m.detailImage.width()/I[2];a(b);c.updatePosition()})};ga.preload=function(){t.preload(h.generalImageUrls.lensBackgroundUrl)};var w=
function(){function c(){var e={};if("over"===h.location){var e=h.useClickZoom,d={},f=b("#leftCol"),n=b("#centerCol"),l=b("#rightCol"),q=b("#hover-zoom-end"),u=b("#actionPanelContainer"),F=a.isjQueryObjDefined(f)?f.outerHeight():n.outerHeight();d.top=a.isjQueryObjDefined(f)?f.offset().top:n.offset().top;d.bottom=F+d.top;d.right=a.isjQueryObjDefined(l)?l.offset().left:u.offset().left;d.left=e?0:f.offset().left+f.outerWidth();a.isjQueryObjDefined(q)&&q.offset().top>d.bottom&&(d.bottom=q.offset().top);
e=d}else"right"===h.location&&(e=p.offset(),e={left:e.left+p.outerWidth(),top:e.top,right:e.left+p.outerWidth()+400,bottom:e.top+400});h.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+b(h.minHeightElement).outerHeight()));e.bottom=Math.min(e.bottom,b(r).scrollTop()+b(r).height());e.left+=m[0];e.top+=m[1];e.right+=m[2];e.bottom+=m[3];e.width=e.right-e.left;e.height=e.bottom-e.top;h.enhancedHoverOverlay&&a.isDefined(r.pageXOffset)&&(d=b(r).width(),e.width=d-e.left+r.pageXOffset-18,e.height-=14);
g.css({left:e.left,top:e.top,width:e.width,height:e.height});k.rect=e;return k}function e(a){var b=new Image;k.detailSize=[0,0];b.onload=function(){k.detailSize=[b.width,b.height];A()};b.src=a.attr("src");if(0<b.width&&0<b.height)k.detailSize=[b.width,b.height];else if(h.detailImageSize)k.detailSize=h.detailImageSize;else{a=d(b.src);var c=I[2]/I[3];a.SS||a.AA?(a=a.SS||a.AA,k.detailSize=[a,a]):a.SX?k.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?k.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(k.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var k=this,m=h.adjustment;b("#zoomWindow").remove();var f={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:h.zIndex};h.enhancedHoverOverlay&&(f.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",f.border="1px solid #949494",f.borderColor="rgb(148,148,148)");var g=b("\x3cdiv id\x3d'zoomWindow' /\x3e").css(f);h.fadeMagnifier&&g.fadeIn(200);h.useClickZoom&&(P?g.css("cursor",'url("'+h.zoomOutIcon+'"), auto'):(g.css("cursor","-webkit-zoom-out"),
g.css("cursor","-moz-zoom-out"),g.css("cursor","zoom-out")));k.updateImage=function(a){a=b("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");k.detailImage&&k.detailImage.remove();g.append(a);b(document).trigger("updated.magnifier");k.detailImage=a;e(k.detailImage)};k.refit=function(){c();e(k.detailImage);return k};h.fadeMagnifier?(k.show=function(){g.fadeIn(200);return k},k.hide=function(){g.fadeOut(200);return k}):(k.show=function(){g.show();return k},k.hide=function(){g.hide();
return k});k.destroy=function(){g.remove();return k};k.getWindowSize=function(){return[k.rect.left,k.rect.top,k.rect.width,k.rect.height]};k.updateImage(U);c();g.appendTo(document.body)},W=!1,O,y=!1,X;t.preload=function(a){a=b.makeArray(a);for(var c=a.length,e=0;e<c;e++)a[e]instanceof Array?t.preload(a[e]):"string"===typeof a[e]&&a[e]&&!B[a[e]]&&(B[a[e]]=new Image,B[a[e]].src=a[e])};t.changeImage=function(a,c){H&&x();U=c;p.attr("src",a);t.preload(a);I=[p.position().left,p.position().top,p.width(),
p.height()];c&&("immediately"===h.preload?t.preload(c,!0):b(r).ready(function(){t.preload(c)}),m?m.updateImage(c):p.attr("data-old-hires",c))};t.destroy=function(){z.acEnabled?E.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):p.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");b(document).unbind("mousemove.magnifier");e&&e.destroy();e=null;m&&m.destroy();m=null};t.detailImage=function(){return m.detailImage};t.suppressMagnifier=function(a){aa=
a};t.isEngaged=function(){return H};t.engageMagnifier=D;t.disengageMagnifier=x;p[0].complete?M():p.one("load",M);t.preload(p.attr("src"));r.performance&&performance.now&&r.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(h.preload){var la=h.detailImageUrl,k=function(){t.preload(la,!0);h.useClickZoom||ga.preload()},Z=h.preload;Z.constructor!==Array&&(Z=[Z]);for(var v=0;v<Z.length;v++)if("immediately"===Z[v])k();else if(b(r)[Z[v]])b(r)[Z[v]](k);else b(r).bind(Z[v],k)}return t}function D(){if(z.useHoverZoom){var d=
{adjustment:[0,0,1,1],generalImageUrls:z.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:z.useHoverZoomIpad,useHoverZoom:z.useHoverZoom,useClickZoom:z.useClickZoom,fadeMagnifier:z.fadeMagnifier,zoomOutIcon:z.staticImages.zoomOutCur,enhancedHoverOverlay:z.enhancedHoverOverlay||z.atfEnhancedHoverOverlay};E&&(E.destroy(),E=da);var f=w.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");a.isjQueryObjDefined(f)?
z.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){E=new p(f,d);E.engageMagnifier(a,!0)}),P?f.css("cursor",'url("'+z.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor","zoom-in"))):E=new p(f,d):l.isEnabled&&c.logHoverZoomApplicability(b,l)}}var M,z,H,B,E,w,P=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){M=this;z=a;H=b;l.refToModel=H;B=d;M.render=function(a,b,c,d,f,g){w=c;E&&(E.destroy(),
E=da)};M.update=function(a){};B.register("loadMagnifier",D);B.register("resize",D)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(f,b,a,g){function l(b,c,f){b=(b=f?f:a.getColorFromState(c.getState().hovered_variations,d))&&""!==b?b:d.defaultColor;D.dispatch("updateView",{type:"swatchHover",data:{color:b}});g.postCountMetric("swatchHover")}function c(b,c,f,n){b=(b=n?n:a.getColorFromState(c.getState().selected_variations,d))&&""!==b?b:d.defaultColor;
b===p.getCurrentItem().color?"function"===typeof f&&f():(D.dispatch("updateSelection",{type:"swatchClick",data:{color:b},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",a);f()}}),g.postCountMetric("swatchClick"))}var n,d,p,D;return function(a,b,g,r){n=this;d=a;p=b;D=r;f.on("image-block-twister-swatch-hover",l);f.on("image-block-twister-swatch-click",c);n.render=function(a,b,c,d,f){};n.update=function(a){}}});
"use strict";w.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(f,b,a,g,l,c,n){function d(a,c,e,k){!h.autoplayVideo||U||h.useChromelessVideoPlayer?!g.isjQueryObjDefined(a.find(".a-button-selected"))&&(e=A.getCurrentItem(),!k||h.prioritizeVideos||"chromeless-video"===e.type&&h.autoplayVideo)&&(k=g.getVideoHash(e.color,0,h),-1!==k&&(c+=0,F.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:k.variant,
type:h.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=a.find(".item").get(c),g.selectGivenThumbnail(b(c),a))):(g.selectGivenThumbnail(a.find("img:last"),a),g.fadeToThumbnail(a.find("img").length-1,G,a))}function p(a){var b=A.getCurrentItem().color;if(h.useChildVideos&&!h.colorToVideo[b]){var c=function(){if(a){h.colorToVideo[b]=a;var c={type:"updatedData",data:A.getCurrentItem()};F.dispatch("updateView",c)}};h.lazyLoadExperienceDisabled?c():w.when(g.rankedImagesReadyEvent(h.colorToAsin[b].asin)).execute(function(){c()})}}
function D(a){if(!h.useChildVideos)return g.lazyLoadingRequired(A.getCurrentItem(),A,h)?void 0:h.videos;if(h.colorToVideo[a])return h.colorToVideo[a];var b=h.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:h.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:h.useChromelessVideoPlayer,isUDP:h.isUDP};h.isDPXFeatureEnabled||(c.success=function(a){p(a)},l.load("/gp/product/features/apparel-main-image/videos.html",c));return h.colorToVideo&&h.colorToVideo[a]}}function M(){F.dispatch("selectThumbnail",
g.useTabbedImmersiveView(h)?1:0)}function z(e,k,d,f){return a.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:e[0],streamingUrls:k.url,swfUrl:d.swfUrl,foresterMetadataParams:d.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=g.isjQueryObjDefined(e.find("video"))?"HTML5":"FLASH";c.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){e.parent().css("z-index",8)},videounsupported:function(){M();
c.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){M();c.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){t.seek(0)}},cuePoints:[{values:k.durationSeconds-1,type:"position",callback:function(a,c,k){a=k.durationSeconds-k.playheadTimeSeconds;e.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){e.parent().css({"background-color":"transparent","z-index":-1});M();b(this).show().css("opacity",1)})}}]})}function H(a){if("chromeful-video"===
a.type||"chromeless-video"===a.type){var c=g.getVideoHash(a.color,a.index,h);if(-1===c)return-1;if("chromeful-video"===a.type){a=a.thumbnailIndex+1;var d=G.width()/G.height(),m=parseInt(c.videoWidth,10),n=parseInt(c.videoHeight,10);g.updateAspectRatio(d,m,n,q);t?(t.show(),g.loadMediaIntoAiry(t,c,S,h.tabletWeb)):t=h.tabletWeb?e:g.createAiryInstanceForChromefulNotUseTabbedImmersiveView(q,c,S,null,h.autoplayVideo,G,x,u,a,h.useTabbedImmersiveView,I,J,C);b:if(g.useTabbedImmersiveView(h)){if(1<g.getVideosCount(A.getCurrentItem().color,
h)){if(g.isDefined(L)){x.show();break b}L=b('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(h.staticStrings.watchMoreVideos);x.find("#videoCaption").append(L);f.declarative.create(L,"videoIngressClick",k)}g.playVideoInImmersiveView(h,A.getCurrentItem().color)&&(f.declarative.create(q,"videoIngressClick",k),q.attr&&q.attr("data-ux-click",""),q.children().css("z-index","-1"),q.css("display","inline-block"))}else x.find("#videoCaption").text(h.staticStrings.playVideo),x.show();c=
t;h.autoplayVideo&&c&&!U&&(g.toggleVideoCaption(x),c.setVolume(0),c.show(),c.play(),U=!0)}else t?(t.show(),g.loadMediaIntoAiry(t,c,S,h.tabletWeb),t.play(),x.show()):(t=z(q,c,S))&&t.play()}}function B(a,e,m){var n=D(e);e=a;var l=g.isDefined(n)&&0<n.length&&h.alwaysIncludeVideo?1:0;g.isDefined(n)&&0<n.length&&!h.alwaysIncludeVideo&&a===h.maxAlts&&c.postCountMetric("IBVideoDrop");l&&a===h.maxAlts&&(u.find(".item:last").remove(),a--);g.isDefined(n)&&(b.each(n,function(e,d){if(a<h.maxAlts){var f=h.useChromelessVideoPlayer?
"chromeless-video":"chromeful-video",m={type:f,index:e,thumbnailIndex:a,variant:d.variant};k={type:"video-ingress",index:e,thumbnailIndex:a,variant:d.variant};g.useTabbedImmersiveView(h)&&("chromeful-video"===f&&(R+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),h.altsOnLeft||(R+=" a-align-top"));g.createThumbnail(m,d.thumb,u,R);if(2===h.dp60VideoPosition){var l=u,m=h.dp60VideoPosition;if(0!==m){var p=l.children(".imageThumbnail"),l=l.children(".videoBlockIngress");
p&&l&&p[m-1]&&b(p[m-1]).before(l[0])}}g.useTabbedImmersiveView(h)&&(E(u.find(".videoBlockIngress img"),h.videoIngressATFSlateThumbURL),m=1<n.length?"multiple-videos":"one-video",(p=1<n.length?n.length+" "+h.staticStrings.multipleVideos:h.staticStrings.singleVideo)&&u.find(".videoBlockIngress").append(u.find("#videoCount_template").clone().text(p).attr("id","videoCount")).addClass(m));m=c.buildNexusMetric("ib.thumbnailImpression",a+1,d.mediaObjectId,d.groupType,I,J,C,K);c.emitNexusMetric(m);m=c.buildNexusMetric("ib.thumbnailRender",
a+1,d.mediaObjectId,d.groupType,I,J,C,K);c.emitNexusMetric(m);aa||(aa=!0,c.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));a++}if(g.useTabbedImmersiveView(h))return!1}),d(u,e,a,m),h.imageBlockRenderingStartTime&&c.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",f.now()-h.imageBlockRenderingStartTime));return a}function E(a,b){var c=a.attr("src");if(c&&b){a.attr("src",b);var e=new Image;e.onload=function(b){a.attr("src",c)};e.src=
c}}function O(a){t&&t.pause();a.data=k;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";F.dispatch("imageClick",a);c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=c.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,h.videos[0].mediaObjectId,h.videos[0].groupType,I,J,C,K);c.emitNexusMetric(a);c.postCountMetric(b)}function P(a){e=a.player;e.hide=function(){e.pause();f.$("#main-video-container").find(".vse-player-container").hide()};
e.show=function(){f.$("#main-video-container").find(".vse-player-container").show();e.play()};e.getMediaSourceInfo=function(){return g.getMediaSourceInfo()}}var N,h,A,F,u,q,x,G,L,t,S,k,m,e,J,I,C,K,T,aa=!1,U=!1,R="videoThumbnail";return function(a,e,d,l){N=this;h=a;A=e;F=l;S=h.airyConfig;C=h.contentWeblab&&h.contentWeblab+":"+h.contentWeblabTreatment;h.colorToVideo={};h.colorToVideo[h.landingAsinColor]=h.colorToVideo[h.defaultColor]=h.videos;h.tabletWeb?(T="tablet",K="applicationType.ImageBlock.vse_ib_tablet_web"):
f.capabilities.tablet?(T="tablet",f.capabilities.isAmazonApp&&(K="applicationType.ImageBlock.vse_ib_tablet_app")):(T="desktop",K="desktop_web.ImageBlock.vse_ib_iv");N.render=function(a,c,e,d,k,l){u=d;q=k.find("#main-video-container");x=q.parent().find("#video-canvas-caption");G=b("#main-image-container");I=r.location.href;e=A.getCurrentItem().color;!0===l?J=h.mediaAsin:(J=h.colorToAsin[e]&&h.colorToAsin[e].asin,J=g.isDefined(J)?J:h.mediaAsin);h.useChromelessVideoPlayer||q.addClass("chromeful-container");
m=B(c,a,l);H(A.getCurrentItem());g.useTabbedImmersiveView(h)&&f.declarative("videoIngressClick",["click"],O);e=A.getCurrentItem().color;a=g.getVideoHash(e,0,h);-1!==a&&h.tabletWeb&&(a=g.getNilgiriServiceAjaxRequest(h,e,a),n.get(f,"#main-video-container",a,function(){f.$("#main-video-container").find(".vse-player-container").hide()},function(){f.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return m};N.update=function(a){var b=a.data;"ingress"!==b.type&&t&&(t.hide(),q.parent().css("z-index",
-1),x.hide());if("swatchHover"===a.type)b.color===A.getCurrentItem().color?H(A.getCurrentItem()):a.captured||g.lazyLoadingRequired(b,A,h)&&!g.lazyLoadOnHoverEnabled(h)&&H(A.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var e=g.getVideoHash(b.color,b.index,h);if("mouseenter"===a.type&&(c.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+m),"chromeless-video"===b.type)){var d=c.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,e.mediaObjectId,
e.groupType,I,J,C,K);c.emitNexusMetric(d)}H(b);h.usePeekHover&&"click"!==a.type||(g.selectGivenThumbnail(a.$declarativeParent,u),"click"===a.type&&(e=c.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,e.mediaObjectId,e.groupType,I,J,C,K),(!g.useTabbedImmersiveView(h)&&"chromeless-video"===b.type||"tablet"==T)&&c.emitNexusMetric(e),g.useTabbedImmersiveView(h)&&(c.emitNexusMetric(e),c.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+m),k.action="videoIngressClick",k.clickTimeStamp=
a.$event.timeStamp,k.$event=a.$event,k.$currentTarget=a.$currentTarget,F.dispatch("videoIngressClick",k),c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(h.isDPXFeatureEnabled)f.on("triggerVideoAjax",p);f.on("vsePlayer-imageblock_tablet",P)}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(f,b,a,g,l,c,n,d){function p(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function D(){v.find("#ivTitle").click(function(){Z.hide()})}function M(){Q=Pa?{type:"360-spin"}:X.getCurrentItem()}function z(){var a=v.find("#ivStage"),b=Z.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-d.getDimension(c,"padding-top")-d.getDimension(c,"padding-bottom");v.css("height",b);var c=v.find("#ivTitle").outerHeight(!0),e=v.find("#ivVariationSelection").outerHeight(!0),k=v.find("#ivMediaSelection").outerHeight(!0),m=v.find("#ivThumbs"),
f=d.getDimension(m,"margin-top")+d.getDimension(m,"margin-bottom");m.css("height",b-c-e-k-f);v.find("#ivLargeImage").css("height",b);a.css("width",v.width()-d.getDimension(v,"padding-left")-d.getDimension(v,"padding-right")-v.find("#ivThumbColumn").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function H(){v.find("#ivMediaSelect").change(function(){var a=b(this).val();"all"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").show(),"chromeful-video"===
Q.type&&v.find("#ivVideo_"+Q.index).click()):"images"===a?(v.find("#ivVideoList").hide(),v.find("#ivThumbs").show(),v.find(".ivThumbVideo").hide(),"chromeful-video"===Q.type&&(0===ba&&0===Y?v.find("#iv360").click():0===ba?v.find("#ivHeroImage_0").click():v.find("#ivImage_0").click())):"videos"===a&&(v.find("#ivVideoList").show(),v.find("#ivThumbs").hide(),"chromeful-video"!==Q.type?v.find("#ivVideoList_0").click():v.find("#ivVideoList_"+Q.index).click())})}function B(){var a=v.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),e=a.find(".fullscreen");e.removeAttr("style");var d=e.width(),k=e.height();0<e.length&&(e[0].naturalWidth&&(d=e[0].naturalWidth),e[0].naturalHeight&&(k=e[0].naturalHeight));a.css("cursor","auto");var d=0===d?1:d,k=0===k?1:k,m=Math.min(b/d,c/k),f=k*m,g=d*m;1>m?(Qa?a.css("cursor","url('"+y.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(g,d);k=Math.min(f-20,k);e.css({"margin-top":(c-
k)/2,"margin-left":(b-d)/2,height:k,width:d});a.css("visibility","visible");Aa=!1}function E(a){var b=v.find("#ivLargeImage");b.css("visibility","hidden");b.empty();d.animateStageIn(b);b.append(a);B()}function O(){ca&&ca.pause();v.find("#ivLarge360").css("display","none");v.find("#ivLargeVideo").css("display","none");v.find("#ivLargeImage").css("display","none");q()}function P(c){O();v.find("#ivLargeImage").css("display","block");var e;"hero-image"===c?a.isDefined(ja)&&(e=p(ja[Q.index])):a.isDefined(ka)&&
(e=p(ka[Q.index]));if(a.isDefined(e)){v.find(".fullscreen").remove();var k=b("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),m=v.find("#ivLargeImage");d.animateStageOut(m,function(){k.load(function(){E(k)});if(k[0].complete)E(k);else{m.empty();var a=(m.height()-104)/2,c=(m.width()-80)/2;b("\x3cimg\x3e").attr("src",y.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(m)}})}}function N(){var a=parseInt(Q.index,10)+1;a>=ha.length||v.find("#ivVideo_"+a).click()}function h(){var b;
a.isDefined(ha)&&(b=ha[Q.index]);if(a.isDefined(b)){O();var c=v.find("#ivLargeVideo").css("display","block");ca?(ca.isDetached()&&ca.attach(c[0]),a.loadMediaIntoAiry(ca,b,wa,y.tabletWeb),ca.show()):(ca=a.createAiryInstanceForChromeful(c,b,wa,"ImmersiveView"),wa.enableContinuousPlay&&ca.bind("ended",N));ca.play({isAsync:!0})}}function A(){M();var b;b="hero-image"===Q.type?v.find("#ivHeroImage_"+Q.index):"image"===Q.type?v.find("#ivImage_"+Q.index):"chromeful-video"===Q.type||"chromeless-video"===Q.type?
v.find("#ivVideo_"+Q.index):"360-spin"===Q.type?v.find("#iv360"):a.isDefined(ja)?v.find("#ivHeroImage_"+Q.index):v.find("#ivImage_"+Q.index);a.isjQueryObjDefined(b)||(b=v.find("#ivImage_0"));F(b)}function F(a){v.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Q.type="chromeful-video",Q.index=a.attr("id").split("_")[1],h()):a.hasClass("ivHeroImage")?(Q.type="hero-image",Q.index=a.attr("id").split("_")[1],P(Q.type)):a.hasClass("iv360Image")?(Q.type="360-spin",
Q.index=0,u()):(Q.type="image",Q.index=a.attr("id").split("_")[1],P(Q.type))}function u(){O();v.find("#ivLarge360").css("display","block");S();var a=v.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);G();l.postCountMetric("dppc_click360");sa=Date.now()}function q(){0<sa&&(x("dppc_duration360",Date.now()-sa),sa=0)}function x(a,b){r.ue&&r.ue.count(a,b)}function G(){if(0<pa){var a=v.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function L(a,c){if(pa<a.length){var e=b("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});e.hide();c.append(e);e.get(0).onload=function(){c.closest(document.documentElement).length&&(pa++,1===pa&&(G(),0<sa&&x("dppc_loadTime360",Date.now()-sa)),0<Ga&&x("dppc_perSpriteloadTime360",Date.now()-Ga),v.find("#iv360Spinner").hide(),e.show(),xa=5*V.imageLocations[Math.floor(ya/V.imageLocations[0].length)][ya%V.imageLocations[0].length],L(a,c))};e.attr("src",a[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ta+"$2"+ua));Ga=Date.now()}}function t(b){if(a.isDefined(V.spriteWidthSizes)&&0<V.spriteWidthSizes.length){var c=V.spriteWidthSizes,e=c.length,k=c[0],d=c[e-1];if(b<=k)return k;if(b>d)return d;for(k=0;k<e;k++)if(b>c[k]&&b<=c[k+1])return c[k+1]}else return b}function S(){var a=v.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",y.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ha=!0,k())}function k(){if(a.isDefined(V.spriteURLs)&&a.isDefined(v)&&Ha&&!Ia){var c=v.find("#ivLarge360"),k=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});a.isDefined(V.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",V.staticImages.hint360).appendTo(k);b("\x3cdiv\x3e").css({"text-align":"center"}).text(y.staticStrings.dragToSpin).appendTo(k);k.appendTo(c);var k=V.imageWidth,d=V.imageHeight,f=c.parent().width(),g=c.parent().height(),h=0,n=0;k/d>f/g?(ta=t(f),ua=Math.round(d/k*ta),na=Math.ceil(f),ra=Math.ceil(ua/ta*f),n=(g-ra)/2):(ua=t(g),ta=Math.round(k/d*ua),ra=Math.ceil(g),
na=Math.ceil(ta/ua*g),h=(f-na)/2);c.css({"margin-left":h,"margin-top":n,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*na+"px");L(V.spriteURLs,v.find("#image-360-sprites"),0);k=v.find("#ivLarge360");k.bind("mousedown",I);k.bind("touchstart",m);k.bind("touchmove",e);k.bind("touchend",J);b(document).bind("mousemove",C);b(document).bind("mouseup",K);a.isDefined(y.staticImages.grab)&&c.css("cursor","url('"+y.staticImages.grab+"'), auto");
Ia=!0}}function m(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function e(a){Ba&&(T(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function J(a){Ba&&(Ba=!1)}function I(b){Ca=!0;Ka=b.originalEvent.clientX;a.isDefined(y.staticImages.grabbing)&&(b=v.find("#ivLarge360"),b.css("cursor","url('"+y.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+y.staticImages.grabbing+"'), auto"));return!1}function C(a){Ca&&(T(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function K(b){Ca&&(Ca=!1,a.isDefined(y.staticImages.grab)&&(b=v.find("#ivLarge360"),b.css("cursor","url('"+y.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function T(b){for(b=xa-=b/na*180;0>b;)b+=360;for(;360<b;)b-=360;xa=b;var c;b=360;for(var e=0;e<pa;e++)for(var k=0;k<V.imageLocations[e].length;k++){var d=Math.abs(xa-5*V.imageLocations[e][k]);d<b&&(b=d,c=e*V.imageLocations[0].length+k)}c!==ya&&(b=Math.floor(c/V.imageLocations[0].length),
b!==Math.floor(ya/V.imageLocations[0].length)&&(a.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),e=v.find("#image-360-sprites").children(),La.drawImage(e[b],0,0)),b=v.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ya=c;b=c%V.imageLocations[0].length*-1*na;c=-1*Math.floor(c/V.imageLocations[0].length)*ra;e=v.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+b+"px, "+
c+"px, 0)");e.css("transform","translate3d("+b+"px, "+c+"px, 0)")}function aa(){v.delegate(".ivThumb","click",function(){var a=b(this);F(a)});v.delegate(".ivThumbVideoListOuter","click",function(){v.find(".ivThumbVideoListOuter").removeClass("selected");var a=b(this);a.addClass("selected");Q.type="chromeful-video";Q.index=a.attr("id").split("_")[1];h()})}function U(){ca&&!ca.isDetached()&&(wa.volume=ca.getVolume(),ca.detach(),!document.all||r.atob||document.addEventListener||(ca=null));v.find("#ivLargeImage").empty();
q()}function R(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function fa(a){var c=qa.left-(a.pageX-Da[0])*Ea;f.capabilities.rtl&&(c=qa.left-(b(r).width()-a.pageX-Da[0])*Ea);a=qa.top-(a.pageY-Da[1])*Ea;c=R(c,Fa.left);a=R(a,Fa.top);v.find(".fullscreen").css({left:c,top:a})}function ea(){v.delegate("#ivLargeImage","click",function(a){if(Aa)B();else if(za){v.find(".fullscreen").removeAttr("style");if(za){var b=v.find("#ivLargeImage"),c=b.find(".fullscreen");Qa?b.css("cursor","url('"+y.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var e=v.find("#ivLargeImage");Fa.left=e.width()-c.width();Fa.top=e.height()-c.height();var e=b.height()/2,k=b.width()/2;Da=[b.offset().left+k,b.offset().top+e];qa.top=e-c.height()/2;qa.left=k-c.width()/2;c.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(c.height()/b.height(),c.width()/b.width())}fa(a)}});v.delegate("#ivLargeImage","mousemove",function(a){Aa&&fa(a)})}function ga(e){if(a.isImmersiveViewEnabled(y,
X.getCurrentItem().color))if(Ma){var k=e.$event.originalEvent;k.acknowledge&&k.acknowledge(e.$currentTarget[0]);Pa=a.isDefined(e)&&"button-360-click"===e.action;c.isEnabled&&n.logImmersiveViewRequestServed(c);l.postCountMetric("dppc_immersiveViewOpened");if(a.isDefined(Z))Z.show();else{e=b("#auiImmersiveViewDiv");var k=b(r).height()-150,m=b(r).width()-75;Z=Ma.create(e,{name:"immersiveView",activate:"onclick",width:m,height:k,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){v=b("#ivMain");
e=X.getCurrentItem().color;ka=y.colorImages[e];ja=y.heroImage[e];ha=y.useChildVideos?y.colorToVideo[e]:y.videos;Oa=W()&&y.spin360ColorEnabled[e];V=W()?y.spin360ColorData[e]:da;M();ma=Y=oa=ba=0;a.isDefined(ja)&&(Y=ja.length);a.isDefined(ka)&&(ba=ka.length);a.isDefined(ha)&&(oa=ha.length);Oa&&(ma=1);d.populateTitle(v.find("#ivTitle"),45,y);d.populateVariationSelection(v.find("#ivVariationSelection"));e=v.find("#ivMediaSelect");0===ba+ma||0===oa?(e.parent().hide(),v.find("#ivThumbs").addClass("noMediaSelection")):
(e.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(y.staticStrings.allMedia+" ("+(Y+ba+ma+oa)+")").appendTo(e),b("\x3coption/\x3e").attr("value","images").text(y.staticStrings.images+" ("+(Y+ba+ma)+")").appendTo(e),b("\x3coption/\x3e").attr("value","videos").text(y.staticStrings.videos+" ("+oa+")").appendTo(e),e.parent().show(),e.val("all"));e=v.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var k=Y+ba+oa+ma,g=m=0;m<k;)for(var h=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),
p=0;3>p&&m<k;p++,m++,g++)if(g<Y){var q=ja[m].thumb,u=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+m).appendTo(h);u.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(q)+'") center no-repeat')}else if(g>=Y&&g<ba+Y)q=ka[m-Y].thumb,u=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(m-Y)).appendTo(h),u.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(q)+
'") center no-repeat');else if(g>=Y+ba&&g<ba+Y+ma)u=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h),u.find(".ivThumbImage").css("background",'url("'+(a.isDefined(y.staticImages.icon360)?d.getResizedThumbnailURL(y.staticImages.icon360,!0):"")+'") center no-repeat');else if(q=ha[m-ba-Y-ma],u=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(m-ba-Y-ma)).appendTo(h),u.find(".ivThumbImage").css("background",
'url("'+q.thumbUrl+'") center no-repeat'),a.isDefined(q)){var F={position:"triggerTop"},A=v.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");A.find(".ivVideoPopoverTitle").text(q.title);A.find(".ivVideoPopoverDuration").text(q.durationTimestamp);F.inlineContent=A[0];f.declarative.create(u,"a-tooltip",F)}e=v.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();k=e.find(".placeholder");for(m=0;m<oa;m++)g=ha[m],h=k.clone().removeClass("placeholder").appendTo(e),
h.attr("id","ivVideoList_"+m),h.find(".ivThumbImage").css("background",'url("'+g.thumbUrl+'") center no-repeat'),h.find(".ivThumbTitle").text(g.title),h.find(".ivThumbDuration").text(g.durationTimestamp);v.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=y.airyConfig;Na=!1;Ra()}}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else l.postCountMetric("immersiveViewNotExistsClickCount")}function va(b){var e=
y.colorToAsin[b],c={},d=500;if(e&&e.asin){c.params={asin:e.asin};var m="360"+e.asin,f=Date.now();c.success=function(e){x("dppc_asyncRequestTime360",Date.now()-f);e&&a.isDefined(e.spin360.spin360Model)?(a.ajaxState(m,"success"),y.spin360ColorData[b]=e.spin360.spin360Model,b===X.getCurrentItem().color&&(V=y.spin360ColorData[b],k())):c.error()};c.error=function(){l.postCountMetric("dppc_asyncFailed360");x("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",
c)},d):a.ajaxState(m,"fail")};a.ajaxState(m)&&"fail"!==a.ajaxState(m)||(g.load("/gp/product/features/apparel-main-image/360.html",c),a.ajaxState(m,"sent"))}}function W(){return a.isDefined(y.spin360ConfigEnabled)&&y.spin360ConfigEnabled}var ia,y,X,la,Z,v,ja,ka,ha,Y,ba,oa,ma,Q,ca,wa,V,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;w.when("a-modal").execute(function(a){Ma=a});var Ra=
f.once(function(){H();aa();ea();f.on("a:popover:afterUpdatePosition:immersiveView",z);f.on("a:popover:afterShow:immersiveView",A);f.on("a:popover:afterHide:immersiveView",U);D()});return function(e,k,m,g){ia=this;y=e;X=k;c.refToModel=X;la=g;W()&&(y.spin360ColorData[y.landingAsinColor]=y.spin360ColorData[y.defaultColor],y.spin360ColorEnabled[y.landingAsinColor]=y.spin360ColorEnabled[y.defaultColor]);a.isDefined(y.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
d.addStyleCodeToURL(y.staticImages.icon360,"_FMpng_RI_"));ia.render=function(b,e,c,k,d,m){Na=!0;W()&&y.spin360ColorEnabled[b]&&!a.isDefined(y.spin360ColorData[b])&&(y.spin360ColorData[b]={},va(b));a.isImmersiveViewEnabled(y,X.getCurrentItem().color)&&W()&&y.spin360ColorEnabled[b]&&(e===y.maxAlts&&(b=k.find(".item.imageThumbnail"),c=k.find(".item.videoThumbnail"),a.isDefined(c)&&1<c.length?c.last().remove():b.last().remove(),e--),b=k.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
f.declarative.create(b,"button-360-click"),k.append(b),e++,l.postCountMetric("dppc_display360"));return e};ia.update=function(a){};a.isImmersiveViewEnabled(y,X.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");la.register("imageClick",ga);la.register("button360Click",ga)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(f,b,a,g,l,c,n){function d(){var a=
H.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-n.getDimension(c,"padding-top")-n.getDimension(c,"padding-bottom");b("#iv-tab-view-container").css("height",a);O=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==b(this).css("display")}).length;1<O?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
b("#iv-tab-view-container .iv-tab-content").css("height",a);f.trigger("dp:image-block:immersive-view:resize")}function p(){f.trigger("dp:image-block:immersive-view:reset")}function D(d){if(a.isImmersiveViewEnabled(z,H.getCurrentItem().color))if(N){var n=d.$event.originalEvent;n.acknowledge&&n.acknowledge(d.$currentTarget[0]);l.isEnabled&&c.logImmersiveViewRequestServed(l);g.postCountMetric("dppc_immersiveViewOpened");a.isDefined(d)&&("button-360-click"===d.action?b("#iv360TabHeading").click():"videoIngressClick"===
d.action?(P=d.clickTimeStamp,b("#ivVideosTabHeading").click()):"showroomIngressClick"===d.action?(P=d.clickTimeStamp,b("#ivShowroomTabHeading").click()):b("#ivImagesTabHeading").click());n=H.getImmersiveViewModalInstance();if(a.isDefined(n))n.show();else{d=b("#auiImmersiveViewDiv");var n=Math.min(Math.max(b(r).height()-150,540),1080),p=Math.min(Math.max(b(r).width()-75,990),1980),n=N.create(d,{name:"immersiveView",activate:"onclick",width:p,height:n,popoverLabel:"ImmersiveView",hideHeader:!0});H.setImmersiveViewModalInstance(n);
d.click()}E&&(E=!1,h(),f.trigger("dp:image-block:immersive-view:init"))}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else g.postCountMetric("immersiveViewNotExistsClickCount")}var M,z,H,B,E=!0,O=0,P,N;w.when("a-modal").execute(function(a){N=a});var h=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",d);f.on("a:popover:afterShow:immersiveView",d);f.on("a:popover:afterHide:immersiveView",
p)}),A=f.once(function(){var a=b("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(c){var d=a.filter(".iv-active");d.attr("id")!==b(this).attr("id")&&f.trigger("dp:ivTabs:"+d.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();d=b(this).find("a").attr("data-iv-tab-view");b("#"+d).show();"ivVideosTab"===d&&(c.clickTimeStamp=P||c.timeStamp);f.trigger("dp:ivTabs:"+d+":select",
c);g.postCountMetric("dppc_"+d);return!1})});return function(b,c,d,f){M=this;z=b;H=c;l.refToModel=H;B=f;M.render=function(a,b,c,d,k,m){g.postCountMetric("dpcc_altThumbs_"+b);E=!0};M.update=function(a){};M.getTitle=function(){};M.getVariationSelectionInfo=function(){};A();a.isImmersiveViewEnabled(z,H.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");B.register("imageClick",D);B.register("button360Click",D);a.useTabbedImmersiveView(z)&&(B.register("videoIngressClick",D),B.register("showroomIngressClick",
D))}});"use strict";w.when("A").register("ImageBlockLoader",function(f){return{load:function(b,a){a=a||{};a.timeout=a.timeout||4E3;f.ajax(b,a)}}});"use strict";w.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(f,b,a,g,l,c,n,d){function p(a){return null!==a&&"undefined"!==typeof a}function D(a){var c=0;b.each(a,function(a,b){var k=parseInt(b[1],10);k>c&&(c=k)});return c}function M(a){var c=0;b.each(a,
function(a,b){var k=parseInt(b[0],10);k>c&&(c=k)});return c}function z(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=D(a);0<a&&(b=Math.min(b,a));return b}function w(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=M(a);0<a&&(b=Math.min(b,a));return b}function B(a){var c;b.each(a,function(a,b){p(c)||(c=b[1]/b[0])});return c||1}function E(c,d,e,f,h,n,l,p,q,A,u,t,F){var D=b.extend({},e.foresterMetadataParams);null!==f&&(D.method+="."+f);var z=[];d.disabledViewIds&&(z=d.disabledViewIds);
return a.embed({parentElement:c[0],streamingUrls:d.url,contentId:d.mediaObjectId,contentMinAge:Number(d.minimumAge||"")||0,contentTitle:d.title,swfUrl:e.swfUrl,foresterMetadataParams:D,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:d.slateUrl,postMediaSlate:d.slateUrl},videoAds:e.videoAds,bindings:{play:function(){if("ImmersiveView"===f)x||(x=!0,g.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(G||(G=!0,g.postCountMetric("dppc_chromefulVideoPlayedPV")),
!A){var a=g.buildNexusMetric("ib.thumbnailClick",q,d.mediaObjectId,d.groupType,u,t,F);g.emitNexusMetric(a)}}},cuePoints:[{values:d.durationSeconds-1,type:"position",callback:function(a,b,c){h&&(O(0,n,p),P(l))}}],disabledViewIds:z})}function O(a,b,c){b.fadeTo(500,0,function(){N(a,c);b.fadeTo(500,1)})}function P(a){a&&a.toggle()}function N(a,c){var e=c.find("img");p(e[a])&&b(e[a]).click()}function h(a,b){S[a]=b?b:S[a];return S[a]}function A(a,c,e){e=e||t;e=e.colorImages;if(1>e.length||!p(e[a])||!p(c))return-1;
var d=-1;b.each(e[a],function(a,b){b.variant===c&&(d=a)});return d}function F(a,c,e){e=e||t;e=e.colorImages;return!(p(e)&&p(e[a])&&p(e[a][c])&&p(e[a][c].main))||1>b.map(e[a][c].main,function(a,b){return b}).length?-1:e[a][c]}function u(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function q(a,c){var e;if(e=a.useIV)e=a.colorImages&&a.colorImages[c]&&0<a.colorImages[c].length?!0:!1;n.isEnabled&&(n.IVApplicaple=e,d.logImmersiveViewApplicability(b,
n));return e}var x,G,L,t=b.extend(!0,{},l,c),S={};return{isDefined:p,isDefinedAndEmpty:function(a){return p(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return p(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return p(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:B,getMaxHeightOfMainImage:w,getMaxWidthOfMainImage:z,getMaxDimensionsOfMainImage:function(a,
b,c){if(c.acEnabled)return[b.height(),b.width()];var d=w(a,b,c);b=z(a,b,c);a=B(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(p(d)){a=d.offsetWidth/b;a=Math.min(a,c);var f;b=t.mainImageHeightPartitions;c=t.mainImageMaxSizes;if(p(c)&&p(b)){for(var g=0,h=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)h>b[d]&&(g=d+1);c.length>=g&&(f=c[g])}p(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,
c){if(a){c=c||t;var e="";b.each(c.visualDimensions,function(b,c){a[c]&&(e+=" "+a[c])});return e&&e.substring(1)}},createThumbnail:function(a,b,c,d){var g=c.find(".template").clone().removeClass("template").addClass("item"),h=document.createElement("img");h.src=b;g.find(".placeHolder").replaceWith(h);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&g.addClass("heroImageThumbnail");p(d)&&g.addClass(d);f.declarative.create(g,"thumb-action",a);g.attr&&g.attr("data-ux-click","");c.append(g)},
selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,d,f,g,h,n){E(a,b,c,d,f,g,h,n,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:E,loadMediaIntoAiry:function(a,b,c,d){a&&a.getMediaSourceInfo()!==b.url&&(d?(L={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},
a.loadMedia(L)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(a){a&&(b("#imageBlock .unvailableVariation").html(a),b("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){b("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:O,toggleVideoCaption:P,selectThumbnail:N,spinner:function(a,c){var e=b("#imageBlock .a-spinner").parent();
0===e.length&&(e=b("\x3cdiv\x3e\x3c/div\x3e").append(b("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(e),e.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?e.show():e.hide();return e},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:h,getIndexForVariant:A,getImageHash:F,lazyLoadingRequired:function(a,b,c){b=Math.max(A(a.color,b.getCurrentItem().variant,c),0);b=-1!==F(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==h(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:u,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();u(c,16,9,b)},d||0)},getVideosCount:function(a,
b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!p(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return p(a)&&p(a[b])&&p(a[b].url)?a[b]:-1},isImmersiveViewEnabled:q,playVideoInImmersiveView:function(a,b){return q(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return p(L)?L.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,
b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){r.ue&&r.ue.tag&&r.ue.tag(a)},isShoppableScenesEnabled:function(){return t.shoppableSceneWeblabEnabled}}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(f,b,a,g){function l(c,d,f,h){if(!a.isjQueryObjDefined(c.find(".a-button-selected"))){var l=
E.getCurrentItem();if(!h||"chromeless-video"!==l.type||!B.autoplayVideo){h=0;if("hero-image"===l.type){h=n(l.color,l.variant);if(-1===h)return;h=-1!==h?h:0}var p=d+h;p>=f&&(h=0,p=d);d=g.getHeroImageHash(B,l.color,h);-1!==d&&(O.dispatch("updateModel",{data:{index:h,thumbnailIndex:p,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(p),a.selectGivenThumbnail(b(d),c))}}}function c(c,d,f){if("hero-video"===E.getCurrentItem().type)return c;d=B.heroImage&&B.heroImage[d];var g=c;a.isDefined(d)&&
(b.each(d,function(b,d){c<B.maxAlts&&(a.createThumbnail({type:"hero-image",index:b,thumbnailIndex:c,variant:d.variant},d.thumb,P,"imageThumbnail"),c++)}),l(P,g,c,f));return c}function n(c,d){var f=B.heroImage;if(1>f.length||!a.isDefined(f[c])||!a.isDefined(d))return-1;var g=-1;b.each(f[c],function(a,b){b.variant===d&&(g=a)});return g}function d(){if(N.length&&B.repositionHeroImage){var b=g.getHeroDimParams(B,E.getCurrentItem()),c;a.isDefined(b)&&(c=a.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+
b.yPos+"px ",N.css({"background-position":c,"background-size":b.width+"px "+b.height+"px ","max-width":b.width+"px ","min-height":b.height+"px ",filter:"","-ms-filter":""}))}}function p(b,c,d,f){if(N.length&&b&&c){if("function"===typeof d||f){var h=new Image;h.onload=f?function(){N.css("background-image",'url("'+b+'")')}:d;h.src=b}d=c[1];var h=c[0],n;f||N.css({"background-image":'url("'+b+'")'});B.repositionHeroImage&&(c=g.getHeroDimParams(B,E.getCurrentItem(),c),a.isDefined(c)&&(d=c.width,h=c.height,
n=a.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));N.css({"background-position":n,"background-size":d+"px "+h+"px ","max-width":d+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function D(a,c,d,f){a=g.getHeroImageHash(B,a,c);if(-1===a)return-1;c=b.map(a.main,function(a,b){return b})[0];p(c,a.main[c],d,f)}function r(a,b,c){if("hero-image"!==a.type)return-1;var d=n(a.color,E.getCurrentItem().variant),d=-1!==d?d:0;if(-1===g.getHeroImageHash(B,a.color,d))return-1;var f=
E.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=d;z(a,b,c)}function z(a,b,c){var d=g.getHeroImageHash(B,a.color,a.index),n;n=a&&h&&f.equals(a,h)?!0:!1;h||(h=a);if(!n&&a||b)D(a.color,a.index,b,c),h=a;N.removeClass("hide-background");f.trigger("dp:image-block:update",d)}var w,B,E,O,P,N,h={};return function(f,g,h,n){w=this;B=f;E=g;O=n;B.heroImage[B.landingAsinColor]=B.heroImage[B.defaultColor];w.render=function(a,d,f,g,h,n,l){P=g;N=b("#heroImage");a=c(d,
a,n);r(E.getCurrentItem(),l,n);return a};w.update=function(b){var c=b.data;"ingress"!==c.type&&N.addClass("hide-background");"swatchHover"===b.type?b.captured||(c.type=E.getCurrentItem().type,-1!==r(c)&&(b.captured=!0)):"hero-image"===c.type&&(z(c),"click"!==b.type&&B.usePeekHover||a.selectGivenThumbnail(b.$declarativeParent,P))};O.register("resize",d)}});"use strict";w.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(f,b,a){var g,l,c,n;return function(b,p,D,
r){g=this;l=b;c=r;g.render=function(b,c,d,p,D,r,w){n=p;g=this;d=l.maxAlts;p=c;D=l.colorImages[b]?l.colorImages[b].length:0;D+=a.getVideosCount(b,l);b=l.heroImage[b];r=0;b&&(r=b.length);b=D+r;b>d&&(d=b-d,b=n.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",p={type:"ingress",index:0,thumbnailIndex:c,variant:""},b.find("#altIngressText").append(d),f.declarative.create(b,"thumb-action",p),n.append(b),p=c++);return p};g.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&c.dispatch("imageClick",a)}}});"use strict";w.when("imageBlockUtils").register("ImageBlockState",function(f){return function(b,a,g){this.getImageHash=function(a){var c=g.getCurrentItem();a=f.getIndexForVariant(c.color,a||"MAIN",b);return f.getImageHash(c.color,a,b)};this.onImageUpdateForTwister=function(b){a.register("updateSelection",function(a){"swatchClick"===a.type&&"function"===typeof b&&b()})}}});"use strict";w.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(f,b){function a(a,b){var d;if(b.repositionHeroImage){d=a[1];var f=a[0];if(768>=(r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,f*=.7;else{var g=((r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,g=Math.max(Math.min(g,1),0);d*=.7+.3*g;f*=.7+.3*g}d=[d,f]}return d}function g(a,f,d){var g;if(d.repositionHeroImage){var l=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;
if(b.isDefined(d)){g=Math.max((l-Math.min(1500,a))/2,0);var w=Math.max((l-a)/2,0);g-=w;l=Math.max(Math.min(l,1500),1024);g=g+(l-420-23)/2-a/f[1]*d}}return g}function l(a,g,d){a=a.heroImage;return!(b.isDefined(a)&&b.isDefined(a[g])&&b.isDefined(a[g][d])&&b.isDefined(a[g][d].main))||1>f.map(a[g][d].main,function(a,b){return b}).length?-1:a[g][d]}return{getHeroImageHash:l,getHeroDimParams:function(c,n,d){if(c.repositionHeroImage){if(!b.isDefined(d)){d=l(c,n.color,n.index);if(-1===d)return;n=f.map(d.main,
function(a,b){return b})[0];d=d.main[n]}n=a(d,c);c=g(n[0],d,c);return{height:n[1],width:n[0],xPos:c,yPos:75}}}}});"use strict";w.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(f){function b(){this.render=function(){};this.update=function(){}}return function(a,g,l,c){var n=!1,d=new b;w.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(b){b!==da&&(n=!0,d=new b(a,g,l,c))});a&&!0===a.showroomEnabled&&!1===n&&f.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");
return d}});"use strict";w.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,b,a){function g(b,g){var d=f.copy(b);if(a.isDefined(b)&&b.length>g){try{for(var l=-1,r=0;r<b.length;r++){var w=b.charAt(r);if(" "===w||"."===w||"?"===w||";"===w||","===w||":"===w)l=r;if(r===g-4){d=b.substring(0,-1===l?r:l);break}}}catch(z){d=b.substring(0,g-3)}d+="..."}return d}function l(a,b){var d=a.lastIndexOf(".");return a="_"===a.charAt(d-1)?a.substring(0,d-1)+b+a.substring(d):a.substring(0,
d)+"."+b+a.substring(d)}return{getDimension:function(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d},attachTabSelectHandler:function(a,b){f.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){f.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){f.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){f.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){f.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(a){b("#"+a).hide()},unhideTabHeading:function(a){b("#"+a).show()},addStyleCodeToURL:l,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var d="_AA50_";b&&(d+="FMpng_RI_");return l(a,d)},populateVariationSelection:function(c){if(a.isDefined(r.DetailPage)&&a.isDefined(r.DetailPage.StateController)){c.empty();
var f=r.DetailPage.StateController.getState(),d=f.variation_label_order,g;for(g in d)if(d.hasOwnProperty(g)){var l=d[g],w=f.selected_variations[l],l=f.variation_display_labels[l];w&&b("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+w).appendTo(c)}}},populateTitle:function(a,b,d){a.html(d.title);a.attr("title",a.text());a.html(g(d.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,d,f){r.ueLogError&&
r.ueLogError(f,{logLevel:a,attribution:b,message:d})}}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,b,a,g,l){function c(){l.populateTitle(u.find("#ivTitle"),160,A)}function n(){var b=F.getCurrentItem().color;x=A.colorImages[b];q=A.heroImage[b];G=L=0;a.isDefined(q)&&(G=q.length);a.isDefined(x)&&(L=x.length)}function d(a){return a.hiRes||a.large||a.main[a.main.length-1]}function p(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,g=0===g?1:g,h=Math.min(b/f,c/g),k=g*h,l=f*h;1>h?(S?a.css("cursor","url('"+A.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),e=!0):e=!1;f=Math.min(l,f);g=Math.min(k-20,g);d.css({"margin-top":(c-
g)/2,"margin-left":(b-f)/2,height:g,width:f});a.css("visibility","visible");m=!1}function r(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);b.append(a);p()}function w(c){u.find("#ivLargeImage").css("display","none");u.find("#ivLargeImage").css("display","block");var e;"hero-image"===c?a.isDefined(q)&&(e=d(q[t.index])):a.isDefined(x)&&(e=d(x[t.index]));if(a.isDefined(e)){u.find(".fullscreen").remove();var f=b("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),
g=u.find("#ivLargeImage");l.animateStageOut(g,function(){f.load(function(){r(f)});if(f[0].complete)r(f);else{g.empty();var a=(g.height()-104)/2,c=(g.width()-80)/2;b("\x3cimg\x3e").attr("src",A.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(g)}})}}function z(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?t.type="hero-image":t.type="image";t.index=a.attr("id").split("_")[1];w(t.type);g.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(t.index,10)+1)+"_"+(G+L))}function H(){u.delegate(".ivThumb","click",function(){var a=b(this);z(a)})}function B(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function E(a){var b=I.top-(a.pageY-K[1])*C;a=B(I.left-(a.pageX-K[0])*C,J.left);b=B(b,J.top);u.find(".fullscreen").css({left:a,top:b})}function O(){u.delegate("#ivLargeImage","click",function(a){if(m)p();else if(e){u.find(".fullscreen").removeAttr("style");if(e){var b=u.find("#ivLargeImage"),c=b.find(".fullscreen");S?b.css("cursor",
"url('"+A.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));m=!0;var d=u.find("#ivLargeImage");J.left=d.width()-c.width();J.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;K=[b.offset().left+f,b.offset().top+d];I.top=d-c.height()/2;I.left=f-c.width()/2;c.css({position:"relative",left:I.left,top:I.top});C=Math.max(c.height()/b.height(),c.width()/b.width())}E(a);g.postCountMetric("dpcc_iv_largeImageCLick")}});
u.delegate("#ivLargeImage","mousemove",function(a){m&&E(a)})}function P(){u.find("#ivLargeImage").empty()}function N(d){if(k){u=b("#ivMain");n();t=F.getCurrentItem();c();l.populateVariationSelection(u.find("#ivVariationSelection"));d=u.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var e=G+L,f=0,g=0;f<e;)for(var h=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),m=0;4>m&&f<e;m++,f++,g++)if(g<G){var p=q[f].thumb,r=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(h);r.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(p)+'") center no-repeat')}else g>=G&&g<L+G&&(p=x[f-G].thumb,r=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-G)).appendTo(h),r.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(p)+'") center no-repeat'));T();k=!1}else c();d=b("#ivImagesTab").height();u.css("height",d);e=u.find("#ivTitle").outerHeight(!0);f=u.find("#ivVariationSelection").outerHeight(!0);
g=u.find("#ivThumbs");h=l.getDimension(g,"margin-top")+l.getDimension(g,"margin-bottom");g.css("height",d-e-f-h);u.find("#ivLargeImage").css("height",d);d=u.find("#ivStage");e=u[0]&&u[0].getBoundingClientRect&&Math.floor(u[0].getBoundingClientRect().width)||u.width();d.css("width",e-l.getDimension(u,"padding-left")-l.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-l.getDimension(d,"margin-left")-l.getDimension(d,"margin-right"));t=F.getCurrentItem();d="hero-image"===t.type?u.find("#ivHeroImage_"+
t.index):"image"===t.type?u.find("#ivImage_"+t.index):a.isDefined(q)?u.find("#ivHeroImage_"+t.index):u.find("#ivImage_"+t.index);a.isjQueryObjDefined(d)||(d=u.find("#ivImage_0"));z(d)}var h,A,F,u,q,x,G,L,t,S=navigator.userAgent.match(/msie|trident/i),k=!0,m=!1,e=!1,J={},I={},C,K,k=!0,T=f.once(function(){H();O();l.attachImmersiveViewResizeHandler(N);l.attachTabDeselectHandler("ivImagesTab",P)});return function(a,c,d,e){h=this;A=a;F=c;h.render=function(a,c,d,e,f,g){k=!0;n();0===G+L?l.hideTabHeading("ivImagesTabHeading"):
l.unhideTabHeading("ivImagesTabHeading");1===G+L?b("#ivThumbs").hide():b("#ivThumbs").show()};h.update=function(a){};l.attachTabSelectHandler("ivImagesTab",N)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,b,a,g,l,c,n){function d(){x.delegate(".ivThumb","click",function(){var a=b(this);x.find(".ivThumb").removeClass("selected");a.addClass("selected");
a.hasClass("ivThumbVideo")&&(G.type="chromeful-video",G.index=a.attr("id").split("_")[1])})}function p(){if(ea){var a=b("#ivVideosTab").height();x.css("height",a);var c=x.find(".vse-lb-container");L=a-l.getDimension(c,"padding-top")-l.getDimension(c,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(aa){x.css({"max-width":Math.floor(1.77*L)});return}var a=x.find(".vse-player-container"),c=x.find(".vse-video-action-strip"),d=x.find(".vse-lb-video-metadata"),e=Math.floor(L-l.getDimension(d,
"height")-l.getDimension(c,"height")),f=Math.floor(1.77*e);a.css({"max-height":e,"max-width":f,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}U&&(a=x.find(".vse-vertical-scroll"),c=l.getDimension(a,"margin-top")+l.getDimension(a,"margin-bottom"),a.css("max-height",L-c))}function w(){M();t&&t.pause();R=!1;K=!0;e=null;fa=!0;ea=!1}function M(){R=!1;t&&t.pause()}function z(c){e=c.clickTimeStamp?
c.clickTimeStamp:f.now();a.isDefined(q)&&(q.eventTimestamp=e);T&&(n.get(f,"#ivVideoBlock",u,y,X),x=b("#ivVideoBlock"),F.getCurrentItem(),G=F.getCurrentItem(),da());p();R=!0;T=!1;E()}function H(a){T&&(x=b("#ivVideoBlock"),F.getCurrentItem(),G=F.getCurrentItem(),da());R&&E();p()}function B(a){t=a.player;g.postTimeMetric("vse_ib_desktop_player_initialisation_duration",f.now()-ga);A.imageBlockRenderingStartTime&&g.postTimeMetric("vse_ib_desktop_time_to_player_interactive",f.now()-A.imageBlockRenderingStartTime);
ea&&(N(),E())}function E(){if(t&&R&&(x.find(".vse-lb-container").animate({opacity:1},200),t.play(q),g.postCountMetric("dpcc_vse_videoBlock_video_played"),K)){var a=r.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,g.postTimeMetric("dpcc_vse_vitff",a),K=!1)}}function O(){f.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function P(a){S=a.popover.$popover;ea=!0;N()}function N(){ea&&fa&&R&&t&&(S.addClass(f.$(S).find(".vse-lb-container").data("cssClass")),f.trigger("vse:detailpage-imageblock:page:lightBoxOpened",
{lightBoxId:"ivVideoBlock",assetSpec:q}),p(),fa=!1)}var h,A,F,u,q,x,G,L,t,S,k,m,e,J,I,C,K=!0,T=!0,aa=!1,U=!1,R=!1,fa=!0,ea=!1,ga=0,da=f.once(function(){d();l.attachImmersiveViewResizeHandler(H);l.attachTabDeselectHandler("ivVideosTab",M);l.attachImmersiveViewResetHandler(w)}),W=function(c,d,e){b("#ivVideoBlockSpinner").addClass("aok-hidden");g.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=F.getCurrentItem().color;c=a.getVideoHash(c,0,A);t||(t=a.createAiryInstanceForChromeful(b("#ivVideoBlock"),
c,A.airyConfig,"ImmersiveView"));aa=!0;b("#ivVideoBlock").css({"max-width":1.77*L,margin:"0 auto"});R&&aa&&t.play({isAsync:!0})},ia=function(a,c,d){T||n.get(a,"#ivVideoBlock",u,y,X);b("#ivVideoBlockSpinner").addClass("aok-hidden")},y=function(a,b,c){U=!0;p()},X=function(a,b,c){g.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,d,g,n){h=this;A=b;F=d;h.render=function(b,d,g,h,n,p){b=F.getCurrentItem().color;d=a.getVideoHash(b,
0,A);!0===p?k=A.mediaAsin:(k=A.colorToAsin[b]&&A.colorToAsin[b].asin,k=a.isDefined(k)?k:A.mediaAsin);m=null!==A.vseVideoDataSourceTreatment&&"T1"===A.vseVideoDataSourceTreatment?"ASIN":"physicalID";J=A.contentWeblab;I=A.contentWeblabTreatment;C=A.parentAsin||"";T=!0;-1===d?l.hideTabHeading("ivVideosTabHeading"):(l.unhideTabHeading("ivVideosTabHeading"),u={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:k,contentIDType:"ASIN",
parentContentID:C,parentContentIDType:"ASIN"},video:{contentID:d.mediaObjectId,contentIDType:m,videoURL:d.url,imageURL:d.slateUrl},requestId:A.dpRequestId,weblabContext:[{name:J,assignment:I}],metadata:{ProductTitle:A.title}},q={videoUrl:u.video.videoURL,contentId:u.video.contentID,duration:0,vendorCode:"",eventTimestamp:a.isDefined(e)?e:f.now(),imageUrl:u.video.imageURL,productAsin:u.product.contentID,index:0},a.isDefinedAndNotEmpty(t)&&(t.destroy(),t=null),ga=f.now(),c.get(f,"#ivVideoBlock",u,ia,
W))};h.update=function(a){};l.attachTabSelectHandler("ivVideosTab",z);f.on("vsePlayer-detailpage-imageblock",B);f.on("a:popover:afterShow:immersiveView",P);f.on("a:popover:beforeHide:immersiveView",O)}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(f,b,a,g,l,c,n,d,p){function r(){var a=b("#iv360Tab").height();C.css("height",
a);var c=C.find("#ivTitle360").outerHeight(!0),d=C.find("#ivVariationSelection360").outerHeight(!0),e=C.find("#ivThumbs360"),f=n.getDimension(e,"margin-top")+n.getDimension(e,"margin-bottom");e.css("height",a-c-d-f);a=C.find("#ivStage360");c=C[0]&&C[0].getBoundingClientRect&&Math.floor(C[0].getBoundingClientRect().width)||C.width();a.css("width",c-n.getDimension(C,"padding-left")-n.getDimension(C,"padding-right")-C.find("#ivThumbColumn360").width()-n.getDimension(a,"margin-left")-n.getDimension(a,
"margin-right"))}function w(){E();var a=C.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});n.animateStageIn(a)},200);z()}function z(){if(0<v){var a=C.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function H(a,d){if(v<a.length){var f=b("\x3cimg /\x3e").css({display:"block",width:6*T+"px",height:aa+"px"});f.hide();d.append(f);f.get(0).onload=function(){d.closest(document.documentElement).length&&(v++,1===v&&(z(),0<y&&(l.time("dppc_loadTime360",
Date.now()-y,e.mediaAsin),c.postTimeMetric("dppc_loadTime360",Date.now()-y))),0<X&&(l.time("dppc_perSpriteloadTime360",Date.now()-X,e.mediaAsin),c.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-X)),C.find("#iv360Spinner").hide(),f.show(),W=5*K.imageLocations[Math.floor(ia/K.imageLocations[0].length)][ia%K.imageLocations[0].length],H(a,d))};f.attr("src",a[v].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+U));X=Date.now()}}function B(b){if(a.isDefined(K.spriteWidthSizes)&&0<K.spriteWidthSizes.length){var c=
K.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(b<=e)return e;if(b>f)return f;for(e=0;e<d;e++)if(b>c[e]&&b<=c[e+1])return c[e+1]}else return b}function E(){var a=C.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",
e.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ga=!0,O())}function O(){if(a.isDefined(K.spriteURLs)&&a.isDefined(C)&&ga&&!va){var c=C.find("#ivLarge360"),d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(K.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",
K.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(e.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=K.imageWidth,f=K.imageHeight,g=c.parent().width(),k=c.parent().height(),l=0,n=0;d/f>g/k?(R=B(g),U=Math.round(f/d*R),T=Math.ceil(g),aa=Math.ceil(U/R*g),n=(k-aa)/2):(U=B(k),R=Math.round(d/f*U),aa=Math.ceil(k),T=Math.ceil(R/U*k),l=(g-T)/2);c.css({"margin-left":l,"margin-top":n,width:T+"px",height:aa+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",
6*T+"px");H(K.spriteURLs,C.find("#image-360-sprites"),0);d=C.find("#ivLarge360");d.bind("mousedown",A);d.bind("touchstart",P);d.bind("touchmove",N);d.bind("touchend",h);b(document).bind("mousemove",F);b(document).bind("mouseup",u);a.isDefined(e.staticImages.grab)&&c.css("cursor","url('"+e.staticImages.grab+"'), auto");va=!0}}function P(a){Z=!0;ea=a.originalEvent.targetTouches[0].clientX}function N(a){Z&&(q(a.originalEvent.targetTouches[0].clientX-ea),ea=a.originalEvent.targetTouches[0].clientX)}function h(a){Z&&
(Z=!1)}function A(b){la=!0;fa=b.originalEvent.clientX;a.isDefined(e.staticImages.grabbing)&&(b=C.find("#ivLarge360"),b.css("cursor","url('"+e.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+e.staticImages.grabbing+"'), auto"));return!1}function F(a){la&&(q(a.originalEvent.clientX-fa),fa=a.originalEvent.clientX)}function u(b){la&&(la=!1,a.isDefined(e.staticImages.grab)&&(b=C.find("#ivLarge360"),b.css("cursor","url('"+e.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor",
"auto")))}function q(b){W-=b/T*180;ka&&(l.count("dppc_360dragToSpin",e.mediaAsin),c.postCountMetric("dppc_360dragToSpin"));ka=!1;for(b=W;0>b;)b+=360;for(;360<b;)b-=360;W=b;var d;b=360;for(var f=0;f<v;f++)for(var g=0;g<K.imageLocations[f].length;g++){var h=Math.abs(W-5*K.imageLocations[f][g]);h<b&&(b=h,d=f*K.imageLocations[0].length+g)}d!==ia&&(b=Math.floor(d/K.imageLocations[0].length),b!==Math.floor(ia/K.imageLocations[0].length)&&(a.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),
f=C.find("#image-360-sprites").children(),ja.drawImage(f[b],0,0)),b=C.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ia=d;b=d%K.imageLocations[0].length*-1*T;d=-1*Math.floor(d/K.imageLocations[0].length)*aa;f=C.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+b+"px, "+d+"px, 0)");f.css("transform","translate3d("+b+"px, "+d+"px, 0)")}function x(){if(Y){C=b("#ivMain360");var a=J.getCurrentItem().color;
L()&&t(a);K=L()?e.spin360ColorData[a]:da;n.populateTitle(C.find("#ivTitle360"),160,e);n.populateVariationSelection(C.find("#ivVariationSelection360"));C.find("#ivLarge360").empty();v=0;va=ga=!1;ia=W=0;ba();Y=!1}0!==b("#iv360Tab").height()&&(n.detachImmersiveViewResizeHandler(x),r(),w(),y=Date.now(),ha=ka=!0,l.count("dppc_click360",e.mediaAsin),c.postCountMetric("dppc_click360"))}function G(b,f,h){b=e.colorToAsin[h];var k={},n=500;if(!b||!b.asin)if(h===e.defaultColor)b={asin:e.winningAsin};else return;
k.params={asin:b.asin};var p="360"+b.asin,m=Date.now();k.success=function(b){l.time("dppc_asyncRequestTime360",Date.now()-m,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-m);b&&a.isDefined(b.spin360)?((b=b.spin360.spin360Model)&&d.setData(b),a.ajaxState(p,"success")):k.error()};k.error=function(){l.count("dppc_asyncFailedTransient360",e.mediaAsin);c.postCountMetric("dppc_asyncFailedTransient360");l.time("dppc_asyncRequestTime360",Date.now()-m,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-m);n*=2;16E3>=n?setTimeout(function(){m=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",k)},n):(l.count("dppc_asyncFailed360",e.mediaAsin),c.postCountMetric("dppc_asyncFailed360"),a.ajaxState(p,"fail"))};a.ajaxState(p)&&"fail"!==a.ajaxState(p)||(g.load("/gp/product/features/apparel-main-image/360.html",k),a.ajaxState(p,"sent"))}function L(){return e&&a.isDefined(e.spin360ConfigEnabled)&&e.spin360ConfigEnabled}function t(b){return a.isDefinedAndNotEmpty(e.spin360ColorData[b])?
!0:a.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled}function S(){ha&&(l.time("dppc_duration360",Date.now()-y,e.mediaAsin),c.postTimeMetric("dppc_duration360",Date.now()-y),ha=!1)}function k(a){a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;a||(a=e.mediaAsin);return a}var m,e,J,I,C,K,T,aa,U,R,fa,ea,ga=!1,va=!1,W=0,ia=0,y=0,X=0,la=!1,Z=!1,v=0,ja,ka=!0,ha=!1,Y=!0,ba=f.once(function(){n.attachImmersiveViewResizeHandler(x);n.attachImmersiveViewResizeHandler(r);n.attachImmersiveViewResetHandler(S);
n.attachTabDeselectHandler("iv360Tab",S)});return function(g,h,q,r){m=this;e=g;J=h;I=r;g=e.landingAsinColor;h=e.defaultColor;a.isDefined(e.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",n.addStyleCodeToURL(e.staticImages.icon360,"_FMpng_RI_"));L()&&(e.spin360ColorData||(e.spin360ColorData={}),g===h&&a.isDefinedAndEmpty(e.spin360ColorData[h])&&delete e.spin360ColorData[h]);f.on(p.TWISTER_DATA_EVENT,function(a){k(J.getCurrentItem())===a&&(K=
d.getData(a),O(),a={type:"updatedData",data:J.getCurrentItem()},I.dispatch("updateView",a))});m.render=function(g,h,p,m,q,r){Y=!0;!L()||a.isDefinedAndEmpty(e.spin360ColorData[g])&&!d.getData(k(J.getCurrentItem()))?n.hideTabHeading("iv360TabHeading"):(e.spin360ColorData[g]=d.getData(k(J.getCurrentItem())),a.isDefinedAndNotEmpty(e.spin360ColorData[g])?(b("#ivThumbs360").hide(),n.unhideTabHeading("iv360TabHeading"),a.isImmersiveViewEnabled(e,J.getCurrentItem().color)&&L()&&t(g)&&(h===e.maxAlts&&(g=m.find(".item.imageThumbnail"),
h=m.find(".item.videoThumbnail"),a.isDefined(h)&&1<h.length?h.last().remove():g.last().remove()),g=m.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(g,"button-360-click"),m.append(g),l.count("dppc_display360",e.mediaAsin),c.postCountMetric("dppc_display360"))):a.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled?(e.spin360ColorData[g]={},n.hideTabHeading("iv360TabHeading"),G(m,h,g)):n.hideTabHeading("iv360TabHeading"))};
m.update=function(a){};n.attachTabSelectHandler("iv360Tab",x)}});w.register("nexusLogger360",function(){return{count:function(f,b){r.ue&&r.ue.event({asin:b,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(f,b,a){r.ue&&r.ue.event({asin:a,metricName:f,metricValue:b},"hit-360","hit360.clientEvent.3")}}});w.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});w.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(f,
b){var a={};return{setData:function(g){var l=g.asin;a[l]||(a[l]=g,f.trigger(b.TWISTER_DATA_EVENT,l))},getData:function(b){return a[b]}}});"use strict";w.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(f,b){w.register("vse_ns_preLoaderHook",function(){function a(g,l){try{var c=g.A,n=g.block,d=g.request,p=g.handleFailure,r=g.handleSuccess,w=c.$;l--;var z=3-l-1,H=c.now();c.ajax("/vap/ew/componentbuilder",{params:d,paramsFormat:"json",crossDomain:!0,method:"post",
contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=c.now()-H;f.postTimeMetric("vse_preLoaderHook:success:",b);f.postCountMetric("vse_preLoaderHook:success:"+d.page+":"+d.placement+":"+z);w(n).html(a);r(c,d,a)},error:function(b){f.postCountMetric("vse_preLoaderHook:error:"+d.page+":"+d.placement+":"+z);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<l?a(g,l):(f.postCountMetric("vse_preLoaderHook:error:",1),p(c,d,b))}})}catch(B){b.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",B)}}return{get:function(b,f,c,n,d){a({A:b,block:f,request:c,handleFailure:d,handleSuccess:n},3)}}});w.register("vse_ns_lazyLoaderHook",function(){function a(g,l,c){try{var n=g.A,d=g.context,p=g.handleFailure,r=g.handleSuccess;l.attr("data-configuration");var w=atob(l.attr("data-configuration")),z=JSON.parse(w),H={pageContext:d,configuration:z},B=n.now();c--;var E=3-c-1;n.ajax("/vap/ew/subcomponent/"+z.type,{params:H,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=n.now()-B;f.postTimeMetric("vse_lazyLoaderHook:success:",b);f.postCountMetric("vse_lazyLoaderHook:success:"+d.page+":"+d.placement+":"+z.type+":"+E);l.html(a);r(n,H,a)},error:function(b){f.postCountMetric("vse_lazyLoaderHook:error:"+d.page+":"+d.placement+":"+z.type+":"+E);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<c?a(g,l,c):(f.postCountMetric("vse_lazyLoaderHook:error:",1),p(n,H,b))}})}catch(O){b.logError("FATAL",
"vse_ns_desktop","[vse_ns_lazyLoaderHook] ",O)}}return{get:function(b,f,c,n,d){var p=b.$;p(f+" div[data-configuration]").each(function(){a({A:b,context:c,handleFailure:d,handleSuccess:n},p(this),3)})}}});w.register("vse_ns_videoPlayer",function(){function a(g,l,c){try{var n=g.A,d=g.block,p=g.request,r=g.handleFailure,w=g.handleSuccess,z=n.$;c--;var H=3-c-1,B=n.now();n.ajax("/vap/ew/subcomponent/vseplayer",{params:p,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:p.timeout||
5E3,withCredentials:!0,success:function(a){var b=n.now()-B;f.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);f.postCountMetric("vse_lightPlayerLoaderHook:success:"+p.page+":"+p.placement+":"+H);z(d).html(a);w(n,p,a)},error:function(b){f.postCountMetric("vse_lightPlayerLoaderHook:error:"+p.page+":"+p.placement+":"+H);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<c?a(g,c):(f.postCountMetric("vse_lightPlayerLoaderHook:error:",1),r(n,p,b))}})}catch(E){b.logError("FATAL","vse_ns_lightPlayer",
"[vse_ns_lightPlayerLoaderHook] ",E)}}return{get:function(b,f,c,n,d){a({A:b,block:f,request:c,handleFailure:d,handleSuccess:n},3)}}})});"use strict";w.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(f,b,a,g,l){var c=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var b=a.colorImages,d=0,f;for(f in b)b[f]&&b[f].length&&(d+=b[f].length);b="image_size_bucket:gt"+c[c.length-1];for(f=1;f<c.length;f++)if(d<=c[f]){b="image_size_bucket:"+c[f-1]+"-"+c[f];break}l.postCountMetric(b);
g.addTag(b)})();(function(){var a=b.colorImages;a&&a.initial&&a.initial.length&&(a=a.initial.length,r.ue&&ue.count&&ue.count("altImageCount",a))})();(function(){var b=a.lazyLoadExperienceDisabled;g.isDefined(a.lazyLoadExperienceDisabled)&&!b&&(l.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),g.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});w.when("A","get-resource-time","postMetric","afterLoad").execute(function(f,b,a){var g=f.state("desktop-landing-image-data");g&&(g=
f.values(g),b=b.getResourceTimeByName("img",g),f.each(b,function(b){b&&(b.responseEnd!=da&&a.postCountMetric("ibDesktopLandingImageDownloadTime",r.parseInt(b.responseEnd)),b.transferSize!=da&&(0===b.transferSize?a.postCountMetric("ibDesktopLandingImageCached",1):(a.postCountMetric("ibDesktopLandingImageSizeInBytes",r.parseInt(b.transferSize)),a.postCountMetric("ibDesktopLandingImageNotCached",1))))}))})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,c=h?h("DetailPageShowroomImageBlockAssets",""):e;c.guardFatal?c.guardFatal(f)(c,window):c.execute(function(){f(c,window)})})(function(f,e,h){f.when("A","imageBlockUtils","imageBlockImmersiveViewUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(c,l,d,n,g,b,a){function e(a){a=
q.colorToAsin[a.color].asin;a||(a=q.mediaAsin);return a}var f=void 0,q=void 0,m=void 0,p=void 0,w=void 0,k=void 0,r=void 0;return function(d,h,u,v){u=new Date;f=this;q=d;m=h;p=v;c.on(b.TWISTER_DATA_EVENT,function(a){e(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},p.dispatch("updateView",a))});f.render=function(b,l,d,f,q,u){b=new Date;w=f;k=q.find("#main-showroom-container");k.parent().find("#showroom-canvas-caption");c.$("#main-image-container");try{var t=e(m.getCurrentItem());
if(n.isDataValidForAsin(t)){var z=new Date,h=n.getDataForAsin(t);g.refresh(p,h.asin,h.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-z);if(!u){var v=new Date;g.updateMainImage(k,h.imageData,p);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-v)}var x=new Date;l=g.createThumbnail(f,l,h.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-x);var y=new Date;c.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-y);if(t!==r){var A=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var B=a.createShowroomAtfEvent(h.defaultStageId,t,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(B);r=t;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-A)}}else c.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(D){c.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return l};f.update=function(c){var r=new Date;try{var d=c.data;m.setCurrentEvent(c);if(d.type===b.SHOWROOM_THUMBNAIL_TYPE){var f=new Date;d.interaction=c.type;d.isUserGenerated=!0;if(n.isDataValidForAsin(e(d))){"mouseenter"===d.interaction&&d.type===b.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var h=n.getDataForAsin(e(d)).imageData;g.updateMainImage(k,h,p);g.showShowroomMainImage(k)}q.usePeekHover&&"click"!==c.type||
(l.selectGivenThumbnail(c.$declarativeParent,w),"click"===c.type&&l.useTabbedImmersiveView(q)&&g.handleShowroomThumbnailClick(c));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-f)}else d.type!==b.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===c.type?d.color===m.getCurrentItem().color&&m.getCurrentItem().type===b.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(k):g.hideShowroomMainImage(k):g.hideShowroomMainImage(k))}catch(C){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-r)};document.getElementById("ivShowroomTabHeading").addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=n.getDataForAsin(r).defaultStageId;b=a.createShowroomAtfEvent(b,r,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-u)}});"use strict";f.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";f.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-atf-metrics").register("showroom-image-block-detail-page-rendering",function(c,l,d,f,g,b){function a(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);
var k=b.createShowroomAtfEvent(m,h,b.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(k);e(a)}function e(a){a.action="showroomIngressClick";a.data=p;n.dispatch("showroomIngressClick",a)}var h,n,m,p;return{createThumbnail:function(a,b,c){p={type:"showroomIngress",index:0,thumbnailIndex:b,variant:c.variant};d.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:b,variant:c.variant},c.thumb,a,"showroom-imageblock-thumbnail");b=l(".pos-360.item");
c=a.children(".showroom-imageblock-thumbnail");var k=a.children(":visible").length;1===b.length?(c.insertBefore(b),b=k-1):(c.appendTo(a),b=k);return b},updateMainImage:function(b,d){var e=b.find("#showroom-main-image");e.length?e.attr("src",d.hiRes):(e=l("\x3cimg/\x3e").attr("src",d.hiRes).attr("id","showroom-main-image"),e.appendTo(b),c.declarative.create(b,"showroom-image-action",p),c.declarative("showroom-image-action",["click"],a),d=b.find("#showroom-main-image-overlay-container"),d.length||(d=
f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),e=f.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),d=l('                \x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+(e?e:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+d+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),d.appendTo(b)))},
hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return l("#showroom-outer-container").hasClass("aok-hidden")},handleShowroomIngressClick:e,handleShowroomThumbnailClick:function(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var c=b.createShowroomAtfEvent(m,h,b.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,
b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)},handleShowroomMainImageClick:a,refresh:function(a,b,c){n=a;h=b;m=c}}});"use strict";f.when("A").register("showroom-image-block-metrics",function(c){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",
SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select"},STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(c){try{if(e.ue&&c){var d=(e.ue.count(c)||0)+1;e.ue.count(c,d)}}catch(n){}},logValue:function(c,d){try{e.ue&&c&&"number"===typeof d&&e.ue.count(c,d)}catch(n){}},createShowroomAtfEvent:function(e,
d,f,g){var b={};b.showroomId=e;b.asin=d;b.eventType=f;b.status=g;b.device=c.capabilities?c.capabilities.isAmazonApp?"AmazonApp":c.capabilities.mobile?"mobile":c.capabilities.tablet?"tablet":"desktop":"";b.userAgent=navigator?navigator.userAgent:"";b.producerId="showroom_atf";b.schemaId="com.amazon.showroom.ingress.clientEvent.3";return b},logShowroomAtfEvent:function(c){try{e.ue&&e.ue.event&&c&&e.ue.event(c,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(d){}}}});"use strict";f.when("A",
"showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,e){function d(){return g[b]}function f(a){return a in g}var g={},b;return{setData:function(a){a&&a.asin&&a.imageDomain&&a.defaultCollageUrl&&a.defaultStageId&&Array.isArray(a.itemMainImagePhysicalIds)&&(b=a.asin,f(a.asin)||(g[a.asin]=a,c.trigger(e.TWISTER_DATA_EVENT,a.asin)))},getDataForCurrentAsin:d,getDataForAsin:function(a){return g[a]},getStringValue:function(a){return d().displayStrings?d().displayStrings[a]:
""},isDataValidForAsin:f}})});
/* ******** */
