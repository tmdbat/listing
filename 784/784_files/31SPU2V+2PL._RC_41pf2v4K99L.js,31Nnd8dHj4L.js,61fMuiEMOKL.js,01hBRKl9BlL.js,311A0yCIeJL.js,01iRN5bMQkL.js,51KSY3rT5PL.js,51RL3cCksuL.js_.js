(function(f){var e=window.AmazonUIPageJS||window.P,m=e._namespace||e.attributeErrors,a=m?m("HLCXDetailPageAssets",""):e;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,e,m){f.when("A","ready").execute(function(a){a.on("a:accordion:installment-payment-buybox-accordion:select",function(d){a.$("#abbWrapper [id^\x3dmbb-offeringID-]").prop("checked",!1)})});f.when("A").register("BaseLinkKeyValuePairHelper",function(a){var d=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(a){var c=16*Math.random()|0;return("x"===a?c:c&3|8).toString(16)})},c=function(a,c){this.key=a;this.value=c};return{getBaseLinkPairs:function(){var a=d();return{ITEM_ASSOC:new c("itemAssoc",a),UNIQ_PARENT:new c("UNIQ-itemAssoc",a),UNIQ_WARRANTY:new c("UNIQ-lnkdWrrnty",a),ITEM_ASSOC_TYPE:new c("itemAssocType","AmazonProtect"),RENDER_TYPE:new c("itemAssocRenderType","renderAll")}}}});f.when("A","BaseLinkKeyValuePairHelper").register("BaseLinkFormHelper",function(a,d){var c=a.$,l=function(a,
g){var b=0;g.find("input[name^\x3d'custom-name\\."+a+"\\.']").each(function(a,g){a=g.name.split(".")[2];isNaN(a)||(b=a>b?a:b)});return b+1},h=function(a,g,b){var k=[],d=l(a,g);c.each(b,function(g,b){var c="custom-value."+a+"."+d;g=e("custom-name."+a+"."+d,b.key);b=e(c,b.value);k=k.concat([g,b]);d++});return k},e=function(a,g){var b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("class","atcFormWarrantyData");b.setAttribute("id",a);b.setAttribute("name",a);b.setAttribute("value",
g);return b},n=function(a){a.find(".atcFormWarrantyData").each(function(a,b){b.parentNode.removeChild(b)})};return{addBaseLinkFields:function(a,g){n(g);if(!g.find("input[value\x3d'itemAssoc']").length){var b=d.getBaseLinkPairs(),k=h(1,g,[b.ITEM_ASSOC,b.UNIQ_PARENT,b.ITEM_ASSOC_TYPE]);a=h(a,g,[b.ITEM_ASSOC,b.UNIQ_WARRANTY,b.ITEM_ASSOC_TYPE,b.RENDER_TYPE]);k=k.concat(a);c.each(k,function(a,b){g.append(b)})}},removeBaseLinkFields:n,getMobileWarrantyIndex:function(a){var g=1;a.find("input[name\x3d'a']").each(function(a,
c){c.value&&(a=c.value.split("|"))&&(g=a.length)});return g+1}}});f.when("A","BaseLinkKeyValuePairHelper").register("BaseLinkDeclarativeHelper",function(a,d){var c=a.$,l=[],h=function(a){var b=!1;c.each(a,function(a,g){if("itemAssoc"===g)return b=!0,!1});return b},e=function(a,b,k){var d={},h=n(a,b);c.each(k,function(b,c){b=c.value;var k="custom-name."+a+"."+h,e="custom-value."+a+"."+h;d[k]=c.key;d[e]=b;l.push(k);l.push(e);h++});return d},n=function(a,b){var d=new RegExp("^custom-name[.]["+a+"]+[.]([0-9]+)$"),
h=0;c.each(b,function(a){if(a=a.match(d))a=+a[1],a>h&&(h=a)});return h+1},f=function(a){c.each(l,function(b,c){a[c]&&delete a[c]});l=[]};return{addBaseLinkFields:function(a){f(a);if(!h(a)){var b=d.getBaseLinkPairs(),k=e(1,a,[b.ITEM_ASSOC,b.UNIQ_PARENT,b.ITEM_ASSOC_TYPE]),b=[b.ITEM_ASSOC,b.UNIQ_WARRANTY,b.ITEM_ASSOC_TYPE,b.RENDER_TYPE],l=1;a.a&&(l=a.a.split("|").length);b=e(l+1,a,b);c.extend(a,k);c.extend(a,b)}},removeBaseLinkFields:f,getDeclarativeDataInputs:function(a){if(a=c(a)){var b=a.data("action");
if((a=a.data(b))&&a.inputs)return a.inputs}}}});f.when("A","aw-mash").register("BaseLinkAddWarrantyHelper",function(a,d){var c=function(a){e.ueLogError&&e.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{addLinkedWarranty:function(e,h,f){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:e,timeout:1E3,success:function(a){a&&a.status&&"OK"===a.status?(h(),a.numActiveItemsInCart&&(a=parseInt(a.numActiveItemsInCart,
10),d.cart.didUpdate({newCartQuantity:a}))):c("Error while doing a call to warranty-service.html. Success but response not valid.")},error:function(a,d,g){c("Error while doing a call to warranty-service.html. Status: "+d+" . Error: "+g);f()}})},obtainBaseItemCartid:function(d){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,cache:!1,success:function(a){a&&a.status&&a.lastAddedItemCartId?d(a.lastAddedItemCartId):c("Error while doing a call to last-added-cart-item-id.html. Status: "+
a.status)},error:function(a,d,e){c("Error while doing a call to last-added-cart-item-id.html. Status: "+d+" . Error: "+e)}})},mSilogError:c}});"use strict";f.when("A","ready").execute(function(a){function d(a){var c=e.ue;c&&c.count&&c.count(a,(c.count(a)||0)+1)}var c=a.$;a.on("a:expander:comparison_detail_expander:toggle:expand",function(a){d("ComparisonExpanderExpanded");c(".comparison_other_attribute_row").removeClass("aok-hidden")});a.on("a:expander:comparison_detail_expander:toggle:collapse",
function(a){d("ComparisonExpanderCollapsed");c(".comparison_other_attribute_row").addClass("aok-hidden")})});f.when("A","atf","ready").execute(function(a){function d(){var c,d=a.$("#HLCXComparisonJumplink_feature_div"),e=a.$("#HLCXComparisonWidget_feature_div");c=a.$("#HLCXComparisonJumplinkContent").length?e.find("#HLCXComparisonJumplinkContent"):e.find(".HLCXComparisonJumplinkContent");e=e.has("#HLCXComparisonTable").length;d.empty();e&&c.clone().removeClass("aok-hidden").appendTo(d)}a.declarative("hlcx-send-reftag",
"click",function(c){a.$.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+c.data.refTag)});d();a.on("a:pageUpdate",d)});f.when("A","ready").execute("logCsmMetricsForComparisonTabs",function(a){var d;a.on("a:tabs:comparison_items_tabs:compare_to_similar_items_tab:select a:tabs:comparison_items_tabs:compare_to_recently_viewed_items_tab:select",a.throttle(function(a){d&&d===a.selectedTab.tabName||(d=a.selectedTab.tabName,e.ue&&e.ue.count&&e.ue.count(a.selectedTab.tabName,1))},100,{trailing:!1}))});
f.when("A","3p-promise","ready").register("hlcx-table-csm",function(a,d,c){function f(c){return a.$(c?".hlcx-cmp-title-col":".comparison_image_title_cell").filter(":visible").map(function(){return a.$(this).attr("data-asin")}).toArray()}function h(){try{var a=document.cookie.match("(^|[^;]+)\\s*(session-id|sessionId)\\s*\x3d\\s*([^;]+)");return a?a.pop():""}catch(b){return""}}function q(c,b){return new d(function(d,e){function f(){b.unbind("click auxclick",f);var c=a.now()-h;a.off("DOMContentLoaded load resize scroll",
l);d({timeInView:c,clickedOff:!0})}var h=a.now(),l=a.throttle(function(){if(!a.onScreen(c)){var b=a.now()-h;a.off("DOMContentLoaded load resize scroll",l);d({timeInView:b,clickedOff:!1})}},200);b.bind("click auxclick",f);a.on("DOMContentLoaded load resize scroll",l)})}function n(a,b,c){var d=f(c);a={pageAsin:a,comparableAsins:d.slice(1),sessionId:b,deviceType:c?"mobile":"desktop"};e.ue&&e.ue.event&&e.ue.event(a,"comparison","comparison.dpTableImpression.1")}function p(c,b,d){function t(){!r&&a.onScreen(p)&&
(r=!0,q(p,d()).then(function(a){r=!1;if(!(2500>a.timeInView)){var d=f(b).slice(1),k=a.timeInView,h=++u,n;n=e.location.href.endsWith("#HLCXComparisonWidget_feature_div");a={pageAsin:c,comparableAsins:d,sessionId:m,timeInView:k,viewOnPageCounter:h,deviceType:b?"mobile":"desktop",landedOnComparisonsTable:n,clickedOff:a.clickedOff};e.ue&&e.ue.event&&e.ue.event(a,"comparison","comparison.dpTableView.2")}}))}var p=a.$(b?"#hlcx_cmp_table":"#HLCXComparisonTable");if(p.length){var m=h();n(c,m,b);var r=!1,
u=0;a.on("DOMContentLoaded load resize scroll",t);a.on("a:pageUpdate",function(){c!==a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin")&&a.off("DOMContentLoaded load resize scroll",t)})}}return{setupClientSideLogging:function(c,b){var d;return function(){var e=a.$(c?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin");d!==e&&"undefined"!==typeof e&&(d=e,p(d,c,b))}}}});f.when("A","hlcx-table-csm").execute(function(a,d){d=d.setupClientSideLogging(!1,
function(){return a.$("td.comparison_add_to_cart_button span.a-button, th.comparison_image_title_cell a, #comparison_sold_by_row a, #comparison_custormer_rating_row a")});a.on("a:pageUpdate",d);d()});f.when("A","ready").register("comparison-table-weblab-trigger",function(a,d){function c(c,d,g){var b=a.throttle(function(){if(a.onScreen(f)||g&&a.onScreen(h)){var k=a.state(c).treatment,m=e.ue;k&&m&&m.trigger&&m.trigger(d,k);a.off("DOMContentLoaded load resize scroll",b)}},200);a.on("DOMContentLoaded load resize scroll",
b)}var f,h,q;return{triggerWeblabWhenViewing:function(d,e,g){var b;return function(){f=a.$(d?"#hlcx_cmp_table":"#HLCXComparisonTable");q=a.$(d?".hlcx-cmp-title-col":".comparison_image_title_cell");h=a.$(d?"#hlcx_cmp_table_holder":"#HLCXComparisonTableHolder");var k;k=q.length?q.first().attr("data-asin"):h.length?h.attr("data-asin"):m;b!==k&&k&&(b=k,c(e,g,!0))}}}});f.when("A","comparison-table-weblab-trigger").execute(function(a,d){d=d.triggerWeblabWhenViewing(!1,"ppu-weblab-treatment","DP_COMPARISON_DISPLAY_PPU_312196");
a.on("a:pageUpdate",d);d()})});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,n=p._namespace||p.attributeErrors,q=n?n("DetailPageWarrantyAssets",""):p;q.guardFatal?q.guardFatal(l)(q,window):q.execute(function(){l(q,window)})})(function(l,p,n){"use strict";var q;q=function(){};"use strict";l.when("A").register("wty:Reftag",function(b){function h(a){this.prefix=a}h.prototype.log=function(a,e,c){a=c?[this.prefix,a,e,c]:[this.prefix,a,e];q("Reftag.log: "+a);a=a.join("_");b.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+a)};
return h});"use strict";l.when("A","BaseLinkFormHelper").register("wty:detailPage",function(b,h){function a(){}a.prototype.bindQuantityChange=function(e){var a=function(){e(b.$(this).val())};b.$("#quantity").bind("change",a);return a};a.prototype.unbindQuantityChange=function(a){b.$("#quantity").unbind("change",a)};a.prototype.bindBuyBoxAccordion=function(a){b.on("a:accordion:buybox-accordion:select",a);b.on("a:accordion:installment-payment-buybox-accordion:select",a);return a};a.prototype.unbindBuyBoxAccordion=
function(a){b.off("a:accordion:buybox-accordion:select",a);b.off("a:accordion:installment-payment-buybox-accordion:select",a)};a.prototype.findQuantityInput=function(a){return a.find("input[name^\x3dquantity]")};a.prototype.findOfferListingIdInput=function(a){return a.find("input[name^\x3dofferingID]")};a.prototype.handleBaselink=function(a){if(b.$("#mbb__bl").length){var c=b.$(a._checkbox[0].form);c&&(a.isChecked()?(a=a.getKvpIndex(),h.addBaseLinkFields(a,c)):h.removeBaseLinkFields(c))}};a.prototype.handleATC=
function(a){};return new a});"use strict";l.when("wty:Reftag").register("wty:MbbTypes",function(b){var h={mbb__tsn:{cssClass:"mbb__tsn",reftag:new b("psd_bb"),hasQuantity:!0},mbb__ti:{cssClass:"mbb__ti",reftag:new b("psd_ib")},mbb__tld:{cssClass:"mbb__tld",reftag:new b("psd_ld")}};return{getType:function(a){return h[a]}}});"use strict";l.when("A","a-modal").register("wty:mbbModalHelper",function(b,h){function a(){}a.prototype.create=function(a,c,k,f){if(f){var d=b.$("#a-popover-"+c),g=d.clone(!0).prop("id",
"a-popover-"+c+"-Opened");d.parent().append(g)}h.create(a,{name:f?c+"-Opened":c,header:k,width:750})};a.prototype.remove=function(a,b){h.remove(b?a+"-Opened":a)};a.prototype.hide=function(a,b){(a=h.get(b?a+"-Opened":a))&&a.hide()};return new a});"use strict";l.when("A","wty:Reftag","wty:MbbItem").register("wty:Mbb",function(b,h,a){function e(c,k,f){this._type=f;this._reftag=f.reftag;this._baseFormIndex=c;this._pageData=k;this._baseItemAsin=k.bi.a;this._mbbFeature=b.$(".mbb__bb."+f.cssClass);this._modalHeader=
this._mbbFeature.find(".mbb__mh").html();this._items=[];this._reftag.log("i",this._baseItemAsin);var d=this;this._mbbFeature.find(".mbb__r").each(function(g){var f=b.$(this),f=new a(d,f,g);d._items[g]=f})}e.prototype._destroy=function(){for(var a=0,b=this._items.length;a<b;a++)this._items[a]._destroy()};e.prototype._setQuantity=function(a){for(var b=0,f=this._items.length;b<f;b++)this._items[b]._setQuantity(a)};e.prototype._setChecked=function(a,b){for(var f=0,d=this._items.length;f<d;f++)this._items[f]._setChecked(b&&
f===a)};e.prototype.getCheckedItem=function(){for(var a=0,b=this._items.length;a<b;a++){var f=this._items[a];if(f.isChecked())return f}};e.prototype.getItems=function(){return this._items};return e});l.when("A","cc-manager","warranty-options-constants","warranty-options-csm").register("cc-warranty-options",function(b,h,a,e){function c(){h.ccSelectionsClear(k)}var k=a.featureRegistration.featureName;return{updateWarrantyOptionSelection:function(a){if(!a)return console.log("Item data missing for selection update!"),
!1;var b="LumpSum";a.isMonthlySubscription&&(b="Monthly");e.increment("Swatch:Warranty:"+b+":Click");c();b=a.warrantyQuantity;if(b===n||1>b)b=1;var g=parseFloat(a.warrantyPriceAmount);return h.ccSelectionUpdate(k,{itemType:"Warranty",asin:a.warrantyAsin,price:g,quantity:b,offerListingId:a.warrantyOffer,selectionType:a.selectionType,orderSummaryDisplayString:"",shortDisplayTitle:a.warrantyShortTitle,enableIA:!0,IAData:{parentAsin:a.baseAsin,type:"AmazonProtect",renderType:"renderAll",constraintList:[{type:"DELETE",
mutuallyInclusive:!1}]}})},clearOptionSelection:c}});"use strict";l.when("A","cc-manager","warranty-options-constants","warranty-card-utils","warranty-options-csm").register("warranty-options-registration",function(b,h,a,e,c){var k=a.featureRegistration.featureName,f=a.supportedBuyingOptions,d=a.selector,g=a.styles,m=b.$,r=new c.Timer(c.MetricNames.ccSVLoadingtime);b.declarative("a-secondary-view","click",function(){c.increment(c.MetricNames.ccLearnMore);r.start()});b.on("a:popover:afterShow",function(){r.stop()});
b.on("warranty-twister-card:expanded",function(){h.cardExpanded(k)});b.on("a:popover:beforeShow:warrantyTwisterPlusSecondaryView",function(a){var g=e.getSelectedCardData();a.popover.update(g.popoverContent)});b.on("a:accordion:buybox-accordion:select",function(a){if(0<m(d.expanderContainer).length){a=a.selectedRow.$row.index();var c=m(d.expanderData).data("toggle-warranty-twister-expander").baseBuyingOptionsList;c&&0<c.length&&(f.includes(c[a])?(m(d.expanderContainer).removeClass(g.disabledCard),
m(d.buyingOptionSuppressionMessage).addClass(g.hidden)):(b.trigger("a:declarative:warranty-twister-default-action:click"),b.trigger("warranty-twister-card:card-collapse"),m(d.expanderContainer).addClass(g.disabledCard),m(d.buyingOptionSuppressionMessage).removeClass(g.hidden)))}});var l=m(d.warrantyOption).length;l&&c.incrementWithValue(c.MetricNames.ccItemCounts,l);(function(){m(d.warrantyOption).each(function(){var a=e.getWarrantyDataFromOption(m(this));c.logRefTag("i",a.baseAsin,a.warrantyAsin)})})();
h.registerFeature(a.featureRegistration,{init:function(a){},validateInputParams:function(a){return"number"===typeof a.price},cardCollapse:function(){b.trigger("warranty-twister-card:card-collapse")}})});"use strict";l.when("A").register("warranty-options-constants",function(b){return{featureRegistration:{featureName:"warrantyTwisterPlus",featureAttribution:"Retail/AppleCare/(de)activation",updateQtyAsBaseItem:1},selector:{expanderContainer:".warranty-twister-container",skeletonLoader:".warranty-twister-skeleton-loader",
checkmark:".warranty-twister-selected-checkmark",subtitle:".warranty-twister-subtitle",subtitleText:"#warranty-twister-subtitle",priceSubtitle:".warranty-twister-price-subtitle",priceSubtitleText:"#warranty-twister-price-subtitle",cardImage:".warranty-twister-selected-card-image",expanderIcon:".warranty-twister-expander-icon",learnMoreLink:"#learn-more-link",toggleButton:"#warranty-twister-toggle-button",expanderContent:".warranty-twister-expander-content",expanderData:"[data-toggle-warranty-twister-expander]",
swatch:".warranty-twister-swatch",warrantyOption:".warranty-twister-box-group-warranty-option",selectedWarrantyOption:".warranty-twister-selected-box-group.warranty-twister-box-group-warranty-option",warrantyOptionTitle:".warranty-twister-warranty-option-title",defaultOption:"#default-option-swatch",swatchBoxGroup:".warranty-twister-box-group",swatchHeading:".warranty-twister-box-group-heading",swatchBoxGroupDetail:".warranty-twister-box-group-detail",swatchBoxGroupDetailNoHeader:".warranty-twister-box-group-detail-no-header",
popoverButtonRow:"#attach-warranty-popover-buttons-row",warrantyTwisterSecondaryView:"#a-popover-warrantyTwisterPlusSecondaryView",buyingOptionSuppressionMessage:"#buyingOptionSuppressionMessage",warrantyIcon:"#warranty-icon",monthlyCheckbox:".warranties-monthly-checkbox",monthlyWarning:"#MonthlyWarrantyWarning",warrantyListItem:".warranty-twister-list-item",multiCardExperimentData:"wireless-multi-card",multiCardExperimentElement:"[data-wireless-multi-card]",activeTPlusCards:"#twister-plus-active-cards"},
styles:{twisterPlusFadeIn:"twister-plus-cc-card-fadeIn",warrantyTwisterExpand:"warranty-twister-expander-content-expand",skeletonLoaderExpand:"warranty-twister-skeleton-loader-expand",selectedHeading:"warranty-twister-selected-heading",selectedBoxGroup:"warranty-twister-selected-box-group",unselectedHeading:"warranty-twister-unselected-heading",disabledCard:"disabled-card",disabledOption:"disabled-option",hidden:"aok-hidden"},animationTimeoutUnit:200,metricPrefix:"warranty-options",supportedBuyingOptions:"NEW B2B_NEW BUNDLE RENEWED_TIER_1 RENEWED_TIER_2 RENEWED_TIER_3 RENEWED_TIER_4".split(" ")}});
"use strict";l.when("A").register("warranty-options-weblab-vars",function(b){return{isAutoExpandEnabled:!1}});"use strict";l.when("A","warranty-options-constants","warranty-devicetype-variants").register("warranty-options-csm",function(b,h,a){function e(a,b){"undefined"!==typeof k&&"undefined"!==typeof k.count&&a&&k.count(a,(k.count(a)||0)+b)}function c(a){if(a)this.timerName=a,this.startTime=0;else throw Error("timerName must be non empty string");}var k=p.ue;b=h.featureRegistration.featureName;
b={ccExpanded:"twisterPlus.ccExpanded."+b,ccExpandedTime:"twisterPlus.ccExpandedTime."+b,ccScroll:"twisterPlus.ccScroll."+b,ccLearnMore:"twisterPlus.ccLearnMore."+b,ccItemCounts:"twisterPlus.ccItemsCount."+b,ccItemsSelectCount:"twisterPlus.ccItemsSelectCount."+b,defaultOptionSelectCount:"twisterPlus.defaultSelectCount."+b,ccSVLoadingtime:"twisterPlus.ccSVLoadingtime."+b};c.prototype={isStarted:!1,start:function(){this.isStarted=!0;this.startTime=Date.now()},stop:function(){this.startTime&&e(this.timerName,
Date.now()-this.startTime)}};return{increment:function(a){e(a,1)},incrementWithValue:e,logRefTag:function(b,d,g){a.attributesForDeviceType.refTag.log(b,d,g)},Timer:c,MetricNames:b}});l.when("A","warranty-options-constants").register("warranty-card-utils",function(b,h){function a(a){var b=e(a).parent().data("warranty-option-swatch-select");b||(a=e(a).children(".a-declarative")[0],b=e(a).data("warranty-option-swatch-select"));return b}var e=b.$,c=h.selector;return{getSelectedCardData:function(){var b=
e("[data-warranty-option-swatch-select]").data("warranty-option-swatch-select");0<e(c.selectedWarrantyOption).length&&(b=a(e(c.selectedWarrantyOption)));return b},getWarrantyDataFromOption:a}});"use strict";l.when("A","warranty-options-ref-tag").register("warranty-devicetype-variants",function(b,h){return{attributesForDeviceType:{refTag:new h("warr_tplus_desk")}}});"use strict";l.when("A").register("warranty-options-ref-tag",function(b){function h(a){this.prefix=a}h.prototype.log=function(a,e,c){a=
c?[this.prefix,a,e,c]:[this.prefix,a,e];console.log("Reftag.log: "+a);a=a.join("_");b.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+a)};return h});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants","warranty-twister-swatch-actions","warranty-options-csm").register("warranty-twister-expander-actions",function(b,h,a,e,c){function k(){var a=d(g.expanderContainer),b=a.offset().top+a.outerHeight();if(d(p).scrollTop()+d(p).height()<b){var b=a.offset().top,c=d(p).height(),
a=a.height(),a=b-(c-a)/2;d("html, body").animate({scrollTop:a},h.animationTimeoutUnit)}}function f(a){a=a?l.expandedPriceSubtitle:l.loadingSubtitle;d(g.priceSubtitleText).text(a)}var d=b.$,g=a.selector,m=a.styles,l=h.expanderSubtitle,n=new c.Timer(c.MetricNames.ccExpandedTime);return{initSubtitle:function(a){l.collapsedSubtitle=a.data.defaultSubtitle;l.expandedSubtitle=a.data.defaultSubtitle;l.collapsedPriceSubtitle=a.data.defaultPriceSubtitle;l.expandedPriceSubtitle=a.data.expandedPriceSubtitle},
expandWarrantyOptions:function(e){c.increment(c.MetricNames.ccExpanded);n.start();d(g.expanderContent).addClass(m.warrantyTwisterExpand);d(g.expanderIcon).addClass("rotate");b.delay(function(){d(g.swatch).addClass(m.twisterPlusFadeIn);d(g.warrantyIcon).removeClass(m.hidden);f(e);k()},a.animationTimeoutUnit)},expandSkeletonLoader:function(){d(g.expanderContent).addClass(m.skeletonLoaderExpand);d(g.expanderIcon).addClass("rotate");b.delay(function(){d(g.skeletonLoader).addClass(m.twisterPlusFadeIn);
f(!1);k()},a.animationTimeoutUnit)},hideLoaderAnimation:function(c){c&&d(g.skeletonLoader).removeClass(m.twisterPlusFadeIn);b.delay(function(){d(g.skeletonLoader).hide();d(g.swatch).removeClass("invisible");c&&(d(g.expanderContent).addClass(m.warrantyTwisterExpand),b.delay(function(){d(g.swatch).addClass(m.twisterPlusFadeIn);f(!0);k()},a.animationTimeoutUnit))},a.animationTimeoutUnit)},collapseWarrantyOptions:function(c){n.stop();d(g.swatch).removeClass(m.twisterPlusFadeIn);c||d(g.skeletonLoader).removeClass(m.twisterPlusFadeIn);
d(g.expanderIcon).removeClass("rotate");b.delay(function(){d(g.warrantyIcon).addClass(m.hidden);d(g.expanderContent).removeClass(m.warrantyTwisterExpand);d(g.expanderContent).removeClass(m.skeletonLoaderExpand);d(g.priceSubtitleText).text(l.collapsedPriceSubtitle)},a.animationTimeoutUnit)}}});"use strict";l.when("A","warranty-twister-expander-actions","warranty-twister-expander-state","warranty-options-weblab-vars","warranty-options-constants").execute(function(b,h,a,e,c){function k(){g=!1;d(r.expanderData).data("toggle-warranty-twister-expander").isExpand=
!1;h.collapseWarrantyOptions(m)}function f(a){if(g===n||null===g||null===a.data.isExpand||a.data.isExpand===n){if(null===a.data.isExpand||a.data.isExpand===n)d(r.expanderData).data("toggle-warranty-twister-expander").isExpand=!1,a.data.isExpand=!1;h.initSubtitle(a);m&&h.hideLoaderAnimation(a.data.isExpand)}g=a.data.isExpand;!0===g?k():!1===g&&(g=!0,m?h.expandWarrantyOptions(m):h.expandSkeletonLoader(),b.trigger("warranty-twister-card:expanded"));d(r.expanderData).data("toggle-warranty-twister-expander").isExpand=
g}var d=b.$,g,m=a.isLoaded,r=c.selector,p=c.styles;l.when("cc-warranty-options").execute(function(){m=!0;h.hideLoaderAnimation(g);g&&b.trigger("warranty-twister-card:expanded")});b.declarative("toggle-warranty-twister-expander","click",function(a){d(r.expanderContainer).hasClass(p.disabledCard)||f(a)});b.on("warranty-twister-card:card-collapse",function(){console.log("Collapse trigger received for warranty card!");k()});e.isAutoExpandEnabled&&(a=d(r.expanderData).data("toggle-warranty-twister-expander"))&&
f({data:a})});"use strict";l.when("A").register("warranty-twister-expander-state",function(b){return{expanderSubtitle:{collapsedSubtitle:"",expandedSubtitle:"",collapsedPriceSubtitle:"",expandedPriceSubtitle:"",loadingSubtitle:"Loading options..."},get isLoaded(){return this.property},set isLoaded(b){this.property=b}}});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants").register("warranty-twister-swatch-actions",function(b,h,a){var e=b.$,c=a.selector,k=a.styles,
f=h.expanderSubtitle;return{updateSwatchStyle:function(a){e(c.swatchBoxGroup).removeClass(k.selectedBoxGroup);e(c.swatchHeading).removeClass(k.selectedHeading);e(c.swatchHeading).addClass(k.unselectedHeading);var g=a.find(c.swatchHeading),b=a.find(c.swatchBoxGroup);1>b.length&&(b=a.parent(c.swatchBoxGroup));a=b;g.removeClass(k.unselectedHeading);g.addClass(k.selectedHeading);a.addClass(k.selectedBoxGroup)},updateDefaultOptionPriceSubtitle:function(a,g){f.collapsedPriceSubtitle=a;f.expandedPriceSubtitle=
g;e(c.priceSubtitleText).text(g);e(c.priceSubtitle).removeClass("a-color-success");e(c.priceSubtitle).addClass("a-color-tertiary");e(c.checkmark).addClass("a-hidden")},updateWarrantyOptionPriceSubtitle:function(a,g){f.collapsedPriceSubtitle=a;f.expandedPriceSubtitle=a;e(c.priceSubtitleText).text(a);e(c.priceSubtitle).removeClass("a-color-tertiary");e(c.priceSubtitle).addClass("a-color-success");e(c.checkmark).removeClass("a-hidden");e(c.cardImage).attr("src",g)}}});"use strict";l.when("A","warranty-twister-swatch-actions",
"warranty-card-utils","warranty-options-constants").execute(function(b,h,a,e){function c(g){1>d(k.expanderContainer).length||1>d(k.monthlyCheckbox).length||(1<Number(d(g.target).val())?(d(k.monthlyCheckbox).addClass(f.disabledOption),d(k.monthlyWarning).removeClass(f.hidden),(g=a.getSelectedCardData())&&g.isMonthlySubscription&&b.trigger("a:declarative:warranty-twister-default-action:click")):(d(k.monthlyCheckbox).removeClass(f.disabledOption),d(k.monthlyWarning).addClass(f.hidden)))}var k=e.selector,
f=e.styles,d=b.$;b.declarative("warranty-twister-default-action","click",function(){b.trigger("a:declarative:select-default-option:click");var a=b.$("[data-warranty-twister-default-action]");if(a!==n&&null!==a){var c=a.data("warranty-twister-default-action");h.updateSwatchStyle(a);h.updateDefaultOptionPriceSubtitle(c.defaultPriceSubtitle,c.expandedPriceSubtitle)}});b.declarative("warranty-option-swatch-select","click",function(a){var c=d(a.$currentTarget);if(c!==n&&null!==c){var e=c.children(k.warrantyOption)[0];
e===n&&(e=c.parent(k.warrantyOption)[0]);d(e).hasClass(f.disabledOption)||(b.trigger("a:declarative:select-warranty-option:click",a),h.updateSwatchStyle(c),h.updateWarrantyOptionPriceSubtitle("+"+a.data.warrantyPrice+" "+a.data.warrantyOptionPriceSubtitle,a.data.cardImageUrl))}});d(document).delegate("#mobileQuantityDropDown","change",function(a){c(a)});d(document).delegate("#quantity","change",function(a){c(a)})});"use strict";l.when("A","cc-warranty-options","warranty-options-csm").register("warranty-twister-actions",
function(b,h,a){b.declarative("select-warranty-option","click",function(e){e.data.selectionType="add";e.data.warrantyQuantity=b.$("#quantity").val();a.increment(a.MetricNames.ccItemsSelectCount);h.updateWarrantyOptionSelection(e.data)});b.declarative("select-default-option","click",function(b){a.increment(a.MetricNames.defaultOptionSelectCount);h.clearOptionSelection()})});"use strict";l.when("A","wty:mbbModalHelper","wty:detailPage","a-checkbox","a-popover").register("wty:MbbItem",function(b,h,a,
e,c){function k(a){a.stopPropagation();a.preventDefault()}function f(b,c,d){this._mbb=b;this._warrantyAsin=b._pageData.w[d].a;this._isSubscription=!!b._pageData.w[d].sub;this._index=d;this._row=c;this._quantity=a.findQuantityInput(c);this._offerListingIdSelection=a.findOfferListingIdInput(c);this._checkbox=c.find("input[type\x3dcheckbox]");this._shortTitle=this._row.find(".mbb__st");this._modal=b._mbbFeature.find(".mbb__m:eq("+d+")");this._modalYes=this._modal.find(".mbb__yes");this._modalNo=this._modal.find(".mbb__no");
this._modalName="MbbModal-"+this._mbb._type.cssClass+this._index;var f=this;this._onShortTitle=function(){f._logReftag("st")};this._setChecked(!1);this._logReftag("i");this._bind()}var d=b.$;f.prototype._bind=function(){this._bindQuantity();this._bindBuyBoxAccordion();this._bindModalYes();this._bindModalNo();this._bindShortTitle();this._bindCheckbox()};f.prototype._destroy=function(){this._unbindQuantity();this._unbindBuyBoxAccordion();this._unbindModalYes();this._unbindModalNo();this._unbindShortTitle();
this._unbindCheckbox()};f.prototype.getAsin=function(){return this._warrantyAsin};f.prototype.getFormIndex=function(){return this._index+this._mbb._baseFormIndex};f.prototype.getKvpIndex=function(){return this.getFormIndex()+1};f.prototype.getOfferListingId=function(){return this._offerListingIdSelection};f.prototype.isChecked=function(){return this._checkbox.prop("checked")};f.prototype.getQuantity=function(){return this._quantity.val()};f.prototype._setChecked=function(a){this._checkbox.prop("checked",
a)};f.prototype._setSubscriptionQuantityRestricted=function(a){c.remove(this._shortTitle);a?(this._bindShortTitle(),e(this._checkbox).enable(),this._row.removeClass("monthly-warranty-text-disabled"),d("#MonthlyWarrantyWarning").addClass("aok-hidden")):(e(this._checkbox).isChecked()&&d("#MonthlyWarrantyWarning").removeClass("aok-hidden"),this._unbindShortTitle(),e(this._checkbox).uncheck(),e(this._checkbox).disable(),this._row.addClass("monthly-warranty-text-disabled"),a={inlineContent:b.$("#popover-message").data("message"),
position:"triggerLeft",closeButton:"false"},c.create(this._shortTitle,a))};f.prototype._setQuantity=function(a){this._quantity.val(a)};f.prototype._logReftag=function(a){this._mbb._reftag.log(a+(this._index+1),this._mbb._baseItemAsin,this._warrantyAsin)};f.prototype._bindModalYes=function(){var b=this;this._onModalYes=function(){b._logReftag("my");b._mbb._setChecked(b._index,!0);h.hide(b._modalName,b._isSubscription);a.handleBaselink(b);a.handleATC(b)};this._modalYes.bind("click",this._onModalYes)};
f.prototype._unbindModalYes=function(){this._modalYes.unbind("click",this._onModalYes)};f.prototype._bindModalNo=function(){var b=this;this._onModalNo=function(){b._logReftag("mn");b._mbb._setChecked(b._index,!1);h.hide(b._modalName,b._isSubscription);a.handleBaselink(b);a.handleATC(b)};this._modalNo.bind("click",this._onModalNo)};f.prototype._unbindModalNo=function(){this._modalNo.unbind("click",this._onModalNo)};f.prototype._bindShortTitle=function(){this._shortTitle.unbind("click",k);this._shortTitle.bind("click",
this._onShortTitle);h.create(this._shortTitle,this._modalName,this._mbb._modalHeader,this._isSubscription)};f.prototype._unbindShortTitle=function(){this._shortTitle.unbind("click",this._onShortTitle);this._shortTitle.bind("click",k);h.remove(this._modalName,this._isSubscription)};f.prototype._bindQuantity=function(){this._onQuantityChange=null;if(this._mbb._type.hasQuantity){var b=this;this._onQuantityChange=a.bindQuantityChange(function(a){b._setQuantity(a)})}};f.prototype._unbindQuantity=function(){a.unbindQuantityChange(this._onQuantityChange)};
f.prototype._bindCheckbox=function(){var b=this;this._onCheckboxChange=function(){var c=b.isChecked();b._mbb._setChecked(b._index,c);b._logReftag(c?"cy":"cn");a.handleBaselink(b);a.handleATC(b)};this._checkbox.bind("change",this._onCheckboxChange)};f.prototype._unbindCheckbox=function(){this._checkbox.bind("change",this._onCheckboxChange)};f.prototype._bindBuyBoxAccordion=function(){var b=this;this._onBuyBoxAccordion=a.bindBuyBoxAccordion(function(){b._setChecked(!1);a.handleBaselink(b);a.handleATC(b)})};
f.prototype._unbindBuyBoxAccordion=function(){a.unbindBuyBoxAccordion(this._onBuyBoxAccordion)};return f});"use strict";l.when("A","wty:MbbTypes","wty:Mbb").register("mbb",function(b,h,a){function e(){this._mbbs={}}var c=new e;b.on("mbb:loaded",function(e,f,d){var g=h.getType(d);if(g){var m=c._mbbs[d];m&&m._destroy();m=new a(e,f,g);c._mbbs[d]=m;b.trigger("mbb:ready",d)}});e.prototype.getMbb=function(a){return this._mbbs[a]};return c});l.when("A","a-checkbox","a-popover","mbb").execute(function(b,
h,a,e){function c(){var a=Number(k("#quantity").val());["mbb__tsn","mbb__ti"].forEach(function(b){var c=e.getMbb(b);if(c){b=1<a;for(var c=c.getItems(),h=0,k=c.length;h<k;h++){var l=c[h];l._isSubscription&&l._setSubscriptionQuantityRestricted(!b)}}})}var k=b.$;k(document).delegate("#quantity","change",function(){c()});k(document).delegate("a[id^\x3dmbbPopoverLink]","click",function(){if(k(this).parents(".warranties-monthly-checkbox").length&&1<Number(k("#quantity").val()))return!1});c()})});
/* ******** */
(function(h){var d=window.AmazonUIPageJS||window.P,z=d._namespace||d.attributeErrors,a=z?z("DetailPageAlohaAssets",""):d;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,d,z){h.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(d,h,k,t,b,c){c=c||5E3;b=b||t;var m={items:[]};return{count:function(){return m.items.length},call:function(){0<m.items.length&&a.$.ajax({url:d,xhrFields:{withCredentials:!0},type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',
Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":h},data:JSON.stringify(m),timeout:c,success:k,error:t,abort:b})},addItem:function(a,b,c){m.items.push({asin:a,offerListingId:b,quantity:Number(c||1)})}}}}});"use strict";h.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(a,d,h,k){function t(){a.declarative("show-review-tab","click",function(c){a.$(c.$target).closest(b.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});
a.declarative("add-to-cart","click",function(c){a.$(b.SB_ROOT+" "+b.SB_BUYBOX_ITEM_CHECKBOX+" "+b.INPUT_TYPE_CHECKBOX).filter(function(){return a.$(this).data("asin")===c.data.asin}).prop("checked",!0).change();a.$("[id^\x3dpopover-simpleBundle-]").each(function(){var b=d.get(a.$(this));b.isActive()&&b.hide()})});a.declarative("focus-image","mouseenter",function(a){var c=a.$target,d=c.parents(b.AUI_PAGE_ROOT);a=a.data;d.find("#productImageMain-"+a.asin).attr("src",a.imageUrl);d.find(".thumbnail-group").removeClass("a-button-selected");
d.find("#"+c.prop("name")).addClass("a-button-selected")})}var b={BUYBOX_ACCORDION:"#buyBoxAccordion",ADD_TO_CART_FORM:"#addToCart",ADD_TO_CART_ATTACH_BUTTON:"#add-to-cart-button.attach-dss-atc:button",OFFER_LISTING_ID:"#offerListingID",AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type\x3d'checkbox']",BASE_PRODUCT_PRICE:"#base-product-price",BASE_PRODUCT_PRICE_DATA:"base-product-price",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",
SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"},
c=!1,m=a.debounce(function(){var d=a.$(b.SB_ROOT);if(d.length){var l=a.$(b.ADD_TO_CART_FORM),m=l.find(":submit").length&&l.find(b.OFFER_LISTING_ID).val(),h=a.$(b.ADD_TO_CART_ATTACH_BUTTON),w=h.length;if(m||w){t();var n=k.getSimpleBundlePageState()||{},r=n.expandedBuyboxEnabled,G=n.selectionMode||"SINGLE",f=n.items||[],F=n.csrfToken,C=n.cartEndpoint,u=[],g=d.find(b.SB_EXPANDED_MODAL_LINK),p,x={baseAsin:n.baseAsin,marketplaceId:n.marketPlaceId,baseItemPrice:a.$(b.BASE_PRODUCT_PRICE).data(b.BASE_PRODUCT_PRICE_DATA),
clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:n.currencyOfPreferenceSupported||!1},e=k.createMetricsLogger(x);c||(c=!0,a.defer(function(){e.logNexusImpression(f);e.logImpressionRefTag()}));g.click(function(a){a.originalEvent&&e.logExpandedLink()});f.forEach(function(v,q){function f(){var e=!1;c.click(function(){e=!e});d.find(b.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+q).click(function(){e||c.click();g.click();p=p||a.$(b.AUI_MODAL_SCROLLER);p.scrollTop(c.offset().top-p.offset().top+
p.scrollTop())})}function x(){var p=d.find(b.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+q),f="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin\x3d"+v.asin+"\x26marketplaceId\x3d"+n.marketPlaceId+"\x26offerId\x3d"+v.offerListingId+"\x26activeTab\x3d0",r="a:expander:simple-bundle-item-expander-"+q+":toggle",H=a.once(function(){p.load(f,null,function(b,e,q){a.$.trim(p.html())?(p.find(".a-span-last \x3e .a-spacing-top-base").remove(),p.find(".popover-add-to-cart-button").remove(),b=p.find("#a-page \x3e div \x3e div.a-row"),
e=p.find(".popover-in-stock"),e.remove(),e.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),b.append(e),e=p.find(".popover-ship-sold-by"),e.remove(),e.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),b.append(e),e=p.find(".popover-retail-domain"),e.remove(),b.append(e),b=p.find("#a-page \x3e div \x3e div.a-column.a-span9"),b.removeClass("a-span9"),b.addClass("a-span12")):p.text(n.ajaxFailMsg)})}),g=r+":expand";a.off(g);a.on(g,function(f){e.logItemLink(q);c.find(b.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");
a.$.trim(p.html())||H()});r+=":collapse";a.off(r);a.on(r,function(p){c.find(b.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}var c=d.find(b.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+q);if(r)f(),x();else{var l=d.find(b.SB_ACCESSORY_ITEM_LINK_PREFIX+q);l.unbind("click.MiniDpClickHandler");l.bind("click.MiniDpClickHandler",function(){e.logItemLink(q);e.logNexusOpenMiniDP(q,v);e.logMiniDPRefTag(q)})}k.setupCheckboxes(u,q,r,v.asin,n.maxBuyboxItemsDesktop,b.SB_BUYBOX_CHECKBOX_PREFIX+
q+" "+b.INPUT_TYPE_CHECKBOX,b.SB_EXPANDED_CHECKBOX_PREFIX+q+" "+b.INPUT_TYPE_CHECKBOX,b.SB_BUYBOX_CHECKBOX_PREFIX+q,b.SB_EXPANDED_CHECKBOX_PREFIX+q,G)});x=a.$(b.BUYBOX_ACCORDION);x.length?x.children().each(function(){l=a.$(this).find(b.ADD_TO_CART_FORM);var p=l.find(b.ADD_TO_CART_ATTACH_BUTTON),q=p.length,n=l.find(b.SB_ROOT).length,c=l.find(":submit").length&&l.find(b.OFFER_LISTING_ID).val();n&&c&&k.setupAddToCart(l,u,f,e,C,F,r);q&&k.setupAddToCartForButton(p,u,f,e,r,l)}):(m&&k.setupAddToCart(l,u,
f,e,C,F,r),w&&k.setupAddToCartForButton(h,u,f,e,r,l))}else d.hide()}},200);m();a.on("a:pageUpdate",m);a.on("attach:dss:initialized",function(){a.off("a:pageUpdate",m);m()})});"use strict";h.when("A","a-checkbox","aloha-cartapi","aloha-buy-now-integration","aloha-buybox-form-util").register("aloha-simplebundle-common",function(a,w,D,k,t){function b(b,c){var d=a.$(b);d.change(function(){d.prop("checked",this.checked)});var f=a.$(c);f.length||(f=d);return{$element:d,$container:f,api:w(b),show:function(){f.hasClass(B.AUI_HIDDEN)&&
f.removeClass(B.AUI_HIDDEN);f.show()},hide:function(){f.hasClass(B.AUI_HIDDEN)||f.addClass(B.AUI_HIDDEN)},isVisible:function(){return!f.hasClass(B.AUI_HIDDEN)}}}function c(b,a,c){a.forEach(function(a){b.addItem(a.asin,a.offerListingId,a.quantity);c.logCheckboxSelected(a.index,a.quantity);c.logAddToCartRefTag(a.index)})}function m(a,b,c){var f=[],d=[];b.forEach(function(b,r){var g=a[r];b.api.isChecked()?f.push({asin:g.asin,offerListingId:g.offerListingId,ourPrice:g.ourPrice,ourPriceAmount:g.ourPriceAmount,
ourPriceSymbol:g.ourPriceSymbol,ourPriceCode:g.ourPriceCode,index:r,quantity:c}):d.push({asin:g.asin,ourPrice:g.ourPrice,ourPriceAmount:g.ourPriceAmount,ourPriceSymbol:g.ourPriceSymbol,ourPriceCode:g.ourPriceCode,index:r,isVisible:b.isVisible()})});return{selectedLineItems:f,unselectedItems:d}}var y=/[^\d,\.]/g,l=/,/g,E=/\./g,z=/(^\D+|\D+$)/,B={AUI_HIDDEN:"aok-hidden"};return{createMetricsLogger:function(b){function c(b,a){d.ue&&d.ue.count&&d.ue.count("aloha-simplebundle-"+b,a)}function m(){var a;
a=b.currencyOfPreferenceSupported?{priceFormatted:b.baseItemPrice,priceDecimal:null,currencySymbol:null}:u(b.baseItemPrice);return{baseAsin:b.baseAsin,baseItemPrice:a.priceFormatted,baseItemCurrencySymbol:a.currencySymbol,baseItemPriceDecimal:a.priceDecimal,clientType:b.clientType,feature:"abb"}}function f(a,c){d.ue&&d.ue.event&&(a.requestId=g,a.producerId="atch",a.obfuscatedMarketplaceId=b.marketplaceId,d.ue.event(a,"atch",c,{ssd:!0}))}function h(b){a.ajax("/gp/product/ajax-handlers/reftag.html?ref_\x3d"+
b,{method:"get"})}function k(a){return b.currencyOfPreferenceSupported?{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:u(a.ourPrice)}function u(a){a=a||"";var b=a.lastIndexOf(","),e=a.lastIndexOf("."),c;b>e?(e=E,c=l):(e=l,c=E);(b=a.match(z))&&(b=b[0].trim());e=a.replace(y,"").replace(e,"").replace(c,".");e=parseFloat(e);return{priceFormatted:a,currencySymbol:b,priceDecimal:e}}var g=Date.now().toString(10)+Math.random().toString(16).substring(2,
13);a.defer(function(){c("view",1)});return{logAddToCart:function(a){c("addtocart",a)},logExpandedLink:function(){c("buybox-expanded-link",1)},logCheckboxSelected:function(a,b){c("checkbox-"+(a+1),b)},logItemLink:function(a){c("link-"+(a+1),1)},logImpressionRefTag:function(){h("dp_atch_abb_i")},logAddToCartRefTag:function(a){h("dp_atch_abb_atc_"+(a+1))},logMiniDPRefTag:function(a){h("dp_atch_abb_smdp_"+(a+1))},logNexusImpression:function(a){var b=m();b.accessories=a.map(function(a,b){var c=k(a);return{asin:a.asin,
displayPosition:b+1,price:c.priceFormatted,currencySymbol:c.currencySymbol,priceDecimal:c.priceDecimal}});f(b,"attach.ABBImpression.5")},logNexusAddBaseToCart:function(a,b,c){var d=m();d.baseQuantity=Number(c);d.accessoriesAdded=a.map(function(a){var b=k(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});d.accessoriesNotAdded=b.map(function(a){var b=k(a);return{asin:a.asin,displayPosition:a.index+
1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});f(d,"attach.ABBAddBaseToCart.9")},logNexusOpenMiniDP:function(a,b){var c=k(b),d=m();d.accessoryAsin=b.asin;d.accessoryDisplayPosition=Number(a)+1;d.accessoryPrice=c.priceFormatted;d.accessoryItemCurrencySymbol=c.currencySymbol;d.accessoryItemPriceDecimal=c.priceDecimal;f(d,"attach.ABBShowMiniDP.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},
getCheckboxCollectionObject:b,setupAddToCart:function(b,l,h,f,w,C,u){function g(b,g){if(p){var q=a.$(b.currentTarget);if(k.isBuyNow(q)){var n=u?1:x.find("*[name\x3d'quantity']").val()||1,A=m(h,l,n);k.checkoutWith(A.selectedLineItems,q)}else return}var t=D.createAddToCartRequest(w,C,function(){g()},function(){d.ueLogError&&d.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});g()}),n=u?1:x.find("*[name\x3d'quantity']").val()||
1,A=m(h,l,n);c(t,A.selectedLineItems,f);q=A.unselectedItems.filter(function(a){return a.isVisible});f.logNexusAddBaseToCart(A.selectedLineItems,q,n);n=t.count();0!==n&&(q=a.$(b.currentTarget),k.isBuyNow(q)?k.checkoutWith(A.selectedLineItems,q):(p=!0,b.preventDefault(),f.logAddToCart(n),t.call()))}var p=!1,x=b;b.unbind("submit.SimpleBundleSubmitHandler");b.bind("submit.SimpleBundleSubmitHandler",function(b){var c=a.$(this);g(b,function(){c.submit()})});b.find(":submit").unbind("click.SBB");b.find(":submit").bind("click.SBB",
function(b){var c=a.$(this),d=c.closest(".a-accordion-row-container");d.length&&(x=d,g(b,function(){c.click()}))})},setupAddToCartForDeclarative:function(a,b,l,f,k,w,u,g){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",function(a){a=D.createAddToCartRequest(k,w,function(){h.now("attach-external-atc-interceptor").execute(function(a){a&&e.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},function(){d.ueLogError&&d.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},
{logLevel:"ERROR",attribution:"SimpleBundle"})});var n=u?1:g.find("*[name\x3d'quantity']").val()||1,e=m(l,b,n);c(a,e.selectedLineItems,f);var v=e.unselectedItems.filter(function(a){return a.isVisible});f.logNexusAddBaseToCart(e.selectedLineItems,v,n);if(n=a.count())f.logAddToCart(n),a.call()})},setupCheckboxes:function(a,c,d,f,l,m,h,g,p,k){var e=b(m,g);a.push(e);e.api.enable();e.$element.data("asin",f);if(d){var v=b(h,p);v.api.enable();v.api.check(e.api.isChecked());v.$element.change(function(){var a=
v.api.isChecked();e.api.check(a)});e.$element.change(function(){var b=e.api.isChecked();v.api.check(b);var c=0;a.forEach(function(a){c<l&&a.api.isChecked()?(c++,a.show()):a.hide()});c<l&&a.forEach(function(a){c<l&&a.api.isUnchecked()&&(c++,a.show())})})}else"SINGLE"===k&&e.$element.change(function(){e.api.isChecked()&&a.forEach(function(a,b){c!==b&&a.api.uncheck()})});0<a.length&&a[0].$element.change()},setupAddToCartForButton:function(b,c,d,f,l,k){function w(){var a=l?1:g.find("*[name\x3d'quantity']").val()||
1,b=m(d,c,a);t.addItems(k,b.selectedLineItems,f);var e=b.unselectedItems.filter(function(a){return a.isVisible});h.now("attach-external-atc-interceptor").execute(function(a){a&&b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});f.logNexusAddBaseToCart(b.selectedLineItems,e,a);f.logAddToCart(b.selectedLineItems.length)}var g=k;b.unbind("click.button.SBB");b.bind("click.button.SBB",function(){var b=a.$(this).closest(".a-accordion-row-container");b.length&&(g=b);w()})}}});"use strict";
h.when("ready").register("aloha-buy-now-integration",function(){var a={};h.when("turbo-checkout-buy-now-integration").execute(function(d){a=d});return{isBuyNow:function(d){return"function"===typeof a.isBuyNow&&a.isBuyNow(d)},checkoutWith:function(d,h){return a.checkoutWith(d,h)}}});"use strict";h.when("A").register("aloha-buybox-form-util",function(a){function d(a){for(var c=2;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function h(a,
c){for(;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function k(b,c){return[a.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+c,value:b.asin,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+c,value:b.offerListingId,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+c,value:b.quantity||1,class:"aloha-accessory-form-input"})]}var t=[];a.on("aloha:detailPage:reappear",
function(){t=[];a.$(".aloha-accessory-form-input").remove()});return{addItems:function(a,c,m){var y=d(a);c.forEach(function(c){if(c!==z&&c.asin&&c.offerListingId){y=h(a,y);var d=k(c,y);d.forEach(function(c){a.append(c)});t.push(d);y++;m&&(m.logCheckboxSelected(c.index,c.quantity),m.logAddToCartRefTag(c.index))}});c=a.find('input[name\x3d"itemCount"]');0===c.length?a.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+y+'"\x3e'):c[0].value=y}}})});
/* ******** */
(function(p){var n=window.AmazonUIPageJS||window.P,v=n._namespace||n.attributeErrors,a=v?v("DetailPageAttachAssets",""):n;a.guardFatal?a.guardFatal(p)(a,window):a.execute(function(){p(a,window)})})(function(p,n,v){"use strict";p.when("A").register("attach-variant-registration",function(a){var c={};return{registerVariantFlag:function(a){if(c.hasOwnProperty(a))throw"Variant flag already registered";c[a]=!0},getVariantFlag:function(a){return c.hasOwnProperty(a)}}});"use strict";p.when("A").register("attach-baselink",
function(a){var c=null;p.when("BaseLinkFormHelper").execute(function(a){c=a});var b=function(a){n.ueLogError&&n.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return c?c.addBaseLinkFields(a,b):null},addLinkedWarranty:function(c,b,l){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:c,timeout:1E3,success:function(a){a&&a.status&&"OK"===a.status&&b()},error:function(){l()}})},
obtainBaseItemCartId:function(c){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,success:function(a){a&&a.status&&a.lastAddedItemCartId?c(a.lastAddedItemCartId):b("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,c,d){b("Error while doing a call to last-added-cart-item-id.html. Status: "+c+" . Error: "+d)}})},mSilogError:b}});"use strict";p.when("A").register("attach-external-atc-interceptor",
function(a){var c=a.$,b=[],f=[],g=!1,l=!1,d=function(){l=!0},e=function(a){var d=f.indexOf(a);-1<d&&(a=c("#attach_add_accessory_alert_"+d),d=c("#attach_add_accessory_button_"+d),a&&d&&(a.removeClass("aok-hidden"),d.addClass("aok-hidden")))};return{updateAttachModule:function(a){d&&(g?e(a):b.push(a))},loadAttachModule:function(a){if(l)for(g=!0,f=a;0<b.length;)a=b.shift(),e(a)},unloadAttachModule:function(){g=!1;f=[]},enableModule:d}});"use strict";p.when("A").register("attach-preinitiate-checkout",
function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(c){var b;b=a.$("#attach-desktop-sideSheet");var f=a.$("#attach_accessory_sheet");b=b.length?b:f;b.find("iframe#checkoutPrefetch").remove();c="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+c;f=document.createElement("iframe");f.setAttribute("src",c);f.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");f.setAttribute("name","checkoutPrefetch");f.setAttribute("id",
"checkoutPrefetch");b.append(f)}}});"use strict";p.when("A","attach-common","attach-variant-registration").register("attach-weblabs",function(a,c,b){function f(c){var d=a.$(c).val();c=[];if(d&&0<d.length)for(var d=d.slice(1,-1).split(","),b=0;b<d.length;b++){var l=d[b].trim();0<l.length&&c.push(l)}return c}var g={},l=g.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",
SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",ATTACH_LD_SUPPORT:"#attach-ld-container",WTY_LD_SUPPORT:"#warranty-ld-launch"},d=g.Marketplaces={IN:"A21TJRUUN4KGV"};g.isWarrantyPaneSuppressed=function(){return a.$(l.ATTACH_MARKETPLACE_ID).val()===d.IN&&(!g.servicesInterstitialDeprecated()||c.hasAccessories())};
g.isShowAccessoryCouponsDssEnabled=function(){return c.elementExists(l.SHOW_ACCESSORY_COUPONS_DSS)};g.isShowAccessoryCouponsMbsEnabled=function(){return c.elementExists(l.SHOW_ACCESSORY_COUPONS_MBS)};g.isCoreFreeShippingMessageEnabled=function(){return c.elementExists(l.CORE_FREE_SHIPPING_MESSAGE)};g.isInstallmentsDssIntegrationEnabled=function(){return b.getVariantFlag("DP_INSTALLMENTS_DSS_231673:T1")};g.isAttachDebugParametersEnabled=function(){return 0<a.$(l.DEBUG_IS_DEBUG).length||0<a.$(l.DEBUG_QUERY_STRING).length};
g.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(l.WTY_TWISTER_CONTAINER).length};g.isAttachLDSupportEnabled=function(){return c.elementExists(l.ATTACH_LD_SUPPORT)};g.isWarrantyLDSupportEnabled=function(){return c.elementExists(l.WTY_LD_SUPPORT)};g.servicesInterstitialDeprecated=function(){return c.elementExists("#attachSIDeprecated")};g.getAllWeblabsToTriggerClientSide=function(){return f(l.WEBLABS_TO_TRIGGER_ON_ADD_TO_CART).map(function(a){return a.split(":")})};g.triggerClientSideWeblabs=
function(){var a=g.getAllWeblabsToTriggerClientSide();if(0<a.length)for(var c=0;c<a.length;c++){var d=a[c];n.ue&&ue.count&&ue.count("Attach.ClientSideWeblab."+d[0]+":"+d[1],1);n.ue&&ue.trigger&&ue.trigger(d[0],d[1])}};return g});"use strict";p.when("A").register("attach-logging",function(a){var c={},b,f,g;c.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"10",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"14",
ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};
c.FEATURES={DSS:"dss",MBS:"mbs"};c.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",
ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",
MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",ATTACH_BASE_LD_MISSING_TIMER:"attachBaseLightningDealMissingTimer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",
ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError"};c.ENDPOINTS={REF_TAG:"/gp/product/ajax-handlers/reftag.html?ref_\x3d"};c.initialize=function(a,d){b=a;f=d;c.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_"}};c.setPayloadBuilder=function(a){g=function(){var d=a();d.feature=b;d.obfuscatedMarketplaceId=f||n.ue_mid;d.producerId=c.NEXUS.PRODUCER_ID;d.requestId=c.getRandomHexString();return d}};c.getRandomHexString=function(){return Date.now().toString(10)+
Math.random().toString(16).substring(2,13)};c.log=function(a,d){n.ue&&n.ue.event&&n.ue.event(a,c.NEXUS.PRODUCER_ID,d,{ssd:!0})};c.getAccessoryLoggingData=function(c){return{asin:a.$("#attach-accessory-asin-"+(parseInt(c)+1)).val(),index:c,priceFormatted:a.$("#attach-accessory-price-"+c+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+c).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+c).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+
c).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+c).val()||null,dealType:a.$("#attach-accessory-deal-type-"+c).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+c).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+c).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+c).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+c).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+
c).val()||null}};c.logAccessoryAddToCart=function(a){var d=c.NEXUS.ADD_ACCESSORY_PREFIX+c.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,b=g();b.type=c.NEXUS.ACCESSORY_TYPE.ACCESSORY;b.displayPosition=parseInt(a.index)+1;b.accessoryAsin=a.asin;b.accessoryAsinPrice=a.priceFormatted;b.accessoryItemCurrencySymbol=a.currencySymbol;b.accessoryItemPriceDecimal=a.priceDecimal;b.couponType=a.couponType;b.couponDecimal=a.couponDecimal;b.dealType=a.dealType;b.dealPercentSavings=a.dealPercentSavings;b.dealDollarAmount=
a.dealDollarAmount;b.categoryDisplayPosition=parseInt(a.categoryIndex)+1;b.categoryTitle=a.categoryTitle;b.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;c.log(b,d)};c.logAccessoryImpressions=function(a){var d=c.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+c.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,b=g();b.accessories=[];for(var f=0;f<a.length;f++){var k=a[f];b.accessories.push({displayPosition:parseInt(k.index)+1,asin:k.asin,price:k.priceFormatted,currencySymbol:k.currencySymbol,priceDecimal:k.priceDecimal,
couponType:k.couponType,couponDecimal:k.couponDecimal,dealType:k.dealType,dealPercentSavings:k.dealPercentSavings,dealDollarAmount:k.dealDollarAmount,categoryDisplayPosition:parseInt(k.categoryIndex)+1,categoryTitle:k.categoryTitle,displayPositionWithinCategory:parseInt(k.asinIndexWithinCategory)+1})}c.log(b,d)};c.logWarrantyAddToCart=function(a,d){var b=c.NEXUS.ADD_WARRANTY_PREFIX+c.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;d&&(b=c.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+c.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION);
var f=g();f.asin=a.asin;f.price=a.priceFormatted;f.warrantyCurrencySymbol=a.currencySymbol;f.warrantyPriceDecimal=a.priceDecimal;c.log(f,b);d||c.logWarrantyRefTag(c.REF_TAGS.WARRANTY_ADD_TO_CART,a.asin)};c.logWarrantyImpression=function(a){var d=c.NEXUS.WARRANTY_IMPRESSION_PREFIX+c.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,b=g();b.asin=a.asin;b.price=a.priceFormatted;b.warrantyCurrencySymbol=a.currencySymbol;b.warrantyPriceDecimal=a.priceDecimal;c.log(b,d);c.logWarrantyRefTag(c.REF_TAGS.WARRANTY_IMPRESSION,
a.asin)};c.logWarrantyRefTag=function(a,d){var b=g().baseAsin;c.logRefTag(a+b+"_"+d)};c.logSecondarySheetRefTag=function(a){var d=g().baseAsin;c.logRefTag(a+"_"+d)};c.logRefTag=function(b){a.get(c.ENDPOINTS.REF_TAG+b)};c.logMobileBaseAtc=function(a){c.logCount(c.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);a&&a.data&&"add-to-cart"===a.data.buttonID&&c.logCount("DetailPage_MobileApp_AddToCart")};c.logMapleError=function(){n.ue&&n.ue.count&&n.ue.count("MAPLE::DSS::Error",(n.ue.count("MAPLE::DSS::Error")||
0)+1)};c.logCount=function(a,c){n.ue&&n.ue.count&&(c=c||1,n.ue.count(a,(n.ue.count(a)||0)+c))};c.logDSSWarningMessage=function(a){var d=c.NEXUS.DSS_WARNING_MESSAGE_PREFIX+c.NEXUS.DSS_WARNING_MESSAGE_VERSION,b=g();c.log({quantity:b.quantity.toString(),baseAsin:b.baseAsin,warningMessage:a},d)};c.logPromotionClaimed=function(a){var d=c.NEXUS.PROMOTION_CLAIMED_PREFIX+c.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,b=g();b.asin=a.asin;b.accessoryCurrencySymbol=a.currencySymbol;b.accessoryPriceDecimal=a.priceDecimal;
b.displayPosition=a.index+1;null!==a.couponType&&(b.promoDecimal=a.couponDecimal,b.promoDecimalType=a.couponType,b.promoType="coupon");c.log(b,d)};c.isFunction=function(a){return"function"===typeof a};c.beginLatencyCapture=function(a){c.isFunction(n.uet)&&n.uet("bb",a,{wb:1})};c.endLatencyCapture=function(a){c.isFunction(n.uex)&&n.uex("ld",a,{wb:1})};return c});"use strict";p.when("A","attach-logging").register("attach-maple",function(a,c){var b={},f;b.initialize=function(){f=!1};b.loadBannerHTML=
function(){var b=a.$.Deferred(),l={};f&&(l.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:l,success:function(a){b.resolve(a)},error:function(){c.logMapleError();b.resolve(null)}});return b.promise()};b.suppressMathBox=function(){f=!0};b.updateMathBox=function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return b});"use strict";p.when("A","attach-variant-registration","attach-logging").register("attach-common",function(a,
c,b){function f(c){var b=g(c,q.UNIQ_ITEM_ASSOC_NAME),k=g(c,q.ITEM_ASSOC_TYPE_NAME),h=1,f=!1;null!==k&&(e.itemAssocTypeValue=c.find(q.INPUT_NAME+k+q.CLOSED_BRACKET).val(),e.itemAssocTypeValue===q.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(f=!0));null!==b?f?(k=g(c,q.ITEM_ASSOC_NAME),f=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),c.find(q.INPUT_NAME+b+q.CLOSED_BRACKET).val(f),c.find(q.INPUT_NAME+k+q.CLOSED_BRACKET).val(f),e.uniqueId=f):e.uniqueId=c.find(q.INPUT_NAME+b+q.CLOSED_BRACKET).val():(e.uniqueId=
a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),h=d(c,h),l(c,q.ITEM_ASSOC_NAME,e.uniqueId,h),h++,h=d(c,h),l(c,q.UNIQ_ITEM_ASSOC_NAME,e.uniqueId,h),h++,h=d(c,h),l(c,q.ITEM_ASSOC_TYPE_NAME,e.itemAssocTypeValue,h),h++);h=d(c,h);l(c,q.ITEM_ASSOC_PROPERTIES_NAME,q.ITEM_ASSOC_PROPERTIES_VALUE,h)}function g(a,c){a=a.find(q.INPUT_VALUE+c+q.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?q.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function l(a,c,b,d){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+
d+'" value\x3d"'+c+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+d+'" value\x3d"'+b+'"/\x3e')}function d(a,c){for(;0<a.find('input[name\x3d"custom-name.1.'+c+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+c+'"]').length;)c++;return c}var e={},q=e.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",
ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",CUSTOM_VALUE_KEY:"custom-value.",INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"},k=e.Marketplaces={IN:"A21TJRUUN4KGV"};e.uniqueId=null;e.itemAssocTypeValue="Attach";e.selectedBaseLightningDeal=!1;e.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4,REBIND_ATC:5};
var x=e.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled"};e.buyButton=a.$(x.ADD_TO_CART_BUTTON);e.reject=function(c,b){return e.rejectPromise(a.$.Deferred(),c,b)};e.rejectPromise=function(c,b,d){if(d&&d.count&&n.ue&&n.ue.count)if("string"===typeof d.count)n.ue.count(d.count,1);else if(a.$.isArray(d.count))for(var h=0;h<d.count.length;h++)n.ue.count(d.count[h],1);return c.reject(b,d)};
e.pipeJSON=function(a){try{return JSON.parse(a)}catch(c){return e.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};e.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};e.elementExists=function(c){return c?c instanceof a.$?0!==c.length:0!==a.$(c).length:!1};e.moduleExists=function(c){return(c=a.$("#"+c+"_feature_div").html())?0<c.trim().length:!1};e.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};
e.hasWarranty=function(){return e.elementExists("#attachSIDeprecated")&&e.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};e.hasMonthlyWarranty=function(){return e.elementExists("#attach-monthly-warranty")};e.isMultiQuantityDeal=function(){return 0<a.$("#dealOrderQuantityDropdown").length};e.hasAccessories=function(){return e.elementExists("#attach-asin-list")};e.isDiscriminatedOffersEnabled=function(){return e.elementExists(x.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(x.DISCRIMINATED_OFFERS_ENABLED).val():
a.$(x.ATTACH_MARKETPLACE_ID).val()===k.IN};e.submitATCForm=function(){var c=e.getAtcForm();e.isDiscriminatedOffersEnabled()&&f(c);b.logCount(b.CSM_METRICS.ATTACH_BASE_ATC_CLICK);c=c.serializeArray();c.push({name:"isDSSAjax",value:"1"});c=a.$.param(c);c=a.$.post("/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",c);c.fail(function(){b.logCount(b.CSM_METRICS.ATTACH_BASE_ATC_FAILURE)});a.trigger("attach:add-base-to-cart",c)};e.getAtcForm=function(){return e.buyButton.closest("form")};e.isAttachMTAWeblabOn=
function(){return!1};return e});"use strict";p.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration").register("attach-desktop-warranty-pane",function(a,c,b,f,g,l){var d={name:"warranty"},e=d.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:"#ASIN",MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",
ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",
PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"},q;d.getWarrantyLoggingPayload=function(){var b=a.$(e.ASIN).val(),d=a.$(e.PRICE_FORMATTED),f=a.$(e.PRICE_AMOUNT);return!g.servicesInterstitialDeprecated()&&c.elementExists(f)?{asin:b,priceFormatted:d.text().trim(),priceDecimal:parseFloat(f.val())||null,currencySymbol:a.$(e.BASE_CURRENCY_SYMBOL).val()||null}:{asin:b,priceFormatted:d.text().trim(),priceDecimal:null,currencySymbol:null}};d.appendWarrantyToATCForm=function(b,d){if(a.$(e.BASE_ASIN).val()&&b&&
d){var g=c.getAtcForm();g.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var l=g.find("input[name^\x3d'offeringID']").length+1,q=a.$(e.ATC_QUANTITY).val()||1,h="quantity."+l,m="asin."+l;g.find('input[name\x3d"'+h+'"]').remove();g.find('input[name\x3d"'+m+'"]').remove();g.append('\x3cinput type\x3d"hidden" id\x3d"'+h+'" name\x3d"'+h+'" value\x3d"'+q+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"'+
m+'" name\x3d"'+m+'" value\x3d"'+b+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+l+'" name\x3d"offeringID.'+l+'" value\x3d"'+d+'" class\x3d"attach-warranty-input"/\x3e');b=g.find('input[name\x3d"itemCount"]');0===b.length?g.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+l+'"\x3e'):b[0].value=l;a.$("#atch__bl").length&&f.createBaseLinkFormFields(l+1,g)}};d.clearWarrantyFromATCForm=function(){c.getAtcForm().find(e.ATC_WARRANTY).remove()};
d.load=function(b){var f;if(g.servicesInterstitialDeprecated()){if(c.elementExists(e.PANE))a.$(e.PANE).removeClass("aok-hidden");else return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&c.selectedBaseLightningDeal)if(c.elementExists(e.PANE_LD))a.$(e.PANE+", "+e.PANE_LD).toggleClass("aok-hidden");else return c.reject(c.FailureModes.UNBIND_ATC);c.elementExists(e.PANE_EXPERIMENT_DISPLAY)&&a.$(e.PANE_EXPERIMENT_DISPLAY).remove()}else return c.elementExists(e.JSON_DATA)&&
(f=c.unescapeJson(a.$(e.JSON_DATA).val()),f=JSON.parse(f)),f?d.renderClientSide(b,f):c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})};d.renderClientSide=function(c,b){var d="",g=b.baseASIN,e="dp_atch_dss_w_lm_"+g+"_"+b.asin,h="dp_atch_dss_w_r_"+g+"_"+b.asin,g="dp_atch_dss_w_lm_"+g+"_"+b.asin,f=a.$("#stringTranslation-si-warranty-title").val(),t=a.$("#stringTranslation-si-accident-protection").val(),w=a.$("#stringTranslation-si-from").val(),y=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),
l=a.$("#stringTranslation-item-added-to-cart").val(),q=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),n=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),p=a.$("#stringTranslation-si-add-coverage").val(),v=a.$("#stringTranslation-si-no-thanks").val(),C=a.$("#stringTranslation-services-bundle-detail-link").val(),d=d+('   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+
b.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+f+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n');null!==b.thumbImage&&(d+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+b.thumbImage+
'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');d+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+b.asin+"/ref\x3d"+e+'"\x3e\n                        \x3cstrong\x3e'+(null!==b.displayTitle?b.displayTitle:t.replace("${brandName}",b.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+
w+" "+b.merchantName+"\x3c/span\x3e\n";Number(b.averageRating)&&Number(b.numReviews)&&Number(b.numFullStars)&&"boolean"===typeof b.hasHalfStar&&(e=y.replace("${averageRating}",b.averageRating),d+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+b.asin+"/ref\x3d"+h+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+b.numFullStars+
(b.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+e+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+b.asin+"/ref\x3d"+h+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+b.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");null!==b.buyingPriceAmount&&(d+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+
b.buyingPriceAmount+'"\x3e\n');d+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+b.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(h=0;h<b.bulletPoints.length;h++)d+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+b.bulletPoints[h].text+"\x3c/span\x3e\x3c/li\x3e\n";d+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
l+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
q+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+n+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
b.asin+'" data-offering-id\x3d"'+b.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+p+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
v+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
b.asin+"/ref\x3d"+g+'"\x3e\n                '+C+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";c.$container.append(d)};d.onAttachAddBaseToCart=function(a){a.always(d.clearWarrantyFromATCForm)};d.setup=function(k){a.$(e.PANE).hide();var l=a.$(e.PANE_IMAGE).attr("data-image-url");a.$(e.PANE_IMAGE).attr("src",l);a.$(e.PANE_ADD_BUTTON).click(function(){var e=a.$(this).find("button");g.servicesInterstitialDeprecated()&&(e=a.$(this).find("[data-asin]"));var f=e.attr("data-asin"),e=
e.attr("data-offering-id");d.appendWarrantyToATCForm(f,e);b.logWarrantyAddToCart(d.getWarrantyLoggingPayload());g.servicesInterstitialDeprecated()&&!c.hasAccessories()||c.submitATCForm();k.next()});a.$(e.PANE_NO_BUTTON).click(function(){g.servicesInterstitialDeprecated()&&!c.hasAccessories()||c.submitATCForm();k.next()});g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&(a.$(e.PANE_ADD_BUTTON_LD).click(function(){f.obtainBaseItemCartId(function(c){var g=a.$(e.PANE_ADD_BUTTON_LD).find("input");
c={warrantyAsin:g.attr("data-asin"),offeringId:g.attr("data-offering-id"),addWarranty:1,quantity:1,baseItemCartId:c};f.addLinkedWarranty(c,function(){b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);new Promise(d.updateCart);k.next()},function(){b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);k.next()})})}),a.$(e.PANE_NO_BUTTON_LD).click(function(){k.next()}));a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart)};d.show=
function(){c.selectedBaseLightningDeal?g.isAttachLDSupportEnabled()&&g.isWarrantyLDSupportEnabled()&&c.selectedBaseLightningDeal&&a.$(e.PANE_LD).show():a.$(e.PANE).removeClass("aok-hidden");a.$(e.PANE).fadeIn(400,d.setFocus);b.logWarrantyImpression(d.getWarrantyLoggingPayload());q=Date.now()};d.hide=function(){a.$(e.PANE+", "+e.PANE_LD).fadeOut();b.logCount(b.CSM_METRICS.WARRANTIES_DWELL_TIME,Math.floor((Date.now()-q)/1E3))};d.setFocus=function(){a.$(e.PANE_WARRANTY_TITLE).get(0).focus()};d.updateCart=
function(){a.$.get("/gp/navigation/ajax/dynamic-menu.html?cartItems\x3dcart").done(function(a){a&&a.cartItems&&a.cartItems.count&&p.when("nav.setCartCount").execute(function(c){c(a.cartItems.count)})})};return d});"use strict";p.when("A","attach-common","attach-weblabs","attach-maple","attach-logging","attach-variant-registration").register("attach-desktop-accessories-pane",function(a,c,b,f,g,l){var d={name:"accessories"},e=!0,q=!1,k,x=!1,u=!1,B,r=d.Endpoints={RENDER:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-render-desktop.html",
GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",ADD_ACCESSORY_TO_CART:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"},h=d.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",
PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",
PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",
PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",
PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",
PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},m=d.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};d.setShouldIncludeMaple=function(a){q=a};d.load=function(d){p.now("attach-external-atc-interceptor").execute(function(a){k=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var w=a.$.Deferred(),e,l;p.now("dp-util-cookie").execute(function(b){b&&b("session-id")!==a.$("#attach-sessionId").val()&&c.rejectPromise(w,c.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID"})});
e={attachAccessoryAsinList:a.$(h.ACCESSORY_ASIN_LIST).val(),marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),deviceType:"desktop",attachWeblabsToTrigger:[]};b.isAttachDebugParametersEnabled()&&(e.isDebug=a.$(h.DEBUG_IS_DEBUG).val(),e.queryString=a.$(h.DEBUG_QUERY_STRING).val());e=a.$.param(e,!0);e=a.$.post(r.RENDER,e);q&&(c.isCurrencyOfPreferenceApplied()&&f.suppressMathBox(),l=f.loadBannerHTML());a.$.when(e,l).done(function(b,e){var f=a.$(b[0].trim()),k=!f.is(h.PANE),f=0===f.find(h.PANE_ACCESSORY_ASIN).length;
k||f?c.rejectPromise(w,c.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"]}):(d.$container.append(a.$(b[0]).get(0)),e&&0<e.trim().length&&(e=a.$(e),b=e.not("script"),e=e.filter("script"),c.elementExists(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?b.insertAfter(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):b.insertAfter(h.PANE_ACCESORIES_CARD),b.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),
e.each(function(){a.$.globalEval(this.innerHTML)}),g.logCount("ATTACH_DSS_MAPLE_RENDERED")),w.resolve())}).fail(function(){c.rejectPromise(w,c.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE"})});return w.promise()};d.onAttachAddBaseToCart=function(a){e=!1;a.pipe(d.handleAddBaseAndGetCartDescription).pipe(c.pipeJSON).pipe(d.handleCartDescription).fail(function(a,b){d.sheet.fail(a||c.FailureModes.ERROR_500,b)})};d.runOnceSetup=function(){x||(x=!0,a.declarative("attach-accessory-add",
"click",function(c){var b=c.$currentTarget,e=c.data,f=e.a,k=e.oid,e=e.isLightningDeal;g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);g.beginLatencyCapture(g.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);c=!0===a.$(h.PANE_CATEGORIZED_ACCESSORIES_CARD).data(h.PANE__DATA_CATEGORY_VIEW)?a.$(c.$target).data(h.PANE__DATA_ASIN_INDEX):a.$(h.PANE_ACCESSORY_ADD_DECLARATIVES).index(b);e?d.addAccessoryToCartWithLightningDeal(c):d.addAccessoryToCart(f,k,c)}))};d.setup=function(c){d.runOnceSetup();a.$(h.PANE).hide();
d.sheet=c;a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.$(h.PANE_VIEW_CART_BUTTON).click(d.viewCart);a.$(h.PANE_CHECKOUT_BUTTON).click(d.proceedToCheckout);a.$(h.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var c=a.$(this).attr("data-asin"),b=a.$(this).attr("data-oid"),t=a.$(this).attr("data-idx");d.addAccessoryToCart(c,b,t)});a.$(h.PANE).find(h.PANE_CLOSE_BUTTON).appendTo(h.PANE_CART_BLOCK);a.$(h.PANE_CLOSE_BUTTON).click(c.next);
a.$(h.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});b.isShowAccessoryCouponsDssEnabled()&&d.initializeCoupons();a.$(h.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var c=a.$(this).data().idx;d.updateLightningDealTimer(c);d.initializeLightningDealStatusRefresher(c)})};d.show=function(){b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal||!e||c.submitATCForm();B=Date.now();a.$(h.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear",d.setFocus);
if(b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal)a.$(h.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(n).height()-161);else{var t=a.$(h.PANE_CART_BLOCK_INNER);t.find("div").addClass("aok-hidden");t.append(a.$(h.PANE_CART_SPINNER).removeClass("aok-hidden"))}d.initializeAccessoriesDisplay();p.now("attach-categorized-cards").execute(function(a){a!==v&&a.initializeCategorizedCards()})};d.hide=function(){a.$(h.PANE).hide();a.$(h.PANE_CART_SPINNER).addClass("aok-hidden");
a.$(h.PANE_HUC_MESSAGE).remove();a.$(h.PANE_ACCESSORY_ASIN).each(function(c,b){(b=a.$(b).data(h.PANE__DATA_ASIN_INDEX))&&(c=b);d.updateAccessoryStatus(c,m.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");k&&k.unloadAttachModule();g.logCount(g.CSM_METRICS.ACCESSORIES_DWELL_TIME,Math.floor((Date.now()-B)/1E3));a.trigger("aloha:detailPage:reappear");e=!0};d.setFocus=function(){a.$(h.PANE_ACCESSORY_FIRST_ASIN).length&&a.$(h.PANE_ACCESSORY_FIRST_ASIN).get(0).focus()};d.viewCart=function(){g.logCount(g.CSM_METRICS.ATTACH_CART_CLICK);
document.location=""};d.proceedToCheckout=function(){g.logCount(g.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=u?r.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+u+"\x26ref_\x3ddp_atch_dss_proceed":r.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"};d.updateNavCartDisplayQuantity=function(c){var b=Number(c);c=isNaN(b)?"":100>b?c:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===b).toggleClass("nav-cart-1",1<=b&&10>b).toggleClass("nav-cart-10",10<=b&&20>b).toggleClass("nav-cart-20",
20<=b&&100>b).toggleClass("nav-cart-100",100<=b).text(c)};d.handleAddBaseAndGetCartDescription=function(b){g.logCount(g.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);b=a.$(b);d.renderHUCFeedback(b);d.renderBaseAddStatusIcon(b);if(k)try{var e=a.$(h.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();k.loadAttachModule(e)}catch(f){p.logError(f,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}e={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),
languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val()};return a.$.post(r.GET_CART_DESCRIPTION,e).pipe(null,function(a,b,d){p.logError(Error(b),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return c.reject(null,{count:g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};d.handleCartDescription=function(t){try{if(isNaN(parseInt(t.totalPrice))||isNaN(parseInt(t.itemQuantity))||!a.$.isArray(t.includedAsins)||
0===t.formattedTotalPrice.trim().length||0===t.cartSubtotalString.trim().length||0===t.itemQuantityString.trim().length)throw Error("Received invalid cart description");d.updateNavCartDisplayQuantity(t.itemQuantity);a.$(h.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(t.cartSubtotalString);a.$(h.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(t.formattedTotalPrice);a.$(h.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(t.itemQuantityString);a.$("#attach-customerId").val()&&p.when("attach-preinitiate-checkout").execute(function(a){u=
a.getCartInitiateId();a.preinitiateCheckout(u)});t.coreFreeShippingMessage&&a.$(h.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(t.coreFreeShippingMessage);q&&f.updateMathBox(Number(t.totalPrice));b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal||(a.$(h.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(h.PANE_CART_SPINNER).addClass("aok-hidden"));setTimeout(d.revealHUCFeedback,200);p.when("EWC").execute(function(a){a.refresh()});g.logCount(g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);
return t}catch(e){return p.logError(e,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane"),c.reject(null,{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};d.updateAccessoryStatus=function(c,b){a.$(h.PANE_ACCESSORY_ADD_BUTTON_PREFIX+c).toggleClass("aok-hidden",b!==m.INITIAL);a.$(h.PANE_ACCESSORY_ADD_SPINNER_PREFIX+c).toggleClass("aok-hidden",b!==m.ADDING);a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+c).toggleClass("aok-hidden",b!==m.SUCCESS);a.$(h.PANE_ACCESSORY_ADD_ERROR_PREFIX+
c).toggleClass("aok-hidden",b!==m.ERROR);a.$("#tile-add-accessory-badge-"+c).toggleClass("aok-hidden",b!==m.SUCCESS);a.$("#attach-accessory-tile-"+c).toggleClass("in-cart",b===m.SUCCESS)};d.addAccessoryToCart=function(b,e,f){e={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:b,accessoryItemOfferingId:e,languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),accessoryItemQuantity:a.$(h.QUANTITY).val(),
accessoryItemPrice:a.$("#attach-accessory-base-price-"+f).val(),accessoryMerchantId:a.$("#attach-accessory-merchantId-"+f).val(),accessoryProductGroupId:a.$("#attach-accessory-product-category-code-"+f).val()};if(c.isDiscriminatedOffersEnabled()){var k={},k=c.isAttachMTAWeblabOn()?{itemAssociationGroup:'{"parentAsin":"'+e.asin+'","type":"Attach","renderType":"renderAll","constraintList":[{"mutuallyInclusive":false,"type":"DELETE"}]}'}:{itemAssoc:c.uniqueId,itemAssocType:c.itemAssocTypeValue,itemAssocRenderType:"renderAll"};
e.keyValuePairs=JSON.stringify(k)}d.updateAccessoryStatus(f,m.ADDING);a.$.post(r.ADD_ACCESSORY_TO_CART,e).pipe(c.pipeJSON).pipe(d.handleCartDescription).pipe(function(e){if(-1===a.$.inArray(b,e.includedAsins))return c.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});d.updateAccessoryStatus(f,m.SUCCESS);g.logAccessoryAddToCart(d.getAccessoryLoggingData(f));g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",f);p.when("EWC").execute(function(a){a.refresh()})}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);
d.updateAccessoryStatus(f,m.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",f)})};d.addAccessoryToCartWithLightningDeal=function(b){d.updateAccessoryStatus(b,m.ADDING);var e=a.$("#attach-accessory-claim-deal-url-"+b).val(),f=a.$("#attach-accessory-claim-deal-params-"+b).val();if(e&&f){f=JSON.parse(c.unescapeJson(f));f.clientId="attach";var k=a.$(h.PANE_ACCESSORY_CSRF_TOKEN).val();a.$.ajax({type:"POST",url:e,data:f,headers:{"X-CSRFToken":k}}).pipe(function(e){var f=e.dealItemStatus&&e.dealItemStatus.customerState;
if("1"!==e.isClaimed&&"INWAITLIST"!==f)return c.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===f?a.$(h.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).addClass("aok-hidden"):d.updateAccessoryStatus(b,m.SUCCESS);g.logAccessoryAddToCart(d.getAccessoryLoggingData(b));g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);e=e.dealItemStatus&&e.dealItemStatus.msToCustomerStateExpiry;d.handleLightningDealAddToCart(b,e?e:900,f);a.trigger("UPSELL_ASIN_ADDED_TO_CART",b);p.when("EWC").execute(function(a){a.refresh()});
f={marketplaceId:a.$(h.MARKETPLACE_ID).val(),asin:a.$(h.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),languageOfPreference:a.$(h.LANGUAGE_OF_PREFRENCE).val(),isLightningDeal:!0};a.$.post(r.GET_CART_DESCRIPTION,f).pipe(c.pipeJSON).pipe(d.handleCartDescription)}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);d.updateAccessoryStatus(b,m.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",b)})}};d.revealHUCFeedback=function(){var c=
a.$(h.PANE_HUC_MESSAGE);if(c.hasClass("aok-hidden")){c.css({position:"absolute",top:0}).removeClass("aok-hidden");var b=c.children().height();0<b&&c.css({marginTop:-1*(b+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};d.renderHUCFeedback=function(d){var e=d.find("#hlb-ship-message");d=a.$().add(d.find("#huc-v2-message-group")).add(d.find("#hlb-imb"));b.isCoreFreeShippingMessageEnabled()&&c.elementExists(e)&&a.$(h.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(e.html());0<d.length&&
(e=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),e.append(d),e.insertAfter(h.PANE_CART_BLOCK),e.find(".a-declarative a").unwrap(),e.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),e.find(".sc-action-quantity").hide(),(e=d.find(".a-alert-heading").text())&&g.logDSSWarningMessage(e))};d.renderBaseAddStatusIcon=function(b){var d;c.elementExists(b.find("#huc-v2-order-row-confirm-text"))?d=b.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):
c.elementExists(b.find("#hl-confirm-text"))&&(d=b.find("#hl-confirm-text").hasClass("a-alert-warning"));d=(d?a.$(h.PANE_CART_BASE_ERROR_ALERT):a.$(h.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(h.PANE_CART_BASE_ALERT).remove();a.$(h.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=b.find(".huc-v2-order-row-image").clone();c.elementExists(d)||(d=b.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');
0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(c.elementExists(e))for(var f=0;f<e.length;f++){var g=e[f].value,k=b.find("#huc-v2-order-row-item-"+g);if(k.length){b=c.elementExists(k)?k.find(".huc-v2-order-row-image"):b.find(".hlb-item-link.hlb-asin-"+g+" \x3e img");d=d.add(b.clone());break}}}a.$(h.PANE_CART_BASE_HUC_IMAGE).remove();a.$(h.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};d.getAccessoryLoggingData=
function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+
b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};d.createAccessoryImpressions=function(){var b=[];a.$(h.PANE_ACCESSORY_ASIN).parent().each(function(c,
e){e=a.$(e);if(e.is(":hidden")||"hidden"===e.css("visibility")||e.prop("data-accessory-seen"))return null;e.prop("data-accessory-seen",!0);b.push(d.getAccessoryLoggingData(c))});return b};d.resetAccessoryImpressions=function(){a.$(h.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};d.initializeAccessoriesDisplay=function(){d.initializeAccessoriesCards();d.initializeAccessoriesTiles();d.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){d.resetAccessoryImpressions();
g.logAccessoryImpressions(d.createAccessoryImpressions())})};d.initializeAccessoriesCards=function(){a.$(h.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),c=b.find(h.PANE_ACCESSORY_CARD_SEE_MORE),e=b.find(h.PANE_ACCESSORY_CARD_SEE_LESS),f=b.find(h.PANE_ACCESSORY_CARD_EXPAND_CONTENT);c.show();e.hide();f.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");c.click(function(){c.hide();e.show();f.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-
30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),g.logAccessoryImpressions(d.createAccessoryImpressions()));g.logCount(g.CSM_METRICS.ATTACH_SHOW_MORE)});e.click(function(){e.hide();c.show();f.slideUp(400);b.prop("data-card-expanded",!1);g.logCount(g.CSM_METRICS.ATTACH_SHOW_LESS)})})};d.initializeAccessoriesTiles=function(){p.when("a-truncate").execute(function(b){a.$(h.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(h.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=
a.$(this).find(h.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})})};d.initializeCategorizedAccessoriesCards=function(){c.elementExists(h.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",function(){g.logAccessoryImpressions(d.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){g.logAccessoryImpressions(d.createAccessoryImpressions())}))};d.initializeAccessoriesCarousel=function(){p.when("a-truncate",
"a-carousel-framework").execute(function(b,c){if(a.$(h.PANE_ACCESSORY_CAROUSEL).length){a.$(h.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});c.createAll();var e=c.getCarousel(a.$(h.PANE_ACCESSORY_CAROUSEL));e&&(e.attachViewedPages=[1],e.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=e.getAttr("pageNumber"),-1===e.attachViewedPages.indexOf(a)&&(e.attachViewedPages.push(a),g.logAccessoryImpressions(d.createAccessoryImpressions())))}))}})};
d.initializeCoupons=function(){var b;a.$(h.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",d.handleCouponPopoverPositionUpdated);a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(h.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=d.createCouponPopoverPositionHandler(c);a.$(n).bind("scroll",b);a.$(h.PANE+" \x3e .a-scroller").bind("scroll",
b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(h.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(n).unbind("scroll",b);a.$(h.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox","change",function(b){var c=b.data,e=b.$currentTarget.parents(h.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){d.handleCouponClaimSuccess(e,c.accessoryItemIndex)}).fail(function(a,b,c){p.logError(Error(c),"Could not clip coupon: ",
"ERROR","attach-desktop-accessories-pane");d.handleCouponClaimError(e)}):(p.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),d.handleCouponClaimError(e))})};d.handleCouponPopoverPositionUpdated=function(a){a.popover.$container.css("z-index",6E3)};d.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};d.handleCouponClaimSuccess=function(a,b){g.logPromotionClaimed(d.getAccessoryLoggingData(b-
1));a.find(h.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(h.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(h.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(h.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),a.find(h.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};d.handleCouponClaimError=function(a){a.find(h.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(h.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");
a.find(h.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};d.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var e=d.convertTimeLeftToString(c);a.$("#attach-accessory-deal-timer-string-"+b).text(e);0===c?d.handleDealHasEnded(b):setTimeout(d.updateLightningDealTimer,1E3,b)};d.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?d.appendZeroIfSingleDigit(c)+
":"+d.appendZeroIfSingleDigit(a):b+":"+d.appendZeroIfSingleDigit(c)+":"+d.appendZeroIfSingleDigit(a)};d.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};d.handleDealHasEnded=function(b){a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};d.updateLightningDealTimeToCheckoutTimer=
function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var e=d.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(e);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+b).addClass("aok-hidden"),a.$(h.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(h.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+
b).removeClass("aok-hidden")):setTimeout(d.updateLightningDealTimeToCheckoutTimer,1E3,b)};d.handleLightningDealAddToCart=function(b,c,e){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===e?a.$("#attach-accessory-deal-on-waitlist-"+b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),d.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+
b).removeClass("aok-hidden"))};d.initializeLightningDealStatusRefresher=function(b){var e=a.$("#attach-accessory-claim-deal-params-"+b).val(),f=JSON.parse(c.unescapeJson(e));a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")&&(e=[{dealID:f.dealId}],e=JSON.stringify({requestMetadata:{marketplaceID:a.$(h.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:e,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),
a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:e,success:function(a){a=a.dealStatus[f.dealId];var c=Number.MAX_VALUE;a&&d.updateLightningDealInfo(b,a.dealState,a.percentClaimed)&&setTimeout(d.initializeLightningDealStatusRefresher,c<a.msCacheTtl?c:3E4,b)}}))};d.updateLightningDealInfo=function(b,c,e){if("AVAILABLE"!==c&&"WAITLIST"!==c)return d.handleDealHasEnded(b),!1;var f=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===
c?f.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&f.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(e);a.$("#attach-accessory-deal-progress-bar-width-"+b).width(e+"%");return!0};return d});"use strict";p.when("A","attach-common","attach-weblabs").register("attach-desktop-side-sheet",function(a,c,b){var f={},g=[],l=-1,d,e,q,k,p,u=f.Selectors={PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",
LIGHTBOX:"#attach-popover-lgtbox.attach-popover"};f.transitionDuration=500;f.onKeyDown=function(a){27===a.which&&f.next()};f.initialize=function(){g=[];c.elementExists(u.SHEET)?f.$container=a.$(u.SHEET):(f.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),f.$container.addClass("aok-hidden"),f.$container.appendTo(u.PLACEHOLDER));c.elementExists(u.LIGHTBOX)||(k=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-popover a-modal' data-action\x3d'a-popover-floating-close' style\x3d'z-index: 1008; opacity: 0.4; cursor: pointer'\x3e\x3c/div\x3e"),
k.hide(),k.appendTo(u.PLACEHOLDER),k.click(f.next));a.$(document).unbind("keydown",f.onKeyDown);a.$(document).keydown(f.onKeyDown);d=function(){};e=function(){};q=!0};f.setFailureHandler=function(a){d=a};f.setCloseHandler=function(a){e=a};f.fail=function(a,b){d(a,b)};f.addPane=function(a){g.push(a)};f.removePane=function(a){a=g.indexOf(a);-1<a&&g.splice(a,1)};f.getPaneIndex=function(a){return g.indexOf(a)};f.insertPane=function(a,b){b===v&&(b=g.length);g.splice(b,0,a);q=!0};f.hasPane=function(a){return-1<
f.getPaneIndex(a)};f.next=function(){l+1===g.length?(k.hide(),f.$container.animate({right:p},{duration:f.transitionDuration,complete:function(){g[l].hide();l=-1;e()}}),n.ue&&n.ue.count&&n.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(n.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1),a.trigger("HIDE_SIDE_SHEET")):-1!==l&&(g[l].hide(),g[l+1].show(),l+=1)};f.show=function(){if(q){q=!1;var b=a.$.map(g,function(a){return a.load(f)});a.$.when.apply(a.$,b).fail(f.fail).done(function(){a.$.each(g,function(a,
b){b.setup(f)});f.show()})}else l=0,g[l].show(),p=f.$container.css("right"),f.$container.removeClass("aok-hidden"),f.$container.animate({right:"0"},f.transitionDuration,"linear"),k.show(),n.ue&&n.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",n.ue.count(b,(n.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",n.ue.count(b,(n.ue.count(b)||0)+1))};f.isEmpty=function(){return 0===
g.length};return f});"use strict";p.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,c,b,f,g,l,d,e,q){var k={},x,u=n.ue,v=!0,r=k.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",
LD_CLAIM_ERROR:"deals_claimDealError"},h=k.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},m=k.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",INSTALLMENTS_BUTTON:"#installments-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",
MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc"},t=k.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},w=-1,y=function(){a.off(r.LD_CLAIM_SUCCESS,y);a.off(r.LD_CLAIM_ERROR,A);c.selectedBaseLightningDeal=!0;e.setCloseHandler(k.setupAddToCartButton);k.handleAddToCartClick();p.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},
A=function(){a.off(r.LD_CLAIM_ERROR,A);a.off(r.LD_CLAIM_SUCCESS,y);a.$(m.LD_ATC_BUTTON).bind(r.CLICK,z)},z=function(){a.$(m.LD_ATC_BUTTON).unbind(r.CLICK,z);a.on(r.LD_CLAIM_SUCCESS,y);a.on(r.LD_CLAIM_ERROR,A)};k.initialize=function(){if(!c.elementExists(e.Selectors.PLACEHOLDER)){if(0===b.getAllWeblabsToTriggerClientSide().length)return!1;v=!1}k.setupDependencies();k.setupSideSheet();k.setupAddToCartButton()};k.setupDependencies=function(){var b=a.$(m.ATTACH_MARKETPLACE_ID).val();f.initialize(f.FEATURES.DSS,
b);f.setPayloadBuilder(function(){return{baseAsin:a.$(m.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(m.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(m.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(m.QUANTITY).val())||1}});g.initialize();p.when("attach-external-atc-interceptor").execute(function(a){x=a;x.enableModule()})};k.setupSideSheet=function(){e.initialize();e.setFailureHandler(k.failure);!b.isWarrantyPaneSuppressed()&&c.hasWarranty()?e.addPane(l):d.setShouldIncludeMaple(!0);
!b.servicesInterstitialDeprecated()||c.hasAccessories()?(e.addPane(d),e.setCloseHandler(k.setupAddToCartButton)):e.setCloseHandler(k.failureTransitionToHUC)};k.setupAddToCartButton=function(){a.$(document.body).delegate(m.ADD_TO_CART_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE,k.handleAddToCartClick);a.$(m.ADD_TO_CART_BUTTON).prop("type","button").addClass(t.ATTACH_DSS_ATC);b.isInstallmentsDssIntegrationEnabled()?(a.$(document.body).delegate(m.INSTALLMENTS_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE,k.handleAddToCartClick),
a.$(m.INSTALLMENTS_BUTTON).prop("type","button").addClass(t.ATTACH_DSS_ATC),a.$(m.INSTALLMENTS_BUTTON).click(function(){u&&u.trigger&&u.trigger("DP_INSTALLMENTS_DSS_231673","T1")})):a.$(m.INSTALLMENTS_BUTTON).click(function(){u&&u.trigger&&u.trigger("DP_INSTALLMENTS_DSS_231673","C")});b.isAttachLDSupportEnabled()&&c.elementExists(m.LD_BUY_BOX)&&(a.$(m.LD_ATC_BUTTON).bind(r.CLICK,z).addClass(t.ATTACH_DSS_ATC),!b.isWarrantyPaneSuppressed()&&c.hasWarranty()&&!e.hasPane(l)&&-1<w&&e.insertPane(l,w),f.logCount(f.CSM_METRICS.ATTACH_BASE_LD_PRESENT));
f.logCount(f.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};k.failure=function(a,b){switch(a){case c.FailureModes.ERROR_500:k.failureError500();break;case c.FailureModes.RESUBMIT_BUY_BOX:k.failureResubmitBuyBox();break;case c.FailureModes.UNBIND_ATC:k.failureUnbindATC();break;case c.FailureModes.REBIND_ATC:k.failureRebindATC();break;default:case c.FailureModes.TRANSITION_TO_HUC:k.failureTransitionToHUC()}};k.failureError500=function(){n.location=h.ERROR_500_URL};k.failureResubmitBuyBox=function(){b.isAttachLDSupportEnabled()&&
c.selectedBaseLightningDeal?k.failureRebindATC():(k.failureUnbindATC(),c.buyButton.click())};k.failureUnbindATC=function(){a.$(document.body).undelegate(m.ADD_TO_CART_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE);a.$(m.ADD_TO_CART_BUTTON).prop("type","submit");b.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(m.INSTALLMENTS_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE),a.$(m.INSTALLMENTS_BUTTON).prop("type","submit"))};k.failureTransitionToHUC=function(){if(b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal)return k.failureUnbindATC();
b.servicesInterstitialDeprecated()?a.$(document.body).undelegate(m.ADD_TO_CART_BUTTON,r.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(m.ADD_TO_CART_BUTTON,r.WARRANTY_SI_CLICK_NAMESPACE);b.isInstallmentsDssIntegrationEnabled()&&(b.servicesInterstitialDeprecated()?a.$(document.body).undelegate(m.INSTALLMENTS_BUTTON,r.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(m.INSTALLMENTS_BUTTON,r.WARRANTY_SI_CLICK_NAMESPACE));k.failureResubmitBuyBox()};k.failureRebindATC=function(){k.setupAddToCartButton()};
k.handleAddToCartClick=function(d){d&&(c.buyButton=a.$(d.target));a.$(document.body).undelegate(m.ADD_TO_CART_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE);b.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(m.INSTALLMENTS_BUTTON,r.ATTACH_ATC_CLICK_NAMESPACE),c.getAtcForm().append(c.buyButton.filter("input").clone().attr("type","hidden")));b.isAttachLDSupportEnabled()&&c.elementExists(m.LD_BUY_BOX)&&a.$(m.LD_ATC_BUTTON).unbind(r.CLICK,z);c.selectedBaseLightningDeal||!b.servicesInterstitialDeprecated()||
c.hasAccessories()||e.setCloseHandler(k.failureTransitionToHUC);a.$.when().pipe(k.checkWarranty).pipe(k.checkClientSideWeblabTriggering).pipe(k.checkFeatureExists).pipe(k.show).fail(k.failure);if(v&&(!b.isAttachLDSupportEnabled()||!c.selectedBaseLightningDeal))return d.preventDefault(),d.stopImmediatePropagation(),!1};k.checkFeatureExists=function(){if(k.shouldSuppressForFeatureNotPresent())return b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),c.selectedBaseLightningDeal=
!1,c.reject(c.FailureModes.REBIND_ATC)):c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};k.checkWarranty=function(){if(!b.isWarrantyPaneSuppressed())if(b.isAttachLDSupportEnabled()&&c.selectedBaseLightningDeal&&(!b.isWarrantyLDSupportEnabled()||c.isMultiQuantityDeal()||!a.$("#attach-warranty-ld #attach-warranty-asin").val()))w=e.getPaneIndex(l),e.removePane(l);else if(k.shouldSuppressForWarrantyInMbb())e.removePane(l),d.setShouldIncludeMaple(!0),f.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",
1);else if(b.servicesInterstitialDeprecated()&&k.shouldSuppressforMultiQuantityMonthlyWarranty())e.removePane(l),d.setShouldIncludeMaple(!0),f.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1);else if(c.hasWarranty())return a.$.get(h.WARRANTY_SI_CHECK).pipe(k.handleSICheck,k.handleSIFailure)};k.checkClientSideWeblabTriggering=function(){b.triggerClientSideWeblabs();if(!b.servicesInterstitialDeprecated()&&!c.elementExists(m.ATTACH_ASIN_LIST))return c.reject(c.FailureModes.UNBIND_ATC,
{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};k.handleSICheck=function(a){if(!a)return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(e.removePane(l),d.setShouldIncludeMaple(!0),f.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};k.handleSIFailure=function(){return c.reject(c.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};k.shouldSuppressForFeatureNotPresent=function(){return b.servicesInterstitialDeprecated()?
!c.elementExists(e.Selectors.PLACEHOLDER)||e.isEmpty():!c.elementExists(e.Selectors.PLACEHOLDER)||!c.elementExists(m.ATTACH_ASIN_LIST)||!c.elementExists(m.ATTACH_MARKETPLACE_ID)||!c.elementExists(m.ATTACH_BASE_ASIN)};k.shouldSuppressForWarrantyInMbb=function(){return b.isWarrantyTwisterPlusDesktopEnabled()?0<a.$(m.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(m.WTY_TWISTER_SELECTED_GROUP).filter(m.WTY_TWISTER_WTY_OPTION).length:0<a.$(m.MBB_WARRANTY_ITEM).filter(":checked").length};k.shouldSuppressforMultiQuantityMonthlyWarranty=
function(){var b=Number(a.$(m.QUANTITY).val())||1;return c.hasMonthlyWarranty()&&1<b};k.show=function(){e.show()};return k});p.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,c,b){c.initialize();a.on("a:pageUpdate",a.debounce(function(){c.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";p.when("A","attach-logging").register("attach-lightning-deals-common",function(a,c){var b={Constants:{LD_ID_PREFIX:"gb_atc_",ATTACH_LD_CONTAINER:'\x3cdiv id\x3d"attach-ld-container" class\x3d"aok-hidden"\x3e\x3c/div\x3e',
ALERTS:["a-alert-success","a-alert-warning","a-alert-error"],ATTACH_LD_TIME:'\x3cp class\x3d"a-color-success a-text-bold" id\x3d"attach-ld-time"\x3e\x3c/p\x3e'},Endpoints:{LD_STATUS:"/xa/dealcontent/v2/GetDealStatus",CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html"},Selectors:{ATTACH_LD_CONTAINER:"#attach-ld-container",ATTACH_LD_ALERT:"#attach-ld-alert",ATTACH_LD_ICON:"#attach-ld-icon",ATTACH_LD_STATUS:"#attach-ld-status",ATTACH_LD_SUCCESS:"#attach-ld-success",
ATTACH_LD_RECLAIM:"#attach-ld-reclaim",ATTACH_LD_EXPIRED:"#attach-ld-expired",ATTACH_LD_ERROR:"#attach-ld-error",ATTACH_LD_INFO:".attach-ld-info",ATTACH_LD_TIME:"#attach-ld-time",ATTACH_BASE_ASIN:"#attach-baseAsin, #attach-base-asin",LD_TIMER_PREFIX:"#deal_checkout_timer_",LD_ID_OBJECT:"div[id^\x3dgb_atc_]"},Events:{CLICK:"click",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",DSS_CLOSE:"HIDE_SIDE_SHEET",MBS_CLOSE:"a:sheet:afterHide:attach_accessory_sheet"},DealStates:{AVAILABLE:"AVAILABLE",INCART:"INCART",
EXPIRED:"EXPIRED",WAITLIST:"WAITLIST",NONE:"NONE"}};b.dealItemState;b.dealCustomerState;b.dealMsToCustomerStateExpiry;b.dealId;b.baseAsin;b.initializeAttachLD=function(){b.baseAsin=a.$(b.Selectors.ATTACH_BASE_ASIN).val();b.dealId=a.$(b.Selectors.LD_ID_OBJECT).prop("id").replace(b.Constants.LD_ID_PREFIX,"");e()};b.hasLightningDealTimer=function(){return b.dealId?a.$(b.Selectors.LD_TIMER_PREFIX+b.dealId).length:!1};b.attachDealTimerExists=function(){return 0<a.$(b.Selectors.ATTACH_LD_INFO+" p").length};
b.updateLDUX=function(){0>b.dealMsToCustomerStateExpiry&&(b.dealCustomerState=b.DealStates.EXPIRED);switch(b.dealItemState){case b.DealStates.AVAILABLE:case b.DealStates.WAITLIST:switch(b.dealCustomerState){case b.DealStates.NONE:case b.DealStates.INCART:f();break;case b.DealStates.EXPIRED:g(b.Selectors.ATTACH_LD_RECLAIM);break;default:l()}a.delay(b.updateLDUX,1E3);break;case b.DealStates.EXPIRED:g(b.Selectors.ATTACH_LD_EXPIRED);break;default:l()}};var f=function(){b.dealCustomerState!==b.DealStates.NONE&&
(d(b.Selectors.ATTACH_LD_SUCCESS),a.$(b.Selectors.ATTACH_LD_TIME).text(a.$(b.Selectors.LD_TIMER_PREFIX+b.dealId).text()),b.dealMsToCustomerStateExpiry-=1E3,a.$(b.Selectors.ATTACH_LD_ALERT).hasClass("a-alert-success")||(a.$(b.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-warning a-alert-error").addClass("a-alert-success"),a.$(b.Selectors.ATTACH_LD_ICON).removeClass("a-icon-warning a-icon-error").addClass("a-icon-success")),a.$("#attachSiAddCoverage-ld").hasClass("aok-hidden")&&a.$("#attachSiAddCoverage-ld").removeClass("aok-hidden"))},
g=function(c){if(b.dealCustomerState===b.DealStates.INCART)return f();d(c);a.$(b.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-warning");a.$(b.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-warning");a.$("#attachSiAddCoverage-ld").addClass("aok-hidden")},l=function(){d(b.Selectors.ATTACH_LD_ERROR);a.$(b.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-error");a.$(b.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-error")},
d=function(c){c=a.$(c);c.hasClass("aok-hidden")&&(a.$(b.Selectors.ATTACH_LD_STATUS).find("\x3e div:not(.aok-hidden)").each(function(){a.$(this).addClass("aok-hidden")}),c.removeClass("aok-hidden"))},e=function(){a.$(document).ajaxSuccess(function(a,d,e){e.url.match(b.Endpoints.LD_STATUS)&&(a=JSON.parse(d.responseText),a.dealStatus&&a.dealStatus[b.dealId]&&((a=a.dealStatus[b.dealId].dealItemStatus[b.baseAsin])?(b.dealItemState=a.itemState,b.dealCustomerState=a.customerState,b.dealMsToCustomerStateExpiry=
a.msToCustomerStateExpiry):c.logCount(c.CSM_METRICS.ATTACH_BASE_LD_DEAL_STATUS_ERROR)))})};return b});"use strict";p.when("A","attach-common","attach-lightning-deals-common","attach-desktop-side-sheet","attach-logging").register("attach-lightning-deals-desktop",function(a,c,b,f,g){var l={},d=/(\{0})/,e=function(){b.initializeAttachLD();2===a.$(b.Selectors.ATTACH_LD_ALERT).find(".a-icon").length&&a.$(b.Selectors.ATTACH_LD_ALERT+" .a-icon").first().remove();a.$("#attach-ld-close-button").hasClass("close-button")||
a.$("#attach-ld-close-button").addClass("close-button").click(f.next);if(b.hasLightningDealTimer()&&!b.attachDealTimerExists()){var c=a.$("#attach-base-ld-timer").val();c&&c.length?c.split(d).forEach(function(c){c="{0}"===c?b.Constants.ATTACH_LD_TIME:"\x3cp\x3e"+c+"\x3c/p\x3e";a.$("#attach-ld-success .attach-ld-info").append(c)}):g.logCount(g.CSM_METRICS.ATTACH_BASE_LD_MISSING_TIMER)}a.$(b.Selectors.ATTACH_LD_CONTAINER).removeClass("aok-hidden");a.on(b.Events.DSS_CLOSE,n);b.updateLDUX()},n=function(){a.off(b.Events.DSS_CLOSE,
n);c.selectedBaseLightningDeal=!1;a.$("#attach-accessory-pane").height("");a.$(b.Selectors.ATTACH_LD_CONTAINER).addClass("aok-hidden");a.$(".attach-primary-atc-confirm-box").removeClass("aok-hidden");a.$("#attachSiAddCoverage").removeClass("aok-hidden")};l.handleDealClaim=function(){g.logCount(g.CSM_METRICS.DSS_BASE_LD_ATC_CLICK);b.dealCustomerState=b.DealStates.INCART;b.dealItemState=b.DealStates.AVAILABLE;b.dealMsToCustomerStateExpiry=v;e()};return l});"use strict";p.when("A","attach-desktop","dp-util-cookie",
"cf").execute(function(a,c,b){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(b("session-id"))})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageComparisonChartAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,b=h?h("DetailPageFluxComponents",""):g;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,g,h){f.when("dp-flux-utils").register("dp-flux-action",function(b){function e(d,a,c){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a))this._name=d,this._source=a,this._metadata=c;else throw Error("Action(...): Action must be created with valid name and source");}e.prototype={getName:function(){return this._name},
getSource:function(){return this._source},getMetaData:function(){return this._metadata}};return e.prototype.constructor=e});f.when("dp-flux-utils").register("dp-flux-attribution",function(b){function e(d,a,c,k){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a)&&b.isNonEmptyString(c)&&b.isNonEmptyString(k))this._name=d,this._category=a,this._type=c,this._item=k;else throw Error("All parameters (name, categoty, type, item) must be a non-empty string");}e.prototype={getName:function(){return this._name},
getAttribution:function(){return"name: "+this._name+"; CTI\x3d "+this._category+"/"+this._type+"/"+this._item}};return e.prototype.constructor=e});f.when("A","dp-flux-action","dp-flux-attribution").register("dp-flux-dispatcher",function(b,e,d){function a(){this._callbacks={};this._isDispatching=!1;this._pendingAction=null;this._lastID=1}var c=b.$;a.prototype={register:function(a,b){if(!(a instanceof d))throw Error("Dispatch.register(...): attribution must be instance of Attribution");if(!c.isFunction(b))throw Error("Dispatch.register(...): callback must be a function");
var e="ID_"+this._lastID++;this._callbacks[e]={attribution:a,callback:b,_isCallbackExecutionStarted:!1,_isCallbackExecutionCompleted:!1};return e},unregister:function(a){if(this._callbacks[a])delete this._callbacks[a];else throw Error("Dispatcher.unregister(...): "+a+" does not map to a registered callback");},dispatch:function(a){if(this._isDispatching)throw Error("Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch");if(!(a instanceof e))throw Error("Dispatch.dispatch(...): action param must be of type Action");
this._startDispatching(a);for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted||this._invokeCallback(c);this._stopDispatching()},waitFor:function(a){if(!this._isDispatching)throw Error("Dispatcher.waitFor(...): Must be invoked while dispatching");if(!c.isArray(a))throw Error("Dispatcher.waitFor(...): dispatchTokenList must be an array");for(var b=0;b<a.length;b++){var d=a[b];if(!this._callbacks[d])throw Error("Dispatcher.waitFor(...): "+d+" does not map to a registered callback. ");
if(this._callbacks[d]._isCallbackExecutionStarted)if(this._callbacks[d]._isCallbackExecutionCompleted)continue;else throw Error("Dispatcher.waitFor(...): Circular dependency detected while waiting for "+d);this._invokeCallback(d)}},_invokeCallback:function(a){this._callbacks[a]._isCallbackExecutionStarted=!0;try{this._callbacks[a].callback(this._pendingAction)}catch(c){f.log("Dispatcher._invokeCallback(...): Error while calling dispatcher callback: error message \x3d "+c.message,"FATAL",this._callbacks[a].attribution.getAttribution())}this._callbacks[a]._isCallbackExecutionCompleted=
!0},_startDispatching:function(a){for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted=!1,this._callbacks[c]._isCallbackExecutionCompleted=!1;this._pendingAction=a;this._isDispatching=!0},_stopDispatching:function(){this._pendingAction=null;this._isDispatching=!1}};return a.prototype.constructor=a});f.when("A","dp-flux-utils").register("dp-flux-emitter",function(b,e){function d(){this._subscriptions={}}var a=b.$;d.prototype={emit:function(a){if(e.isNonEmptyString(a))b.each(this._subscriptions[a]||
[],function(a){a()});else throw Error("Emitter.emit()...: eventType must be a non empty string");},addListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b))this._subscriptions[c]=this._subscriptions[c]||[],this._subscriptions[c].push(b);else throw Error("Emitter.addListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function ");},removeListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b)){if(c=this._subscriptions[c])b=a.inArray(b,
c),-1!==b&&c.splice(b,1)}else throw Error("Emitter.removeListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function");}};return d});f.when("A","dp-flux-emitter","dp-flux-attribution","dp-flux-dispatcher","dp-flux-utils").register("dp-flux-store",function(b,e,d,a,c){function f(b,k,g,h){if(!(b instanceof d))throw Error("storeAttribution should be instance of Attribution");if(!(g instanceof a))throw Error("dispatcher must be an instance of Dispatcher");if(!l.isFunction(k))throw Error("Store must provide a reduce callback method");
this.reduce=k;this.dispatcher=g;this._storeAttribution=b;this._state=h||{};c.deepFreeze(this._state);this._dispatchToken=this.dispatcher.register(this._storeAttribution,this._invokeOnDispatch.bind(this));this._changed=!1;this._changeEvent=this._storeAttribution.getName()+":change";this._emitter=new e}var l=b.$;f.prototype={addListener:function(a){return this._emitter.addListener(this._changeEvent,a)},removeListener:function(a){this._emitter.removeListener(this._changeEvent,a)},getDispatcher:function(){return this.dispatcher},
getDispatchToken:function(){return this._dispatchToken},getState:function(){return this._state},getStoreAttribution:function(){return this._storeAttribution},_invokeOnDispatch:function(a){this._changed=!1;var b=this._state;(a=this.reduce(this._state,a)||b)&&a!==b&&(this._state=a,c.deepFreeze(this._state),this._changed=!0,this._emitter.emit(this._changeEvent))}};return f.prototype.constructor=f});f.when("A","dp-flux-attribution").register("dp-flux-store-group",function(b){function e(b,a,c){this._stores=
a;this._callBack=c;this._attribution=b;this._registerStoreGroup()}e.prototype={_registerStoreGroup:function(){var b=this._getUniformDispatcher();this._dispatchToken=b.register(this._attribution,function(){b.waitFor(this._getStoreTokens());this._callBack()}.bind(this))},unregisterStoreGroup:function(){this._getUniformDispatcher().unregister(this._dispatchToken)},_getUniformDispatcher:function(){var d=this._stores[0].getDispatcher();b.each(this._stores,function(a){if(d!==a.getDispatcher())throw Error("All stores must have common dispatcher");
});return d},_getStoreTokens:function(){return b.map(this._stores,function(b){return b.getDispatchToken()})}};return e.prototype.constructor=e});f.when("A","dp-flux-store-group").register("dp-flux-store-subscription",function(b,e){function d(a,b,d){this._stores=b;this._changed=!1;this._updatedStores=[];this._viewUpdateCallBack=d;this._viewAttribution=a;this._allListeners=[];this._addListenerToAllStores();this._storeGroup=new e(a,b,this._viewCallBack.bind(this))}d.prototype={_storeListener:function(a){this._changed=
!0;this._updatedStores.push(a)},_addListenerToAllStores:function(){var a;b.each(this._stores,function(b){a=this._storeListener.bind(this,b);this._allListeners.push({listener:a,store:b});b.addListener(a)},this)},_removeListenerFromAllStores:function(){b.each(this._allListeners,function(a){a.store.removeListener(a.listener)})},_viewCallBack:function(){if(this._changed){try{this._viewUpdateCallBack(this._updatedStores)}catch(a){f.log("StoreSubscription._viewCallBack(...): view callback failed "+a,"WARN",
this._viewAttribution.getAttribution())}this._changed=!1;this._updatedStores=[]}},reset:function(){this._removeListenerFromAllStores();this._storeGroup.unregisterStoreGroup()}};return d.prototype.constructor=d});f.when("A").register("dp-flux-utils",function(b){function e(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)}function d(a){if(!Object.isFrozen(a)){var c=Object.getOwnPropertyNames(a);b.each(c,function(b){var c=a[b];a[b]=c&&"object"===typeof c?d(c):c});Object.freeze(a)}return a}
return{isString:e,isNonEmptyString:function(a){return!(!e(a)||!b.trim(a).length)},deepFreeze:function(a){return Object.freeze&&Object.getOwnPropertyNames&&Object.isFrozen?(d(a),!0):!1}}});f.when("A","dp-flux-attribution","dp-flux-store","dp-flux-store-subscription").register("dp-flux-view",function(b,e,d,a){function c(c,g,h){if(!(c instanceof e))throw Error("View(...): viewAttribution should be an instance of Attribution");if(f.isArray(g)&&1<=g.length)b.each(g,function(a){if(!(a instanceof d))throw Error("View(...): storeList contains an object which is not of type Store");
});else throw Error("View(...): View must listen on at least one store");if(!f.isFunction(h))throw Error("View(...): View must provide update callback method");this._viewAttribution=c;this._storeSubscription=new a(c,g,h)}var f=b.$;c.prototype.getViewAttribution=function(){return this._viewAttribution};c.prototype.unregisterStores=function(){this._storeSubscription.reset()};return c})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageCCXUSSProductInfoAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(e){var w=window.AmazonUIPageJS||window.P,v=w._namespace||w.attributeErrors,t=v?v("DetailPageUSSAssets",""):w;t.guardFatal?t.guardFatal(e)(t,window):t.execute(function(){e(t,window)})})(function(e,w,v){e.when("A").register("uss-constants-common",function(t){return{classList:{SHOW_ELEMENT:"aok-block",HIDE_ELEMENT:"aok-hidden",STOP_SCROLLING:"uss-u-no-scroll",LIGHT_BOX_JS_HOOK:"js-light-box",LIGHT_BOX_IDENTIFIER:"uss-o-light-box",RIGHT_SIDE_SHEET:"uss-o-right-side-sheet",RIGHT_SIDE_SHEET_LAYOUT:"uss-l-right-side-sheet",
SHEET_OPEN:"is-open",SHEET_CLOSE:"is-close",USS_SHEET_VIEW_IDENTIFIER:"uss-sheet-view",CLOSE_ICON:"uss-o-close-icon",CLOSE_ICON_MEDIUM:"uss-o-close-icon-medium",USS_SHEET_VIEW_CLOSE_ICON:"uss-sheet-view-close-icon",PROMISING_UI_ELEMENT:"uss-o-promising-ui-element",PROMISING_UI_ELEMENT_ANIMATION:"uss-o-promising-ui-element-animation",IS_LOADING:"is-loading",IS_RESOLVED:"is-resolved",UI_PROMISE:"ui-promise",UI_VALUE:"ui-value",TEMPLATE_STORE:"uss-template-store",TEMPLATE:"uss-template",TEMPLATE_NAME:"template-name",
ATC_ACKNOWLEDGEMENT_MESSAGE:"atc-acknowledgement-message",ATC_GENERIC_ERROR:"atc-generic-error",ATC_STATUS_MESSAGE_COMPONENT:"uss-c-atc-status-msg",ATC_SUCCESS:"atc-success",ATC_ERROR:"atc-error",ITEM_IN_CART:"item-in-cart",CART_STATUS_MESSAGE_COMPONENT:"uss-c-cart-status-msg",CART_SUB_TOTAL:"cart-sub-total",CART_COUNT:"cart-count",SHIPPING_DETAILS:"uss-c-shipping-details",SHIPPING_MESSAGE_PLACEHOLDER:"shipping-message-placeholder",MAIN_IMAGE:"main-image",SUB_NAV:"uss-c-sub-nav",CHECKOUT_BUTTON:"checkout-btn",
CART_BUTTON:"cart-btn",CHECKOUT_FORM:"checkout-form",FACEOUT_IMAGE:"p13n-sc-dynamic-image",FACEOUT_TITLE:"uss-asin-title",FACEOUT_REVIEW_STARS:"uss-review-stars",FACEOUT_BEST_SELLER:"p13n-best-seller",FACEOUT_PRICE:"uss-price",CONTINUE_SHOPPING_LINK:"continue-shopping",SUCCESS_ELEMENT:".p13n-sc-atc-success",ERROR_ELEMENT:".p13n-sc-atc-error",BUTTON_ELEMENT:".a-button-primary",DISABLE_BUTTON:"a-button-disabled"},fatalMessagesList:{INVALID_SHEET_ID:"sheetID must be valid string",INVALID_CONSTRUCTOR_USAGE:"Constructor needs to be called with 'new' keyword",
INCORRECT_PARAMETER_PASSED:"Incorrect parameter passed."},widgetType:{WIDGET:"uss-widget",RECOMMENDATION_WIDGET:"uss-recommendation-widget",NO_RECOMMENDATION_WIDGET:"uss-no-recommendation-widget",LIST_RECOMMENDATION:"uss-list-recommendation-widget",CAROUSEL_RECOMMENDATION:"uss-carousel-recommendation-widget",PRIMARY_ACTION_STATUS_WIDGET:"uss-primary-action-status-widget",ATCStatusWidget:"uss-c-atc-status-widget",ATC_STATUS_IMB_WIDGET:"atc-status-imb-widget",MAPLE_WIDGET:"maple-recommendation-widget"},
layout:{defaultLayout:{DEFAULT_LAYOUT:"uss-l-default-layout",HEAD:"uss-c-head",BODY:"uss-c-body",HEAD_DIVIDER:"uss-c-head-divider",BOTTOM_MARGIN_BETWEEN_WIDGETS:"a-spacing-medium",TOP_MARGIN_BETWEEN_WIDGETS:"a-spacing-top-medium",SKELETON_LOADER:"uss-loading-skeleton",RECOMMENDATION_LOADING_MESSAGE:"loading-message",RECOMMENDATION_LOADED_MESSAGE:"uss-recommendations-loaded-message"}},actionSources:{DP_ATC_CLICK:"dp-atc-click",USS_INGRESS_CLICK:"uss-ingress-click",USS_INLINE_ATC_CLICK:"uss-inline-atc-click",
SHEET_CLOSE_BUTTON_CLICK:"sheet-close",CONTINUE_SHOPPING_CLICK:"continue-shopping-click"},stores:{ATC_STATUS_STORE:"uss-atc-status-store",RECOMMENDATION_DATA_STORE:"uss-recommendation-data-store",USS_SHEET_STORE:"uss-sheet-store"},actions:{USS_OPEN:"uss-open",USS_CLOSE:"uss-close",RECOMMENDATION_DATA_RECEIVE:"recommendation-data-receive",ATC_RECEIVE:"atc-receive"},metrics:{ATC_PROMISE_RESOLVED_TIMER:"atcPromiseResolve",PERCOLATE_DATA_PROMISE_RESOLVED_TIMER:"percolateDataPromiseResolve",ATC_PROMISE_REJECTED_COUNTER:"atcPromiseRejected",
PERCOLATE_DATA_PROMISE_REJECTED_COUNTER:"percolateDataPromiseRejected",SECONDARY_ADD_TO_CART_CLICK_COUNTER:"secondaryAtcClick",COMPATIBLE_BROWSER_COUNTER:"compatibleBrowser",NON_COMPATIBLE_BROWSER_COUNTER:"nonCompatibleBrowser",FACEOUT_IMAGE_CLICK_COUNTER:"faceout:imageClick",FACEOUT_REVIEW_STARS_CLICK_COUNTER:"faceout:reviewStarClick",FACEOUT_TITLE_CLICK_COUNTER:"faceout:titleClick",FACEOUT_PRICE_CLICK_COUNTER:"faceout:priceClick",FACEOUT_BEST_SELLER_CLICK_COUNTER:"faceout:bestSellerClick",SEE_MORE_EXISTENCE_COUNTER:"ussListWidget:seeMore",
SEE_MORE_CLICK_COUNTER:"ussListWidget:seeMoreClick",SEE_LESS_CLICK_COUNTER:"ussListWidget:seeLessClick",CHECKOUT_FORM_CLICK_COUNTER:"checkoutFormClick",CART_BUTTON_CLICK_COUNTER:"cartButtonClick",CONTINUE_SHOPPING_CLICK:"continueShoppingClick",PAGE_LANDING_PRECONDITIONS_PASSED:"pageLandingPreconditionsPassed",POST_ATC_PRECONDITIONS_FAILED:"postATCPreconditionsFailed",PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN:"programEligibilityRegistryOverwritten"},transitionTimingFunction:{EVEN_EASE:"cubic-bezier(0.4, 0, 0.6, 1)",
ENTER_EASE:"cubic-bezier(0, 0, 0.2, 1)",EXIT_EASE:"cubic-bezier(0.4, 0, 1, 1)",EASE_IN:"ease-in",EASE_OUT:"ease-out"},animationType:{FADE_IN:"fadeIn",NO_ANIMATION:"noAnimation"}}});e.when("dp-flux-attribution","uss-constants-common").register("uss-constants",function(t,e){e.ussCTI={CATEGORY:"Website",TYPE:"Detail Page",ITEM:"USS"};e.metrics.PREFIX="uss:";e.ajaxParams={BASE_URL:"/gp/product/handle-buy-box",REFTAG:"dp_start-bbf_1_glance",ASIN:"ASIN",OFFER_LISTING_ID:"offerListingID",AJAX_TIMEOUT:1E4};
e.actionSources.SHEET_CLOSE_BUTTON_CLICK="sheet-close-button-click";e.ussCommonAttribution=new t("uss-common",e.ussCTI.CATEGORY,e.ussCTI.TYPE,e.ussCTI.ITEM);e.defaultAtcAnimationType=e.animationType.FADE_IN;e.atcAnimationStatusEvent="uss:atc:animation:status:resolved";return e});e.when("dp-flux-utils","uss-constants").register("uss-logger-service",function(e,p){function m(a,b){if(e.isNonEmptyString(a))a=p.metrics.PREFIX+a,ue&&ue.count&&(b===v&&(b=(ue.count(a)||0)+1),ue.count(a,b));else throw Error("counterKey must be non empty string");
}function q(a){if(e.isNonEmptyString(a))this._timerName=a,this._startTime=0;else throw Error("timerName must be non empty string");}q.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&m(this._timerName,Date.now()-this._startTime)}};return{logCounter:m,Timer:q}});e.when("A","uss-utils","uss-logger-service","uss-constants").register("uss-preconditions",function(e,p,m,q){function a(a){a=e.$("#"+a+"_feature_div").html();null!==a&&(a=a.trim());return null!==a&&0<
a.length}function b(){return e.capabilities.transform&&e.capabilities.transition&&p.isFlexBoxSupported()}function c(){return e.$("#uss-weblabTreatment").val()}var d=/^T[0-9]+$/;b()?m.logCounter(q.metrics.COMPATIBLE_BROWSER_COUNTER):m.logCounter(q.metrics.NON_COMPATIBLE_BROWSER_COUNTER);return{isUssConditionsPassed:function(){return"true"===e.$("#uss-serverPreconditionsPassed").val()&&b()&&!a("scheduledDelivery")&&!a("simpleBundle")&&!a("partialStateBuyBox")},isUssWeblabInTreatment:function(){return d.test(c())},
triggerUSSWeblabValue:function(){return d.test(e.$("#uss-miniFrameworkWeblabTreatment").val())?e.$("#uss-weblabValue").val():1},ussWeblabTreatmentValue:c,isBrowserUssCompatible:b}});e.when("A","3p-promise","uss-constants","uss-logger-service").register("uss-utils",function(e,p,m,q){var a=e.$,b=m.classList,c=a("body"),d={},n=["isPreview","forceWidgets","previewCampaigns","auditEnabled"];(function(){var a=w.location.search,a=a.substr(1);a.split("\x26").forEach(function(a){a=a.split("\x3d");2===a.length&&
(d[a[0]]=a[1])})})();return{loadImage:function(b,c){return new p(function(k,f){c=c||"";var r=a("\x3cimg src\x3d'"+b+"' alt\x3d'"+c+"'\x3e");r.load(function(){k(r)});r.error(function(a){f(a)});r[0].complete&&k(r)})},isFlexBoxSupported:function(){var a=e.$("\x3cdiv\x3e\x3c/div\x3e")[0];return""===a.style.flex||""===a.style.webkitFlex||""===a.style.msFlex||""===a.style.MozBoxFlex||""===a.style.webkitBoxFlex?!0:!1},disablePageScroll:function(){c.addClass(b.STOP_SCROLLING)},enablePageScroll:function(){c.removeClass(b.STOP_SCROLLING)},
isMobileApp:function(){return"true"===e.$("#uss-mobileApp").val()},getDebugParams:function(){var a={};n.forEach(function(b){var c;c=null;d.hasOwnProperty(b)&&(c=d[b]);c&&(a[b]=c)});return a},shouldFireAndForgetWeblabTrigger:function(){var b=!1;0!=a("#uss-shouldFireAndForgetWeblabTrigger").length&&(b="true"===a("#uss-shouldFireAndForgetWeblabTrigger").val());return b},fireAndForgetWeblabTrigger:function(a,b){var c="/gp/uss/weblab-trigger.html?",c=/^T[0-9]+$/.test(e.$("#uss-miniFrameworkWeblabTreatment").val())?
c+("weblabValue\x3d"+a+"\x26treatment\x3d"+b):c+("triggerWeblab\x3d"+a+"\x26treatment\x3d"+b);w.navigator&&navigator.sendBeacon?navigator.sendBeacon(c)||e.$.ajax({url:c}):e.$.ajax({url:c})},showATCSuccess:function(){e.$("#atc-toast").length&&e.$("#atc-success").length&&(e.$("#atc-toast").css("display","block"),e.$("#atc-toast").addClass("atc-toast-success-styles"),e.$("#atc-success").css("display","block"),setTimeout(function(){e.$("#atc-success").css("display","none");e.$("#atc-toast").css("display",
"none");e.$("#atc-toast").removeClass("atc-toast-success-styles")},1500))},showATCFailure:function(){e.$("#atc-toast").length&&e.$("#atc-failed").length&&(e.$("#atc-toast").css("display","block"),e.$("#atc-toast").addClass("atc-toast-failure-styles"),e.$("#atc-failed").css("display","block"),setTimeout(function(){e.$("#atc-failed").css("display","none");e.$("#atc-toast").css("display","none");e.$("#atc-toast").removeClass("atc-toast-failure-styles")},1500))}}});e.when("A","atf","uss-utils").register("uss-init-helper",
function(t,p,m,q){return{loadUssCommonAssetsAfterPreload:function(){e.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(a,b,c,d){function n(){t.$("#add-to-cart-button").removeAttr("disabled")}return{primaryATCClick:function(h,g){var k=new b(a.actions.USS_OPEN,a.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:h});g.percolateData.then(function(f){var r={isContainsRecommendation:!1,widgets:[]};f.recommendationData&&(r.widgets=f.recommendationData.widgets||
[]);n();r.widgets.length||(r.widgets.push({widgetType:a.widgetType.NO_RECOMMENDATION_WIDGET}),r.recommendationBaseIdentifier=h);c.dispatch(k);g.atcData.then(function(f){var r={};1===f.isOk?r=f.atcStatusData:r.isAtcGenericError=!0;f=new b(a.actions.ATC_RECEIVE,a.actionSources.DP_ATC_CLICK,r);c.dispatch(f)},function(){var f=new b(a.actions.ATC_RECEIVE,a.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});c.dispatch(f)});r.recommendationBaseIdentifier=h;f=new b(a.actions.RECOMMENDATION_DATA_RECEIVE,a.actionSources.DP_ATC_CLICK,
r);c.dispatch(f)},function(){g.atcData.then(function(a){n();1===a.isOk?d.showATCSuccess():d.showATCFailure()},function(){d.showATCFailure()})})},secondaryATCClick:function(d,g){d.atcData.then(function(d){var f={};1===d.isOk?f=d.atcStatusData:f.isAtcGenericError=!0;f.params=g;d=new b(a.actions.ATC_RECEIVE,a.actionSources.USS_INLINE_ATC_CLICK,f);c.dispatch(d)},function(){})}}})},loadUssCommonAssets:function(){e.when("dp-flux-dispatcher").register("uss-dispatcher",function(a){return new a});e.when("A",
"uss-constants").register("promising-ui-element",function(a,b){var c=b.classList;return a.createClass({_element:null,_uiPromiseElement:null,_uiValueElement:null,_isResolved:!1,init:function(a){var b=a.find("."+c.UI_PROMISE),h=a.find("."+c.UI_VALUE);if((a.hasClass(c.PROMISING_UI_ELEMENT)||a.hasClass(c.PROMISING_UI_ELEMENT_ANIMATION))&&b.length&&h.length)this._uiPromiseElement=b,this._uiValueElement=h,this._element=a,this.showUIPromise();else throw Error("PromisingUIElement.init()...: HTML structure is not compatible with PromisingUIElement");
},showUIPromise:function(){this._element.addClass(c.IS_LOADING);this._element.removeClass(c.IS_RESOLVED);this._isResolved=!1},showUIValue:function(){this._element.addClass(c.IS_RESOLVED);this._element.removeClass(c.IS_LOADING);this._isResolved=!0},getValueElement:function(){return this._uiValueElement},getElement:function(){return this._element},isResolved:function(){return this._isResolved}})});e.when("A","uss-sheet-component","uss-constants","uss-store-repository","dp-flux-attribution","uss-layout",
"dp-flux-view","widget-creation-helper","dp-flux-action","uss-dispatcher").register("uss-sheet-view",function(a,b,c,d,n,h,g,k,f,r){function l(){u=!0;var a=c.classList,l=c.ussCTI,y=d.getStore(c.stores.USS_SHEET_STORE),x=d.getStore(c.stores.RECOMMENDATION_DATA_STORE),A=[y,x],l=new n("uss-sheet-view",l.CATEGORY,l.TYPE,l.ITEM),z=new b(a.USS_SHEET_VIEW_IDENTIFIER,{beforeClose:function(){r.dispatch(new f(c.actions.USS_CLOSE,c.actionSources.SHEET_CLOSE_BUTTON_CLICK))}}),a=z.getSheetElement(),B=new h(a);
new g(l,A,function(a){var f;if(-1!==e.inArray(y,a))if(f=y.getState(),f.isSheetOpen()){if(f.getActionSource()===c.actionSources.DP_ATC_CLICK){B.reset();var b=k.createAtcStatusWidget();f=k.createIMBWidget(f.getActionSource());B.renderWidgets([b,f])}z.open()}else f.getActionSource()!==c.actionSources.SHEET_CLOSE_BUTTON_CLICK&&z.close();-1!==e.inArray(x,a)&&B.renderWidgets(k.createRecommendationWidget(x))})}var e=a.$,u=!1;return{initializeUSSSheetView:function(){u||l()}}});e.when("A","uss-constants",
"uss-template-store","uss-widget-factory").register("widget-creation-helper",function(a,b,c,d){return{createAtcStatusWidget:function(){var a={content:c.getTemplate(b.widgetType.ATCStatusWidget),widgetType:b.widgetType.ATCStatusWidget};return d.getWidget(a)},createRecommendationWidget:function(b){var c,g=[];b=b.getState().getNewRecommendations();a.each(b,function(a){(c=d.getWidget(a))&&g.push(c)});return g},createIMBWidget:function(){return d.getWidget({content:"\x3cdiv\x3e\x3c/div\x3e",widgetType:b.widgetType.ATC_STATUS_IMB_WIDGET})}}});
e.when("A","dp-flux-store","uss-dispatcher").register("uss-store-repository",function(a,b,c){var d={};return{registerStore:function(a,h,g){h=new b(a,h,c,g);return d[a.getName()]=h},getStore:function(a){return d[a]},getDispatcher:function(){return c}}});e.when("A","uss-store-repository","dp-flux-attribution","uss-sheet-store","uss-constants").register("uss-recommendation-data-store",function(a,b,c,d,e){function h(a,b,c){this._unprocessedChunkIndex=c||0;this._recommendationBaseIdentifier=a;this._dataChunks=
b||[]}var g=a.$,k=e.ussCTI;c=new c(e.stores.RECOMMENDATION_DATA_STORE,k.CATEGORY,k.TYPE,k.ITEM);d=b.getStore(e.stores.USS_SHEET_STORE);h.prototype={_getRecommendations:function(f){var b=[];f<this._dataChunks.length&&a.each(this._dataChunks,function(c,d){d>=f&&a.each(c,function(a){b.push(a)})});return b},getAllRecommendations:function(){return this._getRecommendations(0)},getNewRecommendations:function(){return this._getRecommendations(this._unprocessedChunkIndex)},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier},
addRecommendationChunk:function(f){var b=[];a.each(f,function(a){a.widgetType=a.widgetType||e.widgetType.RECOMMENDATION_WIDGET});b=g.merge(b,this._dataChunks);b=g.merge(b,[f]);return new h(this._recommendationBaseIdentifier,b,this._dataChunks.length)}};k=new h;return b.registerStore(c,function(a,c){var g=a,k=e.actions;switch(c.getName()){case k.USS_OPEN:b.getDispatcher().waitFor([d.getDispatchToken()]);d.getState().getActionSource()===e.actionSources.DP_ATC_CLICK&&(g=new h(d.getState().getRecommendationBaseIdentifier()));
break;case k.RECOMMENDATION_DATA_RECEIVE:k=d.getState().getRecommendationBaseIdentifier(),c=c._metadata,c.recommendationBaseIdentifier===k&&(g=a.addRecommendationChunk(c.widgets))}return g},k)});e.when("uss-store-repository","dp-flux-attribution","uss-constants").register("uss-sheet-store",function(a,b,c){function d(a,b,f){this._isSheetOpen=a||!1;this._actionSource=b;this._recommendationBaseIdentifier=f}var e=c.actions,h=c.ussCTI;b=new b(c.stores.USS_SHEET_STORE,h.CATEGORY,h.TYPE,h.ITEM);d.prototype=
{isSheetOpen:function(){return this._isSheetOpen},getActionSource:function(){return this._actionSource},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier}};h=new d(!1);return a.registerStore(b,function(a,b){var f=a;switch(b.getName()){case e.USS_OPEN:a.isSheetOpen()||(b.getSource()===c.actionSources.DP_ATC_CLICK?f=new d(!0,b.getSource(),b.getMetaData().recommendationBaseIdentifier):b.getSource()===c.actionSources.USS_INGRESS_CLICK&&a.getRecommendationBaseIdentifier()&&
(f=new d(!0,b.getSource(),a.getRecommendationBaseIdentifier())));break;case e.USS_CLOSE:a.isSheetOpen()&&(f=new d(!1,b.getSource(),a.getRecommendationBaseIdentifier()))}return f},h)});e.when("A","uss-store-repository","dp-flux-attribution","uss-constants","dp-flux-utils").register("uss-atc-status-store",function(a,b,c,d,e){function h(){this.status=v;this.cart={subTotal:{}};this.mainImage={};this.isAtcGenericError=this.shippingMessageHTML=this.imbHTML=v}a=new c("uss-atc-status-store",d.ussCTI.CATEGORY,
d.ussCTI.TYPE,d.ussCTI.ITEM);h.prototype={setStatus:function(a){this.status=1===a||a===d.classList.ATC_SUCCESS?d.classList.ATC_SUCCESS:d.classList.ATC_ERROR},setCart:function(a,b,f){e.isNonEmptyString(a)&&(this.cart.count=parseInt(a));b&&(this.cart.subTotal=b);e.isNonEmptyString(f)&&(this.cart.checkoutUrl=f)},setMainImage:function(a,b){e.isNonEmptyString(a)&&(this.mainImage.src=a,e.isNonEmptyString(b)?this.mainImage.altText:this.mainImage.altText="")},setImbHTML:function(a){e.isNonEmptyString(a)&&
(this.imbHTML=a)},setShippingMessageHTML:function(a){e.isNonEmptyString(a)&&(this.shippingMessageHTML=a)},setIsAtcGenericError:function(a){this.isAtcGenericError=a}};c=new h;b.registerStore(a,function(a,b){var f=a;switch(b.getName()){case d.actions.ATC_RECEIVE:var c=b.getMetaData();b.getSource()===d.actionSources.DP_ATC_CLICK?(f=new h,c.isAtcGenericError?f.setIsAtcGenericError(!0):(f.setStatus(c.status),f.setCart(c.cart.count,c.cart.subTotal,c.cart.checkoutUrl),f.setMainImage(c.mainImage.src,c.mainImage.altText),
f.setImbHTML(c.imbHTML),f.setShippingMessageHTML(c.shippingMessageHTML))):b.getSource()!==d.actionSources.USS_INLINE_ATC_CLICK||c.isAtcGenericError||(f=new h,f.setStatus(a.status),f.setMainImage(a.mainImage.src,a.mainImage.altText),f.setImbHTML(a.imbHTML),f.setShippingMessageHTML(a.shippingMessageHTML),c.cart&&f.setCart(c.cart.count,c.cart.subTotal,a.cart.checkoutUrl));break;case d.actions.USS_OPEN:b.getSource()===d.actionSources.DP_ATC_CLICK&&(f=new h)}return f},c)});e.when("A","uss-constants").register("uss-template-store",
function(a,b){var c=a.$,d=b.classList,e={};return{init:function(){var a=c("."+d.TEMPLATE_STORE),b;1===a.length&&a.find("."+d.TEMPLATE).each(function(a,f){b=c("\x3cdiv\x3e\x3c/div\x3e");f=c(f);b.append(f);(a=f.data(d.TEMPLATE_NAME))&&(e[a]=b.html())})},getTemplate:function(a){return e[a]},_nameToTemplateMap:e}});e.when("A","dp-flux-attribution","dp-flux-utils","uss-store-repository","uss-widget","uss-constants").register("uss-widget-factory",function(a,b,c,d,n,h){var g=a.$,k={};k[h.widgetType.WIDGET]=
n;a=h.ussCTI;var f=new b("uss-widget-factory",a.CATEGORY,a.TYPE,a.ITEM);return{registerWidgetType:function(a,b){if(!c.isNonEmptyString(a))throw Error("uss-widget-factory.registerWidgetType()... : name parameter must be valid string. provided name param is \x3d "+a);if(!(b.prototype instanceof n))throw Error("uss-widget-factory.registerWidgetType()... : constructor.prototype must be instance of Widget. provided constructor param is \x3d "+b);k[a]=b},getWidgetType:function(a){return k[a]},getWidget:function(a){var c,
d=f;try{var n=a.widgetType||h.widgetType.WIDGET,m=k[n];if(!m)return e.log("Widget.getWidget()... : Constructor not exist for type : "+n,"FATAL",d.getAttribution()),c;var D=m.getAttribution&&m.getAttribution();D&&(d=D);if(a.attribution)var y=a.attribution,d=new b(y.name,y.category,y.type,y.item);var x=g(a.content),A=g("\x3cdiv\x3e\x3c/div\x3e");A.append(x);c=new m(d,A)}catch(z){e.log("Widget.getWidget()... : "+z.message,"FATAL",d.getAttribution&&d.getAttribution())}return c}}});e.when("A","uss-constants",
"dp-flux-view","uss-store-repository","uss-dispatcher").register("uss-widget",function(a,b,c,d,e){function h(b){var c=[];a.each(b,function(a){var b=d.getStore(a);if(b)c.push(b);else throw Error("Widget.getWidget().getStores()... : store with name \x3d "+a+" not exists");});return c}var g=b.classList,k=b.widgetType;return a.createClass({init:function(a,b){this._element=b;this._element.addClass(k.WIDGET);this._element.addClass(g.HIDE_ELEMENT);this._attribution=a;this._dispacther=e;this.getStoreNames().length&&
(b=h(this.getStoreNames()),this._fluxView=new c(a,b,this.update.bind(this)),this.update(b))},show:function(c){c=c||{};c=c.showWidgetAnimation||{};var d=b.animationType;c.animationType=c.animationType||d.NO_ANIMATION;switch(c.animationType){case d.FADE_IN:a.fadeIn(this._element,c.timeDuration||100,c.transitionTimingFunction||b.transitionTimingFunction.EVEN_EASE);break;case d.NO_ANIMATION:this._element.addClass(g.SHOW_ELEMENT),this._element.removeClass(g.HIDE_ELEMENT)}},hide:function(){this._element.addClass(g.HIDE_ELEMENT);
this._element.removeClass(g.SHOW_ELEMENT)},beforeRender:function(){},afterRender:function(){},getElement:function(){return this._element},getAttribution:function(){return this._attribution},getDispatcher:function(){return this._dispacther},update:function(a){},getStoreNames:function(){return[]},deleteWidget:function(){this._element.remove();this._fluxView&&this._fluxView.unregisterStores()}})});e.when("A","uss-constants","uss-widget-factory","uss-logger-service").register("uss-recommendation-widget",
function(a,b,c,d){var e=b.widgetType;a=c.getWidgetType(e.WIDGET);var h=b.classList,g=b.metrics;b=a.extend({init:function(a,b){this._super(a,b);this._element.addClass(e.RECOMMENDATION_WIDGET);this._addTrackingMetrics()},_addTrackingMetrics:function(){this._element.find("."+h.FACEOUT_IMAGE).click(function(){d.logCounter(g.FACEOUT_IMAGE_CLICK_COUNTER)});this._element.find("."+h.FACEOUT_REVIEW_STARS).click(function(){d.logCounter(g.FACEOUT_REVIEW_STARS_CLICK_COUNTER)});this._element.find("."+h.FACEOUT_PRICE).click(function(){d.logCounter(g.FACEOUT_PRICE_CLICK_COUNTER)});
this._element.find("."+h.FACEOUT_TITLE).click(function(){d.logCounter(g.FACEOUT_TITLE_CLICK_COUNTER)});this._element.find("."+h.FACEOUT_BEST_SELLER).click(function(){d.logCounter(g.FACEOUT_BEST_SELLER_CLICK_COUNTER)})}});c.registerWidgetType(e.RECOMMENDATION_WIDGET,b);return b});e.when("A","uss-constants","uss-widget-factory","dp-flux-attribution","uss-template-store","dp-flux-action","uss-logger-service").register("uss-no-recommendation-widget",function(a,b,c,d,e,h,g){var k=b.widgetType;a=c.getWidgetType(k.WIDGET);
var f=b.ussCTI,r=new d(b.widgetType.NO_RECOMMENDATION_WIDGET,f.CATEGORY,f.TYPE,f.ITEM);d=a.extend({init:function(a,c){this._super(a,c);this._element.addClass(k.NO_RECOMMENDATION_WIDGET);a=e.getTemplate(b.widgetType.NO_RECOMMENDATION_WIDGET);this._element.append(a);this._continueShoppingLink=this._element.find("."+b.classList.CONTINUE_SHOPPING_LINK);this._continueShoppingLink.click(function(a){a.preventDefault();g.logCounter(b.metrics.CONTINUE_SHOPPING_CLICK);this.getDispatcher().dispatch(new h(b.actions.USS_CLOSE,
b.actionSources.CONTINUE_SHOPPING_CLICK))}.bind(this))}});d.getAttribution=function(){return r};c.registerWidgetType(k.NO_RECOMMENDATION_WIDGET,d);return d});e.when("A","uss-constants","uss-widget-factory").register("primary-action-status-widget",function(a,b,c){var d=b.widgetType;a=c.getWidgetType(d.WIDGET).extend({init:function(a,b){this._super(a,b);this.getElement().addClass(d.PRIMARY_ACTION_STATUS_WIDGET)}});c.registerWidgetType(d.PRIMARY_ACTION_STATUS_WIDGET,a);return a});e.when("A","promising-ui-element",
"uss-utils","uss-constants").register("promising-image",function(a,b,c,d){var n=a.$,h=d.classList;return b.extend({init:function(a,b){this._element=n(b);this._attribution=a;this._super(this._element);this._eventHandle=v},_showTickMarkImage:function(b){switch(b){case h.ATC_SUCCESS:this._showSuccessTickMark();break;case h.ATC_ERROR:this._showErrorTickMark();break;default:return}a.off(this._eventHandle.event,this._eventHandle.callback)},_showSuccessTickMark:function(){n(".main-image").find(".success-tick-mark-placeholder").addClass("success-tick-mark-image")},
_showErrorTickMark:function(){var b=n(".main-image").find(".error-tick-mark-placeholder");b.addClass("error-tick-mark-image");a.fadeIn(b,200,d.transitionTimingFunction.EASE_OUT)},showUIValue:function(b,h,f){var r=this,l=d.defaultAtcAnimationType,C=this._super.bind(this);l===d.animationType.FADE_IN&&(this._eventHandle=a.on(d.atcAnimationStatusEvent,this._showTickMarkImage.bind(this,f)));return c.loadImage(b,h).then(function(b){if(l===d.animationType.FADE_IN){var c=n(".main-image").find(".ui-promise");
a.fadeOut(c,200,d.transitionTimingFunction.EASE_IN,function(){r._appendImageToUIValue(b);C();var c=n(".main-image").find(".ui-value");a.fadeIn(c,200,d.transitionTimingFunction.EASE_OUT)})}else this._appendImageToUIValue(b),C();return!0}.bind(this),function(){e.log("PromisingImage.showUIValue() ... : failed to load image","FATAL",this._attribution.getAttribution());return!1}.bind(this))},_appendImageToUIValue:function(a){this.getValueElement().empty();this.getValueElement().append(a)}})});e.when("A",
"promising-ui-element","uss-constants").register("atc-status-msg",function(a,b,c){var d=c.classList;return b.extend({init:function(a){this._atcStatusElement=a;this._super(this._atcStatusElement)},_showSuccessMessage:function(){this._atcStatusElement.addClass(d.ATC_SUCCESS);this._atcStatusElement.removeClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ITEM_IN_CART)},_showFailureMessage:function(){this._atcStatusElement.addClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ATC_SUCCESS);this._atcStatusElement.removeClass(d.ITEM_IN_CART)},
_showItemInCartMessage:function(){this._atcStatusElement.addClass(d.ITEM_IN_CART);this._atcStatusElement.removeClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ATC_SUCCESS)},showUIValue:function(b){var e=this,g=c.defaultAtcAnimationType;switch(b){case d.ATC_SUCCESS:this._showSuccessMessage();break;case d.ATC_ERROR:this._showFailureMessage();break;case d.ITEM_IN_CART:this._showItemInCartMessage();break;default:return}this._super();g===c.animationType.FADE_IN&&(b=this._atcStatusElement.find("."+
d.UI_PROMISE),a.fadeOut(b,200,c.transitionTimingFunction.EASE_IN,function(){var b=e._atcStatusElement.find("."+d.UI_VALUE);a.fadeIn(b,200,c.transitionTimingFunction.EASE_OUT,function(){a.trigger(c.atcAnimationStatusEvent)})}))}})});e.when("A","promising-ui-element","uss-constants","dp-flux-utils").register("cart-status-message",function(a,b,c,d){var e=c.classList;return b.extend({init:function(a){this._cartStatusElement=a;this._subTotalElement=this._cartStatusElement.find("."+e.CART_SUB_TOTAL);this._cartCountElement=
this._cartStatusElement.find("."+e.CART_COUNT);this._cartCountSingularTemplate=this._cartCountElement.data("cart-count-singular-template");this._cartCountPluralTemplate=this._cartCountElement.data("cart-count-plural-template");this._super(this._cartStatusElement);this._eventHandle=v},_atcAnimationStatusResolved:function(){setTimeout(function(){this._cartStatusElement.addClass("uss-c-cart-status-msg-transition");a.off(this._eventHandle.event,this._eventHandle.callback)}.bind(this),200)},showUIValue:function(b,
e){var k=c.defaultAtcAnimationType;if("number"===typeof b&&d.isNonEmptyString(e)){var f;1===b?f=this._cartCountSingularTemplate.replace("###cartCount",b):1<b&&(f=this._cartCountPluralTemplate.replace("###cartCount",b));this._cartCountElement.html(f);this._subTotalElement.html(e);this._super();k===c.animationType.FADE_IN&&(this._eventHandle=a.on(c.atcAnimationStatusEvent,this._atcAnimationStatusResolved.bind(this)))}}})});e.when("A","a-button","uss-constants","uss-logger-service").register("uss-sub-nav",
function(a,b,c,d){var e=c.classList,h=c.metrics;return{getInstance:function(g){var k={},f=g.find("."+e.CHECKOUT_FORM);b("."+e.CHECKOUT_BUTTON,g);var r=g.find("."+e.CART_BUTTON),l=v;f.submit(function(){d.logCounter(h.CHECKOUT_FORM_CLICK_COUNTER)});r.click(function(){d.logCounter(h.CART_BUTTON_CLICK_COUNTER)});k.updateCheckoutUrl=function(a){f.attr("action",a)};k.hide=function(){a.$(g).addClass("is-hidden")};k.atcAnimationStatusResolved=function(){setTimeout(function(){a.$(g).addClass("uss-c-sub-nav-margin");
a.$(g).addClass("uss-c-sub-nav-transition");a.off(l.event,l.callback)}.bind(),200)};k.show=function(){a.$(g).removeClass("is-hidden");c.defaultAtcAnimationType===c.animationType.FADE_IN&&(l=a.on(c.atcAnimationStatusEvent,k.atcAnimationStatusResolved.bind()))};k.preInitiate=function(){var a=f.parent();a.find("iframe#ussCheckoutPrefetch").remove();var b=(new Date).getTime(),c="/gp/checkoutprefetch/checkout-prefetch.html?cartInitiateId\x3d"+b,d=document.createElement("iframe");d.setAttribute("src",c);
d.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");d.setAttribute("name","ussCheckoutPrefetch");d.setAttribute("id","ussCheckoutPrefetch");a.append(d);a=f.find("#cartInitiateId");a.length?a.val(b):f.append("\x3cinput type\x3d'hidden' name\x3d'cartInitiateId' id\x3d'cartInitiateId' value\x3d'"+b+"'\x3e")};k.hide();return k}}});e.when("A","uss-constants").register("uss-shipping-details",function(a,b){var c=a.$;return{getInstance:function(d){var e=d.find("."+b.classList.SHIPPING_DETAILS),
h=e.find("."+b.classList.SHIPPING_MESSAGE_PLACEHOLDER),g=b.defaultAtcAnimationType,k=v,f=function(){var a=h.find(".a-row").find("a"),b=a.attr("onclick");if("undefined"!==typeof b&&b.includes("amz_js_PopWin")){var f=[];c.each(a[0].attributes,function(a,b){f.push(b.name)});c.each(f,function(b,c){a.removeAttr(c)});a.attr("href","/gp/help/customer/display.html?nodeId\x3d527692")}},r={hide:function(){e.addClass(b.classList.HIDE_ELEMENT);e.removeClass(b.classList.SHOW_ELEMENT)},atcAnimationStatusResolved:function(){setTimeout(function(){e.addClass("uss-c-shipping-details-transition");
a.off(k.event,k.callback)}.bind(),200)},show:function(c){h.empty();h.append(a.$(c));f();e.addClass(b.classList.SHOW_ELEMENT);e.removeClass(b.classList.HIDE_ELEMENT);g===b.animationType.FADE_IN&&(k=a.on(b.atcAnimationStatusEvent,r.atcAnimationStatusResolved.bind()))}};r.hide();return r}}});e.when("A","uss-constants","primary-action-status-widget","dp-flux-attribution","uss-widget-factory","atc-status-msg","cart-status-message","promising-image","uss-sub-nav","uss-shipping-details").register("atc-status-widget",
function(a,b,c,d,e,h,g,k,f,r){var l=b.ussCTI,m=b.widgetType,u=b.classList,t=new d(b.widgetType.ATCStatusWidget,l.CATEGORY,l.TYPE,l.ITEM);c=c.extend({init:function(a,b){this._atcGenericError=b.find("."+u.ATC_GENERIC_ERROR);this._atcAcknowledgementMessage=b.find("."+u.ATC_ACKNOWLEDGEMENT_MESSAGE);this._mainImage=new k(a,this._atcAcknowledgementMessage.find("."+u.MAIN_IMAGE));this._atcStatusMessage=new h(this._atcAcknowledgementMessage.find("."+u.ATC_STATUS_MESSAGE_COMPONENT));this._cartStatusMessage=
new g(this._atcAcknowledgementMessage.find("."+u.CART_STATUS_MESSAGE_COMPONENT));this._subNav=f.getInstance(this._atcAcknowledgementMessage.find("."+u.SUB_NAV));this._shippingDetails=r.getInstance(this._atcAcknowledgementMessage);this._viewState={};this._super(a,b)},update:function(c){var f;a.each(c,function(c){if(c.getStoreAttribution().getName()===b.stores.ATC_STATUS_STORE){var d=c.getDispatcher()._pendingAction;d&&d.getName()===b.actions.ATC_RECEIVE&&this._subNav.preInitiate();f=c.getState();f.isAtcGenericError?
this.showGenericError():(c=a.diff(this._viewState,f),c.status&&f.status&&this._atcStatusMessage.showUIValue(f.status),c.cart.count&&f.cart.count&&(this._cartStatusMessage.showUIValue(f.cart.count,f.cart&&f.cart.subTotal&&f.cart.subTotal.displayString||""),c.cart.checkoutUrl&&f.cart.checkoutUrl&&this._subNav.updateCheckoutUrl(f.cart.checkoutUrl),this._subNav.show()),c.mainImage.src&&f.mainImage.src&&this._mainImage.showUIValue(f.mainImage.src,f.mainImage.altText,f.status),c.shippingMessageHTML&&f.shippingMessageHTML&&
this._shippingDetails.show(f.shippingMessageHTML));this._viewState=f}}.bind(this))},showGenericError:function(){this._atcAcknowledgementMessage.addClass(u.HIDE_ELEMENT);this._atcAcknowledgementMessage.removeClass(u.SHOW_ELEMENT);this._atcGenericError.removeClass(u.HIDE_ELEMENT);this._atcGenericError.addClass(u.SHOW_ELEMENT)},getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});c.getAttribution=function(){return t};e.registerWidgetType(m.ATCStatusWidget,c);return c});e.when("A","uss-constants",
"dp-flux-attribution","uss-widget-factory").register("atc-status-imb-widget",function(a,b,c,d){var n=d.getWidgetType(b.widgetType.WIDGET),h=b.ussCTI,g=new c("atc-status-imb-widget",h.CATEGORY,h.TYPE,h.ITEM);c=n.extend({init:function(a,c){c.addClass(b.widgetType.ATC_STATUS_IMB_WIDGET);this._super(a,c)},update:function(c){var f;a.each(c,function(c){if(c.getStoreAttribution().getName()===b.stores.ATC_STATUS_STORE)if(f=c.getState(),f.imbHTML){this.getElement().empty();c=a.$(f.imbHTML);var d=c.children().length;
if(1<=d){c.find(".a-declarative a").unwrap();var h=c.find(".a-declarative span");h.removeClass("a-color-link huc-cursor-pointer");h.unwrap();this.getElement().append(c);this.show();1<d&&e.log("ImbWidget.update(...): More than one IMB message exist : html \x3d "+f.imbHTML,"WARN",g.getAttribution())}else this.hide()}else this.hide()}.bind(this))},afterRender:function(){this.hide()},getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});c.getAttribution=function(){return g};d.registerWidgetType(b.widgetType.ATC_STATUS_IMB_WIDGET,
c);return c});e.when("A").register("uss-base-layout",function(a){return a.createClass({init:function(a){this._ussSheetElement=a},renderWidgets:function(a){throw Error("Layout.renderWidgets()...: Subclass must implement update method");},reset:function(){throw Error("Layout.reset()...: Subclass must implement reset method");},getUssSheetElement:function(){return this._ussSheetElement}})});e.when("A","uss-base-layout","promising-ui-element","uss-constants","primary-action-status-widget","atc-status-imb-widget").register("uss-default-layout",
function(a,b,c,d,e,h){var g=d.layout.defaultLayout;return b.extend({init:function(b){this._super(b);this._element=b.find("."+g.DEFAULT_LAYOUT);this._ussHead=this._element.find("."+g.HEAD);this._ussBody=this._element.find("."+g.BODY);this._widgetList=[];this._recommendationLoader=a.$("."+g.SKELETON_LOADER);this._recommendationLoadingMessage=a.$("."+g.RECOMMENDATION_LOADING_MESSAGE);this._recommendationLoadedMessage=a.$("."+g.RECOMMENDATION_LOADED_MESSAGE);this._ussBody.append(this._recommendationLoader);
this._recommendationLoaderFadeOutOptions={timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_IN};this._recommendationLoaderFadeInOptions={timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_OUT};this._recommendationWidgetOptions={showWidgetAnimation:{animationType:d.animationType.FADE_IN,timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_OUT}}},renderWidgets:function(b){var c,d=!1;a.each(b,function(b){c={};b.beforeRender();this._widgetList.push(b);
if(b instanceof e)this._ussHead.prepend(b.getElement());else if(b.getElement().addClass(g.BOTTOM_MARGIN_BETWEEN_WIDGETS),b.getElement().addClass(g.TOP_MARGIN_BETWEEN_WIDGETS),b instanceof h)this._ussBody.prepend(b.getElement());else{if(!d){d=!0;var k=this;a.fadeOut(this._recommendationLoader,this._recommendationLoaderFadeOutOptions.timeDuration,this._recommendationLoaderFadeOutOptions.transitionTimingFunction,function(){a.fadeIn(k._recommendationLoadedMessage,k._recommendationLoaderFadeInOptions.timeDuration,
k._recommendationLoaderFadeInOptions.transitionTimingFunction)})}c=this._recommendationWidgetOptions;this._ussBody.append(b.getElement())}b.show(c);b.afterRender()}.bind(this))},reset:function(){a.each(this._widgetList,function(a){a.deleteWidget()});this._widgetList=[];this._ussBody.empty();this._ussBody.append(this._recommendationLoader);this._ussBody.append(this._recommendationLoadedMessage);this._recommendationLoader.css({display:"block"});this._recommendationLoadingMessage.css({display:"none"});
this._recommendationLoadedMessage.css({display:"none"});this.resetScrollPosition()},resetScrollPosition:function(){this._ussBody.scrollTop(0)}})});e.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(a,b,c,d){function e(){t.$("#add-to-cart-button").removeAttr("disabled")}return{primaryATCClick:function(h,g){var k=new b(a.actions.USS_OPEN,a.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:h});g.percolateData.then(function(f){var d=
{isContainsRecommendation:!1,widgets:[]};f.recommendationData&&(d.widgets=f.recommendationData.widgets||[]);e();d.widgets.length||(d.widgets.push({widgetType:a.widgetType.NO_RECOMMENDATION_WIDGET}),d.recommendationBaseIdentifier=h);c.dispatch(k);g.atcData.then(function(f){var d={};1===f.isOk?d=f.atcStatusData:d.isAtcGenericError=!0;f=new b(a.actions.ATC_RECEIVE,a.actionSources.DP_ATC_CLICK,d);c.dispatch(f)},function(){var f=new b(a.actions.ATC_RECEIVE,a.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});
c.dispatch(f)});d.recommendationBaseIdentifier=h;f=new b(a.actions.RECOMMENDATION_DATA_RECEIVE,a.actionSources.DP_ATC_CLICK,d);c.dispatch(f)},function(){g.atcData.then(function(a){e();1===a.isOk?d.showATCSuccess():d.showATCFailure()},function(){d.showATCFailure()})})},secondaryATCClick:function(d,e){d.atcData.then(function(d){var f={};1===d.isOk?f=d.atcStatusData:f.isAtcGenericError=!0;f.params=e;d=new b(a.actions.ATC_RECEIVE,a.actionSources.USS_INLINE_ATC_CLICK,f);c.dispatch(d)},function(){})}}})},
initializeUSSComponents:function(){e.when("uss-template-store","uss-sheet-store","uss-recommendation-data-store","uss-store-repository","uss-widget","uss-recommendation-widget","primary-action-status-widget","uss-widget-factory","uss-sheet-view","uss-layout").register("uss-framework-ready",function(a){a.init()});e.when("uss-sheet-view","uss-framework-ready").register("uss-sheet-view-ready",function(a){a.initializeUSSSheetView()})},initializeBuyBox:function(){e.when("buy-box-override","atc-status-widget",
"atc-status-imb-widget","uss-atc-status-store","uss-framework-ready","uss-sheet-view-ready").execute(function(a){a.init()})}}});e.when("A","uss-constants","uss-logger-service").register("uss-eligibility",function(e,p,m){var q=p.metrics,a={};return{getUssEligibility:function(b,c){return{primaryAsinData:{asin:b,offerListingId:c},eligibility:a}},registerProgramEligibility:function(b,c){b&&(a[b]&&m.logCounter(q.PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN+"."+programName),a[b]=c)}}});e.when("A","atf","uss-init-helper",
"uss-preconditions","uss-logger-service","uss-constants").register("uss-init",function(t,p,m,q,a,b){function c(){m.loadUssCommonAssets();e.when("A","3p-promise","uss-light-box","uss-constants","uss-logger-service").register("uss-sheet-component",function(a,b,c,d,e){function l(b,g){if(!(this instanceof l))throw Error(t.INVALID_CONSTRUCTOR_USAGE);if("string"===typeof b)if(this._sheet=n("#"+b),1===this._sheet.length)this._sheetID=b,this._sheet.addClass(u.RIGHT_SIDE_SHEET),this._sheet.addClass(u.RIGHT_SIDE_SHEET_LAYOUT),
this._sheet.addClass(u.SHEET_CLOSE),this._sheet.attr("role","dialog"),this._sheet.appendTo(q),this._closeIcon=this._createCloseIcon(),this._closeIcon.click(function(){var a=this.close();g.beforeClose&&g.beforeClose(a);e.logCounter(this._sheetID+":closeIconClick")}.bind(this)),this._sheet.append(this._closeIcon),c.getElement().click(function(){var a=this.close();g.beforeClose&&g.beforeClose(a);e.logCounter(this._sheetID+":lightBoxClick")}.bind(this)),this._sheet.removeClass(u.HIDE_ELEMENT),a.on(d.atcAnimationStatusEvent,
function(){A.is(":visible")&&a.fadeIn(z,200,m.EASE_OUT)});else throw Error("Unique element with id '"+b+"' must exist inside a DOM");else throw Error(t.INVALID_SHEET_ID);}var n=a.$,u=d.classList,m=d.transitionTimingFunction,t=d.fatalMessagesList,p=d.layout.defaultLayout,q=n("body"),A=n("."+p.SKELETON_LOADER),z=n("."+p.RECOMMENDATION_LOADING_MESSAGE);l.prototype.open=function(){var d=this;return new b(function(b){var f=d._getSheetSize();d._sheet.css({right:"-"+f+"px"});c.show();a.animationFrameDelay(function(){a.animate(d._sheet,
{right:0},400,m.ENTER_EASE,function(){d._sheet.removeClass(u.SHEET_CLOSE);d._sheet.addClass(u.SHEET_OPEN);d.showCloseIcon();b(!0);e.logCounter(d._sheetID+":open")})});d._closeIcon.css({right:f+15+"px"})})};l.prototype.close=function(){return new b(function(b){var d="-"+this._getSheetSize()+"px";a.animate(this._sheet,{right:d},300,m.EXIT_EASE,function(){this._sheet.removeClass(u.SHEET_OPEN);this._sheet.addClass(u.SHEET_CLOSE);b(!0);e.logCounter(this._sheetID+":close")}.bind(this));this.hideCloseIcon();
c.hide()}.bind(this))};l.prototype.getSheetElement=function(){return this._sheet};l.prototype._getSheetSize=function(){return this._sheet.outerWidth()};l.prototype._createCloseIcon=function(){return n("\x3cdiv class \x3d '"+(u.CLOSE_ICON+" "+u.CLOSE_ICON_MEDIUM+"  "+u.HIDE_ELEMENT)+"'\x3e\x3c/div\x3e")};l.prototype.showCloseIcon=function(){a.fadeIn(this._closeIcon,200,m.EVEN_EASE)};l.prototype.hideCloseIcon=function(){a.fadeOut(this._closeIcon,200,m.EVEN_EASE)};return l});e.when("A","uss-constants",
"uss-utils").register("uss-light-box",function(a,b,c){var d=a.$,e=b.classList,l=d("\x3cdiv class\x3d'"+e.LIGHT_BOX_IDENTIFIER+" "+e.LIGHT_BOX_JS_HOOK+" "+e.HIDE_ELEMENT+"'\x3e\x3c/div\x3e");d("body").append(l);return{show:function(){l.addClass(e.SHOW_ELEMENT);l.removeClass(e.HIDE_ELEMENT);c.disablePageScroll();a.animationFrameDelay(function(){a.animate(l,{opacity:.6},400,b.transitionTimingFunction.EVEN_EASE)})},hide:function(){l.removeClass(e.SHOW_ELEMENT);a.animate(l,{opacity:0},300,b.transitionTimingFunction.EVEN_EASE,
function(){l.addClass(e.HIDE_ELEMENT);l.removeClass(e.SHOW_ELEMENT);c.enablePageScroll()})},getElement:function(){return l}}});e.when("A","uss-constants","dp-flux-attribution","dp-flux-view","uss-store-repository","uss-atc-status-store").register("nav-bar-cart-count-view",function(a,b,c,d,e,l){var n=a.$;a=b.ussCTI;c=new c("nav-bar-cart-count-view",a.CATEGORY,a.TYPE,a.ITEM);l=e.getStore(b.stores.ATC_STATUS_STORE);new d(c,[l],function(a){if(-1!==n.inArray(l,a)){var b=l.getState();w.$Nav.when("api.setCartCount").run(function(a){b.cart.count&&
a(b.cart.count)})}})});e.when("A").register("buy-box-utility",function(a){var b=a.$;return{isWarrantySelectedInBuyBox:function(){var a=!1;b("#abbWrapper .abbListItem input[type\x3dcheckbox]").each(function(){a=a||b(this).prop("checked")});return a}}});e.when("A","uss-action-creator-helper","uss-preconditions","uss-logger-service","uss-constants","uss-utils","uss-eligibility").register("uss-atc",function(a,b,c,d,e,l,n){function m(a){this.widgetName=a;this.isPrimaryAtc="DetailPageBuyBox"===a}var t=
a.$,p=e.ajaxParams.AJAX_TIMEOUT,q=e.ajaxParams.BASE_URL,x={};m.prototype._getAtcUrl=function(a){var b=q;a.hasOwnProperty("ref")&&(b=b+"/ref\x3d"+a.ref);(a=a.linkParams)&&""!==a.trim()&&("\x26"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),b=b+"?"+a);return b};m.prototype._addUssParameters=function(a){a.params.isUSSAjax=1;this.isPrimaryAtc&&(a.params.isPrimaryATC=1,l.shouldFireAndForgetWeblabTrigger()||(a.params.triggerUSSWeblab=c.triggerUSSWeblabValue()));a=this._addEligibilityParameters(a);
var b=l.getDebugParams();Object.keys(b).forEach(function(c){a.params[c]=b[c]});return a};m.prototype._addEligibilityParameters=function(a){var b=n.getUssEligibility(a.params[e.ajaxParams.ASIN],a.params[e.ajaxParams.OFFER_LISTING_ID]);a.params.ussEligibility=JSON.stringify(b);return a};m.prototype._callback=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);"function"===typeof a&&a.apply(this,b)};m.prototype._addToCart=function(b,d){this.isPrimaryAtc&&c.isUssWeblabInTreatment()&&
a.$("#add-to-cart-button").attr("disabled",!0);var e=this;b=this._getAtcUrl(b);d=this._addUssParameters(d);var f=t.Deferred(),g=t.Deferred(),l={};a.post(b,{params:d.params,success:function(b,c,f){d.hasOwnProperty("success")&&e._callback(d.success,b,c,f);a.trigger("USS ATC: Success")},error:function(b,c,k){f.reject();g.reject();d.hasOwnProperty("error")&&e._callback(d.error,b,c,k);a.trigger("USS ATC : Failure")},abort:function(a){f.reject();g.reject();d.hasOwnProperty("abort")&&e._callback(d.abort,
a)},chunk:function(a){if(a&&a.hasOwnProperty("name")){switch(a.name){case "atc-data":f.resolve(a.response);break;case "percolate-data":g.resolve(a.response);break;default:var b={message:"ATC Failed for widget "+e.widgetName+". Unrecognized chunk name found. ",logLevel:"FATAL"};w.ueLogError&&w.ueLogError("USS ATC Failure for widget "+e.widgetName,b)}d.hasOwnProperty("chunk")&&e._callback(d.chunk,a)}},timeout:d.timeout||p});l.atcData=f;this.isPrimaryAtc&&(l.percolateData=g);return l};return{addToCart:function(a,
c,h){if(!a||!a.trim().length||"object"!==typeof c)throw e.fatalMessagesList.INCORRECT_PARAMETER_PASSED;var k="DetailPageBuyBox"===a;x[a]||(x[a]=new m(a));a=x[a]._addToCart(h,c);k||(k={},k.baseAsin=c.params.ASIN||c.params.a,k.baseReftag=h.ref,d.logCounter(e.metrics.SECONDARY_ADD_TO_CART_CLICK_COUNTER),b.secondaryATCClick(a,k));return a}}});e.when("A","uss-atc","uss-action-creator-helper","uss-preconditions","uss-logger-service","uss-constants","buy-box-utility","uss-utils").register("buy-box-override",
function(a,b,c,d,e,l,m,n){var t=a.$,p=l.metrics;a={actionButton:null,whitelistedActions:{"submit.add-to-cart":1},init:function(){this.checkPreconditionsAndManipulateBuyBox()},checkPreconditionsAndManipulateBuyBox:function(){this.buyBoxForm=t("#addToCart");d.isUssConditionsPassed()&&this.attachFormHandler()},attachFormHandler:function(){this.buyBoxForm.submit(this.submitForm.bind(this));this.buyBoxForm.find("input[type\x3dsubmit], input[type\x3dbutton]").click(function(a){this.actionButton=a.target}.bind(this))},
isValidAction:function(){return this.actionButton&&this.actionButton.name in this.whitelistedActions},submitForm:function(a){if(!m.isWarrantySelectedInBuyBox()&&this.isValidAction())if(d.isUssWeblabInTreatment()){a.preventDefault();a=this.getAddToCartParameters();var h={params:a},t={ref:l.ajaxParams.REFTAG};n.shouldFireAndForgetWeblabTrigger()&&n.fireAndForgetWeblabTrigger(d.triggerUSSWeblabValue(),d.ussWeblabTreatmentValue());var h=b.addToCart("DetailPageBuyBox",h,t),q=new e.Timer(p.ATC_PROMISE_RESOLVED_TIMER),
v=new e.Timer(p.PERCOLATE_DATA_PROMISE_RESOLVED_TIMER);q.start();v.start();h.atcData.then(function(a){1===a.isOk&&q.stop()},function(){e.logCounter(p.ATC_PROMISE_REJECTED_COUNTER)});h.percolateData.then(function(){v.stop()},function(){e.logCounter(p.PERCOLATE_DATA_PROMISE_REJECTED_COUNTER)});c.primaryATCClick(a[l.ajaxParams.ASIN],h)}else e.logCounter(l.metrics.POST_ATC_PRECONDITIONS_FAILED),this.addHiddenUSSField("isUSSControl",1),n.shouldFireAndForgetWeblabTrigger()?n.fireAndForgetWeblabTrigger(d.triggerUSSWeblabValue(),
d.ussWeblabTreatmentValue()):this.addHiddenUSSField("triggerUSSWeblab",d.triggerUSSWeblabValue());else e.logCounter(l.metrics.POST_ATC_PRECONDITIONS_FAILED)},addHiddenUSSField:function(a,b){t("\x3cinput\x3e").attr({type:"hidden",id:a,name:a,value:b}).appendTo(this.buyBoxForm)},getAddToCartParameters:function(){var a={},b=this.buyBoxForm.serializeArray();t.each(b,function(b,c){a[c.name]=c.value});return a}};return{init:a.init.bind(a)}})}function d(){q.isUssConditionsPassed()&&(a.logCounter(b.metrics.PAGE_LANDING_PRECONDITIONS_PASSED),
n||(c(),n=!0,m.initializeUSSComponents()),m.initializeBuyBox())}var n=!1;t.on("PageRefresh:ATF",function(){d()});d()});"use strict";e.when("jQuery","A","a-component","uss-widget-footer","uss-widget-partial-content","uss-widget-full-content","p13n-sc-call-on-visible","p13n-sc-logger").register("uss-list-widget",function(e,p,m,q,a,b,c,d){function n(a){var b="a:expandControl:"+a._$footer.getName()+":toggle";p.on(b,function(){var b=!a.isExpanded();a._$element.attr("data-a-expanded",b);g(a,b);a._$firstToggleEvent&&
0<a._$widgetImpressionElement.length&&(a._$firstToggleEvent=0,h(a._$widgetImpressionElement,a._$fullContent._$element,{action:"see_more"}))})}function h(a,b,h){c.register(a,function(){d.logAsyncAction(e.extend(!0,{},{featureElement:a,isEventComplete:function(){return b.is(":visible")},logOnlyNew:!0,replicateAsinImpressions:!0},h))},{distance:10})}function g(a,b){a._$footer.toggleExpansion(b,!a.isExpanded(),a._$firstToggleEvent);a._$fullContent.toggleExpansion(b);a._$partialContent.toggleExpansion(b)}
var k=m.create({_componentName:"ussListWidget",init:function(c,e){this._super(c,e);this._$partialContent=a(this._$element.find(".uss-partial-list-container"));this._$fullContent=b(this._$element.find(".uss-full-list-container"));this._$footer=q(this._$element.find(".uss-widget-footer"));this._$firstToggleEvent=1;this._$widgetImpressionElement=this._$element.find(".p13n-sc-static-list");0<this._$widgetImpressionElement.length&&("function"===typeof d.resetImpressions&&d.resetImpressions(this._$widgetImpressionElement.attr("data-p13n-feature-name")),
h(this._$widgetImpressionElement,this._$partialContent._$element,{action:"view",initialDelay:0}));n(this);g(this,this.isExpanded())},isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")}});return function(a,b){return new k(a,b)}});e.when("jQuery","A").execute("uss-sp-help-link",function(e,p){p.on("a:popover:beforeShow:uss-sp-help-link-popover",function(e){e.popover.$container.css("z-index",501)})});"use strict";e.when("jQuery","A","p13n-sc-line-truncator","a-component").register("uss-widget-partial-content",
function(e,p,m,q){var a=q.create({_componentName:"ussWidgetPartialContent",init:function(a,c){this._super(a,c);this._$element.find(".p13n-sc-truncate").toggleClass("uss-asin-title");m.truncateLines(this._$element);p.loadDynamicImage(this._$element.find(".p13n-sc-dynamic-image"))},toggleExpansion:function(a){var c=this;c._$element.attr("data-a-expanded",a);a?c._$element.hide():p.delay(function(){c._$element.show()},50)}});return function(b,c){return new a(b,c)}});"use strict";e.when("jQuery","A","p13n-sc-line-truncator",
"a-component").register("uss-widget-full-content",function(e,p,m,q){var a=q.create({_componentName:"ussWidgetFullcontent",init:function(a,c){this._super(a,c);this._$dynamicImagesLoaded=this._$isTitleTruncated=!1;a=this._$element.find(".p13n-sc-truncate");a.toggleClass("uss-asin-title");a.attr("data-rows","4")},toggleExpansion:function(a){var c=this;c._$element.attr("data-a-expanded",a);a?p.delay(function(){c._$element.show();m.truncateLines(c._$element);c._$dynamicImagesLoaded||(p.loadDynamicImage(c._$element.find(".p13n-sc-dynamic-image")),
c._$dynamicImagesLoaded=!0)},50):c._$element.hide()}});return function(b,c){return new a(b,c)}});"use strict";e.when("jQuery","A","a-component","uss-widget-see-more","uss-widget-expander-icon","uss-constants","uss-logger-service").register("uss-widget-footer",function(e,p,m,q,a,b,c){function d(a){var b=a.getName();a=a.isExpanded();p.trigger("a:expandControl:"+b+":toggle");a?(c.logCounter(n.SEE_LESS_CLICK_COUNTER),c.logCounter(n.SEE_LESS_CLICK_COUNTER+":"+b)):(c.logCounter(n.SEE_MORE_CLICK_COUNTER),
c.logCounter(n.SEE_MORE_CLICK_COUNTER+":"+b))}var n=b.metrics,h=function(a,b){return a+":"+b},g=m.create({_componentName:"ussWidgetFooter",init:function(b,e){var g=this;g._super(b,e);g._$expanderIcon=a(g._$element.find(".uss-expander-icon-container"));g._$seeMore=q(g._$element.find(".uss-see-more"));g._$element.length&&(c.logCounter(n.SEE_MORE_EXISTENCE_COUNTER),c.logCounter(h(n.SEE_MORE_EXISTENCE_COUNTER,g.getName())));g._$element.click(function(){d(g)});g._$element.keypress(function(a){var b=p.constants.keycodes;
a=a.which;a!==b.ENTER&&a!==b.SPACE||d(g)})},toggleExpansion:function(a,b,c){var d=this;d._$element.attr("data-a-expanded",a);p.fadeOut(d._$element,200,"linear",function(){d._$seeMore.toggleSeeMore(a);d._$expanderIcon.toggleExpanderIcon(a);p.fadeIn(d._$element,200)});a||!b||c||d._$element.parent().get(0).scrollIntoView(!0)},isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")},getName:function(){return this._$element.attr("data-name")}});return function(a,b){return new g(a,b)}});
"use strict";e.when("jQuery","A","a-component").register("uss-widget-see-more",function(e,p,m){var q=m.create({_componentName:"ussWidgetSeeMore",init:function(a,b){this._super(a,b);this._$seeMoreText=this._$element.find(".uss-see-more-text");this._$seeLessText=this._$element.find(".uss-see-less-text")},toggleSeeMore:function(a){this._$seeMoreText.toggle(!a);this._$seeLessText.toggle(a)}});return function(a,b){return new q(a,b)}});"use strict";e.when("jQuery","A","a-component").register("uss-widget-expander-icon",
function(e,p,m){var q=m.create({_componentName:"ussWidgetExpanderIcon",init:function(a,b){this._super(a,b);this._$icon=this._$element.find(".uss-expander-icon")},toggleExpanderIcon:function(a){this._$icon.toggleClass("a-css-icon-expand",!a).toggleClass("a-css-icon-collapse",a)}});return function(a,b){return new q(a,b)}});"use strict";e.when("jQuery","A","uss-atc").execute("uss-inline-atc",function(e,p,m){function q(a){var c={};a.find("input[type\x3dhidden]").each(function(a,b){c[b.name]=e(b).val()});
return c}function a(a,c,d,e){a.atcData.then(function(a){e.hide();1===a.isOk?c.show():d.show()},function(){e.hide();d.show()})}(function(){e("body").delegate(".uss-list-widget .uss-add-to-cart-button","click",function(b){b=e(b.currentTarget);var c=b.parent().find("input[name\x3dASIN]").val(),d=e(".uss-add-to-cart-form-"+c),c=d.siblings(".uss-atc-success"),n=d.siblings(".uss-atc-error"),h=d.siblings(".uss-atc-spinner");d.hide();h.show();var g={params:q(d)},k=JSON.parse(d.attr("data-link-params")),d=
{linkParams:e.param(k),ref:d.attr("data-ref")};b=m.addToCart(b.parents(".uss-widget-body").attr("data-p13n-feature-name"),g,d);a(b,c,n,h)})})()})});
/* ******** */
(function(g){var H=window.AmazonUIPageJS||window.P,l=H._namespace||H.attributeErrors,e=l?l("DetailPageTwisterPlusAssets",""):H;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,H,l){"use strict";g.when("A").register("twister-plus-constants",function(e){return{ASIN:"asin",PRICE:"price",SAVINGS:"savings",TOTAL_PRICE:"totalPrice",YOU_SAVE:"youSave",PRICE_UNIT:"priceUnit",OFFER_LISTING_ID:"offerListingId",QUANTITY:"quantity",TWISTER_REFRESH_EVENT:"twister-refresh",
CC_SELECTION_UPDATE_EVENT:"cc-selection-update",DEVICE_TYPE_WEB:"web",TWISTER_PLUS_VIEW_REGISTRATION:{viewAttribution:"DetailPage",viewName:"MobileTwisterPlusFramework"},ccManager:{FEATURE_NAME:"ccManager",ACTIVE_CARDS:"twisterPlusActiveCards",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus"},itemAssociation:{KEY_BUYBACK:"buyback",CUSTOM_NAME_STRING:"custom-name",CUSTOM_VALUE_STRING:"custom-value",CUSTOM_DATA_KEY:"customData",INPUT_TYPE_HIDDEN:"hidden",ENCODED_ITEM_ASSOC_VAL:"encodedItemAssocVal",
ITEM_ASSOCIATION_GROUP_KEY:"ItemAssociationGroupKey",ITEM_ASSOCIATION_GROUP_VAL:"itemAssociationGroup",ASIN_KEY:"asin",QUANTITY_KEY:"quantity",OFFERING_ID_KEY:"offeringID",OFFER_LISTING_ID_KEY:"offerListingId",FORM_DATA_ASIN_KEY:"a",FORM_DATA_OID_KEY:"oid",FIRST_INDEX:".1",DEVICE_TYPE_MOBILE_WEB:"mWeb",DEVICE_TYPE_MOBILE_APP:"mApp",IS_BUYBACK_INPUT_FLAG:"isBuyBack",IS_BUYBACK_INPUT_FLAG_VALUE:"1",PIPE_SEPARATOR:"|",FEATURE_NAME_KEY:"featureName",BASE_ASIN_INDEX:1},htmlTags:{INPUT:"input",FIELDSET:"fieldset"},
selectors:{DECLARATIVE_CLASS:".a-declarative",BUYBOX_ACCORDION:"#buybox .a-accordion",BUYBOX_ACCORDION_ACTIVE:"#buybox .a-accordion-active",BUYNOW_ELEMENT_ID:"form#buyNow, form#buyNowCheckout",BUYNOW_CHECKOUT_ELEMENT_ID:"#buyNowCheckout",BUYNOW_BUTTON_ID:"#buy-now-button",ADD_TO_CART_BUTTON_ID:"#add-to-cart-button, #installments-button, #add-to-cart-button-ubb-mobile",ADD_TO_CART_ELEMENT_ID:"#addToCart, #mobile-installments",ITEM_ASSOCIATION_INPUTS_CLASS:".itemAssocInputs",ITEM_ASSOCIATION_INPUTS_CLASS_NAME:"itemAssocInputs",
DATA_ATTRIBUTE_ACTION:"action",PPD_RIGHT_COL_ID:"#rightCol"},ccFeatures:{PAYMENT_OPTIONS_FEATURE:"paymentOptions",PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:"BUY_NOW",PAYMENT_OPTIONS_ATC_CART_TYPE:"ADD_TO_CART",CART_TYPE:"cartType",IS_BUYBACK_KEY:"isBuyBackKey",IS_BUYBACK_FEE:"isBuyBackFee",BUY_NOW_DATA:"buynowData",COUPONS_FEATURE:"couponsCard"},blacklistedFeaturesListForIA:["couponsCard"],bottomSheet:{FEATURE_NAME:"bottomSheet",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",
BOTTOM_SHEET_NAME:"twisterPlusBottomSheet",RESIZE_DURATION:.3,BOTTOM_SPACING:21,ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"},unavailableMessage:{ACTIVE_ACCORDION:".a-accordion-active",CLASS:".",DISPLAYABLE_MESSAGE:"tp-bbm-info-message-displayable",HIDDEN:"aok-hidden",MESSAGE_ITEM:"twister-plus-unavailable-message-item",
MULTIPLE:".tp-bbm-info-message-container",SINGLE:".tp-bbm-info-message-with-card-name-container",TEMPLATE:"twister-plus-unavailable-message-item-template"},sideSheet:{FEATURE_NAME:"sideSheet",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",RESIZE_DURATION:300,SYMBOL_HASH:"#",DISPLAY:"display",INLINE:"inline"},ccCardsRefresh:{SINGLE_CARD_INVALID:"single-card-invalid-message",SINGLE_SELECTION_INVALID:"single-selection-invalid-message",SINGLE_DETAILS_UPDATE:"single-details-update-message",
MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH:"multiple-details-update-or-cards-refresh-message",MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID:"multiple-card-invalid-or-selection-invalid-message",CARD_NAME_PLACEHOLDER:"###cardName"},metrics:{CC_CARD_COUNT:"ccCardCount",TWISTER_PLUS_TTI:"TTI",BOTTOM_SHEET_GV:"priceBottomSheetGV",BOTTOM_SHEET_TIMER:"priceBottomSheetTimer",CC_REMOVAL:"ccRemoval",CC_SELECTION:"ccSelection",PREFIX:"twisterPlus.",FEATURE_NAME:"twisterPlus",TWISTER_PLUS_TWISTER_REFRESH_GV:"twisterPlusTwisterRefreshGV"},
toolTip:{FEATURE_NAME:"toolTip",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",TOOL_TIP_NAME:"twisterPlusPopOver",ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"}}});"use strict";g.when("A").register("twister-plus-preconditions",function(e){return{isTwisterPlusEligible:function(){return"true"===
e.$("#twister-plus-eligible").val()},isCcCardsRendered:function(){return"true"===e.$("#ccCardsRendered").val()}}});"use strict";g.when("A","twister-plus-logger-service","twister-plus-constants").register("twister-plus-feature-state",function(e,d,f){function c(a){return r.ccFeaturesState[a]}function b(a){return r.ccRemovedSelections[a]}var r={},A=f.metrics;return{initialize:function(a){r.twisterState=a.twisterState||{};r.priceData=a.priceData||{};r.ccFeaturesState=a.ccFeaturesState||{};r.ccRemovedSelections=
a.ccRemovedSelections||{}},getTwisterPlusFeaturesState:function(){return r},getTwisterState:function(){return r.twisterState},setTwisterState:function(a){r.twisterState=a||{}},getCCFeaturesState:function(){return r.ccFeaturesState},getCCRemovedSelections:function(){return r.ccRemovedSelections},getPriceData:function(){return r.priceData},updateCCFeatureState:function(a,n,b){var e=!1;if(a!==l&&n!==l){var e=r.ccFeaturesState,f;f=c(a);if("add"===n.selectionType)b[a].hasOwnProperty("updateQtyAsBaseItem")&&
b[a].updateQtyAsBaseItem&&(n.quantity=r.twisterState.quantity),f!==l?f.push(n):(r.ccFeaturesState[a]=[],r.ccFeaturesState[a].push(n)),d.logCounter(A.CC_SELECTION+"."+a);else if("delete"===n.selectionType&&(b=n.itemType,n=n[b],f!==l))for(var B=0;B<f.length;B++)if(f[B][b]===n){f.splice(B,1);d.logCounter(A.CC_REMOVAL+"."+a);break}f=c(a);e[a]=f;e=!0}else g.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",a);return e},updateTwisterPlusFeatureStateForQuantity:function(a,b){r.twisterState.quantity=
a;e.each(r.ccFeaturesState,function(c,d){b[d].hasOwnProperty("updateQtyAsBaseItem")&&b[d].updateQtyAsBaseItem&&e.each(c,function(b,c){r.ccFeaturesState[d][c].quantity=a})})},updateCCRemovedSelections:function(a,c){var d=!1;a!==l&&c!==l?(d=r.ccRemovedSelections,b(a)===l&&(r.ccRemovedSelections[a]=[]),b(a).push(c),c=b(a),d[a]=c,d=!0):g.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",a);return d},clearCCFeatureSelections:function(a){var b=!1;a!==l?(c(a)!==l&&(b=r.ccFeaturesState[a].length,
0<b&&d.logCounter(A.CC_REMOVAL+"."+a,b),r.ccFeaturesState[a]=[]),b=!0):g.log("CC featureName passed to Twister+ is not defined.","FATAL",a);return b},clearCCRemovedSelections:function(a){var c=!1;a!==l?(b(a)!==l&&delete r.ccRemovedSelections[a],c=!0):g.log("CC featureName passed to Twister+ is not defined.","FATAL",a);return c},updatePriceData:function(a){r.priceData=a||{}}}});"use strict";g.when("A","twister-plus-constants").register("twister-plus-feature-registration",function(e,d){var f={},c=[d.TWISTER_REFRESH_EVENT,
d.CC_SELECTION_UPDATE_EVENT];(function(){for(var b=0;b<c.length;b++)f[c[b]]=[]})();return{registerFeature:function(b,d,e){var a;a=!0;b.hasOwnProperty("featureName")&&b.hasOwnProperty("featureAttribution")||(a=!1,g.log("Feature Registration does not contain valid featureName or featureAttribution","ERROR",b.featureName+": "+b.featureAttribution));a&&(a=!0,-1===c.indexOf(d)&&(g.log("Feature passed invalid event name while registering to Twister+: "+d,"ERROR",b.featureName+": "+b.featureAttribution),
a=!1));if(a){a=b.featureName;for(var n=!1,l=0;l<f[d].length;l++)if(f[d][l].featureName===a){n=!0;break}n?g.log("Feature already registered to TwisterPlus for the event: "+d,"ERROR",a):(n={},n.featureName=a,n.featureAttribution=b.featureAttribution,n.callback=e,f[d].push(n))}},callRegisteredFeaturesCallback:function(b){for(var c=0;c<f[b].length;c++)f[b][c].callback.apply()}}});"use strict";g.when("A","twister-plus-feature-state","twister-plus-feature-registration","twister-plus-constants","priceUpdate",
"itemAssociation","buy-box-price-update","turbo-checkout-handler","utils").register("twister-plus-framework",function(e,d,f,c,b,r,A,a,n){function N(){h(document).delegate("#quantity","change",function(L){L=x();m=!0;d.updateTwisterPlusFeatureStateForQuantity(L,P);y();m=!1})}function E(){var L=e.$("#twister-plus-price-data-price"),L=L?L.val():l,a=e.$("#twister-plus-price-data-savings"),a=a?a.val():l,m=e.$("#twister-plus-price-data-price-unit"),m=m?m.val():l;return{price:parseFloat(L),savings:parseFloat(a),
priceUnit:m}}function v(){var a=e.$("#twister-plus-offer-listing-id");return a?a.val():l}function B(){var a=e.$("#twister-plus-asin");return a?a.val():l}function p(){var a={};a[F.ASIN]=M;a[F.PRICE]=G.price;a[F.SAVINGS]=G.savings;a[F.PRICE_UNIT]=G.priceUnit;a[F.OFFER_LISTING_ID]=S;a[F.QUANTITY]=x();var m={};m[F.TOTAL_PRICE]=G.price;m[F.YOU_SAVE]=G.savings;return{twisterState:a,priceData:m}}function x(){var a=n.getBaseItemQuantity();a===l&&(a=1);return a}function y(){var L=d.getTwisterPlusFeaturesState(),
c=b.getTotalPriceAndYouSave(L);d.updatePriceData(c);A.updatePriceSubtotalFeature(L);m&&!n.isFeatureSelectionPresent(d.getCCFeaturesState())||r.addItemAssociationBundleData(d.getTwisterPlusFeaturesState(),!0);f.callRegisteredFeaturesCallback(F.CC_SELECTION_UPDATE_EVENT);a.updateInputCheckbox(L)}var F=c,G=E(),S=v(),M=B(),h=e.$,P,m=!1;return{initializeTwisterPlus:function(){d.initialize(p());N()},refreshTwisterPlusData:function(){G=E();S=v();M=B();d.initialize(p());f.callRegisteredFeaturesCallback(F.TWISTER_REFRESH_EVENT);
N()},ccSelectionFetch:function(a){return d.getCCFeaturesState()[a]},ccRemovedSelectionFetch:function(a){return d.getCCRemovedSelections()[a]},ccSelectionUpdate:function(a,m){a=d.updateCCFeatureState(a,m,P);y();return a},ccRemovedSelectionUpdate:function(a,m){a=d.updateCCRemovedSelections(a,m);y();return a},ccSelectionsClear:function(a){a=d.clearCCFeatureSelections(a);y();return a},ccRemovedSelectionsClear:function(a){a=d.clearCCRemovedSelections(a);y();return a},setFeatureRegistrationMap:function(a){P=
a},getTwisterPlusState:function(){return e.copy(d.getTwisterPlusFeaturesState())},registerFeature:function(a,m,c){try{"function"===typeof c?f.registerFeature(a,m,c):g.log("Registering function should provide callback as a function","ERROR",a.featureName)}catch(b){H.ueLogError&&H.ueLogError(b,{logLevel:"ERROR",attribution:a.featureName,message:"TwisterPlus Framework: Error caused by the feature: "+a.featureName+" (C/T/I: "+a.featureAttribution+") while registering to TwisterPlus to listen to "+m+" event"+
b})}}}});g.when("A","twister-plus-framework","twister-plus-constants","twister-plus-logger-service","utils").register("cc-manager",function(e,d,f,c,b){function r(a){return p[a].hasOwnProperty("isMultiSelection")&&p[a].isMultiSelection}function A(a,c){h=d.getTwisterPlusState();c=d.ccSelectionUpdate(a,c);d.ccRemovedSelectionsClear(a);return c}function a(a){h=d.getTwisterPlusState();return d.ccSelectionsClear(a)}function n(a){var c=!0,b=a;y||(y=N());p.hasOwnProperty(a)?-1===y.indexOf(a)&&(c=!1,b=p[a].featureAttribution,
g.log("CC selection update called for non rendered feature","ERROR",b)):(c=!1,g.log("CC selection update called for unregistered feature","ERROR",b));return c}function N(){var a=x("#twister-plus-active-cards");return(a?a.val():"").split(",")}function E(a,c){var b={},d;for(d in y){var h=y[d];if(h!==c&&p.hasOwnProperty(h)){var e=p[h];e.callbacks.hasOwnProperty("refreshCard")&&(e=e.callbacks.refreshCard(a,c),"NO_CHANGE"!==e&&a.ccFeaturesState[h]!==l&&0<a.ccFeaturesState[h].length&&(b[e]===l&&(b[e]=[]),
b[e].push(h)))}}a=p[c].callbacks;h=Object.keys(b).length;if(a.hasOwnProperty("ccCardsRefreshNotification")&&0<h){var k;c=x("#tp-cc-cards-refresh-strings");d=!0;if(1===h)if(h=Object.keys(b)[0],b=b[h],1===b.length){switch(h){case "CARD_INVALID":k=c.data(G.SINGLE_CARD_INVALID);break;case "SELECTION_INVALID":k=c.data(G.SINGLE_SELECTION_INVALID);break;case "DETAILS_UPDATE":k=c.data(G.SINGLE_DETAILS_UPDATE),d=!1}k=k.replace(G.CARD_NAME_PLACEHOLDER,b[0])}else switch(h){case "CARD_INVALID":k=c.data(G.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);
break;case "SELECTION_INVALID":k=c.data(G.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);break;case "DETAILS_UPDATE":k=c.data(G.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH),d=!1}else 1<h&&(k=c.data(G.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH));b=d?x("#tp-cc-cards-refresh-red-notification"):x("#tp-cc-cards-refresh-green-notification");b.find(".a-alert-content").text(k);k=b.html();a.ccCardsRefreshNotification(k)}else 0<h&&g.log("Feature callback ccCardsRefreshNotification() missing for the feature","ERROR",
p[c].featureAttribution)}function v(a,c,b){for(var d in y){var h=y[d];if(h!==b&&p.hasOwnProperty(h)){var e=p[h];e.callbacks.hasOwnProperty("restorePreviousSelection")&&e.callbacks.restorePreviousSelection(a.ccFeaturesState[h],c.ccFeaturesState[h],b)}}}function B(a,c){var b=!1;if(M&&M===a&&h.ccFeaturesState!==l&&h.ccFeaturesState[M]!==l)if("SELECTION_CLEAR_ITEM_DATA"===c)b=0===h.ccFeaturesState[M].length?!0:!1;else{a=h.ccFeaturesState[M];for(var d=c.itemType,e=0;e<a.length;e++){var n=a[e].itemType;
if(n===d&&a[e][n]===c[d]){b=!0;break}}}return b}var p={},x=e.$,y,F=f.metrics,G=f.ccCardsRefresh,S,M,h,P="";return{registerFeature:function(a,c){var b=!0;a.hasOwnProperty("featureName")&&a.hasOwnProperty("featureAttribution")||(g.log("Properties missing in feature registration passed","ERROR",a.featureAttribution||a.featureName),b=!1);b&&(b=!0,c.hasOwnProperty("init")&&c.hasOwnProperty("validateInputParams")||(g.log("Functions missing in callbacks passed","ERROR",a.featureAttribution||a.featureName),
b=!1),b&&(b=a.featureName,p[b]={},p[b].callbacks=c,p[b].featureAttribution=a.featureAttribution,p[b].isMultiSelection=a.isMultiSelection,p[b].updateQtyAsBaseItem=a.updateQtyAsBaseItem,c.init()))},ccSelectionUpdate:function(a,b){var c=!1;n(a)&&(p[a].callbacks.validateInputParams(b)?(B(a,b)?(c=A(a,b),v(d.getTwisterPlusState(),h,a)):(M=a,c=A(a,b),E(d.getTwisterPlusState(),a)),b=r(a),P===f.DEVICE_TYPE_WEB&&c&&!b&&(b=p[a].callbacks,b.hasOwnProperty("cardCollapse")?b.cardCollapse():g.log("Feature callback cardCollapse() missing for the feature",
"ERROR",p[a].featureAttribution))):g.log("Validation failed for the passed itemData","ERROR",p[a].featureAttribution));return c},ccRemovedSelectionUpdate:function(a,b){var c=!1;n(a)&&(p[a].callbacks.validateInputParams(b)?c=d.ccRemovedSelectionUpdate(a,b):g.log("Validation failed for the passed itemData","ERROR",p[a].featureAttribution));return c},ccSelectionsClear:function(b){var c=!1;n(b)&&(B(b,"SELECTION_CLEAR_ITEM_DATA")?(c=a(b),v(d.getTwisterPlusState(),h,b)):(M=b,c=a(b),E(d.getTwisterPlusState(),
b)));return c},ccRemovedSelectionsClear:function(a){var b=!1;n(a)&&(b=d.ccRemovedSelectionsClear(a));return b},getFeatureRegistrationDetails:function(){return p},init:function(){P=b.getDeviceType();y=N();d.setFeatureRegistrationMap(p);for(var a in y){var h=y[a];p.hasOwnProperty(h)&&p[h].callbacks.init()}c.logCounter(F.CC_CARD_COUNT,y.length)},getRenderedFeaturesList:N,cardExpanded:function(a){var b=n(a),c=S;b&&(e.trigger("twisterPlus-removeCCCardNotification"),c&&c!==a?(S=a,a=p[c].callbacks,a.hasOwnProperty("cardCollapse")?
a.cardCollapse():g.log("Feature callback cardCollapse() missing for the feature","ERROR",p[c].featureAttribution)):S=a)},switchBuyingOption:function(a){for(var b in y){var c=y[b];if(p.hasOwnProperty(c)){var h=p[c];h.callbacks.hasOwnProperty("switchBuyingOption")&&h.callbacks.switchBuyingOption(a,d.ccSelectionFetch(c),d.ccRemovedSelectionFetch(c))}}y&&d.updateTwisterPlusComponents()},getFeatureCurrentlyExpanded:function(){return S},isMultiSelectionFeature:r}});"use strict";g.when("A").register("buy-box-price-update",
function(e){function d(){B.text("/"+a.termType);p.text(a.termCount.toString()+" "+a.termType);x.removeClass("aok-hidden")}function f(){B.text("");p.text("");x.addClass("aok-hidden")}function c(){2===n.length?g.find(".a-price-fraction").text(String(n[1].substring(0,2))):g.find(".a-price-fraction").text("00");g.find(".a-price-whole").contents().filter(function(){return 3===this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(n[0]).toLocaleString(l))}var b=e.$;e={};var r,A,a,n,g,
E,v,B,p,x;e.init=function(){r=0;g=b("#tp_price_block_total_price_ww");E=b("#tp_options_detail");v=b("#tp_monthly_options_detail");B=b("#tp-price-update-payment-term");p=b("#tp-price-update-payment-term-length");x=b("#tp-price-update-payment-period")};e.updatePriceSubtotalFeature=function(e){A=e.ccFeaturesState;var p;p=A.hasOwnProperty("paymentOptions")&&0<A.paymentOptions.length;var l=0,g;for(g in A)if("paymentOptions"!==g&&0<A[g].length){l=1;break}p?(a=A.paymentOptions[0],a.isOrderLevel?(n=a.price.toFixed(2).split("."),
c(),d(),1===l?E.removeClass("aok-hidden"):E.addClass("aok-hidden"),v.addClass("aok-hidden")):1===l?(n=(e.priceData.totalPrice+a.price-e.twisterState.price).toFixed(2).split("."),c(),f(),E.addClass("aok-hidden"),v.removeClass("aok-hidden")):(n=a.price.toFixed(2).split("."),c(),d(),E.addClass("aok-hidden"),v.addClass("aok-hidden"))):(n=e.priceData.totalPrice.toFixed(2).split("."),c(),f(),E.removeClass("aok-hidden"),v.addClass("aok-hidden"));e=b("#tp_price_update_feature_ww");p=b("#tp_price_row_ww");
1===r&&(p.css("display","none"),e.css("display","none"),r=0)};return e});"use strict";g.when("A","twister-plus-constants").register("priceUpdate",function(e,d){function f(a,c){var d=a;b.each(c,function(a,c){b.each(c,function(b,c){a!==r.PAYMENT_OPTIONS_FEATURE&&c.price!==l&&(a===g.KEY_BUYBACK?c.isBuyBack&&(d=d-c.savings+c.price):d=a===r.COUPONS_FEATURE?d-c.savings:d+c.price*(c.quantity!==l?c.quantity:1))})});return d}function c(a,c,d){var e=c;b.each(d,function(a,c){b.each(c,function(c,b){a!==r.PAYMENT_OPTIONS_FEATURE&&
b.savings!==l&&(a===g.KEY_BUYBACK?b.isBuyBack&&(e+=b.savings):e+=b.savings*(b.quantity!==l?b.quantity:1))})});return e}var b=e.$;e={};var r=d.ccFeatures,g=d.itemAssociation;e.getTotalPrice=function(a){var c={};c.totalPrice=f(a.twisterState.price,a.ccFeaturesState);return c};e.getTotalPriceAndYouSave=function(a){var b={},d=a.twisterState.quantity?a.twisterState.quantity:1,e=a.twisterState.price*d,d=a.twisterState.savings*d;b.totalPrice=f(e,a.ccFeaturesState);b.youSave=c(e,d,a.ccFeaturesState);return b};
return e});"use strict";g.when("A","utils","twister-plus-constants").register("itemAssociation",function(e,d,f){function c(){var a=h(C.BUYBOX_ACCORDION_ACTIVE);return 1===a.length?a.find(C.ADD_TO_CART_ELEMENT_ID):h(C.ADD_TO_CART_ELEMENT_ID)}function b(a){return 0<c().clone().find(C.ITEM_ASSOCIATION_INPUTS_CLASS).remove().end().find('input[name\x3d"'+a+'"]').length}function r(a,c,b){var d=[],e=k.CUSTOM_NAME_STRING+"."+a+"."+c,e=h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,id:e,name:e,value:b[k.ITEM_ASSOCIATION_GROUP_KEY]});
a=k.CUSTOM_VALUE_STRING+"."+a+"."+c;b=h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,id:a,name:a,value:JSON.stringify(b[k.ENCODED_ITEM_ASSOC_VAL])});d.push(e);d.push(b);return d}function A(a){return h("\x3c"+R.INPUT+"\x3e",{type:a.inputType,id:a.inputId,name:a.inputName,value:JSON.stringify(a.inputValue)})}function a(a,c,b){var d=a.featureName;a=a.formData;var e=[];if(a!==l){var h;d===O.PAYMENT_OPTIONS_FEATURE&&(h=b?O.PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:O.PAYMENT_OPTIONS_ATC_CART_TYPE);for(b=0;b<
a.length;b++)h!==l&&(a[b].inputValue[O.CART_TYPE]=h),"function"===typeof c&&(d=c(a[b]),e.push(d))}return e}function n(a,b,c){var d=c.quantity,e=c.offerListingId;d!==l&&e!==l?(a.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+b+'" name\x3d"asin.'+b+'" value\x3d"'+c.asin+'"\x3e'),c=F(b,d,!1),a.push(c),b=G(b,e,!1),a.push(b)):g.log("offerListingId or quantity is not defined for the asin in the itemData","Error",JSON.stringify(c));return a}function N(){return h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,
id:k.IS_BUYBACK_INPUT_FLAG,name:k.IS_BUYBACK_INPUT_FLAG,value:k.IS_BUYBACK_INPUT_FLAG_VALUE})}function E(I,V){var D=M(I),w=h("\x3c"+R.FIELDSET+"\x3e",{"class":C.ITEM_ASSOCIATION_INPUTS_CLASS_NAME}),f=[],q=2;L&&d.isFeatureSelectionPresent(T.ccFeaturesState)&&(q={},q.quantity=h("#addToCart #atc-mbb-quantity").val(),q.asin=e.$("#mbb-checkbox-input").val(),q.offerListingId=h("#addToCart #atc-mbb-offering-id").val(),f=n(f,2,q),q=3);for(var g=0;g<D.length;g++){var t=D[g];if(K)for(var p=D[g].customData||
[],m=0;m<p.length;m++){var u=r(q,m+1,p[m]);h.merge(f,u)}t.asin!==l&&(f=n(f,q,t),q++);t=a(D[g],A,!1);h.merge(f,t)}if(f.length)for(D=[],b(k.ASIN_KEY+k.FIRST_INDEX)||(q=k.BASE_ASIN_INDEX,D.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+q+'" name\x3d"asin.'+q+'" value\x3d"'+T.baseAsinState.asin+'"\x3e')),b(k.QUANTITY_KEY+k.FIRST_INDEX)||(q=H?d.getBaseItemQuantity():c().find('input[id\x3d"quantity"]').val(),q=F(k.BASE_ASIN_INDEX,q),D.push(q)),b(k.OFFERING_ID_KEY+k.FIRST_INDEX)||(q=G(k.BASE_ASIN_INDEX,
T.baseAsinState.offerListingId),D.push(q)),h.merge(f,D),V&&(D=N(),f.push(D)),D=0;D<f.length;D++)h(w).append(f[D]);f=h("\x3c"+R.FIELDSET+"\x3e",{"class":C.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});D=[];q=2;g=1;for(t=0;t<I.length;t++){p=I[t];if(K)if(I[t][k.FEATURE_NAME_KEY]===k.KEY_BUYBACK){for(var u=I[t].buynowData||[],m=q,z=[],B,v=0;v<u.length;v++)B=u[v].name===O.IS_BUYBACK_KEY?h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,id:u[v].id,name:k.CUSTOM_NAME_STRING+"."+m+".1",value:u[v].value}):u[v].name===
O.IS_BUYBACK_FEE?h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,id:u[v].id,name:k.CUSTOM_VALUE_STRING+"."+m+".1",value:u[v].value}):h("\x3c"+R.INPUT+"\x3e",{type:k.INPUT_TYPE_HIDDEN,id:u[v].id,name:u[v].name,value:u[v].value}),z.push(B);m=z;h.merge(D,m)}else for(u=I[t].customData||[],z=0;z<u.length;z++)m=r(q,z+1,u[z]),h.merge(D,m);p.asin!==l&&(D=n(D,g,p),q++,g++);p=a(I[t],A,!0);h.merge(D,p)}if(D.length)for(V&&(I=N(),D.push(I)),I=0;I<D.length;I++)h(f).append(D[I]);w.length&&(I=c().find(C.ITEM_ASSOCIATION_INPUTS_CLASS),
I.length?h(I).replaceWith(w):c().append(w));f.length&&(w=C.BUYNOW_ELEMENT_ID,I=h(w).find(C.ITEM_ASSOCIATION_INPUTS_CLASS),I.length?h(I).replaceWith(f):h(w).append(f))}function v(){var a=h(C.BUYBOX_ACCORDION);return 1===a.length?a.find(C.ADD_TO_CART_BUTTON_ID):h(C.ADD_TO_CART_BUTTON_ID)}function B(a,b,c){var d={};d[k.CUSTOM_NAME_STRING+"."+a+"."+b]=c[k.ITEM_ASSOCIATION_GROUP_KEY];d[k.CUSTOM_VALUE_STRING+"."+a+"."+b]=JSON.stringify(c[k.ENCODED_ITEM_ASSOC_VAL]);return d}function p(a){var b={},c=a.inputName;
a=JSON.stringify(a.inputValue);b[c]=a;return b}function x(a){var b=[];a.each(function(){var a=h(this).parents(C.DECLARATIVE_CLASS);if(0<a.length){var c=h(a).data(C.DATA_ATTRIBUTE_ACTION),c=d.convertHTMLDataAttributesToKeys(c),a=e.copy(h(a).data(c));b.push({dataActionKey:c,initialFormData:a})}});return b}function y(a,b,c){var d=0;a.each(function(){var a=h(this).parents(C.DECLARATIVE_CLASS);if(0<a.length){var e=b[d++];if(e!==l){var I=h.extend({},e.initialFormData.inputs,c),f=h.extend({},e.initialFormData);
f.inputs=I;a.data(e.dataActionKey,f)}}})}function F(a,b,c){return c?(c={},c[k.QUANTITY_KEY+"."+a]=b,c):'\x3cinput type\x3d"hidden" id\x3d"quantity.'+a+'" name\x3d"quantity.'+a+'" value\x3d"'+b+'"\x3e'}function G(a,b,c){return c?(c={},c[k.OFFERING_ID_KEY+"."+a]=b,c):'\x3cinput type\x3d"hidden" id\x3d"offeringID.'+a+'" name\x3d"offeringID.'+a+'" value\x3d"'+b+'"\x3e'}function S(b,e){if(m===k.DEVICE_TYPE_MOBILE_APP){var f;f=M(b);for(var w={},g=T.baseAsinState.asin,q=d.getBaseItemQuantity(),q=q?q:Q.addToCartData[0]&&
Q.addToCartData[0].initialFormData&&Q.addToCartData[0].initialFormData.inputs?Q.addToCartData[0].initialFormData.inputs.quantity:"",z=T.baseAsinState.offerListingId,t=0;t<f.length;t++){var x=f[t],U=t+2,u=x.asin,J=x.quantity,x=x.offerListingId;u!==l&&J!==l&&x!==l&&(g+=k.PIPE_SEPARATOR+u,q+=k.PIPE_SEPARATOR+J,z+=k.PIPE_SEPARATOR+x);if(K)for(u=f[t].customData||[],J=0;J<u.length;J++)x=B(U,J+1,u[J]),w=h.extend(w,x);U=a(f[t],p,!1);for(u=0;u<U.length;u++)w=h.extend(w,U[u])}w[k.FORM_DATA_ASIN_KEY]=g;w[k.QUANTITY_KEY]=
q;w[k.FORM_DATA_OID_KEY]=z;f=w;y(v(),Q.addToCartData,f);f={};w=d.getBaseItemQuantity();f[k.QUANTITY_KEY]=w?w:Q.buyNowData[0]&&Q.buyNowData[0].initialFormData&&Q.buyNowData[0].initialFormData.inputs?Q.buyNowData[0].initialFormData.inputs.quantity:"";for(w=0;w<b.length;w++){q=b[w];g=w+2;z=w+1;f[k.ASIN_KEY+"."+z]=q.asin;t=F(z,q.quantity,!0);f=h.extend(f,t);q=G(z,q.offerListingId,!0);f=h.extend(f,q);if(K)if(b[w][k.FEATURE_NAME_KEY]===k.KEY_BUYBACK){q=b[w].buynowData||[];z={};for(t=0;t<q.length;t++)U=
q[t].name,u=q[t].value,q[t].name===O.IS_BUYBACK_KEY?z[k.CUSTOM_NAME_STRING+"."+g+".1"]=u:q[t].name===O.IS_BUYBACK_FEE?z[k.CUSTOM_VALUE_STRING+"."+g+".1"]=u:z[U]=u;f=h.extend(f,z)}else for(q=b[w].customData||[],t=0;t<q.length;t++)z=B(g,t+1,q[t]),f=h.extend(f,z);g=a(b[w],p,!0);for(q=0;q<g.length;q++)f=h.extend(f,g[q])}!d.isEmpty(f)&&e&&(f[k.IS_BUYBACK_INPUT_FLAG]=k.IS_BUYBACK_INPUT_FLAG_VALUE);y(h(C.BUYNOW_BUTTON_ID),Q.buyNowData,f);E(b,e)}else if(m===k.DEVICE_TYPE_MOBILE_WEB)E(b,e);else{w=M(b);b=h("\x3c"+
R.FIELDSET+"\x3e",{"class":C.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});h(C.ITEM_ASSOCIATION_INPUTS_CLASS).remove();f=[];g=c().find('input[name^\x3d"offeringID"]').length+1;q=g+1;for(z=0;z<w.length;z++){t=w[z];if(K)for(U=w[z].customData||[],u=0;u<U.length;u++)J=r(q,u+1,U[u]),h.merge(f,J);t.asin!==l&&(f=n(f,g,t),g++,q++);t=a(w[z],A,!1);h.merge(f,t)}if(f.length)for(e&&(e=N(),f.push(e)),e=0;e<f.length;e++)h(b).append(f[e]);b.length&&(e=c().find(C.ITEM_ASSOCIATION_INPUTS_CLASS),e.length?h(e).replaceWith(b):
c().append(b))}}function M(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d[k.FEATURE_NAME_KEY]!==k.KEY_BUYBACK&&b.push(d)}return b}var h=e.$,P={name:"itemAssociation"},m="",L,H=!1,K,T={ccFeaturesState:{},baseAsinState:{}},Q={addToCartData:[],buyNowData:[]},k=f.itemAssociation,R=f.htmlTags,C=f.selectors,O=f.ccFeatures,z;P.addItemAssociationBundleData=function(a,b,c,d){L=c;K=b;H=d;var e=!1,f=[];T.ccFeaturesState=a.ccFeaturesState;T.baseAsinState=a.twisterState;h.each(T.ccFeaturesState,function(a,b){h.each(b,
function(b,c){a===k.KEY_BUYBACK&&c.isBuyBack&&(e=!0);b={};var d=[];b[k.ASIN_KEY]=c.asin;b[k.QUANTITY_KEY]=c.quantity;b[k.OFFER_LISTING_ID_KEY]=c.offerListingId;if(c.enableIA){var h={};h[k.ITEM_ASSOCIATION_GROUP_KEY]=k.ITEM_ASSOCIATION_GROUP_VAL;h[k.ENCODED_ITEM_ASSOC_VAL]=c.IAData;d.push(h);b[k.CUSTOM_DATA_KEY]=d}b[k.FEATURE_NAME_KEY]=a;c.formData!==l&&0<c.formData.length&&(b.formData=c.formData);a===k.KEY_BUYBACK&&(b[O.BUY_NOW_DATA]=c.buynowData);f.push(b)})});S(f,e)};P.init=function(){m=d.getDeviceType();
m===k.DEVICE_TYPE_MOBILE_APP&&(Q.addToCartData=x(v()),Q.buyNowData=x(h(C.BUYNOW_BUTTON_ID)));m===f.DEVICE_TYPE_WEB&&z===l&&(z=c().find('input[name\x3d"itemCount"]'),0===z.length||parseInt(z[0].value))};return P});"use strict";g.when("A").register("utils",function(e){var d=e.$,f={isEmpty:function(c){for(var b in c)if(c.hasOwnProperty(b))return!1;return!0},capitalizeFirstLetter:function(c){return c.charAt(0).toUpperCase()+c.slice(1)},convertHTMLDataAttributesToKeys:function(c){c=c.split("-");for(var b=
c[0],d=1;d<c.length;d++)b+=f.capitalizeFirstLetter(c[d]);return b},getBaseItemQuantity:function(c){var b;"web"===this.getDeviceType()?d("#quantity").length&&(b=d("#quantity").val()):d("#mobileQuantityDropDown").length&&(b=d(".a-accordion-active select.mobileQuantityDropDown").length?d(".a-accordion-active select.mobileQuantityDropDown").val():d("#mobileQuantityDropDown").val());return b},getDeviceType:function(){var c=d("#twister-plus-device-type").val();return"web"===c?"web":"mobile"===c?"mWeb":
"mApp"},isMbbCheckboxChecked:function(){var c=!1,b=d("#mbb-checkbox-input");b!==l&&(c=b.prop("checked"));return c},isFeatureSelectionPresent:function(c){var b=!1,d;for(d in c)if(0<c[d].length){b=!0;break}return b}};return f});"use strict";g.when("A").register("turbo-checkout-handler",function(e){var d=e.$,f;return{updateInputCheckbox:function(c){var b;c=c.ccFeaturesState;var e=!1;for(b in c)if(0<c[b].length){e=!0;break}b=e;f=d("#twister-plus-checkbox");c=f.prop("checked");b&&!c?f.prop("checked","true").trigger("change"):
!b&&c&&f.click()}}});g.when("twister-plus-constants").register("twister-plus-logger-service",function(e){function d(c,b){if(c!==l&&""!==c)c=e.metrics.PREFIX+c,ue&&ue.count&&(b===l&&(b=(ue.count(c)||0)+1),ue.count(c,b));else throw Error("counterKey must be non empty string");}function f(c){if(c!==l&&""!==c)this._timerName=c,this._startTime=0;else throw Error("timerName must be non empty string");}f.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&d(this._timerName,
Date.now()-this._startTime)}};return{Timer:f,logCounter:d}});"use strict";g.when("A","dp-time-to-interactive","twister-plus-logger-service","twister-plus-constants","ready","twister-plus-init").register("twister-plus-tti-logger",function(e,d,f,c){function b(){var b=c.metrics,e=d.getTimeToInteractivity({twisterPlus:{name:"twisterPlus"}});if(e&&e.interactiveTime){var a=H.performance;"object"===typeof a&&"object"===typeof a.timing&&f.logCounter(b.TWISTER_PLUS_TTI,e.interactiveTime-a.timing.navigationStart)}}
b();return{logTTI:b}});"use strict";g.when("A","twister-plus-constants").register("twister-plus-pinning",function(e,d){var f=e.$,c=d.selectors;return{init:function(){var b=f(c.PPD_RIGHT_COL_ID);b&&b.addClass("twister-plus-pinning")}}});"use strict";g.when("A","twister-plus-constants").register("side-sheet",function(e,d){function f(){l("#twister-plus-side-sheet-content").show(function(){b({right:"0px"})})}function c(){l("#twister-plus-side-sheet-content").show(function(){b({right:"-600px"})})}function b(a,
b){e.animate(l("#twister-plus-side-sheet-content"),a,g.RESIZE_DURATION,b)}var g=d.sideSheet,l=e.$;e.declarative("side-sheet","click",function(a){l("body").css("overflow","hidden");e.show("#twister-plus-dp-bg");f()});e.declarative("close-side-sheet","click",function(a){c();e.hide("#twister-plus-dp-bg");l("body").css("overflow","scroll")});return{getContentContainer:function(){return l("#tp-side-sheet-main-section")}}});"use strict";g.when("A","twister-plus-constants","cc-manager","twister-plus-framework",
"side-sheet").register("twister-plus-side-sheet",function(e,d,f,c,b){function g(){var a=f.getFeatureCurrentlyExpanded();a&&((a=f.isMultiSelectionFeature(a))||e.trigger("a:declarative:close-side-sheet:click"))}var l=e.$,a=d.sideSheet,n,N,E,v=!1;e.on("a:declarative:side-sheet:click",function(c){n.html(N.html());var d=l(a.SYMBOL_HASH+c.data.contentId).clone();d.prop("id",c.data.contentId+"-sideSheet");E=b.getContentContainer();E.append(d);d.css(a.DISPLAY,"block");E.removeClass("aok-hidden");l("#twister-plus-side-sheet-content").removeClass("aok-hidden")});
return{init:function(){n=l("#tp-side-sheet");N=n.clone();if(!v){var b={};b.featureName=a.FEATURE_NAME;b.featureAttribution=a.FEATURE_ATTRIBUTION;c.registerFeature(b,a.EVENT_NAME,g);v=!0}}}});g.when("A","twister-plus-feature-state","twister-plus-constants","cc-manager","a-popover","twister-plus-framework").register("twister-plus-price-tool-tip",function(e,d,f,c,b,g){function A(){M=!0;m.html(H.html());P=m.find("#tp-tool-tip-price-section");F=d.getTwisterPlusFeaturesState()}function a(a,b,c){var d=b[0];
(b=b[1])&&"00"!==b?a.find(".a-price-fraction").text(String(b)):c?(a.find(".a-price-fraction").addClass("aok-hidden"),a.find(".a-price-decimal").addClass("aok-hidden")):(b="00",a.find(".a-price-fraction").text(String(b)));a.find(".a-price-whole").contents().filter(function(){return 3===this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(d).toLocaleString(l))}function n(a,b){a.find("#display-string").text(b)}function N(b,c,d){b.find("#tp-item-quantity").text(c);b=b.find(".tp-tool-tip-quantity-block");
b.removeClass("aok-hidden");a(b,d.toFixed(2).split("."),!0)}function E(a){a+=L.data(1<C?h.ITEM_COUNT_PLURAL_TEMPLATE:h.ITEM_COUNT_SINGULAR_TEMPLATE);return a=a.replace(h.ITEM_COUNT_PLACEHOLDER,C)}function v(a){var b=y.clone();a!==l&&b.attr("id",a);b.find("#tp-tool-tip-price").removeClass("twister-plus-price-template");return b}function B(){var a=m.find(".twister-plus-subtotal-price-template").clone().removeClass("twister-plus-subtotal-price-template");a.find("#tp-tool-tip-subtotal-price-value").removeAttr("id");
return a}function p(a){return K.hasOwnProperty(a)&&0<K[a].length}var x=e.$,y=x("#tp-tool-tip-price-block"),F,G,S,M=!1,h=f.toolTip,P=x("#tp-tool-tip-price-section"),m=x("#twister-plus-tool-tip"),L=m.find("#tp-tool-tip-item-strings"),H=m.clone(),K,T,Q=[],k=0,R,C,O=!1;e.on("a:popover:beforeShow:twisterPlusPopOver",function(){var c=x(".twister-plus-tool-tip-padding").parents(".a-popover"),d=x("#twister-plus-popover-inner").parents(".a-popover");c.addClass("twister-plus-popover-margin");d.addClass("twister-plus-popover-margin");
if(M){d=0;K=F.ccFeaturesState;var e=p("paymentOptions"),c=F.twisterState.quantity;C=parseInt(c);T=F.priceData.totalPrice.toFixed(2).split(".");for(var f in G){var g=G[f];if("paymentOptions"!==g&&p(g)){var r=K[g][0],q=!1;S[g].hasOwnProperty("isMultiSelection")&&S[g].isMultiSelection&&(q=!0);var y=v("tp-tool-tip-price-block-"+g),t=r.orderSummaryDisplayString,A=K[g].length,H=0,u=0;if("couponsCard"===g){for(var J=0;J<A;J++)var O=K[g][J].quantity!==l?K[g][J].quantity:1,u=u+parseInt(O),H=H+K[g][J].savings*
O;y.find("#price-sign-string").text("-")}else for(J=0;J<A;J++)O=K[g][J].quantity!==l?K[g][J].quantity:1,u+=parseInt(O),H+=K[g][J].price*O;e&&(k+=H,A=d?t.toLowerCase():t,Q.push(A),d++);q?t=1<u?t+L.data(h.ITEM_COUNT_PLURAL_TEMPLATE):t+L.data(h.ITEM_COUNT_SINGULAR_TEMPLATE):r.hasOwnProperty("shortDisplayTitle")&&r.shortDisplayTitle!==l&&(t=t+" ("+r.shortDisplayTitle+")",1<u&&N(y,u,K[g][0].price));C+=u;t=t.replace(h.ITEM_COUNT_PLACEHOLDER,u);a(y.find("#tp-tool-tip-price"),H.toFixed(2).split("."),!1);
n(y,t);P.append(y)}}e?(d=K.paymentOptions[0],f=m.find("#tp-tool-tip-footnote-section"),g=v("tp-tool-tip-price-block-interest"),e=d.interestAmount.toFixed(2).split("."),a(g.find("#tp-tool-tip-price"),e,!1),n(g,d.interestDisplayString),P.append(g),d.isOrderLevel||0===Q.length?(m.find("#twister-plus-order-level-monthly-payments-section").removeClass("aok-hidden"),g=m.find("#tp-tool-tip-order-level-monthly-payments-price-block"),n(g,d.orderSummaryDisplayString),e=B(),g.find("#tp-order-level-monthly-payment-subtotal-price").append(e),
e=d.price.toFixed(2).split("."),a(g,e,!1),d=d.toolTipFootnoteDisplayString):(m.find("#twister-plus-item-level-monthly-payments-section").removeClass("aok-hidden"),g=v("tp-tool-tip-price-block-monthly-payment"),e=d.price.toFixed(2).split("."),a(g.find("#tp-tool-tip-price"),e,!1),n(g,d.orderSummaryDisplayString),g.addClass("a-spacing-top-base"),r=m.find("#tp-monthly-payments-breakdown-section"),r.append(g),g=v("tp-tool-tip-price-block-all-selections"),e=k.toFixed(2).split("."),a(g.find("#tp-tool-tip-price"),
e),n(g,Q.join(", ")),r.append(g),g=B(),m.find("#tp-item-level-monthly-payment-subtotal-price").append(g),e=(d.price+k).toFixed(2).split("."),a(g,e,!1),d=m.find("#tp-tool-tip-footnote-string").data(h.MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE)),e=m.find("#tp-tool-tip-monthly-payment-subtotal-price-block"),g=e.find("#display-string").text(),g=E(g),n(e,g),g=m.find(".twister-plus-price-template").clone().removeClass("twister-plus-price-template").addClass("a-text-bold"),e.find("#tp-monthly-payment-subtotal-price").append(g),
a(e,T,!1),m.find("#tp-tool-tip-subtotal-price-block").addClass("aok-hidden"),e.removeClass("aok-hidden"),g=m.find("#tp-footnote-text").clone().attr("id","tp-monthly-payment-footnote-text"),g.text(d),f.append(g)):(a(m.find("#tp-tool-tip-subtotal-price-value"),T,!1),f=m.find("#tp-tool-tip-subtotal-price-block"),d=f.find("#display-string").text(),d=E(d),n(f,d));1<c&&(f=v(),d=F.twisterState.price,N(f,c,d),c*=d,a(f.find("#tp-tool-tip-price"),c.toFixed(2).split("."),!1),P.find("#tp-tool-tip-price-block").replaceWith(f));
R=b.get(h.TOOL_TIP_NAME).getContent();R.html(m.html());R.addClass("twister-plus-tool-tip-padding")}M=!1});return{init:function(){y=x("#tp-tool-tip-price-block");P=x("#tp-tool-tip-price-section");m=x("#twister-plus-tool-tip");H=m.clone();L=m.find("#tp-tool-tip-item-strings");M=!1;F=d.getTwisterPlusFeaturesState();G=c.getRenderedFeaturesList();if(!O){var a={};a.featureName=h.FEATURE_NAME;a.featureAttribution=h.FEATURE_ATTRIBUTION;g.registerFeature(a,h.EVENT_NAME,A);S=c.getFeatureRegistrationDetails();
O=!0}}}});"use strict";g.when("A","twister-plus-constants","twister-plus-logger-service","twister-plus-preconditions","buy-box-price-update","cc-manager","itemAssociation","twister-plus-framework","twister-plus-price-tool-tip","twister-plus-side-sheet","twister-plus-pinning").register("twister-plus-init",function(e,d,f,c,b,g,l,a,n,N,E){function v(){l.init();n.init();N.init();b.init();g.init()}var B=d.metrics;e.on("PageRefresh:ATF",function(){c.isTwisterPlusEligible()&&(a.refreshTwisterPlusData(),
v(),c.isCcCardsRendered()&&f.logCounter(B.TWISTER_PLUS_TWISTER_REFRESH_GV))});c.isTwisterPlusEligible()&&(a.initializeTwisterPlus(),v(),"function"===typeof H.markFeatureInteractive&&H.markFeatureInteractive(B.FEATURE_NAME,{}))})});
/* ******** */
