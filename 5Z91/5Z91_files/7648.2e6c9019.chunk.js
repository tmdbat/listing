(self.webpackChunklite=self.webpackChunklite||[]).push([[7648],{14856:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});var r=t(67294);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var i=r.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25,strokeWidth:.5}),l=r.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)",strokeWidth:.5}),u=r.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5",strokeLinecap:"round"}),o=r.createElement("path",{d:"M11.5 14.5L19 20l4-3",strokeLinecap:"round"});const a=function(e){return r.createElement("svg",s({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),i,l,u,o)}},99033:(e,n,t)=>{"use strict";t.d(n,{DI:()=>_,nj:()=>P,oT:()=>x});var r=t(59713),s=t.n(r),i=t(63038),l=t.n(i),u=t(28655),o=t.n(u),a=t(82492),c=t.n(a),d=t(71439),b=t(46829),w=t(67294),v=t(53976),f=t(81474),m=t(32589),g=t(95760),p=t(51512),h=t(85277);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){s()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(){var e=o()(["\n  mutation fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(\n    $userId: ID!\n    $shouldSubscribeCurrentUser: Boolean\n  ) {\n    fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(\n      userId: $userId\n      shouldSubscribeCurrentUser: $shouldSubscribeCurrentUser\n    ) {\n      __typename\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function y(){var e=o()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return y=function(){return e},e}function O(){var e=o()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!, $shouldRecordConsent: Boolean) {\n    subscribeNewsletterV3(\n      newsletterV3Id: $newsletterV3Id\n      shouldRecordConsent: $shouldRecordConsent\n    )\n  }\n"]);return O=function(){return e},e}function N(){var e=o()(["\n  fragment useNewsletterV3Subscription_newsletterV3_viewerEdge on NewsletterV3 {\n    viewerEdge {\n      id\n      isSubscribed\n    }\n  }\n"]);return N=function(){return e},e}function C(){var e=o()(["\n  fragment useNewsletterV3Subscription_user on User {\n    id\n    username\n    newsletterV3 {\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function I(){var e=o()(["\n  fragment useNewsletterV3Subscription_newsletterV3 on NewsletterV3 {\n    id\n    type\n    slug\n    name\n    collection {\n      slug\n    }\n    user {\n      id\n      name\n      username\n      newsletterV3 {\n        id\n      }\n    }\n  }\n"]);return I=function(){return e},e}var _=(0,d.Ps)(I()),P=(0,d.Ps)(C(),_),T=((0,d.Ps)(N()),(0,d.Ps)(O())),k=(0,d.Ps)(y()),R=(0,d.Ps)(E(),_),x=function(e){var n=e.newsletterV3,t=e.creator,r=e.newsletterName,s=n||{},i=s.id,u=s.type,o=s.slug,a=s.collection,d=(null==n?void 0:n.user)||t,S=null!=r?r:null==n?void 0:n.name,E=w.useState(!1),y=l()(E,2),O=y[0],N=y[1],C=(0,f.T)({newsletterSlug:o,collectionSlug:null==a?void 0:a.slug,username:null==d?void 0:d.username}),I=C.viewerEdge,_=C.loading,x=(0,v.VB)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),L=w.useState(!1),U=l()(L,2),j=U[0],D=U[1];w.useEffect((function(){D(!(null==I||!I.isSubscribed))}),[null==I?void 0:I.isSubscribed]);var $=(0,g.Av)(),B=(0,p.Qi)(),M=(0,h.w)();O&&$.event("newsletterV3.subscribe.error",{newsletterV3Id:i});var A=function(e,n,t){if(t){var r={id:"User:".concat(null==d?void 0:d.id),fragment:P,fragmentName:"useNewsletterV3Subscription_user"},s=e.readFragment(r);e.writeFragment(V(V({},r),{},{data:V(V({},s),{},{newsletterV3:t})}))}if(I){var i=e.readQuery({query:f.p,variables:{newsletterSlug:o,collectionSlug:null==a?void 0:a.slug,username:null==d?void 0:d.username}}),l=c()({},i,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:f.p,variables:{newsletterSlug:o||"",collectionSlug:null==a?void 0:a.slug,username:null==d?void 0:d.username},data:l})}if(n&&x){var u=e.readQuery({query:m.J4,variables:{userId:null==d?void 0:d.id}}),b=c()({},u,{user:{viewerEdge:{isFollowing:!0}}});e.writeQuery({query:m.J4,variables:{userId:(null==d?void 0:d.id)||""},data:b})}},F=(0,b.useMutation)(T,{onCompleted:function(e){var n=e.subscribeNewsletterV3;N(!n),n&&($.event("newsletterV3.subscribeClicked",{newsletterV3Id:i,source:B}),D(!0))},update:function(e){A(e,!0)}}),W=l()(F,1)[0],z=(0,b.useMutation)(k,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;N(!n),n&&(D(!1),M({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:S||null,newsletterType:u||null,unsubscribeFn:function(){return D(!1)}}}))},update:function(e){A(e,!1)}}),Q=l()(z,1)[0],q=(0,b.useMutation)(R,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;N(!n),n&&($.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:B}),D(!0))},update:function(e,n){var t,r=V({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);A(e,!0,r)}}),G=l()(q,1)[0];return{isSubscribed:j,hasError:O,setSubscribe:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(!1),e&&!n&&null!=t&&t.id?G({variables:{userId:null==t?void 0:t.id,shouldSubscribeCurrentUser:!0}}):e&&null!=n&&n.id?W({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:r}}):null!=n&&n.id?Q({variables:{newsletterV3Id:null==n?void 0:n.id}}):N(!0)},loading:_}}},81474:(e,n,t)=>{"use strict";t.d(n,{T:()=>o,p:()=>a});var r=t(28655),s=t.n(r),i=t(46829),l=t(71439);function u(){var e=s()(["\n  query NewsletterV3ViewerEdge($newsletterSlug: ID!, $collectionSlug: ID, $username: ID) {\n    newsletterV3(\n      newsletterSlug: $newsletterSlug\n      collectionSlug: $collectionSlug\n      username: $username\n    ) {\n      ... on NewsletterV3 {\n        id\n        viewerEdge {\n          id\n          isSubscribed\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var o=function(e){var n,t=e.newsletterSlug,r=void 0===t?"":t,s=e.collectionSlug,l=e.username,u=(0,i.useQuery)(a,{variables:{newsletterSlug:r,collectionSlug:s,username:l},ssr:!1,skip:!r&&!l}),o=u.loading,c=u.error,d=u.data;return o?{loading:o}:c?{error:c}:{viewerEdge:null==d||null===(n=d.newsletterV3)||void 0===n?void 0:n.viewerEdge}},a=(0,l.Ps)(u())},77648:(e,n,t)=>{"use strict";t.d(n,{X:()=>U,w:()=>j});var r=t(28655),s=t.n(r),i=t(63038),l=t.n(i),u=t(71439),o=t(67294),a=t(99033),c=t(53976),d=t(76532),b=t(62181),w=t(68421),v=t(55099),f=t(52862),m=t(42933),g=t(92528),p=t(98024),h=t(95760),S=t(51512),V=t(6688),E=t(77180),y=t(14391),O=t(85277),N=t(8403);function C(){return(C=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var I=o.createElement("path",{d:"M24 13l2 2 3-3.5",strokeLinecap:"round",strokeLinejoin:"round"}),_=o.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5",strokeLinecap:"round"}),P=o.createElement("path",{d:"M11.5 14.5L19 20l4-3",strokeLinecap:"round"});const T=function(e){return o.createElement("svg",C({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),I,_,P)};var k=t(14856),R=t(51064),x=t(27952);function L(){var e=s()(["\n  fragment UserSubscribeButton_user on User {\n    id\n    name\n    viewerEdge {\n      id\n      isFollowing\n      isUser\n    }\n    viewerIsUser\n    newsletterV3 {\n      id\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n    ...useNewsletterV3Subscription_user\n  }\n  ","\n  ","\n"]);return L=function(){return e},e}var U=function(e){var n=e.user,t=e.showFirstUseToolTip,r=void 0!==t&&t,s=(0,V.I)(),i=(0,E.F)(),u=(0,d.H)().value,C=(0,R.O)(!1),I=l()(C,3),_=I[0],P=I[1],L=I[2],U=n.newsletterV3,j=(0,O.w)(),D=(0,h.Av)(),$=(0,S.Lk)(),B=(0,N.PM)(),M=(0,a.oT)({newsletterV3:U,creator:n,newsletterName:n.name||void 0}),A=M.isSubscribed,F=M.hasError,W=M.loading,z=M.setSubscribe,Q=y.T3.WRITER_SUBSCRIPTIONS_TOOLTIP,q=!(null==u||!u.dismissableFlags.includes(Q)),G=!!(0,c.VB)({name:"enable_writer_subscription_to_all_users",placeholder:!1})&&!q&&r&&!!u&&!A;if(o.useEffect((function(){if(B){var e=(0,S.P7)(B||"").susiEntry;["newsletter_v3_promo","writer_subscription_landing"].includes(void 0===e?"":e)&&A&&j({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:y.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return z(!1)}}})}}),[B,A]),F||n.viewerEdge.isUser)return null;var X=A?"OBVIOUS":"STRONG",Z=function(e,n){return function(t){return{stroke:n?t.baseColor.background.normal:e,height:"36px",width:"36px"}}},H=o.createElement(v.z,{loading:W,size:"COMPACT",buttonStyle:X,onClick:function(){var e;u?A?z(!1):u&&u.allowEmailAddressSharingEditorWriter?z(!0,!1):P():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?D.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:$}):D.event("user.LOSubscribeClicked",{targetUserId:n.id,source:$})},padding:"0"},A?o.createElement(T,{className:s(Z(i.accentColor.fill.normal,W))}):o.createElement(k.Z,{className:s(Z(i.accentColor.background,W))})),J=function(e){var t=e.children;return G?o.createElement(w.o,{isVisible:!W,flag:Q,targetDistance:10,text:"You can now subscribe to get stories delivered directly to your inbox."},t):o.createElement(f.$,{isVisible:!W&&!A,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:function(){return o.createElement(m.x,{padding:"10px 12px",maxWidth:"166px"},o.createElement(p.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},role:"tooltip",targetDistance:10},t)};return o.createElement(J,null,o.createElement(m.x,null,u&&o.createElement(g.Q,{onConfirm:function(){z(!0,!0)},isVisible:_,hide:L,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),u?H:o.createElement(b.R9,{operation:"register",newsletterV3:U,user:n,actionUrl:U?(0,x.Zul)(U.id):(0,x.lcz)(n.id),susiEntry:"subscribe_user"},H)))},j=(0,u.Ps)(L(),a.DI,a.nj)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7648.2e6c9019.chunk.js.map